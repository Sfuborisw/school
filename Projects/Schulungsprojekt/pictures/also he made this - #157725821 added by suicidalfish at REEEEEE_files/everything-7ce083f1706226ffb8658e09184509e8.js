(function(e,t){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(e,t){"use strict";var n=[];var i=e.document;var r=Object.getPrototypeOf;var o=n.slice;var s=n.concat;var a=n.push;var u=n.indexOf;var f={};var l=f.toString;var c=f.hasOwnProperty;var d=c.toString;var p=d.call(Object);var h={};function g(e,t){t=t||i;var n=t.createElement("script");n.text=e;t.head.appendChild(n).parentNode.removeChild(n)}var m="3.0.0-rc1",y=function(e,t){return new y.fn.init(e,t)},v=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^-ms-/,b=/-([a-z])/g,w=function(e,t){return t.toUpperCase()};y.fn=y.prototype={jquery:m,constructor:y,length:0,toArray:function(){return o.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:o.call(this)},pushStack:function(e){var t=y.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return y.each(this,e)},map:function(e){return this.pushStack(y.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice};y.extend=y.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,f=false;if(typeof s==="boolean"){f=s;s=arguments[a]||{};a++}if(typeof s!=="object"&&!y.isFunction(s)){s={}}if(a===u){s=this;a--}for(;a<u;a++){if((e=arguments[a])!=null){for(t in e){n=s[t];i=e[t];if(s===i){continue}if(f&&i&&(y.isPlainObject(i)||(r=y.isArray(i)))){if(r){r=false;o=n&&y.isArray(n)?n:[]}else{o=n&&y.isPlainObject(n)?n:{}}s[t]=y.extend(f,o,i)}else if(i!==undefined){s[t]=i}}}}return s};y.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return y.type(e)==="function"},isArray:Array.isArray,isWindow:function(e){return e!=null&&e===e.window},isNumeric:function(e){var t=y.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;if(!e||l.call(e)!=="[object Object]"){return false}t=r(e);if(!t){return true}n=c.call(t,"constructor")&&t.constructor;return typeof n==="function"&&d.call(n)===p},isEmptyObject:function(e){var t;for(t in e){return false}return true},type:function(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?f[l.call(e)]||"object":typeof e},globalEval:function(e){g(e)},camelCase:function(e){return e.replace(x,"ms-").replace(b,w)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(T(e)){n=e.length;for(;i<n;i++){if(t.call(e[i],i,e[i])===false){break}}}else{for(i in e){if(t.call(e[i],i,e[i])===false){break}}}return e},trim:function(e){return e==null?"":(e+"").replace(v,"")},makeArray:function(e,t){var n=t||[];if(e!=null){if(T(Object(e))){y.merge(n,typeof e==="string"?[e]:e)}else{a.call(n,e)}}return n},inArray:function(e,t,n){return t==null?-1:u.call(t,e,n)},merge:function(e,t){var n=+t.length,i=0,r=e.length;for(;i<n;i++){e[r++]=t[i]}e.length=r;return e},grep:function(e,t,n){var i,r=[],o=0,s=e.length,a=!n;for(;o<s;o++){i=!t(e[o],o);if(i!==a){r.push(e[o])}}return r},map:function(e,t,n){var i,r,o=0,a=[];if(T(e)){i=e.length;for(;o<i;o++){r=t(e[o],o,n);if(r!=null){a.push(r)}}}else{for(o in e){r=t(e[o],o,n);if(r!=null){a.push(r)}}}return s.apply([],a)},guid:1,proxy:function(e,t){var n,i,r;if(typeof t==="string"){n=e[t];t=e;e=n}if(!y.isFunction(e)){return undefined}i=o.call(arguments,2);r=function(){return e.apply(t||this,i.concat(o.call(arguments)))};r.guid=e.guid=e.guid||y.guid++;return r},now:Date.now,support:h});if(typeof Symbol==="function"){y.fn[Symbol.iterator]=n[Symbol.iterator]}y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()});function T(e){var t=!!e&&"length"in e&&e.length,n=y.type(e);if(n==="function"||y.isWindow(e)){return false}return n==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var C=function(e){var t,n,i,r,o,s,a,u,f,l,c,d,p,h,g,m,y,v,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,k=se(),E=se(),S=se(),N=function(e,t){if(e===t){c=true}return 0},D={}.hasOwnProperty,j=[],A=j.pop,q=j.push,L=j.push,H=j.slice,F=function(e,t){var n=0,i=e.length;for(;n<i;n++){if(e[n]===t){return n}}return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",M="\\["+P+"*("+R+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+P+"*\\]",I=":("+R+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|"+".*"+")\\)|)",W=new RegExp(P+"+","g"),$=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),B=new RegExp("^"+P+"*,"+P+"*"),_=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),z=new RegExp("="+P+"*([^\\]'\"]*?)"+P+"*\\]","g"),X=new RegExp(I),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+I),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),ee=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,ne=function(e,t){if(t){if(e==="\x00"){return"ï¿½"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},ie=function(){d()},re=ve(function(e){return e.disabled===true},{dir:"parentNode",next:"legend"});try{L.apply(j=H.call(w.childNodes),w.childNodes);j[w.childNodes.length].nodeType}catch(e){L={apply:j.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,i=0;while(e[n++]=t[i++]){}e.length=n-1}}}function oe(e,t,i,r){var o,a,f,l,c,h,y,v=t&&t.ownerDocument,T=t?t.nodeType:9;i=i||[];if(typeof e!=="string"||!e||T!==1&&T!==9&&T!==11){return i}if(!r){if((t?t.ownerDocument||t:w)!==p){d(t)}t=t||p;if(g){if(T!==11&&(c=J.exec(e))){if(o=c[1]){if(T===9){if(f=t.getElementById(o)){if(f.id===o){i.push(f);return i}}else{return i}}else{if(v&&(f=v.getElementById(o))&&x(t,f)&&f.id===o){i.push(f);return i}}}else if(c[2]){L.apply(i,t.getElementsByTagName(e));return i}else if((o=c[3])&&n.getElementsByClassName&&t.getElementsByClassName){L.apply(i,t.getElementsByClassName(o));return i}}if(n.qsa&&!S[e+" "]&&(!m||!m.test(e))){if(T!==1){v=t;y=e}else if(t.nodeName.toLowerCase()!=="object"){if(l=t.getAttribute("id")){l=l.replace(te,ne)}else{t.setAttribute("id",l=b)}h=s(e);a=h.length;while(a--){h[a]="#"+l+" "+ye(h[a])}y=h.join(",");v=K.test(e)&&ge(t.parentNode)||t}if(y){try{L.apply(i,v.querySelectorAll(y));return i}catch(e){}finally{if(l===b){t.removeAttribute("id")}}}}}}return u(e.replace($,"$1"),t,i,r)}function se(){var e=[];function t(n,r){if(e.push(n+" ")>i.cacheLength){delete t[e.shift()]}return t[n+" "]=r}return t}function ae(e){e[b]=true;return e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--){i.attrHandle[n[r]]=t}}function le(e,t){var n=t&&e,i=n&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(i){return i}if(n){while(n=n.nextSibling){if(n===t){return-1}}}return e?1:-1}function ce(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function pe(e){return function(t){return"label"in t&&t.disabled===e||"form"in t&&t.disabled===e||"form"in t&&t.disabled===false&&(t.isDisabled===e||t.isDisabled!==!e&&("label"in t||!re(t))!==e)}}function he(e){return ae(function(t){t=+t;return ae(function(n,i){var r,o=e([],n.length,t),s=o.length;while(s--){if(n[r=o[s]]){n[r]=!(i[r]=n[r])}}})})}function ge(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}n=oe.support={};o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};d=oe.setDocument=function(e){var t,r,s=e?e.ownerDocument||e:w;if(s===p||s.nodeType!==9||!s.documentElement){return p}p=s;h=p.documentElement;g=!o(p);if(w!==p&&(r=p.defaultView)&&r.top!==r){if(r.addEventListener){r.addEventListener("unload",ie,false)}else if(r.attachEvent){r.attachEvent("onunload",ie)}}n.attributes=ue(function(e){e.className="i";return!e.getAttribute("className")});n.getElementsByTagName=ue(function(e){e.appendChild(p.createComment(""));return!e.getElementsByTagName("*").length});n.getElementsByClassName=Q.test(p.getElementsByClassName);n.getById=ue(function(e){h.appendChild(e).id=b;return!p.getElementsByName||!p.getElementsByName(b).length});if(n.getById){i.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&g){var n=t.getElementById(e);return n?[n]:[]}};i.filter["ID"]=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}}}else{delete i.find["ID"];i.filter["ID"]=function(e){var t=e.replace(Z,ee);return function(e){var n=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return n&&n.value===t}}}i.find["TAG"]=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(n.qsa){return t.querySelectorAll(e)}}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if(e==="*"){while(n=o[r++]){if(n.nodeType===1){i.push(n)}}return i}return o};i.find["CLASS"]=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&g){return t.getElementsByClassName(e)}};y=[];m=[];if(n.qsa=Q.test(p.querySelectorAll)){ue(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a>"+"<select id='"+b+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){m.push("[*^$]="+P+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){m.push("\\["+P+"*(?:value|"+O+")")}if(!e.querySelectorAll("[id~="+b+"-]").length){m.push("~=")}if(!e.querySelectorAll(":checked").length){m.push(":checked")}if(!e.querySelectorAll("a#"+b+"+*").length){m.push(".#.+[+~]")}});ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){m.push("name"+P+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){m.push(":enabled",":disabled")}h.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){m.push(":enabled",":disabled")}e.querySelectorAll("*,:x");m.push(",.*:")})}if(n.matchesSelector=Q.test(v=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector)){ue(function(e){n.disconnectedMatch=v.call(e,"*");v.call(e,"[s!='']:x");y.push("!=",I)})}m=m.length&&new RegExp(m.join("|"));y=y.length&&new RegExp(y.join("|"));t=Q.test(h.compareDocumentPosition);x=t||Q.test(h.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&i.nodeType===1&&(n.contains?n.contains(i):e.compareDocumentPosition&&e.compareDocumentPosition(i)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};N=t?function(e,t){if(e===t){c=true;return 0}var i=!e.compareDocumentPosition-!t.compareDocumentPosition;if(i){return i}i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(i&1||!n.sortDetached&&t.compareDocumentPosition(e)===i){if(e===p||e.ownerDocument===w&&x(w,e)){return-1}if(t===p||t.ownerDocument===w&&x(w,t)){return 1}return l?F(l,e)-F(l,t):0}return i&4?-1:1}:function(e,t){if(e===t){c=true;return 0}var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!r||!o){return e===p?-1:t===p?1:r?-1:o?1:l?F(l,e)-F(l,t):0}else if(r===o){return le(e,t)}n=e;while(n=n.parentNode){s.unshift(n)}n=t;while(n=n.parentNode){a.unshift(n)}while(s[i]===a[i]){i++}return i?le(s[i],a[i]):s[i]===w?-1:a[i]===w?1:0};return p};oe.matches=function(e,t){return oe(e,null,null,t)};oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p){d(e)}t=t.replace(z,"='$1']");if(n.matchesSelector&&g&&!S[t+" "]&&(!y||!y.test(t))&&(!m||!m.test(t))){try{var i=v.call(e,t);if(i||n.disconnectedMatch||e.document&&e.document.nodeType!==11){return i}}catch(e){}}return oe(t,p,null,[e]).length>0};oe.contains=function(e,t){if((e.ownerDocument||e)!==p){d(e)}return x(e,t)};oe.attr=function(e,t){if((e.ownerDocument||e)!==p){d(e)}var r=i.attrHandle[t.toLowerCase()],o=r&&D.call(i.attrHandle,t.toLowerCase())?r(e,t,!g):undefined;return o!==undefined?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null};oe.escape=function(e){return(e+"").replace(te,ne)};oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};oe.uniqueSort=function(e){var t,i=[],r=0,o=0;c=!n.detectDuplicates;l=!n.sortStable&&e.slice(0);e.sort(N);if(c){while(t=e[o++]){if(t===e[o]){r=i.push(o)}}while(r--){e.splice(i[r],1)}}l=null;return e};r=oe.getText=function(e){var t,n="",i=0,o=e.nodeType;if(!o){while(t=e[i++]){n+=r(t)}}else if(o===1||o===9||o===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){n+=r(e)}}}else if(o===3||o===4){return e.nodeValue}return n};i=oe.selectors={cacheLength:50,createPseudo:ae,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(Z,ee);e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){oe.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){oe.error(e[0])}return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(V["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(n&&X.test(n)&&(t=s(n,true))&&(t=n.indexOf(")",n.length-t)-n.length)){e[0]=e[0].slice(0,t);e[2]=n.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&k(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=oe.attr(i,e);if(r==null){return t==="!="}if(!t){return true}r+="";return t==="="?r===n:t==="!="?r!==n:t==="^="?n&&r.indexOf(n)===0:t==="*="?n&&r.indexOf(n)>-1:t==="$="?n&&r.slice(-n.length)===n:t==="~="?(" "+r.replace(W," ")+" ").indexOf(n)>-1:t==="|="?r===n||r.slice(0,n.length+1)===n+"-":false}},CHILD:function(e,t,n,i,r){var o=e.slice(0,3)!=="nth",s=e.slice(-4)!=="last",a=t==="of-type";return i===1&&r===0?function(e){return!!e.parentNode}:function(t,n,u){var f,l,c,d,p,h,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!u&&!a,x=false;if(m){if(o){while(g){d=t;while(d=d[g]){if(a?d.nodeName.toLowerCase()===y:d.nodeType===1){return false}}h=g=e==="only"&&!h&&"nextSibling"}return true}h=[s?m.firstChild:m.lastChild];if(s&&v){d=m;c=d[b]||(d[b]={});l=c[d.uniqueID]||(c[d.uniqueID]={});f=l[e]||[];p=f[0]===T&&f[1];x=p&&f[2];d=p&&m.childNodes[p];while(d=++p&&d&&d[g]||(x=p=0)||h.pop()){if(d.nodeType===1&&++x&&d===t){l[e]=[T,p,x];break}}}else{if(v){d=t;c=d[b]||(d[b]={});l=c[d.uniqueID]||(c[d.uniqueID]={});f=l[e]||[];p=f[0]===T&&f[1];x=p}if(x===false){while(d=++p&&d&&d[g]||(x=p=0)||h.pop()){if((a?d.nodeName.toLowerCase()===y:d.nodeType===1)&&++x){if(v){c=d[b]||(d[b]={});l=c[d.uniqueID]||(c[d.uniqueID]={});l[e]=[T,x]}if(d===t){break}}}}}x-=r;return x===i||x%i===0&&x/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);if(r[b]){return r(t)}if(r.length>1){n=[e,e,"",t];return i.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,n){var i,o=r(e,t),s=o.length;while(s--){i=F(e,o[s]);e[i]=!(n[i]=o[s])}}):function(e){return r(e,0,n)}}return r}},pseudos:{not:ae(function(e){var t=[],n=[],i=a(e.replace($,"$1"));return i[b]?ae(function(e,t,n,r){var o,s=i(e,null,r,[]),a=e.length;while(a--){if(o=s[a]){e[a]=!(t[a]=o)}}}):function(e,r,o){t[0]=e;i(t,null,o,n);t[0]=null;return!n.pop()}}),has:ae(function(e){return function(t){return oe(e,t).length>0}}),contains:ae(function(e){e=e.replace(Z,ee);return function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:ae(function(e){if(!U.test(e||"")){oe.error("unsupported lang: "+e)}e=e.replace(Z,ee).toLowerCase();return function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){n=n.toLowerCase();return n===e||n.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(false),disabled:pe(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!i.pseudos["empty"](e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){var n=0;for(;n<t;n+=2){e.push(n)}return e}),odd:he(function(e,t){var n=1;for(;n<t;n+=2){e.push(n)}return e}),lt:he(function(e,t,n){var i=n<0?n+t:n;for(;--i>=0;){e.push(i)}return e}),gt:he(function(e,t,n){var i=n<0?n+t:n;for(;++i<t;){e.push(i)}return e})}};i.pseudos["nth"]=i.pseudos["eq"];for(t in{radio:true,checkbox:true,file:true,password:true,image:true}){i.pseudos[t]=ce(t)}for(t in{submit:true,reset:true}){i.pseudos[t]=de(t)}function me(){}me.prototype=i.filters=i.pseudos;i.setFilters=new me;s=oe.tokenize=function(e,t){var n,r,o,s,a,u,f,l=E[e+" "];if(l){return t?0:l.slice(0)}a=e;u=[];f=i.preFilter;while(a){if(!n||(r=B.exec(a))){if(r){a=a.slice(r[0].length)||a}u.push(o=[])}n=false;if(r=_.exec(a)){n=r.shift();o.push({value:n,type:r[0].replace($," ")});a=a.slice(n.length)}for(s in i.filter){if((r=V[s].exec(a))&&(!f[s]||(r=f[s](r)))){n=r.shift();o.push({value:n,type:s,matches:r});a=a.slice(n.length)}}if(!n){break}}return t?a.length:a?oe.error(e):E(e,u).slice(0)};function ye(e){var t=0,n=e.length,i="";for(;t<n;t++){i+=e[t].value}return i}function ve(e,t,n){var i=t.dir,r=t.next,o=r||i,s=n&&o==="parentNode",a=C++;return t.first?function(t,n,r){while(t=t[i]){if(t.nodeType===1||s){return e(t,n,r)}}}:function(t,n,u){var f,l,c,d=[T,a];if(u){while(t=t[i]){if(t.nodeType===1||s){if(e(t,n,u)){return true}}}}else{while(t=t[i]){if(t.nodeType===1||s){c=t[b]||(t[b]={});l=c[t.uniqueID]||(c[t.uniqueID]={});if(r&&r===t.nodeName.toLowerCase()){t=t[i]||t}else if((f=l[o])&&f[0]===T&&f[1]===a){return d[2]=f[2]}else{l[o]=d;if(d[2]=e(t,n,u)){return true}}}}}}}function xe(e){return e.length>1?function(t,n,i){var r=e.length;while(r--){if(!e[r](t,n,i)){return false}}return true}:e[0]}function be(e,t,n){var i=0,r=t.length;for(;i<r;i++){oe(e,t[i],n)}return n}function we(e,t,n,i,r){var o,s=[],a=0,u=e.length,f=t!=null;for(;a<u;a++){if(o=e[a]){if(!n||n(o,i,r)){s.push(o);if(f){t.push(a)}}}}return s}function Te(e,t,n,i,r,o){if(i&&!i[b]){i=Te(i)}if(r&&!r[b]){r=Te(r,o)}return ae(function(o,s,a,u){var f,l,c,d=[],p=[],h=s.length,g=o||be(t||"*",a.nodeType?[a]:a,[]),m=e&&(o||!t)?we(g,d,e,a,u):g,y=n?r||(o?e:h||i)?[]:s:m;if(n){n(m,y,a,u)}if(i){f=we(y,p);i(f,[],a,u);l=f.length;while(l--){if(c=f[l]){y[p[l]]=!(m[p[l]]=c)}}}if(o){if(r||e){if(r){f=[];l=y.length;while(l--){if(c=y[l]){f.push(m[l]=c)}}r(null,y=[],f,u)}l=y.length;while(l--){if((c=y[l])&&(f=r?F(o,c):d[l])>-1){o[f]=!(s[f]=c)}}}}else{y=we(y===s?y.splice(h,y.length):y);if(r){r(null,s,y,u)}else{L.apply(s,y)}}})}function Ce(e){var t,n,r,o=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],u=s?1:0,l=ve(function(e){return e===t},a,true),c=ve(function(e){return F(t,e)>-1},a,true),d=[function(e,n,i){var r=!s&&(i||n!==f)||((t=n).nodeType?l(e,n,i):c(e,n,i));t=null;return r}];for(;u<o;u++){if(n=i.relative[e[u].type]){d=[ve(xe(d),n)]}else{n=i.filter[e[u].type].apply(null,e[u].matches);if(n[b]){r=++u;for(;r<o;r++){if(i.relative[e[r].type]){break}}return Te(u>1&&xe(d),u>1&&ye(e.slice(0,u-1).concat({value:e[u-2].type===" "?"*":""})).replace($,"$1"),n,u<r&&Ce(e.slice(u,r)),r<o&&Ce(e=e.slice(r)),r<o&&ye(e))}d.push(n)}}return xe(d)}function ke(e,t){var n=t.length>0,r=e.length>0,o=function(o,s,a,u,l){var c,h,m,y=0,v="0",x=o&&[],b=[],w=f,C=o||r&&i.find["TAG"]("*",l),k=T+=w==null?1:Math.random()||.1,E=C.length;if(l){f=s===p||s||l}for(;v!==E&&(c=C[v])!=null;v++){if(r&&c){h=0;if(!s&&c.ownerDocument!==p){d(c);a=!g}while(m=e[h++]){if(m(c,s||p,a)){u.push(c);break}}if(l){T=k}}if(n){if(c=!m&&c){y--}if(o){x.push(c)}}}y+=v;if(n&&v!==y){h=0;while(m=t[h++]){m(x,b,s,a)}if(o){if(y>0){while(v--){if(!(x[v]||b[v])){b[v]=A.call(u)}}}b=we(b)}L.apply(u,b);if(l&&!o&&b.length>0&&y+t.length>1){oe.uniqueSort(u)}}if(l){T=k;f=w}return x};return n?ae(o):o}a=oe.compile=function(e,t){var n,i=[],r=[],o=S[e+" "];if(!o){if(!t){t=s(e)}n=t.length;while(n--){o=Ce(t[n]);if(o[b]){i.push(o)}else{r.push(o)}}o=S(e,ke(r,i));o.selector=e}return o};u=oe.select=function(e,t,r,o){var u,f,l,c,d,p=typeof e==="function"&&e,h=!o&&s(e=p.selector||e);r=r||[];if(h.length===1){f=h[0]=h[0].slice(0);if(f.length>2&&(l=f[0]).type==="ID"&&n.getById&&t.nodeType===9&&g&&i.relative[f[1].type]){t=(i.find["ID"](l.matches[0].replace(Z,ee),t)||[])[0];if(!t){return r}else if(p){t=t.parentNode}e=e.slice(f.shift().value.length)}u=V["needsContext"].test(e)?0:f.length;while(u--){l=f[u];if(i.relative[c=l.type]){break}if(d=i.find[c]){if(o=d(l.matches[0].replace(Z,ee),K.test(f[0].type)&&ge(t.parentNode)||t)){f.splice(u,1);e=o.length&&ye(f);if(!e){L.apply(r,o);return r}break}}}}(p||a(e,h))(o,t,!g,r,!t||K.test(e)&&ge(t.parentNode)||t);return r};n.sortStable=b.split("").sort(N).join("")===b;n.detectDuplicates=!!c;d();n.sortDetached=ue(function(e){return e.compareDocumentPosition(p.createElement("fieldset"))&1});if(!ue(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){fe("type|href|height|width",function(e,t,n){if(!n){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!n.attributes||!ue(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){fe("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!ue(function(e){return e.getAttribute("disabled")==null})){fe(O,function(e,t,n){var i;if(!n){return e[t]===true?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}})}return oe}(e);y.find=C;y.expr=C.selectors;y.expr[":"]=y.expr.pseudos;y.uniqueSort=y.unique=C.uniqueSort;y.text=C.getText;y.isXMLDoc=C.isXML;y.contains=C.contains;y.escapeSelector=C.escape;var k=function(e,t,n){var i=[],r=n!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(r&&y(e).is(n)){break}i.push(e)}}return i};var E=function(e,t){var n=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){n.push(e)}}return n};var S=y.expr.match.needsContext;var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;var D=/^.[^:#\[\.,]*$/;function j(e,t,n){if(y.isFunction(t)){return y.grep(e,function(e,i){return!!t.call(e,i,e)!==n})}if(t.nodeType){return y.grep(e,function(e){return e===t!==n})}if(typeof t==="string"){if(D.test(t)){return y.filter(t,e,n)}t=y.filter(t,e)}return y.grep(e,function(e){return u.call(t,e)>-1!==n&&e.nodeType===1})}y.filter=function(e,t,n){var i=t[0];if(n){e=":not("+e+")"}return t.length===1&&i.nodeType===1?y.find.matchesSelector(i,e)?[i]:[]:y.find.matches(e,y.grep(t,function(e){return e.nodeType===1}))};y.fn.extend({find:function(e){var t,n,i=this.length,r=this;if(typeof e!=="string"){return this.pushStack(y(e).filter(function(){for(t=0;t<i;t++){if(y.contains(r[t],this)){return true}}}))}n=this.pushStack([]);for(t=0;t<i;t++){y.find(e,r[t],n)}return i>1?y.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],false))},not:function(e){return this.pushStack(j(this,e||[],true))},is:function(e){return!!j(this,typeof e==="string"&&S.test(e)?y(e):e||[],false).length}});var A,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,L=y.fn.init=function(e,t,n){var r,o;if(!e){return this}n=n||A;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){r=[null,e,null]}else{r=q.exec(e)}if(r&&(r[1]||!t)){if(r[1]){t=t instanceof y?t[0]:t;y.merge(this,y.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:i,true));if(N.test(r[1])&&y.isPlainObject(t)){for(r in t){if(y.isFunction(this[r])){this[r](t[r])}else{this.attr(r,t[r])}}}return this}else{o=i.getElementById(r[2]);if(o){this[0]=o;this.length=1}return this}}else if(!t||t.jquery){return(t||n).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(y.isFunction(e)){return n.ready!==undefined?n.ready(e):e(y)}return y.makeArray(e,this)};L.prototype=y.fn;A=y(i);var H=/^(?:parents|prev(?:Until|All))/,F={children:true,contents:true,next:true,prev:true};y.fn.extend({has:function(e){var t=y(e,this),n=t.length;return this.filter(function(){var e=0;for(;e<n;e++){if(y.contains(this,t[e])){return true}}})},closest:function(e,t){var n,i=0,r=this.length,o=[],s=typeof e!=="string"&&y(e);if(!S.test(e)){for(;i<r;i++){for(n=this[i];n&&n!==t;n=n.parentNode){if(n.nodeType<11&&(s?s.index(n)>-1:n.nodeType===1&&y.find.matchesSelector(n,e))){o.push(n);break}}}}return this.pushStack(o.length>1?y.uniqueSort(o):o)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return u.call(y(e),this[0])}return u.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function O(e,t){while((e=e[t])&&e.nodeType!==1){}return e}y.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return e.contentDocument||y.merge([],e.childNodes)}},function(e,t){y.fn[e]=function(n,i){var r=y.map(this,t,n);if(e.slice(-5)!=="Until"){i=n}if(i&&typeof i==="string"){r=y.filter(i,r)}if(this.length>1){if(!F[e]){y.uniqueSort(r)}if(H.test(e)){r.reverse()}}return this.pushStack(r)}});var P=/\S+/g;function R(e){var t={};y.each(e.match(P)||[],function(e,n){t[n]=true});return t}y.Callbacks=function(e){e=typeof e==="string"?R(e):y.extend({},e);var t,n,i,r,o=[],s=[],a=-1,u=function(){r=e.once;i=t=true;for(;s.length;a=-1){n=s.shift();while(++a<o.length){if(o[a].apply(n[0],n[1])===false&&e.stopOnFalse){a=o.length;n=false}}}if(!e.memory){n=false}t=false;if(r){if(n){o=[]}else{o=""}}},f={add:function(){if(o){if(n&&!t){a=o.length-1;s.push(n)}(function t(n){y.each(n,function(n,i){if(y.isFunction(i)){if(!e.unique||!f.has(i)){o.push(i)}}else if(i&&i.length&&y.type(i)!=="string"){t(i)}})})(arguments);if(n&&!t){u()}}return this},remove:function(){y.each(arguments,function(e,t){var n;while((n=y.inArray(t,o,n))>-1){o.splice(n,1);if(n<=a){a--}}});return this},has:function(e){return e?y.inArray(e,o)>-1:o.length>0},empty:function(){if(o){o=[]}return this},disable:function(){r=s=[];o=n="";return this},disabled:function(){return!o},lock:function(){r=s=[];if(!n&&!t){o=n=""}return this},locked:function(){return!!r},fireWith:function(e,n){if(!r){n=n||[];n=[e,n.slice?n.slice():n];s.push(n);if(!t){u()}}return this},fire:function(){f.fireWith(this,arguments);return this},fired:function(){return!!i}};return f};function M(e){return e}function I(e){throw e}function W(e,t,n){var i;try{if(e&&y.isFunction(i=e.promise)){i.call(e).done(t).fail(n)}else if(e&&y.isFunction(i=e.then)){i.call(e,t,n)}else{t.call(undefined,e)}}catch(e){n.call(undefined,e)}}y.extend({Deferred:function(t){var n=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){o.done(arguments).fail(arguments);return this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return y.Deferred(function(t){y.each(n,function(n,i){var r=y.isFunction(e[i[4]])&&e[i[4]];o[i[1]](function(){var e=r&&r.apply(this,arguments);if(e&&y.isFunction(e.promise)){e.promise().progress(t.notify).done(t.resolve).fail(t.reject)}else{t[i[0]+"With"](this,r?[e]:arguments)}})});e=null}).promise()},then:function(t,i,r){var o=0;function s(t,n,i,r){return function(){var a=this,u=arguments,f=function(){var e,f;if(t<o){return}e=i.apply(a,u);if(e===n.promise()){throw new TypeError("Thenable self-resolution")}f=e&&(typeof e==="object"||typeof e==="function")&&e.then;if(y.isFunction(f)){if(r){f.call(e,s(o,n,M,r),s(o,n,I,r))}else{o++;f.call(e,s(o,n,M,r),s(o,n,I,r),s(o,n,M,n.notify))}}else{if(i!==M){a=undefined;u=[e]}(r||n.resolveWith)(a,u)}},l=r?f:function(){try{f()}catch(e){if(y.Deferred.exceptionHook){y.Deferred.exceptionHook(e,l.stackTrace)}if(t+1>=o){if(i!==I){a=undefined;u=[e]}n.rejectWith(a,u)}}};if(t){l()}else{if(y.Deferred.getStackHook){l.stackTrace=y.Deferred.getStackHook()}e.setTimeout(l)}}}return y.Deferred(function(e){n[0][3].add(s(0,e,y.isFunction(r)?r:M,e.notifyWith));n[1][3].add(s(0,e,y.isFunction(t)?t:M));n[2][3].add(s(0,e,y.isFunction(i)?i:I))}).promise()},promise:function(e){return e!=null?y.extend(e,r):r}},o={};y.each(n,function(e,t){var s=t[2],a=t[5];r[t[1]]=s.add;if(a){s.add(function(){i=a},n[3-e][2].disable,n[0][2].lock)}s.add(t[3].fire);o[t[0]]=function(){o[t[0]+"With"](this===o?undefined:this,arguments);return this};o[t[0]+"With"]=s.fireWith});r.promise(o);if(t){t.call(o,o)}return o},when:function(e){var t=arguments.length,n=t,i=Array(n),r=o.call(arguments),s=y.Deferred(),a=function(e){
return function(n){i[e]=this;r[e]=arguments.length>1?o.call(arguments):n;if(!--t){s.resolveWith(i,r)}}};if(t<=1){W(e,s.done(a(n)).resolve,s.reject);if(s.state()==="pending"||y.isFunction(r[n]&&r[n].then)){return s.then()}}while(n--){W(r[n],a(n),s.reject)}return s.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(t,n){if(e.console&&e.console.warn&&t&&$.test(t.name)){e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)}};var B=y.Deferred();y.fn.ready=function(e){B.then(e);return this};y.extend({isReady:false,readyWait:1,holdReady:function(e){if(e){y.readyWait++}else{y.ready(true)}},ready:function(e){if(e===true?--y.readyWait:y.isReady){return}y.isReady=true;if(e!==true&&--y.readyWait>0){return}B.resolveWith(i,[y])}});y.ready.then=B.then;function _(){i.removeEventListener("DOMContentLoaded",_);e.removeEventListener("load",_);y.ready()}if(i.readyState==="complete"||i.readyState!=="loading"&&!i.documentElement.doScroll){e.setTimeout(y.ready)}else{i.addEventListener("DOMContentLoaded",_);e.addEventListener("load",_)}var z=function(e,t,n,i,r,o,s){var a=0,u=e.length,f=n==null;if(y.type(n)==="object"){r=true;for(a in n){z(e,t,a,n[a],true,o,s)}}else if(i!==undefined){r=true;if(!y.isFunction(i)){s=true}if(f){if(s){t.call(e,i);t=null}else{f=t;t=function(e,t,n){return f.call(y(e),n)}}}if(t){for(;a<u;a++){t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)))}}}return r?e:f?t.call(e):u?t(e[0],n):o};var X=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function U(){this.expando=y.expando+U.uid++}U.uid=1;U.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if(X(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,n){var i,r=this.cache(e);if(typeof t==="string"){r[y.camelCase(t)]=n}else{for(i in t){r[y.camelCase(i)]=t[i]}}return r},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][y.camelCase(t)]},access:function(e,t,n){if(t===undefined||t&&typeof t==="string"&&n===undefined){return this.get(e,t)}this.set(e,t,n);return n!==undefined?n:t},remove:function(e,t){var n,i=e[this.expando];if(i===undefined){return}if(t!==undefined){if(y.isArray(t)){t=t.map(y.camelCase)}else{t=y.camelCase(t);t=t in i?[t]:t.match(P)||[]}n=t.length;while(n--){delete i[t[n]]}}if(t===undefined||y.isEmptyObject(i)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!y.isEmptyObject(t)}};var V=new U;var G=new U;var Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function J(e,t,n){var i;if(n===undefined&&e.nodeType===1){i="data-"+t.replace(Q,"-$&").toLowerCase();n=e.getAttribute(i);if(typeof n==="string"){try{n=n==="true"?true:n==="false"?false:n==="null"?null:+n+""===n?+n:Y.test(n)?JSON.parse(n):n}catch(e){}G.set(e,t,n)}else{n=undefined}}return n}y.extend({hasData:function(e){return G.hasData(e)||V.hasData(e)},data:function(e,t,n){return G.access(e,t,n)},removeData:function(e,t){G.remove(e,t)},_data:function(e,t,n){return V.access(e,t,n)},_removeData:function(e,t){V.remove(e,t)}});y.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(e===undefined){if(this.length){r=G.get(o);if(o.nodeType===1&&!V.get(o,"hasDataAttrs")){n=s.length;while(n--){if(s[n]){i=s[n].name;if(i.indexOf("data-")===0){i=y.camelCase(i.slice(5));J(o,i,r[i])}}}V.set(o,"hasDataAttrs",true)}}return r}if(typeof e==="object"){return this.each(function(){G.set(this,e)})}return z(this,function(t){var n;if(o&&t===undefined){n=G.get(o,e);if(n!==undefined){return n}n=J(o,e);if(n!==undefined){return n}return}this.each(function(){G.set(this,e,t)})},null,t,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){G.remove(this,e)})}});y.extend({queue:function(e,t,n){var i;if(e){t=(t||"fx")+"queue";i=V.get(e,t);if(n){if(!i||y.isArray(n)){i=V.access(e,t,y.makeArray(n))}else{i.push(n)}}return i||[]}},dequeue:function(e,t){t=t||"fx";var n=y.queue(e,t),i=n.length,r=n.shift(),o=y._queueHooks(e,t),s=function(){y.dequeue(e,t)};if(r==="inprogress"){r=n.shift();i--}if(r){if(t==="fx"){n.unshift("inprogress")}delete o.stop;r.call(e,s,o)}if(!i&&o){o.empty.fire()}},_queueHooks:function(e,t){var n=t+"queueHooks";return V.get(e,n)||V.access(e,n,{empty:y.Callbacks("once memory").add(function(){V.remove(e,[t+"queue",n])})})}});y.fn.extend({queue:function(e,t){var n=2;if(typeof e!=="string"){t=e;e="fx";n--}if(arguments.length<n){return y.queue(this[0],e)}return t===undefined?this:this.each(function(){var n=y.queue(this,e,t);y._queueHooks(this,e);if(e==="fx"&&n[0]!=="inprogress"){y.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){y.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=y.Deferred(),o=this,s=this.length,a=function(){if(!--i){r.resolveWith(o,[o])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(s--){n=V.get(o[s],e+"queueHooks");if(n&&n.empty){i++;n.empty.add(a)}}a();return r.promise(t)}});var K=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var Z=new RegExp("^(?:([+-])=|)("+K+")([a-z%]*)$","i");var ee=["Top","Right","Bottom","Left"];var te=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&y.contains(e.ownerDocument,e)&&y.css(e,"display")==="none"};var ne=function(e,t,n,i){var r,o,s={};for(o in t){s[o]=e.style[o];e.style[o]=t[o]}r=n.apply(e,i||[]);for(o in t){e.style[o]=s[o]}return r};function ie(e,t,n,i){var r,o=1,s=20,a=i?function(){return i.cur()}:function(){return y.css(e,t,"")},u=a(),f=n&&n[3]||(y.cssNumber[t]?"":"px"),l=(y.cssNumber[t]||f!=="px"&&+u)&&Z.exec(y.css(e,t));if(l&&l[3]!==f){f=f||l[3];n=n||[];l=+u||1;do{o=o||".5";l=l/o;y.style(e,t,l+f)}while(o!==(o=a()/u)&&o!==1&&--s)}if(n){l=+l||+u||0;r=n[1]?l+(n[1]+1)*n[2]:+n[2];if(i){i.unit=f;i.start=l;i.end=r}}return r}var re={};function oe(e){var t,n=e.ownerDocument,i=e.nodeName,r=re[i];if(r){return r}t=n.body.appendChild(n.createElement(i)),r=y.css(t,"display");t.parentNode.removeChild(t);if(r==="none"){r="block"}re[i]=r;return r}function se(e,t){var n,i,r=[],o=0,s=e.length;for(;o<s;o++){i=e[o];if(!i.style){continue}n=i.style.display;if(t){if(n==="none"){r[o]=V.get(i,"display")||null;if(!r[o]){i.style.display=""}}if(i.style.display===""&&te(i)){r[o]=oe(i)}}else{if(n!=="none"){r[o]="none";V.set(i,"display",n)}}}for(o=0;o<s;o++){if(r[o]!=null){e[o].style.display=r[o]}}return e}y.fn.extend({show:function(){return se(this,true)},hide:function(){return se(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(te(this)){y(this).show()}else{y(this).hide()}})}});var ae=/^(?:checkbox|radio)$/i;var ue=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var fe=/^$|\/(?:java|ecma)script/i;var le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};le.optgroup=le.option;le.tbody=le.tfoot=le.colgroup=le.caption=le.thead;le.th=le.td;function ce(e,t){var n=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!=="undefined"?e.querySelectorAll(t||"*"):[];return t===undefined||t&&y.nodeName(e,t)?y.merge([e],n):n}function de(e,t){var n=0,i=e.length;for(;n<i;n++){V.set(e[n],"globalEval",!t||V.get(t[n],"globalEval"))}}var pe=/<|&#?\w+;/;function he(e,t,n,i,r){var o,s,a,u,f,l,c=t.createDocumentFragment(),d=[],p=0,h=e.length;for(;p<h;p++){o=e[p];if(o||o===0){if(y.type(o)==="object"){y.merge(d,o.nodeType?[o]:o)}else if(!pe.test(o)){d.push(t.createTextNode(o))}else{s=s||c.appendChild(t.createElement("div"));a=(ue.exec(o)||["",""])[1].toLowerCase();u=le[a]||le._default;s.innerHTML=u[1]+y.htmlPrefilter(o)+u[2];l=u[0];while(l--){s=s.lastChild}y.merge(d,s.childNodes);s=c.firstChild;s.textContent=""}}}c.textContent="";p=0;while(o=d[p++]){if(i&&y.inArray(o,i)>-1){if(r){r.push(o)}continue}f=y.contains(o.ownerDocument,o);s=ce(c.appendChild(o),"script");if(f){de(s)}if(n){l=0;while(o=s[l++]){if(fe.test(o.type||"")){n.push(o)}}}}return c}(function(){var e=i.createDocumentFragment(),t=e.appendChild(i.createElement("div")),n=i.createElement("input");n.setAttribute("type","radio");n.setAttribute("checked","checked");n.setAttribute("name","t");t.appendChild(n);h.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";h.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var ge=i.documentElement;var me=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ve=/^([^.]*)(?:\.(.+)|)/;function xe(){return true}function be(){return false}function we(){try{return i.activeElement}catch(e){}}function Te(e,t,n,i,r,o){var s,a;if(typeof t==="object"){if(typeof n!=="string"){i=i||n;n=undefined}for(a in t){Te(e,a,n,i,t[a],o)}return e}if(i==null&&r==null){r=n;i=n=undefined}else if(r==null){if(typeof n==="string"){r=i;i=undefined}else{r=i;i=n;n=undefined}}if(r===false){r=be}else if(!r){return e}if(o===1){s=r;r=function(e){y().off(e);return s.apply(this,arguments)};r.guid=s.guid||(s.guid=y.guid++)}return e.each(function(){y.event.add(this,t,r,i,n)})}y.event={global:{},add:function(e,t,n,i,r){var o,s,a,u,f,l,c,d,p,h,g,m=V.get(e);if(!m){return}if(n.handler){o=n;n=o.handler;r=o.selector}if(r){y.find.matchesSelector(ge,r)}if(!n.guid){n.guid=y.guid++}if(!(u=m.events)){u=m.events={}}if(!(s=m.handle)){s=m.handle=function(t){return typeof y!=="undefined"&&y.event.triggered!==t.type?y.event.dispatch.apply(e,arguments):undefined}}t=(t||"").match(P)||[""];f=t.length;while(f--){a=ve.exec(t[f])||[];p=g=a[1];h=(a[2]||"").split(".").sort();if(!p){continue}c=y.event.special[p]||{};p=(r?c.delegateType:c.bindType)||p;c=y.event.special[p]||{};l=y.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&y.expr.match.needsContext.test(r),namespace:h.join(".")},o);if(!(d=u[p])){d=u[p]=[];d.delegateCount=0;if(!c.setup||c.setup.call(e,i,h,s)===false){if(e.addEventListener){e.addEventListener(p,s)}}}if(c.add){c.add.call(e,l);if(!l.handler.guid){l.handler.guid=n.guid}}if(r){d.splice(d.delegateCount++,0,l)}else{d.push(l)}y.event.global[p]=true}},remove:function(e,t,n,i,r){var o,s,a,u,f,l,c,d,p,h,g,m=V.hasData(e)&&V.get(e);if(!m||!(u=m.events)){return}t=(t||"").match(P)||[""];f=t.length;while(f--){a=ve.exec(t[f])||[];p=g=a[1];h=(a[2]||"").split(".").sort();if(!p){for(p in u){y.event.remove(e,p+t[f],n,i,true)}continue}c=y.event.special[p]||{};p=(i?c.delegateType:c.bindType)||p;d=u[p]||[];a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)");s=o=d.length;while(o--){l=d[o];if((r||g===l.origType)&&(!n||n.guid===l.guid)&&(!a||a.test(l.namespace))&&(!i||i===l.selector||i==="**"&&l.selector)){d.splice(o,1);if(l.selector){d.delegateCount--}if(c.remove){c.remove.call(e,l)}}}if(s&&!d.length){if(!c.teardown||c.teardown.call(e,h,m.handle)===false){y.removeEvent(e,p,m.handle)}delete u[p]}}if(y.isEmptyObject(u)){V.remove(e,"handle events")}},dispatch:function(e){var t=y.event.fix(e);var n,i,r,o,s,a,u=new Array(arguments.length),f=(V.get(this,"events")||{})[t.type]||[],l=y.event.special[t.type]||{};u[0]=t;for(n=1;n<arguments.length;n++){u[n]=arguments[n]}t.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,t)===false){return}a=y.event.handlers.call(this,t,f);n=0;while((o=a[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem;i=0;while((s=o.handlers[i++])&&!t.isImmediatePropagationStopped()){if(!t.rnamespace||t.rnamespace.test(s.namespace)){t.handleObj=s;t.data=s.data;r=((y.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,u);if(r!==undefined){if((t.result=r)===false){t.preventDefault();t.stopPropagation()}}}}}if(l.postDispatch){l.postDispatch.call(this,t)}return t.result},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(e.type!=="click"||isNaN(e.button)||e.button<1)){for(;u!==this;u=u.parentNode||this){if(u.nodeType===1&&(u.disabled!==true||e.type!=="click")){i=[];for(n=0;n<a;n++){o=t[n];r=o.selector+" ";if(i[r]===undefined){i[r]=o.needsContext?y(r,this).index(u)>-1:y.find(r,this,null,[u]).length}if(i[r]){i.push(o)}}if(i.length){s.push({elem:u,handlers:i})}}}}if(a<t.length){s.push({elem:this,handlers:t.slice(a)})}return s},addProp:function(e,t){Object.defineProperty(y.Event.prototype,e,{enumerable:true,configurable:true,get:y.isFunction(t)?function(){if(this.originalEvent){return t(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[e]}},set:function(t){Object.defineProperty(this,e,{enumerable:true,configurable:true,writable:true,value:t})}})},fix:function(e){return e[y.expando]?e:new y.Event(e)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==we()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===we()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&y.nodeName(this,"input")){this.click();return false}},_default:function(e){return y.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};y.removeEvent=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n)}};y.Event=function(e,t){if(!(this instanceof y.Event)){return new y.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?xe:be;this.target=e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){y.extend(this,t)}this.timeStamp=e&&e.timeStamp||y.now();this[y.expando]=true};y.Event.prototype={constructor:y.Event,isDefaultPrevented:be,isPropagationStopped:be,isImmediatePropagationStopped:be,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};y.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(e){var t=e.button;if(e.which==null&&me.test(e.type)){return e.charCode!=null?e.charCode:e.keyCode}if(!e.which&&t!==undefined&&ye.test(e.type)){return t&1?1:t&2?3:t&4?2:0}return e.which}},y.event.addProp);y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;if(!r||r!==i&&!y.contains(i,r)){e.type=o.origType;n=o.handler.apply(this,arguments);e.type=t}return n}}});y.fn.extend({on:function(e,t,n,i){return Te(this,e,t,n,i)},one:function(e,t,n,i){return Te(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj){i=e.handleObj;y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);return this}if(typeof e==="object"){for(r in e){this.off(r,t,e[r])}return this}if(t===false||typeof t==="function"){n=t;t=undefined}if(n===false){n=be}return this.each(function(){y.event.remove(this,e,n,t)})}});var Ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ke=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,Se=/^true\/(.*)/,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function De(e,t){if(y.nodeName(e,"table")&&y.nodeName(t.nodeType!==11?t:t.firstChild,"tr")){return e.getElementsByTagName("tbody")[0]||e}return e}function je(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Ae(e){var t=Se.exec(e.type);if(t){e.type=t[1]}else{e.removeAttribute("type")}return e}function qe(e,t){var n,i,r,o,s,a,u,f;if(t.nodeType!==1){return}if(V.hasData(e)){o=V.access(e);s=V.set(t,o);f=o.events;if(f){delete s.handle;s.events={};for(r in f){for(n=0,i=f[r].length;n<i;n++){y.event.add(t,r,f[r][n])}}}}if(G.hasData(e)){a=G.access(e);u=y.extend({},a);G.set(t,u)}}function Le(e,t){var n=t.nodeName.toLowerCase();if(n==="input"&&ae.test(e.type)){t.checked=e.checked}else if(n==="input"||n==="textarea"){t.defaultValue=e.defaultValue}}function He(e,t,n,i){t=s.apply([],t);var r,o,a,u,f,l,c=0,d=e.length,p=d-1,m=t[0],v=y.isFunction(m);if(v||d>1&&typeof m==="string"&&!h.checkClone&&Ee.test(m)){return e.each(function(r){var o=e.eq(r);if(v){t[0]=m.call(this,r,o.html())}He(o,t,n,i)})}if(d){r=he(t,e[0].ownerDocument,false,e,i);o=r.firstChild;if(r.childNodes.length===1){r=o}if(o||i){a=y.map(ce(r,"script"),je);u=a.length;for(;c<d;c++){f=r;if(c!==p){f=y.clone(f,true,true);if(u){y.merge(a,ce(f,"script"))}}n.call(e[c],f,c)}if(u){l=a[a.length-1].ownerDocument;y.map(a,Ae);for(c=0;c<u;c++){f=a[c];if(fe.test(f.type||"")&&!V.access(f,"globalEval")&&y.contains(l,f)){if(f.src){if(y._evalUrl){y._evalUrl(f.src)}}else{g(f.textContent.replace(Ne,""),l)}}}}}}return e}function Fe(e,t,n){var i,r=t?y.filter(t,e):e,o=0;for(;(i=r[o])!=null;o++){if(!n&&i.nodeType===1){y.cleanData(ce(i))}if(i.parentNode){if(n&&y.contains(i.ownerDocument,i)){de(ce(i,"script"))}i.parentNode.removeChild(i)}}return e}y.extend({htmlPrefilter:function(e){return e.replace(Ce,"<$1></$2>")},clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(true),u=y.contains(e.ownerDocument,e);if(!h.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!y.isXMLDoc(e)){s=ce(a);o=ce(e);for(i=0,r=o.length;i<r;i++){Le(o[i],s[i])}}if(t){if(n){o=o||ce(e);s=s||ce(a);for(i=0,r=o.length;i<r;i++){qe(o[i],s[i])}}else{qe(e,a)}}s=ce(a,"script");if(s.length>0){de(s,!u&&ce(e,"script"))}return a},cleanData:function(e){var t,n,i,r=y.event.special,o=0;for(;(n=e[o])!==undefined;o++){if(X(n)){if(t=n[V.expando]){if(t.events){for(i in t.events){if(r[i]){y.event.remove(n,i)}else{y.removeEvent(n,i,t.handle)}}}n[V.expando]=undefined}if(n[G.expando]){n[G.expando]=undefined}}}}});y.fn.extend({detach:function(e){return Fe(this,e,true)},remove:function(e){return Fe(this,e)},text:function(e){return z(this,function(e){return e===undefined?y.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=De(this,e);t.appendChild(e)}})},prepend:function(){return He(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=De(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return He(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){y.cleanData(ce(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return y.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,i=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!ke.test(e)&&!le[(ue.exec(e)||["",""])[1].toLowerCase()]){e=y.htmlPrefilter(e);try{for(;n<i;n++){t=this[n]||{};if(t.nodeType===1){y.cleanData(ce(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var e=[];return He(this,arguments,function(t){var n=this.parentNode;if(y.inArray(this,e)<0){y.cleanData(ce(this));if(n){n.replaceChild(t,this)}}},e)}});y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){y.fn[e]=function(e){var n,i=[],r=y(e),o=r.length-1,s=0;for(;s<=o;s++){n=s===o?this:this.clone(true);y(r[s])[t](n);a.apply(i,n.get())}return this.pushStack(i)}});var Oe=/^margin/;var Pe=new RegExp("^("+K+")(?!px)[a-z%]+$","i");var Re=function(t){var n=t.ownerDocument.defaultView;if(!n||!n.opener){n=e}return n.getComputedStyle(t)};(function(){function t(){if(!u){return}u.style.cssText="box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";u.innerHTML="";ge.appendChild(a);var t=e.getComputedStyle(u);n=t.top!=="1%";s=t.marginLeft==="2px";r=t.width==="4px";u.style.marginRight="50%";o=t.marginRight==="4px";ge.removeChild(a);u=null}var n,r,o,s,a=i.createElement("div"),u=i.createElement("div");if(!u.style){return}u.style.backgroundClip="content-box";u.cloneNode(true).style.backgroundClip="";h.clearCloneStyle=u.style.backgroundClip==="content-box";a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";a.appendChild(u);y.extend(h,{pixelPosition:function(){t();return n},boxSizingReliable:function(){t();return r},pixelMarginRight:function(){t();return o},reliableMarginLeft:function(){t();return s}})})();function Me(e,t,n){var i,r,o,s,a=e.style;n=n||Re(e);if(n){s=n.getPropertyValue(t)||n[t];if(s===""&&!y.contains(e.ownerDocument,e)){s=y.style(e,t)}if(!h.pixelMarginRight()&&Pe.test(s)&&Oe.test(t)){i=a.width;r=a.minWidth;o=a.maxWidth;a.minWidth=a.maxWidth=a.width=s;s=n.width;a.width=i;a.minWidth=r;a.maxWidth=o}}return s!==undefined?s+"":s}function Ie(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var We=/^(none|table(?!-c[ea]).+)/,$e={position:"absolute",visibility:"hidden",display:"block"},Be={letterSpacing:"0",fontWeight:"400"},_e=["Webkit","Moz","ms"],ze=i.createElement("div").style;function Xe(e){if(e in ze){return e}var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--){e=_e[n]+t;if(e in ze){return e}}}function Ue(e,t,n){var i=Z.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Ve(e,t,n,i,r){var o=n===(i?"border":"content")?4:t==="width"?1:0,s=0;for(;o<4;o+=2){if(n==="margin"){s+=y.css(e,n+ee[o],true,r)}if(i){if(n==="content"){s-=y.css(e,"padding"+ee[o],true,r)}if(n!=="margin"){s-=y.css(e,"border"+ee[o]+"Width",true,r)}}else{s+=y.css(e,"padding"+ee[o],true,r);if(n!=="padding"){s+=y.css(e,"border"+ee[o]+"Width",true,r)}}}return s}function Ge(e,t,n){var i,r=true,o=Re(e),s=y.css(e,"boxSizing",false,o)==="border-box";if(e.getClientRects().length){i=e.getBoundingClientRect()[t]}if(i<=0||i==null){i=Me(e,t,o);if(i<0||i==null){i=e.style[t]}if(Pe.test(i)){return i}r=s&&(h.boxSizingReliable()||i===e.style[t]);i=parseFloat(i)||0}return i+Ve(e,t,n||(s?"border":"content"),r,o)+"px"}y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Me(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var r,o,s,a=y.camelCase(t),u=e.style;t=y.cssProps[a]||(y.cssProps[a]=Xe(a)||a);s=y.cssHooks[t]||y.cssHooks[a];if(n!==undefined){o=typeof n;if(o==="string"&&(r=Z.exec(n))&&r[1]){n=ie(e,t,r);o="number"}if(n==null||n!==n){return}if(o==="number"){n+=r&&r[3]||(y.cssNumber[a]?"":"px")}if(!h.clearCloneStyle&&n===""&&t.indexOf("background")===0){u[t]="inherit"}if(!s||!("set"in s)||(n=s.set(e,n,i))!==undefined){u[t]=n}}else{if(s&&"get"in s&&(r=s.get(e,false,i))!==undefined){return r}return u[t]}},css:function(e,t,n,i){var r,o,s,a=y.camelCase(t);t=y.cssProps[a]||(y.cssProps[a]=Xe(a)||a);s=y.cssHooks[t]||y.cssHooks[a];if(s&&"get"in s){r=s.get(e,true,n)}if(r===undefined){r=Me(e,t,i)}if(r==="normal"&&t in Be){r=Be[t]}if(n===""||n){o=parseFloat(r);return n===true||isFinite(o)?o||0:r}return r}});y.each(["height","width"],function(e,t){y.cssHooks[t]={get:function(e,n,i){if(n){return We.test(y.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?ne(e,$e,function(){return Ge(e,t,i)}):Ge(e,t,i)}},set:function(e,n,i){var r,o=i&&Re(e),s=i&&Ve(e,t,i,y.css(e,"boxSizing",false,o)==="border-box",o);if(s&&(r=Z.exec(n))&&(r[3]||"px")!=="px"){e.style[t]=n;n=y.css(e,t)}return Ue(e,n,s)}}});y.cssHooks.marginLeft=Ie(h.reliableMarginLeft,function(e,t){if(t){return(parseFloat(Me(e,"marginLeft"))||e.getBoundingClientRect().left-ne(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});y.each({margin:"",padding:"",border:"Width"},function(e,t){y.cssHooks[e+t]={expand:function(n){var i=0,r={},o=typeof n==="string"?n.split(" "):[n];for(;i<4;i++){r[e+ee[i]+t]=o[i]||o[i-2]||o[0]}return r}};if(!Oe.test(e)){y.cssHooks[e+t].set=Ue}});y.fn.extend({css:function(e,t){return z(this,function(e,t,n){var i,r,o={},s=0;if(y.isArray(t)){i=Re(e);r=t.length;for(;s<r;s++){o[t[s]]=y.css(e,t[s],false,i)}return o}return n!==undefined?y.style(e,t,n):y.css(e,t)},e,t,arguments.length>1)}});function Ye(e,t,n,i,r){return new Ye.prototype.init(e,t,n,i,r)}y.Tween=Ye;Ye.prototype={constructor:Ye,init:function(e,t,n,i,r,o){this.elem=e;this.prop=n;this.easing=r||y.easing._default;this.options=t;this.start=this.now=this.cur();this.end=i;this.unit=o||(y.cssNumber[n]?"":"px")},cur:function(){var e=Ye.propHooks[this.prop];return e&&e.get?e.get(this):Ye.propHooks._default.get(this)},run:function(e){var t,n=Ye.propHooks[this.prop];if(this.options.duration){this.pos=t=y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(n&&n.set){n.set(this)}else{Ye.propHooks._default.set(this)}return this}};Ye.prototype.init.prototype=Ye.prototype;Ye.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=y.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(y.fx.step[e.prop]){y.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(e.elem.style[y.cssProps[e.prop]]!=null||y.cssHooks[e.prop])){y.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};Ye.propHooks.scrollTop=Ye.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};y.fx=Ye.prototype.init;y.fx.step={};var Qe,Je,Ke=/^(?:toggle|show|hide)$/,Ze=/queueHooks$/;function et(){if(Je){e.requestAnimationFrame(et);y.fx.tick()}}function tt(){e.setTimeout(function(){Qe=undefined});return Qe=y.now()}function nt(e,t){var n,i=0,r={height:e};t=t?1:0;for(;i<4;i+=2-t){n=ee[i];r["margin"+n]=r["padding"+n]=e}if(t){r.opacity=r.width=e}return r}function it(e,t,n){var i,r=(st.tweeners[t]||[]).concat(st.tweeners["*"]),o=0,s=r.length;for(;o<s;o++){if(i=r[o].call(n,t,e)){return i}}}function rt(e,t,n){var i,r,o,s,a,u,f,l,c="width"in t||"height"in t,d=this,p={},h=e.style,g=e.nodeType&&te(e),m=V.get(e,"fxshow");if(!n.queue){s=y._queueHooks(e,"fx");if(s.unqueued==null){s.unqueued=0;a=s.empty.fire;s.empty.fire=function(){if(!s.unqueued){a()}}}s.unqueued++;d.always(function(){d.always(function(){s.unqueued--;if(!y.queue(e,"fx").length){s.empty.fire()}})})}for(i in t){r=t[i];if(Ke.test(r)){delete t[i];o=o||r==="toggle";if(r===(g?"hide":"show")){if(r==="show"&&m&&m[i]!==undefined){g=true}else{continue}}p[i]=m&&m[i]||y.style(e,i)}}u=!y.isEmptyObject(t);if(!u&&y.isEmptyObject(p)){return}if(c&&e.nodeType===1){n.overflow=[h.overflow,h.overflowX,h.overflowY];f=m&&m.display;if(f==null){f=V.get(e,"display")}l=y.css(e,"display");if(l==="none"){if(f){l=f}else{se([e],true);f=e.style.display||f;l=y.css(e,"display");se([e])}}if(l==="inline"||l==="inline-block"&&f!=null){if(y.css(e,"float")==="none"){if(!u){d.done(function(){h.display=f});if(f==null){l=h.display;f=l==="none"?"":l}}h.display="inline-block"}}}if(n.overflow){h.overflow="hidden";d.always(function(){h.overflow=n.overflow[0];h.overflowX=n.overflow[1];h.overflowY=n.overflow[2]})}u=false;for(i in p){if(!u){if(m){if("hidden"in m){g=m.hidden}}else{m=V.access(e,"fxshow",{display:f})}if(o){m.hidden=!g}if(g){se([e],true)}d.done(function(){if(!g){se([e])}V.remove(e,"fxshow");for(i in p){y.style(e,i,p[i])}})}u=it(g?m[i]:0,i,d);if(!(i in m)){m[i]=u.start;if(g){u.end=u.start;u.start=0}}}}function ot(e,t){var n,i,r,o,s;for(n in e){i=y.camelCase(n);r=t[i];o=e[n];if(y.isArray(o)){r=o[1];o=e[n]=o[0]}if(n!==i){e[i]=o;delete e[n]}s=y.cssHooks[i];if(s&&"expand"in s){o=s.expand(o);delete e[i];for(n in o){if(!(n in e)){e[n]=o[n];t[n]=r}}}else{t[i]=r}}}function st(e,t,n){var i,r,o=0,s=st.prefilters.length,a=y.Deferred().always(function(){delete u.elem}),u=function(){if(r){return false}var t=Qe||tt(),n=Math.max(0,f.startTime+f.duration-t),i=n/f.duration||0,o=1-i,s=0,u=f.tweens.length;for(;s<u;s++){f.tweens[s].run(o)}a.notifyWith(e,[f,o,n]);if(o<1&&u){return n}else{a.resolveWith(e,[f]);return false}},f=a.promise({elem:e,props:y.extend({},t),opts:y.extend(true,{specialEasing:{},easing:y.easing._default},n),originalProperties:t,originalOptions:n,startTime:Qe||tt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=y.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);f.tweens.push(i);return i},stop:function(t){var n=0,i=t?f.tweens.length:0;if(r){return this}r=true;for(;n<i;n++){f.tweens[n].run(1)}if(t){a.notifyWith(e,[f,1,0]);a.resolveWith(e,[f,t])}else{a.rejectWith(e,[f,t])}return this}}),l=f.props;ot(l,f.opts.specialEasing);for(;o<s;o++){i=st.prefilters[o].call(f,e,l,f.opts);if(i){if(y.isFunction(i.stop)){y._queueHooks(f.elem,f.opts.queue).stop=y.proxy(i.stop,i)}return i}}y.map(l,it,f);if(y.isFunction(f.opts.start)){f.opts.start.call(e,f)}y.fx.timer(y.extend(u,{elem:e,anim:f,queue:f.opts.queue}));return f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}y.Animation=y.extend(st,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);ie(n.elem,e,Z.exec(t),n);return n}]},tweener:function(e,t){if(y.isFunction(e)){t=e;e=["*"]}else{e=e.match(P)}var n,i=0,r=e.length;for(;i<r;i++){n=e[i];st.tweeners[n]=st.tweeners[n]||[];st.tweeners[n].unshift(t)}},prefilters:[rt],prefilter:function(e,t){if(t){st.prefilters.unshift(e)}else{st.prefilters.push(e)}}});y.speed=function(e,t,n){var r=e&&typeof e==="object"?y.extend({},e):{complete:n||!n&&t||y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!y.isFunction(t)&&t};if(y.fx.off||i.hidden){r.duration=0}else{r.duration=typeof r.duration==="number"?r.duration:r.duration in y.fx.speeds?y.fx.speeds[r.duration]:y.fx.speeds._default}if(r.queue==null||r.queue===true){r.queue="fx"}r.old=r.complete;r.complete=function(){if(y.isFunction(r.old)){r.old.call(this)}if(r.queue){y.dequeue(this,r.queue)}};return r};y.fn.extend({fadeTo:function(e,t,n,i){return this.filter(te).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=y.isEmptyObject(e),o=y.speed(t,n,i),s=function(){var t=st(this,y.extend({},e),o);if(r||V.get(this,"finish")){t.stop(true)}};s.finish=s;return r||o.queue===false?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop;t(n)};if(typeof e!=="string"){n=t;t=e;e=undefined}if(t&&e!==false){this.queue(e||"fx",[])}return this.each(function(){var t=true,r=e!=null&&e+"queueHooks",o=y.timers,s=V.get(this);if(r){if(s[r]&&s[r].stop){i(s[r])}}else{for(r in s){if(s[r]&&s[r].stop&&Ze.test(r)){i(s[r]);

}}}for(r=o.length;r--;){if(o[r].elem===this&&(e==null||o[r].queue===e)){o[r].anim.stop(n);t=false;o.splice(r,1)}}if(t||!n){y.dequeue(this,e)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var t,n=V.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=y.timers,s=i?i.length:0;n.finish=true;y.queue(this,e,[]);if(r&&r.stop){r.stop.call(this,true)}for(t=o.length;t--;){if(o[t].elem===this&&o[t].queue===e){o[t].anim.stop(true);o.splice(t,1)}}for(t=0;t<s;t++){if(i[t]&&i[t].finish){i[t].finish.call(this)}}delete n.finish})}});y.each(["toggle","show","hide"],function(e,t){var n=y.fn[t];y.fn[t]=function(e,i,r){return e==null||typeof e==="boolean"?n.apply(this,arguments):this.animate(nt(t,true),e,i,r)}});y.each({slideDown:nt("show"),slideUp:nt("hide"),slideToggle:nt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){y.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}});y.timers=[];y.fx.tick=function(){var e,t=0,n=y.timers;Qe=y.now();for(;t<n.length;t++){e=n[t];if(!e()&&n[t]===e){n.splice(t--,1)}}if(!n.length){y.fx.stop()}Qe=undefined};y.fx.timer=function(e){y.timers.push(e);if(e()){y.fx.start()}else{y.timers.pop()}};y.fx.interval=13;y.fx.start=function(){if(!Je){Je=e.requestAnimationFrame?e.requestAnimationFrame(et):e.setInterval(y.fx.tick,y.fx.interval)}};y.fx.stop=function(){if(e.cancelAnimationFrame){e.cancelAnimationFrame(Je)}else{e.clearInterval(Je)}Je=null};y.fx.speeds={slow:600,fast:200,_default:400};y.fn.delay=function(t,n){t=y.fx?y.fx.speeds[t]||t:t;n=n||"fx";return this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})};(function(){var e=i.createElement("input"),t=i.createElement("select"),n=t.appendChild(i.createElement("option"));e.type="checkbox";h.checkOn=e.value!=="";h.optSelected=n.selected;e=i.createElement("input");e.value="t";e.type="radio";h.radioValue=e.value==="t"})();var at,ut=y.expr.attrHandle;y.fn.extend({attr:function(e,t){return z(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){y.removeAttr(this,e)})}});y.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(o===3||o===8||o===2){return}if(typeof e.getAttribute==="undefined"){return y.prop(e,t,n)}if(o!==1||!y.isXMLDoc(e)){r=y.attrHooks[t.toLowerCase()]||(y.expr.match.bool.test(t)?at:undefined)}if(n!==undefined){if(n===null){y.removeAttr(e,t);return}if(r&&"set"in r&&(i=r.set(e,n,t))!==undefined){return i}e.setAttribute(t,n+"");return n}if(r&&"get"in r&&(i=r.get(e,t))!==null){return i}i=y.find.attr(e,t);return i==null?undefined:i},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&t==="radio"&&y.nodeName(e,"input")){var n=e.value;e.setAttribute("type",t);if(n){e.value=n}return t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(P);if(r&&e.nodeType===1){while(n=r[i++]){e.removeAttribute(n)}}}});at={set:function(e,t,n){if(t===false){y.removeAttr(e,n)}else{e.setAttribute(n,n)}return n}};y.each(y.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ut[t]||y.find.attr;ut[t]=function(e,t,i){var r,o;if(!i){o=ut[t];ut[t]=r;r=n(e,t,i)!=null?t.toLowerCase():null;ut[t]=o}return r}});var ft=/^(?:input|select|textarea|button)$/i,lt=/^(?:a|area)$/i;y.fn.extend({prop:function(e,t){return z(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[y.propFix[e]||e]})}});y.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(o===3||o===8||o===2){return}if(o!==1||!y.isXMLDoc(e)){t=y.propFix[t]||t;r=y.propHooks[t]}if(n!==undefined){if(r&&"set"in r&&(i=r.set(e,n,t))!==undefined){return i}return e[t]=n}if(r&&"get"in r&&(i=r.get(e,t))!==null){return i}return e[t]},propHooks:{tabIndex:{get:function(e){var t=y.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||lt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});if(!h.optSelected){y.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this});var ct=/[\t\r\n\f]/g;function dt(e){return e.getAttribute&&e.getAttribute("class")||""}y.fn.extend({addClass:function(e){var t,n,i,r,o,s,a,u=0;if(y.isFunction(e)){return this.each(function(t){y(this).addClass(e.call(this,t,dt(this)))})}if(typeof e==="string"&&e){t=e.match(P)||[];while(n=this[u++]){r=dt(n);i=n.nodeType===1&&(" "+r+" ").replace(ct," ");if(i){s=0;while(o=t[s++]){if(i.indexOf(" "+o+" ")<0){i+=o+" "}}a=y.trim(i);if(r!==a){n.setAttribute("class",a)}}}}return this},removeClass:function(e){var t,n,i,r,o,s,a,u=0;if(y.isFunction(e)){return this.each(function(t){y(this).removeClass(e.call(this,t,dt(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof e==="string"&&e){t=e.match(P)||[];while(n=this[u++]){r=dt(n);i=n.nodeType===1&&(" "+r+" ").replace(ct," ");if(i){s=0;while(o=t[s++]){while(i.indexOf(" "+o+" ")>-1){i=i.replace(" "+o+" "," ")}}a=y.trim(i);if(r!==a){n.setAttribute("class",a)}}}}return this},toggleClass:function(e,t){var n=typeof e;if(typeof t==="boolean"&&n==="string"){return t?this.addClass(e):this.removeClass(e)}if(y.isFunction(e)){return this.each(function(n){y(this).toggleClass(e.call(this,n,dt(this),t),t)})}return this.each(function(){var t,i,r,o;if(n==="string"){i=0;r=y(this);o=e.match(P)||[];while(t=o[i++]){if(r.hasClass(t)){r.removeClass(t)}else{r.addClass(t)}}}else if(e===undefined||n==="boolean"){t=dt(this);if(t){V.set(this,"__className__",t)}if(this.setAttribute){this.setAttribute("class",t||e===false?"":V.get(this,"__className__")||"")}}})},hasClass:function(e){var t,n,i=0;t=" "+e+" ";while(n=this[i++]){if(n.nodeType===1&&(" "+dt(n)+" ").replace(ct," ").indexOf(t)>-1){return true}}return false}});var pt=/\r/g,ht=/[\x20\t\r\n\f]+/g;y.fn.extend({val:function(e){var t,n,i,r=this[0];if(!arguments.length){if(r){t=y.valHooks[r.type]||y.valHooks[r.nodeName.toLowerCase()];if(t&&"get"in t&&(n=t.get(r,"value"))!==undefined){return n}n=r.value;return typeof n==="string"?n.replace(pt,""):n==null?"":n}return}i=y.isFunction(e);return this.each(function(n){var r;if(this.nodeType!==1){return}if(i){r=e.call(this,n,y(this).val())}else{r=e}if(r==null){r=""}else if(typeof r==="number"){r+=""}else if(y.isArray(r)){r=y.map(r,function(e){return e==null?"":e+""})}t=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,r,"value")===undefined){this.value=r}})}});y.extend({valHooks:{option:{get:function(e){var t=y.find.attr(e,"value");return t!=null?t:y.trim(y.text(e)).replace(ht," ")}},select:{get:function(e){var t,n,i=e.options,r=e.selectedIndex,o=e.type==="select-one",s=o?null:[],a=o?r+1:i.length,u=r<0?a:o?r:0;for(;u<a;u++){n=i[u];if((n.selected||u===r)&&!n.disabled&&(!n.parentNode.disabled||!y.nodeName(n.parentNode,"optgroup"))){t=y(n).val();if(o){return t}s.push(t)}}return s},set:function(e,t){var n,i,r=e.options,o=y.makeArray(t),s=r.length;while(s--){i=r[s];if(i.selected=y.inArray(y.valHooks.option.get(i),o)>-1){n=true}}if(!n){e.selectedIndex=-1}return o}}}});y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(e,t){if(y.isArray(t)){return e.checked=y.inArray(y(e).val(),t)>-1}}};if(!h.checkOn){y.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});var gt=/^(?:focusinfocus|focusoutblur)$/;y.extend(y.event,{trigger:function(t,n,r,o){var s,a,u,f,l,d,p,h=[r||i],g=c.call(t,"type")?t.type:t,m=c.call(t,"namespace")?t.namespace.split("."):[];a=u=r=r||i;if(r.nodeType===3||r.nodeType===8){return}if(gt.test(g+y.event.triggered)){return}if(g.indexOf(".")>-1){m=g.split(".");g=m.shift();m.sort()}l=g.indexOf(":")<0&&"on"+g;t=t[y.expando]?t:new y.Event(g,typeof t==="object"&&t);t.isTrigger=o?2:3;t.namespace=m.join(".");t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;t.result=undefined;if(!t.target){t.target=r}n=n==null?[t]:y.makeArray(n,[t]);p=y.event.special[g]||{};if(!o&&p.trigger&&p.trigger.apply(r,n)===false){return}if(!o&&!p.noBubble&&!y.isWindow(r)){f=p.delegateType||g;if(!gt.test(f+g)){a=a.parentNode}for(;a;a=a.parentNode){h.push(a);u=a}if(u===(r.ownerDocument||i)){h.push(u.defaultView||u.parentWindow||e)}}s=0;while((a=h[s++])&&!t.isPropagationStopped()){t.type=s>1?f:p.bindType||g;d=(V.get(a,"events")||{})[t.type]&&V.get(a,"handle");if(d){d.apply(a,n)}d=l&&a[l];if(d&&d.apply&&X(a)){t.result=d.apply(a,n);if(t.result===false){t.preventDefault()}}}t.type=g;if(!o&&!t.isDefaultPrevented()){if((!p._default||p._default.apply(h.pop(),n)===false)&&X(r)){if(l&&y.isFunction(r[g])&&!y.isWindow(r)){u=r[l];if(u){r[l]=null}y.event.triggered=g;r[g]();y.event.triggered=undefined;if(u){r[l]=u}}}}return t.result},simulate:function(e,t,n){var i=y.extend(new y.Event,n,{type:e,isSimulated:true});y.event.trigger(i,null,t)}});y.fn.extend({trigger:function(e,t){return this.each(function(){y.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n){return y.event.trigger(e,t,n,true)}}});y.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(e,t){y.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});y.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});h.focusin="onfocusin"in e;if(!h.focusin){y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){y.event.simulate(t,e.target,y.event.fix(e))};y.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=V.access(i,t);if(!r){i.addEventListener(e,n,true)}V.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=V.access(i,t)-1;if(!r){i.removeEventListener(e,n,true);V.remove(i,t)}else{V.access(i,t,r)}}}})}var mt=e.location;var yt=y.now();var vt=/\?/;y.parseXML=function(t){var n;if(!t||typeof t!=="string"){return null}try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=undefined}if(!n||n.getElementsByTagName("parsererror").length){y.error("Invalid XML: "+t)}return n};var xt=/\[\]$/,bt=/\r?\n/g,wt=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;function Ct(e,t,n,i){var r;if(y.isArray(t)){y.each(t,function(t,r){if(n||xt.test(e)){i(e,r)}else{Ct(e+"["+(typeof r==="object"&&r!=null?t:"")+"]",r,n,i)}})}else if(!n&&y.type(t)==="object"){for(r in t){Ct(e+"["+r+"]",t[r],n,i)}}else{i(e,t)}}y.param=function(e,t){var n,i=[],r=function(e,t){var n=y.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(n==null?"":n)};if(y.isArray(e)||e.jquery&&!y.isPlainObject(e)){y.each(e,function(){r(this.name,this.value)})}else{for(n in e){Ct(n,e[n],t,r)}}return i.join("&")};y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&Tt.test(this.nodeName)&&!wt.test(e)&&(this.checked||!ae.test(e))}).map(function(e,t){var n=y(this).val();return n==null?null:y.isArray(n)?y.map(n,function(e){return{name:t.name,value:e.replace(bt,"\r\n")}}):{name:t.name,value:n.replace(bt,"\r\n")}}).get()}});var kt=/%20/g,Et=/#.*$/,St=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jt=/^(?:GET|HEAD)$/,At=/^\/\//,qt={},Lt={},Ht="*/".concat("*"),Ft=i.createElement("a");Ft.href=mt.href;function Ot(e){return function(t,n){if(typeof t!=="string"){n=t;t="*"}var i,r=0,o=t.toLowerCase().match(P)||[];if(y.isFunction(n)){while(i=o[r++]){if(i[0]==="+"){i=i.slice(1)||"*";(e[i]=e[i]||[]).unshift(n)}else{(e[i]=e[i]||[]).push(n)}}}}}function Pt(e,t,n,i){var r={},o=e===Lt;function s(a){var u;r[a]=true;y.each(e[a]||[],function(e,a){var f=a(t,n,i);if(typeof f==="string"&&!o&&!r[f]){t.dataTypes.unshift(f);s(f);return false}else if(o){return!(u=f)}});return u}return s(t.dataTypes[0])||!r["*"]&&s("*")}function Rt(e,t){var n,i,r=y.ajaxSettings.flatOptions||{};for(n in t){if(t[n]!==undefined){(r[n]?e:i||(i={}))[n]=t[n]}}if(i){y.extend(true,e,i)}return e}function Mt(e,t,n){var i,r,o,s,a=e.contents,u=e.dataTypes;while(u[0]==="*"){u.shift();if(i===undefined){i=e.mimeType||t.getResponseHeader("Content-Type")}}if(i){for(r in a){if(a[r]&&a[r].test(i)){u.unshift(r);break}}}if(u[0]in n){o=u[0]}else{for(r in n){if(!u[0]||e.converters[r+" "+u[0]]){o=r;break}if(!s){s=r}}o=o||s}if(o){if(o!==u[0]){u.unshift(o)}return n[o]}}function It(e,t,n,i){var r,o,s,a,u,f={},l=e.dataTypes.slice();if(l[1]){for(s in e.converters){f[s.toLowerCase()]=e.converters[s]}}o=l.shift();while(o){if(e.responseFields[o]){n[e.responseFields[o]]=t}if(!u&&i&&e.dataFilter){t=e.dataFilter(t,e.dataType)}u=o;o=l.shift();if(o){if(o==="*"){o=u}else if(u!=="*"&&u!==o){s=f[u+" "+o]||f["* "+o];if(!s){for(r in f){a=r.split(" ");if(a[1]===o){s=f[u+" "+a[0]]||f["* "+a[0]];if(s){if(s===true){s=f[r]}else if(f[r]!==true){o=a[0];l.unshift(a[1])}break}}}}if(s!==true){if(s&&e.throws){t=s(t)}else{try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}}}}}return{state:"success",data:t}}y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:Dt.test(mt.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?Rt(Rt(e,y.ajaxSettings),t):Rt(y.ajaxSettings,e)},ajaxPrefilter:Ot(qt),ajaxTransport:Ot(Lt),ajax:function(t,n){if(typeof t==="object"){n=t;t=undefined}n=n||{};var r,o,s,a,u,f,l,c,d,p,h=y.ajaxSetup({},n),g=h.context||h,m=h.context&&(g.nodeType||g.jquery)?y(g):y.event,v=y.Deferred(),x=y.Callbacks("once memory"),b=h.statusCode||{},w={},T={},C="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(l){if(!a){a={};while(t=Nt.exec(s)){a[t[1].toLowerCase()]=t[2]}}t=a[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(e,t){if(l==null){e=T[e.toLowerCase()]=T[e.toLowerCase()]||e;w[e]=t}return this},overrideMimeType:function(e){if(l==null){h.mimeType=e}return this},statusCode:function(e){var t;if(e){if(l){k.always(e[k.status])}else{for(t in e){b[t]=[b[t],e[t]]}}}return this},abort:function(e){var t=e||C;if(r){r.abort(t)}E(0,t);return this}};v.promise(k);h.url=((t||h.url||mt.href)+"").replace(At,mt.protocol+"//");h.type=n.method||n.type||h.method||h.type;h.dataTypes=(h.dataType||"*").toLowerCase().match(P)||[""];if(h.crossDomain==null){f=i.createElement("a");try{f.href=h.url;f.href=f.href;h.crossDomain=Ft.protocol+"//"+Ft.host!==f.protocol+"//"+f.host}catch(e){h.crossDomain=true}}if(h.data&&h.processData&&typeof h.data!=="string"){h.data=y.param(h.data,h.traditional)}Pt(qt,h,n,k);if(l){return k}c=y.event&&h.global;if(c&&y.active++===0){y.event.trigger("ajaxStart")}h.type=h.type.toUpperCase();h.hasContent=!jt.test(h.type);o=h.url.replace(Et,"");if(!h.hasContent){p=h.url.slice(o.length);if(h.data){o+=(vt.test(o)?"&":"?")+h.data;delete h.data}if(h.cache===false){o=o.replace(St,"");p=(vt.test(o)?"&":"?")+"_="+yt++ +p}h.url=o+p}else if(h.data&&h.processData&&(h.contentType||"").indexOf("application/x-www-form-urlencoded")===0){h.data=h.data.replace(kt,"+")}if(h.ifModified){if(y.lastModified[o]){k.setRequestHeader("If-Modified-Since",y.lastModified[o])}if(y.etag[o]){k.setRequestHeader("If-None-Match",y.etag[o])}}if(h.data&&h.hasContent&&h.contentType!==false||n.contentType){k.setRequestHeader("Content-Type",h.contentType)}k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(h.dataTypes[0]!=="*"?", "+Ht+"; q=0.01":""):h.accepts["*"]);for(d in h.headers){k.setRequestHeader(d,h.headers[d])}if(h.beforeSend&&(h.beforeSend.call(g,k,h)===false||l)){return k.abort()}C="abort";x.add(h.complete);k.done(h.success);k.fail(h.error);r=Pt(Lt,h,n,k);if(!r){E(-1,"No Transport")}else{k.readyState=1;if(c){m.trigger("ajaxSend",[k,h])}if(l){return k}if(h.async&&h.timeout>0){u=e.setTimeout(function(){k.abort("timeout")},h.timeout)}try{l=false;r.send(w,E)}catch(e){if(l){throw e}E(-1,e)}}function E(t,n,i,a){var f,d,p,w,T,C=n;if(l){return}l=true;if(u){e.clearTimeout(u)}r=undefined;s=a||"";k.readyState=t>0?4:0;f=t>=200&&t<300||t===304;if(i){w=Mt(h,k,i)}w=It(h,w,k,f);if(f){if(h.ifModified){T=k.getResponseHeader("Last-Modified");if(T){y.lastModified[o]=T}T=k.getResponseHeader("etag");if(T){y.etag[o]=T}}if(t===204||h.type==="HEAD"){C="nocontent"}else if(t===304){C="notmodified"}else{C=w.state;d=w.data;p=w.error;f=!p}}else{p=C;if(t||!C){C="error";if(t<0){t=0}}}k.status=t;k.statusText=(n||C)+"";if(f){v.resolveWith(g,[d,C,k])}else{v.rejectWith(g,[k,C,p])}k.statusCode(b);b=undefined;if(c){m.trigger(f?"ajaxSuccess":"ajaxError",[k,h,f?d:p])}x.fireWith(g,[k,C]);if(c){m.trigger("ajaxComplete",[k,h]);if(!--y.active){y.event.trigger("ajaxStop")}}}return k},getJSON:function(e,t,n){return y.get(e,t,n,"json")},getScript:function(e,t){return y.get(e,undefined,t,"script")}});y.each(["get","post"],function(e,t){y[t]=function(e,n,i,r){if(y.isFunction(n)){r=r||i;i=n;n=undefined}return y.ajax(y.extend({url:e,type:t,dataType:r,data:n,success:i},y.isPlainObject(e)&&e))}});y._evalUrl=function(e){return y.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,throws:true})};y.fn.extend({wrapAll:function(e){var t;if(this[0]){if(y.isFunction(e)){e=e.call(this[0])}t=y(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(e){if(y.isFunction(e)){return this.each(function(t){y(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=y(this),n=t.contents();if(n.length){n.wrapAll(e)}else{t.append(e)}})},wrap:function(e){var t=y.isFunction(e);return this.each(function(n){y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){this.parent(e).not("body").each(function(){y(this).replaceWith(this.childNodes)});return this}});y.expr.pseudos.hidden=function(e){return!y.expr.pseudos.visible(e)};y.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};y.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},$t=y.ajaxSettings.xhr();h.cors=!!$t&&"withCredentials"in $t;h.ajax=$t=!!$t;y.ajaxTransport(function(t){var n,i;if(h.cors||$t&&!t.crossDomain){return{send:function(r,o){var s,a=t.xhr();a.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields){for(s in t.xhrFields){a[s]=t.xhrFields[s]}}if(t.mimeType&&a.overrideMimeType){a.overrideMimeType(t.mimeType)}if(!t.crossDomain&&!r["X-Requested-With"]){r["X-Requested-With"]="XMLHttpRequest"}for(s in r){a.setRequestHeader(s,r[s])}n=function(e){return function(){if(n){n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null;if(e==="abort"){a.abort()}else if(e==="error"){if(typeof a.status!=="number"){o(0,"error")}else{o(a.status,a.statusText)}}else{o(Wt[a.status]||a.status,a.statusText,(a.responseType||"text")!=="text"||typeof a.responseText!=="string"?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders())}}}};a.onload=n();i=a.onerror=n("error");if(a.onabort!==undefined){a.onabort=i}else{a.onreadystatechange=function(){if(a.readyState===4){e.setTimeout(function(){if(n){i()}})}}}n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n){throw e}}},abort:function(){if(n){n()}}}}});y.ajaxPrefilter(function(e){if(e.crossDomain){e.contents.script=false}});y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){y.globalEval(e);return e}}});y.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});y.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,o){t=y("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove();n=null;if(e){o(e.type==="error"?404:200,e.type)}});i.head.appendChild(t[0])},abort:function(){if(n){n()}}}}});var Bt=[],_t=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||y.expando+"_"+yt++;this[e]=true;return e}});y.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=t.jsonp!==false&&(_t.test(t.url)?"url":typeof t.data==="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&_t.test(t.data)&&"data");if(a||t.dataTypes[0]==="jsonp"){r=t.jsonpCallback=y.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback;if(a){t[a]=t[a].replace(_t,"$1"+r)}else if(t.jsonp!==false){t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+r}t.converters["script json"]=function(){if(!s){y.error(r+" was not called")}return s[0]};t.dataTypes[0]="json";o=e[r];e[r]=function(){s=arguments};i.always(function(){if(o===undefined){y(e).removeProp(r)}else{e[r]=o}if(t[r]){t.jsonpCallback=n.jsonpCallback;Bt.push(r)}if(s&&y.isFunction(o)){o(s[0])}s=o=undefined});return"script"}});h.createHTMLDocument=function(){var e=i.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();y.parseHTML=function(e,t,n){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){n=t;t=false}var r,o,s;if(!t){if(h.createHTMLDocument){t=i.implementation.createHTMLDocument("");r=t.createElement("base");r.href=i.location.href;t.head.appendChild(r)}else{t=i}}o=N.exec(e);s=!n&&[];if(o){return[t.createElement(o[1])]}o=he([e],t,s);if(s&&s.length){y(s).remove()}return y.merge([],o.childNodes)};y.fn.load=function(e,t,n){var i,r,o,s=this,a=e.indexOf(" ");if(a>-1){i=y.trim(e.slice(a));e=e.slice(0,a)}if(y.isFunction(t)){n=t;t=undefined}else if(t&&typeof t==="object"){r="POST"}if(s.length>0){y.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments;s.html(i?y("<div>").append(y.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})})}return this};y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){y.fn[t]=function(e){return this.on(t,e)}});y.expr.pseudos.animated=function(e){return y.grep(y.timers,function(t){return e===t.elem}).length};function zt(e){return y.isWindow(e)?e:e.nodeType===9&&e.defaultView}y.offset={setOffset:function(e,t,n){var i,r,o,s,a,u,f,l=y.css(e,"position"),c=y(e),d={};if(l==="static"){e.style.position="relative"}a=c.offset();o=y.css(e,"top");u=y.css(e,"left");f=(l==="absolute"||l==="fixed")&&(o+u).indexOf("auto")>-1;if(f){i=c.position();s=i.top;r=i.left}else{s=parseFloat(o)||0;r=parseFloat(u)||0}if(y.isFunction(t)){t=t.call(e,n,y.extend({},a))}if(t.top!=null){d.top=t.top-a.top+s}if(t.left!=null){d.left=t.left-a.left+r}if("using"in t){t.using.call(e,d)}else{c.css(d)}}};y.fn.extend({offset:function(e){if(arguments.length){return e===undefined?this:this.each(function(t){y.offset.setOffset(this,e,t)})}var t,n,i,r,o=this[0];if(!o){return}if(!o.getClientRects().length){return{top:0,left:0}}i=o.getBoundingClientRect();if(i.width||i.height){r=o.ownerDocument;n=zt(r);t=r.documentElement;return{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}}return i},position:function(){if(!this[0]){return}var e,t,n=this[0],i={top:0,left:0};if(y.css(n,"position")==="fixed"){t=n.getBoundingClientRect()}else{e=this.offsetParent();t=this.offset();if(!y.nodeName(e[0],"html")){i=e.offset()}i={top:i.top+y.css(e[0],"borderTopWidth",true),left:i.left+y.css(e[0],"borderLeftWidth",true)}}return{top:t.top-i.top-y.css(n,"marginTop",true),left:t.left-i.left-y.css(n,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&y.css(e,"position")==="static"){e=e.offsetParent}return e||ge})}});y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;y.fn[e]=function(i){return z(this,function(e,i,r){var o=zt(e);if(r===undefined){return o?o[t]:e[i]}if(o){o.scrollTo(!n?r:o.pageXOffset,n?r:o.pageYOffset)}else{e[i]=r}},e,i,arguments.length)}});y.each(["top","left"],function(e,t){y.cssHooks[t]=Ie(h.pixelPosition,function(e,n){if(n){n=Me(e,t);return Pe.test(n)?y(e).position()[t]+"px":n}})});y.each({Height:"height",Width:"width"},function(e,t){y.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){y.fn[i]=function(r,o){var s=arguments.length&&(n||typeof r!=="boolean"),a=n||(r===true||o===true?"margin":"border");return z(this,function(t,n,r){var o;if(y.isWindow(t)){return i.indexOf("outer")===0?t["inner"+e]:t.document.documentElement["client"+e]}if(t.nodeType===9){o=t.documentElement;return Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])}return r===undefined?y.css(t,n,a):y.style(t,n,r,a)},t,s?r:undefined,s)}})});y.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});y.parseJSON=JSON.parse;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return y})}var Xt=e.jQuery,Ut=e.$;y.noConflict=function(t){if(e.$===y){e.$=Ut}if(t&&e.jQuery===y){e.jQuery=Xt}return y};if(!t){e.jQuery=e.$=y}return y});Array.prototype.diff=function(e){return this.filter(function(t){return e.indexOf(t)<0})};
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"Other";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown"},searchString:function(r){for(var t=0;t<r.length;t++){var i=r[t].string;this.versionSearchString=r[t].subString;if(i.indexOf(r[t].subString)!==-1){return r[t].identity}}},searchVersion:function(r){var t=r.indexOf(this.versionSearchString);if(t===-1){return}var i=r.indexOf("rv:");if(this.versionSearchString==="Trident"&&i!==-1){return parseFloat(r.substring(i+3))}else{return parseFloat(r.substring(t+this.versionSearchString.length+1))}},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"MS Edge"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"}]};BrowserDetect.init();
jQuery.fn.extend({selectbox:function(e){return this.each(function(){$(this).closest(".selectOuter").css("visibility","visible").closest(".contentFilter2").css("visibility","visible");new jQuery.SelectBox(this,null,e)})}});jQuery.SelectBox=function(e,t,r){var n=r||{};n.inputClass=n.inputClass||"selectbox";n.containerClass=n.containerClass||"selectbox-wrapper";n.hoverClass=n.hoverClass||"current";n.currentClass=n.selectedClass||"selected";n.debug=n.debug||false;n.onchange=n.onchange||null;var a=e.id;var i=-1;var s=false;var o=0;var c=0;var l=$(e);var u=C(n);var d=m(n);var f=l.find("option:selected").val();var v=$("<input>").attr("type","hidden").attr("name",e.name).val(f);l.hide().before(d).before(u).before(v);l.remove();v.attr("id",a);p();d.click(function(){if(!s)u.toggle();if(u.width()<7){var e=parseInt(d.css("width"))+6;u.width(e)}setTimeout(function(){o=1},20);if(BrowserDetect.browser=="IE"&&BrowserDetect.version==7){var t=u.parent().height();var e=u.parent().width();if(u.attr("id")=="contactUs_subject_container"||u.attr("id")=="kind_container"){e-=10}u.css({"margin-top":t+"px","margin-left":-e-3+"px"})}}).focus(function(){if(u.not(":visible")){s=true;u.show();$(".selectbox-wrapper").not(u).hide();if(BrowserDetect.browser=="IE"&&BrowserDetect.version==7){var e=u.parent().height();var t=u.parent().width();if(u.attr("id")=="contactUs_subject_container"||u.attr("id")=="kind_container"){t-=10}u.css({"margin-top":e+"px","margin-left":-t-3+"px"})}}}).keydown(function(e){switch(e.keyCode){case 38:e.preventDefault();b(-1);break;case 40:e.preventDefault();b(1);break;case 13:e.preventDefault();$("li."+n.hoverClass).trigger("click");break;case 27:h();break}});$("body").click(function(){o=0;setTimeout(function(){if(o==0)h()},50)});function h(){c=0;u.hide()}function p(){u.append(k(d.attr("id"))).hide();var e=parseInt(d.css("width"))+6;u.width(e)}function C(e){var t=document.createElement("div");u=$(t);u.attr("id",a+"_container");u.addClass(e.containerClass);return u}function m(e){var t=document.createElement("input");var r=$(t);r.attr("id",a+"_input");r.attr("type","text");r.addClass(e.inputClass);r.attr("autocomplete","off");r.attr("readonly","readonly");r.attr("tabIndex",l.attr("tabindex"));return r}function b(e){var t=$("li",u);if(!t)return;i+=e;if(i<0){i=0}else if(i>=t.size()){i=t.size()-1}t.removeClass(n.hoverClass);$(t[i]).addClass(n.hoverClass);var r=$(t[i]).offset();var a=$(t[i]).height();var s=u.offset();var o=u.height();var c=o-r.top+s.top;var l=0;if(e>0&&c<=5){l=u.scrollTop();u.scrollTop(l+25)}else if(e<0&&c>=o){l=u.scrollTop();u.scrollTop(l-25)}}function g(){var e=$("li."+n.currentClass,u).get(0);if(e.id.match(/_input_-1$/)){return false}var t=(""+e.id).split("_");var r=t[t.length-1];l.val(r);d.val($(e).html());v.val($(e).attr("id").replace(d.attr("id")+"_",""));return true}function w(){return l.val()}function y(){return d.val()}function k(e){var t=document.createElement("ul");l.children("option").each(function(){var r=$(this).attr("onclick");var a=document.createElement("li");a.setAttribute("id",e+"_"+$(this).val());a.innerHTML=$(this).html();if(r!=undefined)a.onclick=function(){setTimeout(r,100)};if($(this).is(":selected")){d.val($(this).html());$(a).addClass(n.currentClass)}t.appendChild(a);$(a).mouseover(function(e){c=1;jQuery(e.target,u).addClass(n.hoverClass)}).mouseout(function(e){c=-1;jQuery(e.target,u).removeClass(n.hoverClass)}).click(function(e){$("li."+n.currentClass).removeClass(n.currentClass);$(this).addClass(n.currentClass);if(g()){h();if(typeof n.onchange=="function"){n.onchange(w())}}}).bind("select_item",function(){$("li."+n.currentClass).removeClass(n.currentClass);$(this).addClass(n.currentClass);if(g()){h();if(typeof n.onchange=="function"){n.onchange(w())}}})});return t}};
jQuery.cookie=function(e,n,o){if(arguments.length>1&&(n===null||typeof n!=="object")){o=jQuery.extend({},o);if(n===null){o.expires=-1}if(typeof o.expires==="number"){var t=o.expires,r=o.expires=new Date;r.setDate(r.getDate()+t)}return document.cookie=[encodeURIComponent(e),"=",o.raw?String(n):encodeURIComponent(String(n)),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}o=n||{};var i,p=o.raw?function(e){return e}:decodeURIComponent;return(i=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?p(i[1]):null};
window.initScroll=false;var scrollCount=0;window.scrollCheckLock=false;(function(e){e.fn.lazyload=function(t){var i={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window,top_old_fold:0,noAutoPlayOnView:false,noSrcReplace:false};if(t){e.extend(i,t)}if("scroll"==i.event){e(i.container).trigger("lazyload_clearance");var o=this;var l=null;var a=null;i.fold_top_old=0;l=function(t){if(window.scrollCheckLock)return false;window.scrollCheckLock=true;that=this;if(t=="lazyload_clearance"){var n=e.grep(o,function(t){return e(t).closest("html").length});o=e(n)}else if(o.length!=0){var r=0;if(i.container===undefined||i.container===window){var s=e(window).height();var d=e(window).scrollTop()}else{var s=e(i.container).height();var d=e(i.container).offset().top}var h=s+d;var f=i.threshold;var c=i.noAutoPlayOnView;var u=false;var p=0;var v=0;var w=false;if(i.fold_top_old==0||(d-i.fold_top_old>=s*.1||d-i.fold_top_old<=s*-.1)||window.initScroll){i.fold_top_old=d;o.each(function(){if(typeof this.element==="undefined")this.element=e(this);this.eleOffset=this.element.offset();this.eleTop=this.eleOffset.top;if(this.eleTop<0){return true}this.eleHeight=this.element.height();if((!(h<=this.eleTop-f)&&!(d>=this.eleTop&&d>=this.eleTop+f+this.eleHeight)||w===true&&this.element.is("[autoplay]"))&&!this.videoShown){if(w===true&&this.element.is("[autoplay]")){w=false}this.element.trigger("appear");this.gay=this.element.prop("tagName").toLowerCase();if(this.gay!=="video"){u=true}}if((h<=this.eleTop+this.eleHeight*.5||d>=this.eleTop&&d>=this.eleTop+this.eleHeight*.5)&&!this.videoPaused&&this.videoShown){this.element[0].pause();this.videoPaused=true}if((h<this.eleTop||d>this.eleTop+this.eleHeight)&&this.videoShown&&!this.videoLeft){this.element.parent().css({"margin-left":"-9999px"});this.videoLeft=true}if(h>=this.eleTop&&d<=this.eleTop+this.eleHeight&&this.videoShown&&this.videoLeft){this.element.parent().css({"margin-left":"0"});this.videoLeft=false}if(h>=this.eleTop+this.eleHeight*.8&&d<=this.eleTop+this.eleHeight*.2&&this.videoShown&&this.videoPaused){if(!c)this.element[0].play();this.videoPaused=false}if(this.element[0].readyState===4&&this.element.is("[autoplay]")){w=true}else{w=false}});window.initScroll=false}if(u){var n=e.grep(o,function(e){return!e.loaded});o=e(n)}}if(o.length===0){e(i.container).unbind("scroll",a);e(i.container).unbind("lazyload_clearance",a);e(i.container).unbind("lazyload_refresh",a);l=null;a=null}window.scrollCheckLock=false};a=function(e){if(!l){return}if(e.type=="scroll"){l(e.type)}else{l(e.type)}};e(i.container).bind("scroll lazyload_refresh lazyload_clearance",a)}this.each(function(){var t=this;this.gay=e(t)[0].nodeName.toLowerCase();if(t.gay!=="video"){if(undefined===e(t).attr("data-original")){e(t).attr("data-original",e(t).attr("src"))}if("scroll"!=i.event||undefined===e(t).attr("src")||i.placeholder==e(t).attr("src")||(e.abovethetop(t,i)||e.belowthefold(t,i))){if(i.placeholder&&this.gay=="img"){e(t).attr("src",i.placeholder)}else{e(t).removeAttr("src");if(e(t).attr("data-original")!==undefined&&e(t).attr("poster")===undefined){e(t).attr("poster",e(t).attr("data-original"))}}t.loaded=false}else{t.loaded=true}}else{t.loaded=false}e(t).bind("appear",function(){var o=e(t);if(!this.loaded&&o.css("display")!="none"){if(this.gay==="img"){e("<img />").bind("load",function(){o.hide().attr("src",o.attr("data-original"))[i.effect](i.effectspeed);e(this).unbind("load")}).attr("src",o.attr("data-original"));this.loaded=true;o.unbind("appear")}else if(this.gay==="video"){var l=o.find("source").attr("src");var a=o.find("source").attr("data-original");if(l===undefined&&l!==a){o.attr("src",o.find("source").attr("data-original"));o[0].load()}if(!o.is("[autoplay]")){this.loaded=true;this.videoPaused=false;this.videoShown=true}else{window.initScroll=true;o[0].pause();this.videoPaused=true;this.videoShown=true}o.unbind("appear")}}});if("scroll"!=i.event){e(t).bind(i.event,function(i){if(!t.loaded){e(t).trigger("appear")}})}});window.setTimeout(function(){l&&l(i.event)},1);return this};e.belowthefold=function(t,i){if(i.container===undefined||i.container===window){var o=e(window).height()+e(window).scrollTop()}else{var o=e(i.container).offset().top+e(i.container).height()}return o<=e(t).offset().top-i.threshold};e.abovethetop=function(t,i){if(i.container===undefined||i.container===window){var o=e(window).scrollTop()}else{var o=e(i.container).offset().top}return o>=e(t).offset().top+i.threshold+e(t).height()};e.extend(e.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})"})})(jQuery);
var fj_page_loaded_events=[];function onFJPageLoaded(e){if(typeof FJPageLoaded!="undefined"){e()}else{fj_page_loaded_events.push(e)}}var fj_isIE=/msie/.test(navigator.userAgent.toLowerCase());var fj_isOpera=/opera/.test(navigator.userAgent.toLowerCase());function onFJPageLoadedOrSelectorExists(e,a){if($(e).length==0){onFJPageLoaded(a)}else{a()}}function innerCallFJPageLoadedEvents(){if(typeof FJPageLoaded!="undefined"){var e=fj_page_loaded_events.length;for(var a=0;a<e;a++){fj_page_loaded_events[a]()}fj_page_loaded_events=[]}else{setTimeout(innerCallFJPageLoadedEvents,200)}}function callFJPageLoadedEvents(){setTimeout(innerCallFJPageLoadedEvents,500)}
document.startTest=false;document.middleClick=false;window.ScrolledDownCompleted=false;var content={is_firefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,is_chrome:navigator.userAgent.toLowerCase().indexOf("chrome")>-1,totalVideos:0,advLoaded:(new Date).getTime(),pageLoaded:true,pagesTotal:0,videoIndex:0,loadSuccess:false,appendURL:null,amountOfFails:0,loadContent:function(e,t,n,i,a,o,s,d){this.loadContent2(e,t,n,i,a,o,s,d)},loadContent2:function(e,t,n,i,a,o,s,d){var l=$(e).attr("href");var r=false;this.loadSuccess=false;var c=hiddenpagetype;var u=window.location.pathname;window.commentsLocked=true;if($(".commentsReply").length&&l.indexOf("#")!=-1){return false}if($("#uploaderContainer").length||$(".commentsReply").length){if(!dialog.confirm("Change page?","Change page while this form is open?",function(){content.loadContent2(e,t,n,i,a,o)})){return false}}if(c==="home"){r=true}ajaxPageCounter++;if(ajaxPageCounter>=25&&content.is_firefox||ajaxPageCounter>=25&&isMobile||ajaxPageCounter>=100){window.location=l;return false}if(typeof l!=="undefined"&&(l.match(/^\/items/gi)||l.match(/^\/party/gi))||window.location.pathname.match(/^\/items/gi)||window.location.pathname.match(/^\/party/gi)||!enableAjaxLoading){window.location=l;return false}if(document.startTest===false){document.startTest=true;if(typeof l!="undefined"&&l.match(/^\/nsfw\//)){window.hiddenpageclass="mature"}else{window.hiddenpageclass=""}var f;var h;switch(window.hiddenpageclass){case"mature":f="bounce.gif",h=.08;break;default:f="blueloader.gif";h=.05}exploadLoad='<img class="loadRotate" src="'+CACHED_MEDIA_URL+"site/images/jokes/loaders/"+f+'">';var p=$(window).width()*h;$(exploadLoad).appendTo("body").css({position:"fixed",width:p+"px",top:"calc(40% - "+p*.5+"px)",left:"calc(50% - "+p*.5+"px)","z-index":"99999"}).each(function(){setTimeout(function(){this.offsetHeight;$(this).prop("src","").remove()}.bind(this),800)});(function(){timeoutTest=setTimeout(function(){document.startTest=false;content.pageLoaded=true},5e3)})()}else{return false}if(!this.pageLoaded){return false}var m=null;if($(e).hasClass("commentNumber")){m=parseInt($(e).text().replace("#","").replace("to ",""))}if(m&&$(".commentsReply:visible").length){return false}this.callback=a;this.pageLoaded=false;if(!l.match(/\/$/)){var g="/?ajaxLoad=1"}else{var g="?ajaxLoad=1"}l=l.replace("http://"+SITE_URL,"");l=l.replace("https://"+SITE_URL,"");if(typeof o!=="undefined"&&o!=null){switch(o){case"leftMenu":g+="&buttonClicked=leftMenu";break;case"trendingBar":g+="&buttonClicked=trendingBar";break;case"prevNext":g+="&buttonClicked=prevNext";break}}if((s===-1||s===1)&&!isNaN(d)){requestType="post";requestData={thumb:s,contentId:d}}else{requestType="get";requestData=null}return false},onBrowserHistory:function(e){if(e.state!=null&&typeof e.state=="object"){content.loadContent('<a href="'+e.state.page+'"></a>',true,true)}},prepareHtml:function(e){return e?e.replace(/<div class="hidden script"([^<]*)<\/div>/gi,"<script$1</script>"):e},updateDelayMinutes:function(e){var t=parseInt($("#date").val())||0;$("#date").val(t+e);uC.rDC();return false},clearViewedPages:function(){dialog.confirmWithCallback(siteTitle,"Clear content you already viewed?",function(){$.ajax({type:"post",url:"/ajax/clearViewedPages/",success:function(e){content.loadContent('<a href="'+window.location.pathname+'"></a>',true)},error:function(){}})});return false},switchHideViewedContent:function(e){if(e!="1"&&e!="0"){e="1"}dialog.confirmWithCallback(siteTitle,"Do you want to "+(e=="0"?"stop hiding":"hide")+" viewed content?",function(){$.ajax({type:"post",url:"/userbar/switchHideViewedContent",data:{type:e},dataType:"json",success:function(e){if(e.type=="success"){content.loadContent('<a href="'+window.location.pathname+'"></a>',true)}else{f.e(e.msg)}}})},null,"Yes");return false},loadAllAdditionalContent:function(e){var t="/site/js/lb/loading.gif";var n='<br /><img style="margin:6px 0 0;" src="'+t+'" />';$(n).appendTo($(e));$.ajax({type:"post",url:"/ajax/loadAllAdditionalContent/",data:{contentId:contentId},success:function(t){$("#container4MoreContent").html(t);$(e).remove()},error:function(){}});return false},playGif:function(e){var t=$(e).closest("div").find("img");t.attr("src",t.attr("data-src")).removeClass("gif-play");$(e).closest("div").find(".glyphicon").remove();return false},makeVideo:function(e){var t=$(e).attr("data-noncachedsrc");var n=$(e).attr("data-cachedvideosrc");if(n){path=n}else{path=t}var i="webm";if(path.substr(-4)==".mp4"){i="mp4"}var a=videoVolumeAtLowest===true?' onloadstart="this.volume=0" ':"";var o='<video autoplay class="cdn_switchable_video" id="cnt-video-'+this.videoIndex+'"'+(t?' data-noncachedsrc="'+t+'" ':" ")+'poster="'+$(e).attr("data-poster")+'" '+"controls "+a+'ondragstart="return comments.onVideoDrag(this, event);">'+'<source src="'+path+'" type="video/'+i+'" />'+"Your browser does not support the video tag."+"</video>"+'<div class="cnt-video-play"><!--  --></div>';$(o).insertAfter($(e));var s=$("#cnt-video-"+this.videoIndex+"");var d=s.closest("div").find(".cnt-video-play");s.lazyload({placeholder:SCRIPT_URL+"site/funnyjunk/images/transparent_pixel.gif",threshold:1e3,noAutoPlayOnView:true,noSrcReplace:true});d.on("click",function(){$(this).hide();s.get(0).play()});s.on("click",function(e){if(window.playLocked)return false;if(e.offsetY<$(this).height()-36){if(this.paused){this.play()}else{this.pause()}}});s.on("pause",function(){$(d).show()});s.on("play",function(){$(d).hide()});s.mousedown(inner_cdn_switch_video);vExpand.videoExpand();function l(e){if(e.get(0).paused)e.trigger("play")}setTimeout(l,100,s);$(e).remove();this.videoIndex++;clearTimeout(window.hoverPlay);return false},playVideo:function(e,t){var n=$(e).closest("div").find("video").get(0);var i=$(e).attr("rel");if(!i){$(n).on("pause",function(){$(e).closest("div").find(".cnt-video-play").show()});$(n).on("play",function(){$(e).closest("div").find(".cnt-video-play").hide()});$(e).attr("rel",true)}if(t.offsetY<$(n).height()-36){if(n.paused){n.play()}else{n.pause()}}return false},removeFilterAndGo:function(e){location.href=e},setFilterAndGo:function(e,t){location.href=t},justGo:function(e){location.href=e},initThumbs:function(){if(hiddendisablethumbs=="true"){content.setThumbs(true,true)}else{content.setThumbs(hiddenthumbdirection==="up"?true:false,hiddenthumbdirection==="down"?true:false)}},setThumbs:function(e,t){if(content.areThumbsDisabled){return}var n=$(".tmbs");n.empty();isUp=e?"tUpBig_i":"tUpBig";isDown=t?"tDnBig_i":"tDnBig";n.each(function(){display=$(this).hasClass("block")?"block":"inline-block";var e=$('<a style="position:relative" title="Thumb Up (Ctrl + Up Arrow)"></a>').attr({href:"#"}).addClass(isUp).css("display",display).click(function(){content.cVote("up");return false});if(($(this).hasClass("block")||$(this).hasClass("topThumbs"))&&$("#cNext_floating").length){var t=$("<i></i>").click(function(e){if(enableAjaxLoading&&typeof contentId!==undefined&&!isNaN(contentId)){content.loadContent($("#cNext_floating"),null,null,null,null,"prevNext",1,contentId);return false}else{if(!content.isThumbingActive&&$(this).parent().hasClass("tUpBig_i")){content.isThumbingActive=true;setTimeout("content.isThumbingActive = false;",1e3);$("#cNext_floating")[0].click();return false}else{content.cVote("up",true);return false}}});e.append(t)}$(this).append(e);var e=$('<a style="position:relative" title="Thumb Down (Ctrl + Down Arrow)"></a>').attr({href:"#"}).addClass(isDown).css("display",display).click(function(){content.cVote("down");return false});$(this).append(e);if(($(this).hasClass("block")||$(this).hasClass("topThumbs"))&&$("#cNext_floating").length){var n=$("<i></i>").click(function(e){if(enableAjaxLoading&&typeof contentId!==undefined&&!isNaN(contentId)){content.loadContent($("#cNext_floating"),null,null,null,null,"prevNext",-1,contentId);return false}else{if(!content.isThumbingActive&&$(this).parent().hasClass("tDnBig_i")){content.isThumbingActive=true;setTimeout("content.isThumbingActive = false;",1e3);$("#cNext_floating")[0].click();return false}else{content.cVote("down",true);return false}}});e.append(n)}if($(this).hasClass("block")&&$("#cNext_floating").length){t.add(n).mouseover(function(){var e=$(this).parent();e.addClass("hover");if(e.is(".tUpBig")||e.is(".tDnBig")){var t="down";var n="Ctrl";if(e.is(".tUpBig")){t="up";n="Shift"}$(this).attr("title","Thumb "+t+" & View next upload ("+n+" + Right Arrow)")}else $(this).attr("title","View next upload (Right Arrow)")}).mouseout(function(){$(this).parent().removeClass("hover")})}})},areThumbsDisabled:false,disableThumbs:function(){$(".tmbs .tUpBig").removeClass("tUpBig").addClass("tUpBig_i");$(".tmbs .tDnBig").removeClass("tDnBig").addClass("tDnBig_i")},enableThumbs:function(){$(".tmbs .tUpBig_i").removeClass("tUpBig_i").addClass("tUpBig");$(".tmbs .tDnBig_i").removeClass("tDnBig_i").addClass("tDnBig")},updateRating:function(e,t){var n=$(".pointsBig");var i=parseInt(n.text());i+=t;if(n.text()!="(Hidden)"){if(i<0)n.removeClass("thGreen").addClass("thRed").text(i);else if(i==0)n.removeClass("thRed").addClass("thGreen").text(i);else n.removeClass("thRed").addClass("thGreen").text("+"+i)}if(t==-e){content.setThumbs(false,false)}else if(t>0){setTimeout(function(){content.setThumbs(true,false)},0)}else if(t<0){setTimeout(function(){content.setThumbs(false,true)},0)}},isThumbingActive:false,cVote:function(e,t){if(thumbsLocked||hiddendisablethumbs)return;thumbsLocked=true;if(content.isThumbingActive){return}if(this.disableContentThumbs)return false;content.isThumbingActive=true;content.areThumbsDisabled=$(".tmbs>a").length==0;var n="/thumb/contentadd/";var i=e=="up"?1:-1;content.disableThumbs();var a=i==1?$(".tUpBig_i"):$(".tDnBig_i");if(typeof t=="undefined"&&!t)a.addClass("bigThW8");$.ajax({type:"post",url:n,data:{contentId:contentId,type:e,node_id:nze.node_id},success:function(e){if(/^OK/.test(e)){var n=parseInt(e.split("|")[1]);a.removeClass("bigThW8");content.updateRating(i,n)}else if(/^FAIL/.test(e)){var n=e.split("|")[1];if(n=="NOT RELEASED"){f.e("Content has not been released yet.")}content.amountOfFails++}a.removeClass("bigThW8");content.isThumbingActive=false;thumbsLocked=false;if(typeof t!="undefined"&&t){$("#cNext_floating")[0].click()}},error:function(){thumbsLocked=false;content.enableThumbs();content.isThumbingActive=false}})},updateThumb:function(e,t,n,i){$.ajax({type:"get",url:e,success:function(e){var a=e.split("|");if(/^OK/.test(e)){var o=t=="up"?1:-1;var s=parseInt(a[1]);if(n=="thGreen"){content.updateRating(o,s)}else{if(!i){}else{var d=parseInt(/\d*$/.exec(i));comments.updateRating(d,o,s)}}}else if(/^alert\|/.test(e)){}else if(/^logalert\|/.test(e)){if(loggedIn()){}else{loginOpen(a[1])}}else{}},error:function(){}})},loadContentsByAuthor:function(e,t,n){if(n==undefined){n=false}var i=$("<div>").addClass("w8");if(n===false){var a="";if(e!=undefined){a="Other contents by "+e}var o="<div id='authorContents'>";o+="</div>";var s=$("<div>").html(o);s.dialog({resizable:false,title:a,position:{my:"center",at:"center top"},width:550,height:120,close:function(){$(this).dialog("destroy").remove()},buttons:{Close:function(){$(this).dialog("close")}},open:function(){$("#authorContents").append(i)}});s.dialog("open")}else{$("#authorContents").append(i)}maxHeight=520;$.ajax({url:"/content/getByAuthor/"+e+"/"+t,type:"GET",success:function(e){$("#authorContents").html(e);$("#authorContents li img").lazyload({placeholder:SCRIPT_URL+"site/funnyjunk/images/transparent_pixel.gif",threshold:200});if(n===false){height=$("#authorContents ul.menu1").height()+110;if(height>maxHeight){height=maxHeight}s.dialog("option","height",height)}if(t=="thumbs"){$("#contentMostThumbs").addClass("selected")}else if(t=="views"){$("#contentMostViewed").addClass("selected")}else{$("#contentNewest").addClass("selected")}}})},canRunAds:function(){$.getScript("/site/js/ads.js").done(function(e,t){if($.cookie("aBlckd"))$.cookie("aBlckd","",{path:"/",expires:-1})}).fail(function(e,t,n){if(!$.cookie("aBlckd"))$.cookie("aBlckd",1,{path:"/",expires:2})})},setClickHandlers:{general:function(e){if(!enableAjaxLoading)return false},userbar:function(){},comments:function(){},prevNext:function(){},thumbs:function(e){},thumbsProfile:function(e){},menus:function(e){},homePage:function(e){},favorites:function(e){},tags:function(e){},sectionsNav:function(e){},collections:function(e){},profileComments:function(e){}}};var ajaxPageCounter=0;window.addEventListener("popstate",content.onBrowserHistory,false);var contentInfoField=$("#contentInfoField");var hiddencreationdate=contentInfoField.attr("data-hiddencreationdate");var hiddenpagetype=contentInfoField.attr("data-hiddenpagetype");var hiddencontentid=contentInfoField.attr("data-hiddencontentid");var hiddentitle=contentInfoField.attr("data-hiddenTitle");var hiddenthumbssum=contentInfoField.attr("data-hiddenthumbssum");var hiddendisablethumbs=contentInfoField.attr("data-hiddendisablethumbs");var hiddenpageclass=contentInfoField.attr("data-hiddenpageclass");var hiddenthumbdirection=contentInfoField.attr("data-thumbdirection");if(typeof hiddencreationdate!=="undefined"&&hiddencreationdate!==""){dateSplit=hiddencreationdate.split(/[- :]/);hiddencreationdate2=dateSplit[0]+"-"+dateSplit[1]+"-"+dateSplit[2]}onFJPageLoaded(function(){content.setClickHandlers.general(hiddenpagetype);if(hiddenpagetype=="profile")content.setClickHandlers.profileComments()});contentInfoField.empty().remove();window.jokeLoop=null;var isIE=navigator.appVersion.indexOf("MSIE")!=-1?true:false;var isWin=navigator.appVersion.toLowerCase().indexOf("win")!=-1?true:false;var isOpera=navigator.userAgent.indexOf("Opera")!=-1?true:false;window.onload=function(){var e=window.performance.timing.domContentLoadedEventEnd-window.performance.timing.navigationStart;console.log("Page load time is "+e)};
sBar={barShown:false,scrollStarted:false,fold_top_old:0,fixed:false,lockProc:false,init:function(){sBar.scrollstart();if(showSideScrollingThumbs===false||!$(".cImg").length)return false;sBar.cImg=$("#mediaContainer");sBar.top_start=sBar.cImg.offset().top;sBar.cimg_height=sBar.cImg.height();sBar.floatingBar=$("#floating-bar-right");sBar.floating_bar_height=sBar.floatingBar.outerHeight();sBar.targetObjs=$("#floating-bar-left, #floating-bar-right");sBar.right=$("#floating-bar-right");sBar.sideBar=$("#columnLeftSeparator");sBar.sideMarginTop=parseInt(sBar.sideBar.css("margin-left"))+10;sBar.bottomNavMarginLeft=-194+parseInt(sBar.sideBar.css("margin-left"))/2;sBar.threshold=sBar.cimg_height+sBar.top_start;sBar.barWidth=0;sBar.bSel=$("#bottomNav");sBar.sidebarPos=parseInt(sBar.sideBar.css("margin-left"));sBar.windowWidth=0;sBar.contentLeft=$("#contentLeft");sBar.running=false;sBar.barShown=false;if(typeof sBar.cImg!="undefined"&&$(".cImg").length&&!sBar.running){sBar.drawThumbs()}if(isMobile)sBar.drawBar();$(window).resize(function(){clearTimeout(window.cuntFaggot);window.cuntFaggot=setTimeout(function(){if(sBar.fixed){if($(window).width()>=1e3){sBar.right.css("left",sBar.cImg.offset().left+sBar.cImg.width()-90+"px");sBar.targetObjs.addClass("fixedSBar")}else{sBar.right.css("left","");sBar.targetObjs.removeClass("fixedSBar")}}},250)})},drawBar:function(){sBar.bSel.show();sBar.barShown=true;if($(window).width()<=600)$(".fj-chatbar").css("bottom","47px");else $(".fj-chatbar").css("bottom","0")},friendsCollision:function(){return false},drawThumbs:function(){sBar.running=true;if(showSideScrollingThumbs===false)return false;if($(".cImg, #flashmovie").offset()!=null&&$(".cImg").length){if(sBar.window_scroll_top>=sBar.threshold&&!sBar.barShown){sBar.drawBar()}$(window).resize(function(){clearTimeout(window.timedResize);window.timedResize=setTimeout(function(){if(sBar.windowWidth<1e3){if(userLogged===true)sBar.friendsCollision()}},250)})}},scrollstart:function(){if(sBar.scrollStarted)return false;sBar.scrollStarted=true;$(window).on("scroll",function(){sBar.sBarCheck(false)})},sBarCheck:function(r){if(sBar.lockProc&&!r){return false}if(!r){sBar.lockProc=true}else{}sBar.window_scroll_top=$(window).scrollTop();sBar.fold_height=$(window).height();if(sBar.fold_top_old===0||(sBar.window_scroll_top-sBar.fold_top_old>=sBar.fold_height*.05||sBar.window_scroll_top-sBar.fold_top_old<=sBar.fold_height*-.05)||r){sBar.fold_top_old=sBar.window_scroll_top;if(typeof paginationArrowsPositions!=="undefined")paginationArrowsPositions();if(!$(".cImg").length)return false;sBar.top_start=sBar.cImg.offset().top;sBar.cimg_height=sBar.cImg.height();sBar.threshold=sBar.cimg_height+sBar.top_start;sBar.windowWidth=$(window).width();if(sBar.window_scroll_top>=sBar.threshold-250&&!sBar.barShown){sBar.drawBar()}else if(sBar.window_scroll_top<sBar.threshold-250&&sBar.barShown&&!isMobile){sBar.bSel.hide();$(".fj-chatbar").css("bottom","0");sBar.barShown=false}if(sBar.windowWidth>1e3){if(sBar.window_scroll_top+100>=sBar.top_start&&sBar.window_scroll_top<=sBar.threshold-280){if(!sBar.fixed){sBar.targetObjs.addClass("fixedSBar");sBar.fixed=true;sBar.right.css("left",sBar.cImg.offset().left+sBar.cImg.width()-90+"px")}}else if(sBar.window_scroll_top+100<sBar.top_start){if(sBar.fixed){sBar.targetObjs.removeClass("fixedSBar");sBar.fixed=false;sBar.right.css("left","")}sBar.targetObjs.css({marginTop:10})}else if(sBar.window_scroll_top>=sBar.threshold-260){if(sBar.fixed){sBar.targetObjs.removeClass("fixedSBar");sBar.right.css("left","");sBar.fixed=false}sBar.targetObjs.css({marginTop:sBar.cimg_height-280+60})}}}if(!r){clearTimeout(window.sBarTimeLock);clearTimeout(window.resetLockProc);window.sBarTimeLock=setTimeout(function(){sBar.sBarCheck(true)},600);window.resetLockProc=setTimeout(function(){sBar.lockProc=false},200)}}};
function setCookie2(e,s){$.cookie(e,s,{expires:1,path:"/"})}function reloadLatestUsers(){$.ajax({url:"/ajax/reloadLatestUsers",type:"post",data:{contentId:contentId,pageType:pageType||""},success:function(e){if(!e){$(".latest-users-list").hide()}else{$(".latest-users-list").show();$("#latest-users-list").html(e).show()}}});return false}function onDropdownClick(e){$(e).closest("ul").find(".selected").removeClass("selected");$(e).addClass("selected");$(e).closest("div.btn-group").find(".dropdown-value").html($(e).html());return false}function commTimesS(){if(typeof commTimes==="undefined")return false;aJsTime.forEach(function(e){commTimes.push(e);console.log("set "+e)});aJsTime=[];var e=Math.floor(Date.now()/1e3);for(j=0;j<commTimes.length;j++){if(typeof commTimes[j][2]==="undefined")commTimes[j][2]=e}}function flagTimes(){if(typeof commTimesFlagged==="undefined")return false;var e=Math.floor(Date.now()/1e3);for(j=0;j<commTimesFlagged.length;j++){commTimesFlagged[j][2]=e}}
$("select:not(.noSelectbox)").selectbox();onFJPageLoaded(function(){$("select:not(.noSelectbox)").selectbox()});
function hoverPlayVideos(){if(!isMobile){$(".cnt-video-cont:not(.boxed), .img-yvideo-container:not(.boxed), .cm-video-cont:not(.boxed)").addClass("boxed").off("mouseenter").on("mouseenter",function(t){if(typeof this.stop!="undefined")return false;if(typeof this.hoverPlayStart!="undefined"&&this.hoverPlayStart)return false;this.hoverPlayStart=true;var e='<div class="playCount" style="position: absolute; font-size: 19px;'+'text-align:center;width:100%;bottom: 20%;pointer-events: none;">Playing in 1 second...</div>';$(this).append(e);window.hoverPlay=setTimeout(function(){$(".playCount").remove();if(typeof this.stop!="undefined")return false;$(this).trigger("click")}.bind(this),1e3);$(this).on("mouseleave",function(){if(typeof this.stop!="undefined")return false;this.hoverPlayStart=false;clearTimeout(window.hoverPlay);$(".playCount").remove()});$(this).on("click",function(){this.stop=false;return true})})}}function content_initVideos(){var t=$("#contentDetail video, #contentDetail img.ll");t.lazyload({placeholder:SCRIPT_URL+"site/funnyjunk/images/transparent_pixel.gif",threshold:1e3});$(".ctYT").each(function(){if(!this.complete||(typeof this.naturalWidth=="undefined"||this.naturalWidth<=200)){$(this).attr("src","https://img.youtube.com/vi/"+$(this).attr("data-yt")+"/hqdefault.jpg")}});$(".img-yvideo-container").each(function(t,e){$(this).on("click",function(){var t=$(this).find("img").attr("data-yt");var e=$(this).find("img").attr("data-start-time");if(typeof e!=="undefined"&&e!==""&&e!=="0"){e="&start="+e}else{e=""}$(this).replaceWith(""+""+'<div class="ytvid"><iframe id="ytplayer" type="text/html" width="100%" height="100%"'+' style="display: block; margin: 0 auto;" '+'src="https://www.youtube.com/embed/'+t+"?autoplay=1&controls=1"+e+'&origin=http://funnyjunk.com" '+'frameborder="0" allowfullscreen="1"/></iframe></div>')})})}function commYoutube(){$(".media-youtube:not(.boxed)").addClass("boxed").each(function(t,e){$(this).off("click").on("click",function(){$(this).hide().after(""+""+'<div class="ytComVid"><a href="#!" style="display:block;position: relative;" onclick="$.when( $(this).parent().prev(\'.media-youtube\').show() ).then( $(this).parent().remove() );">close</a><iframe id="ytplayer" type="text/html" width="100%" height="100%"'+' style="display: block; margin: 0 auto;" '+'src="https://www.youtube.com/embed/'+$(this).attr("rel")+'?autoplay=1&controls=1&origin=http://funnyjunk.com" '+'frameborder="0" allowfullscreen="1"/></iframe></div>');return false})})}function comments_initLazyImages(t){if(showCommentImages===false){var e=CACHED_MEDIA_URL+"site/images/showcommentimage.png";$(".av_img:not(.vimg)").each(function(){$(this).attr({src:e,"data-width":$(this).css("width"),"data-height":$(this).css("height")}).css({width:"143px",height:"55px"}).on("click",function(){$(this).attr({src:$(this).attr("data-original")}).css({width:$(this).attr("data-width"),height:$(this).attr("data-height")}).off().parent().lightBox();comments.initImagesOnMouseHover($(this).parent().parent());return false})});var i=$(".avamin img[data-original], #ajax_comm video, #ajax_comm1 video")}else{if(typeof t==="undefined"){var i=$("#ajax_comm img[data-original], #ajax_comm1 img[data-original], #ajax_comm video")}else{var i=$(t).find("img[data-original], img[data-original], video")}}i.lazyload({placeholder:SCRIPT_URL+"site/funnyjunk/images/transparent_pixel.gif",threshold:200})}function page_initLazyImages(){$("img.lazyload_img:not(.av_img)[src*='transparent_pixel.gif']").lazyload({placeholder:SCRIPT_URL+"site/funnyjunk/images/transparent_pixel.gif",threshold:400});if($(".m-inner").offset().left>5){showMobileLeftColImages()}}var vExpand={gifMovingStarted:false,gifMovingStartPosition:{x:0,y:0},gifElement:null,gifElementWidth:0,gifElementHeight:0,startedMoving:false,gifStartMoving:function(t){this.gifMovingStarted=true;this.gifMovingStartPosition={x:t.pageX,y:t.pageY};this.gifElement=$(t.target);this.gifElementWidth=$(t.target).width();this.gifElementHeight=$(t.target).height()},gifMoving:function(t){var e=this.gifMovingStartPosition.x-t.pageX;var i=this.gifMovingStartPosition.y-t.pageY;var o=Math.max(e,i);var n=this.gifElementHeight*(this.gifElementWidth-o*2)/this.gifElementWidth;this.gifElement.css({width:this.gifElementWidth-o*2,height:"auto",maxWidth:this.gifElementWidth-o*2,maxHeight:n,cursor:"nw-resize"});this.gifElement.closest(".contentContainer").css("max-width",this.gifElementWidth-o*2)},gifStopMoving:function(t){this.gifMovingStarted=false;this.gifMovingStartPosition={x:0,y:0};this.gifElement.css({cursor:"default"});this.gifElement=null;this.gifElementWidth=0},videoExpand:function(){var t=$("#mediaContainer");if(!isMobile){t.find("video:not(.resizeable)").addClass("resizeable").on("mousedown",function(t){this.startedMoving=true;var e=$(t.target);var i=!e.closest("a").length;if(i){this.gifStartMoving(t);return false}return true}.bind(this)).on("mousemove",function(t){if(this.startedMoving){if(!window.playLocked){window.playLockTimeout=setTimeout(function(){window.playLocked=true;clearInterval(window.playLockTimeout)},150)}}if(this.gifMovingStarted){this.gifMoving(t)}}.bind(this)).on("mouseup",function(t){this.startedMoving=false;clearTimeout(window.playLockTimeout);window.playLockTimeout=setTimeout(function(){window.playLocked=false},50);if(this.gifMovingStarted){this.gifStopMoving(t)}}.bind(this)).on("mouseleave",function(t){if(this.gifMovingStarted){this.gifStopMoving(t)}}.bind(this)).closest("div").append('<div class="gifResize"><!-- --></div>').css({position:"relative"})}}};window.playLocked=false;aJsTime=[];function updateCommTimes(){if(typeof commTimes==="undefined"||commTimes.length===0)return false;var t=Math.floor(Date.now()/1e3);var e;for(j=commTimes.length-1;j>-1;j--){e=t-commTimes[j][2]+commTimes[j][0];if(e>=86400)continue;var i=$("#cc"+commTimes[j][1]+" .date");if(i.length>0){i.text("("+timeSince(e)+")")}else{commTimes.splice(j,1)}}for(j=0;j<commTimesFlagged.length;j++){e=t-commTimesFlagged[j][2]+commTimesFlagged[j][0];if(e>=2592e3)continue;$("#cc"+commTimesFlagged[j][1]+" .flagLiveDate").text("("+timeSince(e)+")")}if(commTimes.length>50){clearInterval(window.commTimesTimer);window.commTimesTimer=setInterval(updateCommTimes,1e4)}else if(commTimes.length>200){clearInterval(window.commTimesTimer);window.commTimesTimer=setInterval(updateCommTimes,2e4)}else if(commTimes.length>400){clearInterval(window.commTimesTimer);window.commTimesTimer=setInterval(updateCommTimes,6e4)}}function timeSince(t){var e=t;var i=Math.floor(e/31536e3);i=Math.floor(e/3600);if(i>1){return i+"h ago"}i=Math.floor(e/60);if(i>1){return i+"m ago"}return Math.floor(e)+"s ago"}function updateItemTimes(){if(typeof itemJsTime==="undefined"||itemJsTime.length===0)return false;var t=new Date;t=t.getMilliseconds();var e,i,o,n=[];var a=Math.floor(Date.now()/100);e=a-epochDiffServer;var s=itemJsTime.length;for(var r=s-1;r>=0;r--){i=e-itemJsTime[r][2];o=itemJsTime[r][0]-i;o/=10;o=o.toFixed(1);if(o>0){$("#iTime"+itemJsTime[r][1]).text(o+"s")}else{n.push(itemJsTime[r][1]);itemJsTime.splice(r,1)}}for(tr=0;tr<n.length;tr++){$("#itemId"+n[tr]).remove();if($("#itemPickup"+n[tr]).length){$("#itemPickup"+n[tr]).parent().parent().remove();f.e("Sorry, this item has expired.")}}n=[]}function removeItem(t){$("#itemId"+t).remove()}window.commTimesTimer=setInterval(updateCommTimes,5e3);
if($("#siteContent").length>0&&$(".tmbs").length==2){content.initThumbs()}else{setTimeout(function(){if($("#siteContent").length>0&&$(".tmbs").length==2){content.initThumbs()}else{onFJPageLoaded(function(){content.initThumbs()})}},500)}function getCommentId(t){var n=null;if(t.attr("id")!=undefined){n=parseInt(t.attr("id").replace("cc",""),10)}if(n==null||isNaN(n)){var e=t.parent();if(e.attr("id")!=undefined){n=parseInt(e.attr("id").replace("cc",""),10)}if(n==null||isNaN(n)){e=e.parent();if(e.attr("id")!=undefined){n=parseInt(e.attr("id").replace("cc",""),10)}if(n==null||isNaN(n)){e=e.parent();if(e.attr("id")!=undefined){n=parseInt(e.attr("id").replace("cc",""),10)}}}}return n}function comments_setThumbs(t,n,e){var i=$("#cmn_thumb_"+t);i.children(".thWait").remove();$("#up_"+t).removeClass("thUp thUp_i").addClass(n?"thUp_i":"thUp").show().blur();$("#dn_"+t).removeClass("thDn thDn_i").addClass(e?"thDn_i":"thDn").show().blur()}function comments_initReply(t){if(typeof t==="undefined"){var n=$("#ajax_comm div.com")}else{var n=$(t)}n.each(function(){var t=$(this).find(".commentReplyLink");if(t.length){$(this).off("dblclick").on("dblclick",function(){if(window.clickToReply)return false;if($(".commentsReply").length){return false}$(this).closest("div.com").find(".commentReplyLink").click()}).off("click").on("click",".commentNumber",function(t){return comments.onCommentNumberClick(t)})}})}
var toolbar={setDefaultInputValue:function(t,s){t.each(function(){if($(this).val()==""||$(this).val()==s){$(this).css("font-style","italic");$(this).val(s)}}).blur(function(){if($(this).val()==""){$(this).css("font-style","italic");$(this).val(s)}else if($(this).val()!=s){$(this).css("font-style","normal")}}).focus(function(){if($(this).val()==s){$(this).css("font-style","normal");$(this).val("")}}).parents("form").submit(function(){if(t.val()==s)t.val("")})}};onFJPageLoaded(function(){toolbar.setDefaultInputValue($("#searchInput"),"Enter keywords...");toolbar.setDefaultInputValue($("#searchInput2"),"Enter keywords...")});
onFJPageLoaded(function(){if(typeof onJQueryReady!="undefined"){onJQueryReady()}if(typeof onJQueryReadyPost!="undefined"){onJQueryReadyPost()}});
function loadPostScripts(e,t,a){var o=document.getElementsByTagName("head")[0]||document.body;var n=/chrome/.test(navigator.userAgent.toLowerCase());var r=/msie/.test(navigator.userAgent.toLowerCase());var s=/opera/.test(navigator.userAgent.toLowerCase());var d=function(e,t){var n=document.createElement("script");n.src=e;n.async=a;n.onload=n.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){n.onreadystatechange=n.onload=null;t()}};o.appendChild(n)};var i=e.length;if(i===0){t&&t()}else{var c=0;var l=function(){if(++c==i){window.setTimeout(function(){t&&t()},1)}};for(var v=0;v<i;v++){d(e[v],l)}}}callFJPageLoadedEvents();
!function(e,n,t){function r(e,n){return typeof e===n}function s(){var e,n,t,s,o,i,a;for(var l in x)if(x.hasOwnProperty(l)){if(e=[],n=x[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(s=r(n.fn,"function")?n.fn():n.fn,o=0;o<e.length;o++)i=e[o],a=i.split("."),1===a.length?w[a[0]]=s:(!w[a[0]]||w[a[0]]instanceof Boolean||(w[a[0]]=new Boolean(w[a[0]])),w[a[0]][a[1]]=s),g.push((s?"":"no-")+a.join("-"))}}function o(e){var n=b.className,t=w._config.classPrefix||"";if(S&&(n=n.baseVal),w._config.enableJSClass){var r=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(r,"$1"+t+"js$2")}w._config.enableClasses&&(n+=" "+t+e.join(" "+t),S?b.className.baseVal=n:b.className=n)}function i(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):S?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function a(e,n){return!!~(""+e).indexOf(n)}function l(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,"")}function f(e,n){return function(){return e.apply(n,arguments)}}function u(e,n,t){var s;for(var o in e)if(e[o]in n)return t===!1?e[o]:(s=n[e[o]],r(s,"function")?f(s,t||n):s);return!1}function d(e){return e.replace(/([A-Z])/g,function(e,n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-")}function p(){var e=n.body;return e||(e=i(S?"svg":"body"),e.fake=!0),e}function c(e,t,r,s){var o,a,l,f,u="modernizr",d=i("div"),c=p();if(parseInt(r,10))for(;r--;)l=i("div"),l.id=s?s[r]:u+(r+1),d.appendChild(l);return o=i("style"),o.type="text/css",o.id="s"+u,(c.fake?c:d).appendChild(o),c.appendChild(d),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(n.createTextNode(e)),d.id=u,c.fake&&(c.style.background="",c.style.overflow="hidden",f=b.style.overflow,b.style.overflow="hidden",b.appendChild(c)),a=t(d,e),c.fake?(c.parentNode.removeChild(c),b.style.overflow=f,b.offsetHeight):d.parentNode.removeChild(d),!!a}function m(n,r){var s=n.length;if("CSS"in e&&"supports"in e.CSS){for(;s--;)if(e.CSS.supports(d(n[s]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];s--;)o.push("("+d(n[s])+":"+r+")");return o=o.join(" or "),c("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return t}function v(e,n,s,o){function f(){d&&(delete k.style,delete k.modElem)}if(o=r(o,"undefined")?!1:o,!r(s,"undefined")){var u=m(e,s);if(!r(u,"undefined"))return u}for(var d,p,c,v,h,y=["modernizr","tspan","samp"];!k.style&&y.length;)d=!0,k.modElem=i(y.shift()),k.style=k.modElem.style;for(c=e.length,p=0;c>p;p++)if(v=e[p],h=k.style[v],a(v,"-")&&(v=l(v)),k.style[v]!==t){if(o||r(s,"undefined"))return f(),"pfx"==n?v:!0;try{k.style[v]=s}catch(e){}if(k.style[v]!=h)return f(),"pfx"==n?v:!0}return f(),!1}function h(e,n,t,s,o){var i=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+T.join(i+" ")+i).split(" ");return r(n,"string")||r(n,"undefined")?v(a,n,s,o):(a=(e+" "+E.join(i+" ")+i).split(" "),u(a,n,t))}function y(e,n,r){return h(e,t,t,n,r)}var g=[],x=[],C={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){x.push({name:e,fn:n,options:t})},addAsyncTest:function(e){x.push({name:null,fn:e})}},w=function(){};w.prototype=C,w=new w;var b=n.documentElement,S="svg"===b.nodeName.toLowerCase();w.addTest("csspointerevents",function(){var e=i("a").style;return e.cssText="pointer-events:auto","auto"===e.pointerEvents});var _="Moz O ms Webkit",T=C._config.usePrefixes?_.split(" "):[];C._cssomPrefixes=T;var E=C._config.usePrefixes?_.toLowerCase().split(" "):[];C._domPrefixes=E;var P={elem:i("modernizr")};w._q.push(function(){delete P.elem});var k={style:P.elem.style};w._q.unshift(function(){delete k.style}),C.testAllProps=h,C.testAllProps=y,w.addTest("backgroundcliptext",function(){return y("backgroundClip","text")}),w.addTest("flexbox",y("flexBasis","1px",!0)),w.addTest("flexboxlegacy",y("boxDirection","reverse",!0)),w.addTest("flexwrap",y("flexWrap","wrap",!0)),s(),o(g),delete C.addTest,delete C.addAsyncTest;for(var z=0;z<w._q.length;z++)w._q[z]();e.Modernizr=w}(window,document);
(function(t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else{t(jQuery)}})(function(t){t.ui=t.ui||{};var e=t.ui.version="1.12.0-rc.2";var i=0;var s=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,o,n;for(n=0;(o=i[n])!=null;n++){try{s=t._data(o,"events");if(s&&s.remove){t(o).triggerHandler("remove")}}catch(t){}}e(i)}}(t.cleanData);t.widget=function(e,i,s){var o,n,r;var a={};var h=e.split(".")[0];e=e.split(".")[1];var l=h+"-"+e;if(!s){s=i;i=t.Widget}if(t.isArray(s)){s=t.extend.apply(null,[{}].concat(s))}t.expr[":"][l.toLowerCase()]=function(e){return!!t.data(e,l)};t[h]=t[h]||{};o=t[h][e];n=t[h][e]=function(t,e){if(!this._createWidget){return new n(t,e)}if(arguments.length){this._createWidget(t,e)}};t.extend(n,o,{version:s.version,_proto:t.extend({},s),_childConstructors:[]});r=new i;r.options=t.widget.extend({},r.options);t.each(s,function(e,s){if(!t.isFunction(s)){a[e]=s;return}a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}return function(){var e=this._super;var i=this._superApply;var n;this._super=t;this._superApply=o;n=s.apply(this,arguments);this._super=e;this._superApply=i;return n}}()});n.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix||e:e},a,{constructor:n,namespace:h,widgetName:e,widgetFullName:l});if(o){t.each(o._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,n,i._proto)});delete o._childConstructors}else{i._childConstructors.push(n)}t.widget.bridge(e,n);return n};t.widget.extend=function(e){var i=s.call(arguments,1);var o=0;var n=i.length;var r;var a;for(;o<n;o++){for(r in i[o]){a=i[o][r];if(i[o].hasOwnProperty(r)&&a!==undefined){if(t.isPlainObject(a)){e[r]=t.isPlainObject(e[r])?t.widget.extend({},e[r],a):t.widget.extend({},a)}else{e[r]=a}}}}return e};t.widget.bridge=function(e,i){var o=i.prototype.widgetFullName||e;t.fn[e]=function(n){var r=typeof n==="string";var a=s.call(arguments,1);var h=this;if(r){this.each(function(){var i;var s=t.data(this,o);if(n==="instance"){h=s;return false}if(!s){return t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+n+"'")}if(!t.isFunction(s[n])||n.charAt(0)==="_"){return t.error("no such method '"+n+"' for "+e+" widget instance")}i=s[n].apply(s,a);if(i!==s&&i!==undefined){h=i&&i.jquery?h.pushStack(i.get()):i;return false}})}else{if(a.length){n=t.widget.extend.apply(null,[n].concat(a))}this.each(function(){var e=t.data(this,o);if(e){e.option(n||{});if(e._init){e._init()}}else{t.data(this,o,new i(n,this))}})}return h}};t.Widget=function(){};t.Widget._childConstructors=[];t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0];this.element=t(s);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=t();this.hoverable=t();this.focusable=t();this.classesElementLookup={};if(s!==this){t.data(s,this.widgetFullName,this);this._on(true,this.element,{remove:function(t){if(t.target===s){this.destroy()}}});this.document=t(s.style?s.ownerDocument:s.document||s);this.window=t(this.document[0].defaultView||this.document[0].parentWindow)}this.options=t.widget.extend({},this.options,this._getCreateOptions(),e);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy();t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s=e;var o;var n;var r;if(arguments.length===0){return t.widget.extend({},this.options)}if(typeof e==="string"){s={};o=e.split(".");e=o.shift();if(o.length){n=s[e]=t.widget.extend({},this.options[e]);for(r=0;r<o.length-1;r++){n[o[r]]=n[o[r]]||{};n=n[o[r]]}e=o.pop();if(arguments.length===1){return n[e]===undefined?null:n[e]}n[e]=i}else{if(arguments.length===1){return this.options[e]===undefined?null:this.options[e]}s[e]=i}}this._setOptions(s);return this},_setOptions:function(t){var e;for(e in t){this._setOption(e,t[e])}return this},_setOption:function(t,e){if(t==="classes"){this._setOptionClasses(e)}this.options[t]=e;if(t==="disabled"){this._setOptionDisabled(e)}return this},_setOptionClasses:function(e){var i,s,o;for(i in e){o=this.classesElementLookup[i];if(e[i]===this.options.classes[i]||!o||!o.length){continue}s=t(o.get());this._removeClass(o,i);s.addClass(this._classes({element:s,keys:i,classes:e,add:true}))}},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t);if(t){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(e){var i=[];var s=this;e=t.extend({element:this.element,classes:this.options.classes||{}},e);function o(o,n){var r,a;for(a=0;a<o.length;a++){r=s.classesElementLookup[o[a]]||t();if(e.add){r=t(t.unique(r.get().concat(e.element.get())))}else{r=t(r.not(e.element).get())}s.classesElementLookup[o[a]]=r;i.push(o[a]);if(n&&e.classes[o[a]]){i.push(e.classes[o[a]])}}}if(e.keys){o(e.keys.match(/\S+/g)||[],true)}if(e.extra){o(e.extra.match(/\S+/g)||[])}return i.join(" ")},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,false)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,true)},_toggleClass:function(t,e,i,s){s=typeof s==="boolean"?s:i;var o=typeof t==="string"||t===null,n={extra:o?e:i,keys:o?t:e,element:o?this.element:t,add:s};n.element.toggleClass(this._classes(n),s);return this},_on:function(e,i,s){var o;var n=this;if(typeof e!=="boolean"){s=i;i=e;e=false}if(!s){s=i;i=this.element;o=this.widget()}else{i=o=t(i);this.bindings=this.bindings.add(i)}t.each(s,function(s,r){function a(){if(!e&&(n.options.disabled===true||t(this).hasClass("ui-state-disabled"))){return}return(typeof r==="string"?n[r]:r).apply(n,arguments)}if(typeof r!=="string"){a.guid=r.guid=r.guid||a.guid||t.guid++}var h=s.match(/^([\w:-]*)\s*(.*)$/);var l=h[1]+n.eventNamespace;var f=h[2];if(f){o.on(l,f,a)}else{i.on(l,a)}})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;e.off(i).off(i);this.bindings=t(this.bindings.not(e).get());this.focusable=t(this.focusable.not(e).get());this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return(typeof t==="string"?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var o,n;var r=this.options[e];s=s||{};i=t.Event(i);i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();i.target=this.element[0];n=i.originalEvent;if(n){for(o in n){if(!(o in i)){i[o]=n[o]}}}this.element.trigger(i,s);return!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===false||i.isDefaultPrevented())}};t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,o,n){if(typeof o==="string"){o={effect:o}}var r;var a=!o?e:o===true||typeof o==="number"?i:o.effect||i;o=o||{};if(typeof o==="number"){o={duration:o}}r=!t.isEmptyObject(o);o.complete=n;if(o.delay){s.delay(o.delay)}if(r&&t.effects&&t.effects.effect[a]){s[e](o)}else if(a!==e&&s[a]){s[a](o.duration,o.easing,n)}else{s.queue(function(i){t(this)[e]();if(n){n.call(s[0])}i()})}}});var o=t.widget;(function(){var e,i,s=Math.max,o=Math.abs,n=Math.round,r=/left|center|right/,a=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,f=/%$/,c=t.fn.position;i=function(){var e=t("<div>").css("position","absolute").appendTo("body").offset({top:1.5,left:1.5}),s=e.offset().top===1.5;e.remove();i=function(){return s};return s};function u(t,e,i){return[parseFloat(t[0])*(f.test(t[0])?e/100:1),parseFloat(t[1])*(f.test(t[1])?i/100:1)]}function p(e,i){return parseInt(t.css(e,i),10)||0}function d(e){var i=e[0];if(i.nodeType===9){return{width:e.width(),height:e.height(),offset:{top:0,left:0}}}if(t.isWindow(i)){return{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}}if(i.preventDefault){return{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}}return{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.position={scrollbarWidth:function(){if(e!==undefined){return e}var i,s,o=t("<div "+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>"),n=o.children()[0];t("body").append(o);i=n.offsetWidth;o.css("overflow","scroll");s=n.offsetWidth;if(i===s){s=o[0].clientWidth}o.remove();return e=i-s},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o=i==="scroll"||i==="auto"&&e.width<e.element[0].scrollWidth,n=s==="scroll"||s==="auto"&&e.height<e.element[0].scrollHeight;return{width:n?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),o=!!i[0]&&i[0].nodeType===9,n=!s&&!o;return{element:i,isWindow:s,isDocument:o,offset:n?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}};t.fn.position=function(e){if(!e||!e.of){return c.apply(this,arguments)}e=t.extend({},e);var f,g,m,_,v,b,w=t(e.of),y=t.position.getWithinInfo(e.within),P=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),z={};b=d(w);if(w[0].preventDefault){e.at="left top"}g=b.width;m=b.height;_=b.offset;v=t.extend({},_);t.each(["my","at"],function(){var t=(e[this]||"").split(" "),i,s;if(t.length===1){t=r.test(t[0])?t.concat(["center"]):a.test(t[0])?["center"].concat(t):["center","center"]}t[0]=r.test(t[0])?t[0]:"center";t[1]=a.test(t[1])?t[1]:"center";i=h.exec(t[0]);s=h.exec(t[1]);z[this]=[i?i[0]:0,s?s[0]:0];e[this]=[l.exec(t[0])[0],l.exec(t[1])[0]]});if(x.length===1){x[1]=x[0]}if(e.at[0]==="right"){v.left+=g}else if(e.at[0]==="center"){v.left+=g/2}if(e.at[1]==="bottom"){v.top+=m}else if(e.at[1]==="center"){v.top+=m/2}f=u(z.at,g,m);v.left+=f[0];v.top+=f[1];return this.each(function(){var r,a,h=t(this),l=h.outerWidth(),c=h.outerHeight(),d=p(this,"marginLeft"),b=p(this,"marginTop"),C=l+d+p(this,"marginRight")+P.width,H=c+b+p(this,"marginBottom")+P.height,I=t.extend({},v),T=u(z.my,h.outerWidth(),h.outerHeight());if(e.my[0]==="right"){I.left-=l}else if(e.my[0]==="center"){I.left-=l/2}if(e.my[1]==="bottom"){I.top-=c}else if(e.my[1]==="center"){I.top-=c/2}I.left+=T[0];I.top+=T[1];if(!i()){I.left=n(I.left);I.top=n(I.top)}r={marginLeft:d,marginTop:b};t.each(["left","top"],function(i,s){if(t.ui.position[x[i]]){t.ui.position[x[i]][s](I,{targetWidth:g,targetHeight:m,elemWidth:l,elemHeight:c,collisionPosition:r,collisionWidth:C,collisionHeight:H,offset:[f[0]+T[0],f[1]+T[1]],my:e.my,at:e.at,within:y,elem:h})}});if(e.using){a=function(t){var i=_.left-I.left,n=i+g-l,r=_.top-I.top,a=r+m-c,f={target:{element:w,left:_.left,top:_.top,width:g,height:m},element:{element:h,left:I.left,top:I.top,width:l,height:c},horizontal:n<0?"left":i>0?"right":"center",vertical:a<0?"top":r>0?"bottom":"middle"};if(g<l&&o(i+n)<g){f.horizontal="center"}if(m<c&&o(r+a)<m){f.vertical="middle"}if(s(o(i),o(n))>s(o(r),o(a))){f.important="horizontal"}else{f.important="vertical"}e.using.call(this,t,f)}}h.offset(t.extend(I,{using:a}))})};t.ui.position={fit:{left:function(t,e){var i=e.within,o=i.isWindow?i.scrollLeft:i.offset.left,n=i.width,r=t.left-e.collisionPosition.marginLeft,a=o-r,h=r+e.collisionWidth-n-o,l;if(e.collisionWidth>n){if(a>0&&h<=0){l=t.left+a+e.collisionWidth-n-o;t.left+=a-l}else if(h>0&&a<=0){t.left=o}else{if(a>h){t.left=o+n-e.collisionWidth}else{t.left=o}}}else if(a>0){t.left+=a}else if(h>0){t.left-=h}else{t.left=s(t.left-r,t.left)}},top:function(t,e){var i=e.within,o=i.isWindow?i.scrollTop:i.offset.top,n=e.within.height,r=t.top-e.collisionPosition.marginTop,a=o-r,h=r+e.collisionHeight-n-o,l;if(e.collisionHeight>n){if(a>0&&h<=0){l=t.top+a+e.collisionHeight-n-o;t.top+=a-l}else if(h>0&&a<=0){t.top=o}else{if(a>h){t.top=o+n-e.collisionHeight}else{t.top=o}}}else if(a>0){t.top+=a}else if(h>0){t.top-=h}else{t.top=s(t.top-r,t.top)}}},flip:{left:function(t,e){var i=e.within,s=i.offset.left+i.scrollLeft,n=i.width,r=i.isWindow?i.scrollLeft:i.offset.left,a=t.left-e.collisionPosition.marginLeft,h=a-r,l=a+e.collisionWidth-n-r,f=e.my[0]==="left"?-e.elemWidth:e.my[0]==="right"?e.elemWidth:0,c=e.at[0]==="left"?e.targetWidth:e.at[0]==="right"?-e.targetWidth:0,u=-2*e.offset[0],p,d;if(h<0){p=t.left+f+c+u+e.collisionWidth-n-s;if(p<0||p<o(h)){t.left+=f+c+u}}else if(l>0){d=t.left-e.collisionPosition.marginLeft+f+c+u-r;if(d>0||o(d)<l){t.left+=f+c+u}}},top:function(t,e){var i=e.within,s=i.offset.top+i.scrollTop,n=i.height,r=i.isWindow?i.scrollTop:i.offset.top,a=t.top-e.collisionPosition.marginTop,h=a-r,l=a+e.collisionHeight-n-r,f=e.my[1]==="top",c=f?-e.elemHeight:e.my[1]==="bottom"?e.elemHeight:0,u=e.at[1]==="top"?e.targetHeight:e.at[1]==="bottom"?-e.targetHeight:0,p=-2*e.offset[1],d,g;if(h<0){g=t.top+c+u+p+e.collisionHeight-n-s;if(g<0||g<o(h)){t.top+=c+u+p}}else if(l>0){d=t.top-e.collisionPosition.marginTop+c+u+p-r;if(d>0||o(d)<l){t.top+=c+u+p}}}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments);t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments);t.ui.position.fit.top.apply(this,arguments)}}}})();var n=t.ui.position;var r=t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}});var a=t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var h="ui-effects-",l="ui-effects-style",f="ui-effects-animated",c=t;t.effects={effect:{}};t.ui.focusable=function(e,i){var s,o,n,r=e.nodeName.toLowerCase();if("area"===r){s=e.parentNode;o=s.name;if(!e.href||!o||s.nodeName.toLowerCase()!=="map"){return false}n=t("img[usemap='#"+o+"']");return n.length>0&&n.is(":visible")}return(/^(input|select|textarea|button|object)$/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&t(e).is(":visible")&&u(t(e))};function u(t){var e=t.css("visibility");while(e==="inherit"){t=t.parent();e=t.css("visibility")}return e!=="hidden"}t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,t.attr(e,"tabindex")!=null)}});var p=t.ui.focusable;var d=t.fn.form=function(){return typeof this[0].form==="string"?this.closest("form"):t(this[0].form)};var g=t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var i=e.data("ui-form-reset-instances");t.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){this.form=this.element.form();if(!this.form.length){return}var t=this.form.data("ui-form-reset-instances")||[];if(!t.length){this.form.on("reset.ui-form-reset",this._formResetHandler)}t.push(this);this.form.data("ui-form-reset-instances",t)},_unbindFormResetHandler:function(){if(!this.form.length){return}var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1);if(e.length){this.form.data("ui-form-reset-instances",e)}else{this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};if(t.fn.jquery.substring(0,3)==="1.7"){t.each(["Width","Height"],function(e,i){var s=i==="Width"?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),n={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};function r(e,i,o,n){t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0;if(o){i-=parseFloat(t.css(e,"border"+this+"Width"))||0}if(n){i-=parseFloat(t.css(e,"margin"+this))||0}});return i}t.fn["inner"+i]=function(e){if(e===undefined){return n["inner"+i].call(this)}return this.each(function(){t(this).css(o,r(this,e)+"px")})};t.fn["outer"+i]=function(e,s){if(typeof e!=="number"){return n["outer"+i].call(this,e)}return this.each(function(){t(this).css(o,r(this,e,true,s)+"px")})}});t.fn.addBack=function(t){return this.add(t==null?this.prevObject:this.prevObject.filter(t))}}var m=t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};var _=t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}();var v=t.fn.labels=function(){var e,i,s,o,n;if(this[0].labels&&this[0].labels.length){return this.pushStack(this[0].labels)}o=this.eq(0).parents("label");s=this.attr("id");if(s){e=this.eq(0).parents().last();n=e.add(e.length?e.siblings():this.siblings());i="label[for='"+t.ui.escapeSelector(s)+"']";o=o.add(n.find(i).addBack(i))}return this.pushStack(o)};var b=t.fn.scrollParent=function(e){var i=this.css("position"),s=i==="absolute",o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter(function(){var e=t(this);if(s&&e.css("position")==="static"){return false}return o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return i==="fixed"||!n.length?t(this[0].ownerDocument||document):n};var w=t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),s=i!=null;return(!s||i>=0)&&t.ui.focusable(e,s)}});var y=t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++t}})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){t(this).removeAttr("id")}})}});var P=t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}if(!e){e=t.body}if(!e.nodeName){e=t.body}return e};t.widget("ui.button",{version:"1.12.0-rc.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:true},_getCreateOptions:function(){var t,e=this._super()||{};this.isInput=this.element.is("input");t=this.element[0].disabled;if(t!=null){e.disabled=t}this.originalLabel=this.isInput?this.element.val():this.element.html();if(this.originalLabel){e.label=this.originalLabel}return e},_create:function(){if(!this.option.showLabel&!this.options.icon){this.options.showLabel=true}if(this.options.disabled==null){this.options.disabled=this.element[0].disabled||false}this.hasTitle=!!this.element.attr("title");if(this.options.label&&this.options.label!==this.originalLabel){if(this.isInput){this.element.val(this.options.label)}else{this.element.html(this.options.label)}}this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();if(this.element.is("a")){this._on({keyup:function(e){if(e.keyCode===t.ui.keyCode.SPACE){e.preventDefault();if(this.element[0].click){this.element[0].click()}else{this.element.trigger("click")}}}})}},_enhance:function(){if(!this.element.is("button")){this.element.attr("role","button")}if(this.options.icon){this._updateIcon("icon",this.options.icon);this._updateTooltip()}},_updateTooltip:function(){this.title=this.element.attr("title");if(!this.options.showLabel&&!this.title){this.element.attr("title",this.options.label)}},_updateIcon:function(e,i){var s=e!=="iconPosition",o=s?this.options.iconPosition:i,n=o==="top"||o==="bottom";if(!this.icon){this.icon=t("<span>");this._addClass(this.icon,"ui-button-icon","ui-icon");if(!this.options.showLabel){this._addClass("ui-button-icon-only")}}else if(s){this._removeClass(this.icon,null,this.options.icon)}if(s){this._addClass(this.icon,null,i)}this._attachIcon(o);if(n){this._addClass(this.icon,null,"ui-widget-icon-block");if(this.iconSpace){this.iconSpace.remove()}}else{if(!this.iconSpace){this.iconSpace=t("<span> </span>");this._addClass(this.iconSpace,"ui-button-icon-space")}this._removeClass(this.icon,null,"ui-wiget-icon-block");this._attachIconSpace(o)}},_destroy:function(){this.element.removeAttr("role");if(this.icon){this.icon.remove()}if(this.iconSpace){this.iconSpace.remove()}if(!this.hasTitle){this.element.removeAttr("title")}},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=t.showLabel===undefined?this.options.showLabel:t.showLabel,i=t.icon===undefined?this.options.icon:t.icon;if(!e&&!i){t.showLabel=true}this._super(t)},_setOption:function(t,e){if(t==="icon"){if(e){this._updateIcon(t,e)}else if(this.icon){this.icon.remove();if(this.iconSpace){this.iconSpace.remove()}}}if(t==="iconPosition"){this._updateIcon(t,e)}if(t==="showLabel"){this._toggleClass("ui-button-icon-only",null,!e);this._updateTooltip()}if(t==="label"){if(this.isInput){this.element.val(e)}else{this.element.html(e);if(this.icon){this._attachIcon(this.options.iconPosition);this._attachIconSpace(this.options.iconPosition)}}}this._super(t,e);if(t==="disabled"){this._toggleClass(null,"ui-state-disabled",e);this.element[0].disabled=e;if(e){this.element.blur()}}},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");if(t!==this.options.disabled){this._setOptions({disabled:t})}this._updateTooltip()}});if(t.uiBackCompat!==false){t.widget("ui.button",t.ui.button,{options:{text:true,icons:{primary:null,secondary:null}},_create:function(){if(this.options.showLabel&&!this.options.text){this.options.showLabel=this.options.text}if(!this.options.showLabel&&this.options.text){this.options.text=this.options.showLabel}if(!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)){if(this.options.icons.primary){this.options.icon=this.options.icons.primary}else{this.options.icon=this.options.icons.secondary;this.options.iconPosition="end"}}else if(this.options.icon){this.options.icons.primary=this.options.icon}this._super()},_setOption:function(t,e){if(t==="text"){this._super("showLabel",e);return}if(t==="showLabel"){this.options.text=e}if(t==="icon"){this.options.icons.primary=e}if(t==="icons"){if(e.primary){this._super("icon",e.primary);this._super("iconPosition","beginning")}else if(e.secondary){this._super("icon",e.secondary);this._super("iconPosition","end")}}this._superApply(arguments)}});t.fn.button=function(e){return function(){if(!this.length||this.length&&this[0].tagName!=="INPUT"||this.length&&this[0].tagName==="INPUT"&&(this.attr("type")!=="checkbox"&&this.attr("type")!=="radio")){return e.apply(this,arguments)}if(!t.ui.checkboxradio){t.error("Checkboxradio widget missing")}if(arguments.length===0){return this.checkboxradio({icon:false})}return this.checkboxradio.apply(this,arguments)}}(t.fn.button);t.fn.buttonset=function(){if(!t.ui.controlgroup){t.error("Controlgroup widget missing")}if(arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]){return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]])}if(arguments[0]==="option"&&arguments[1]==="items"){return this.controlgroup.apply(this,[arguments[0],"items.button"])}if(typeof arguments[0]==="object"&&arguments[0].items){arguments[0].items={button:arguments[0].items}}return this.controlgroup.apply(this,arguments)}}var x=t.ui.button;var z=t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var C=false;t(document).on("mouseup",function(){C=false});var H=t.widget("ui.mouse",{version:"1.12.0-rc.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){if(true===t.data(i.target,e.widgetName+".preventClickEvent")){t.removeData(i.target,e.widgetName+".preventClickEvent");i.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(e){if(C){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var i=this,s=e.which===1,o=typeof this.options.cancel==="string"&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:false;if(!s||o||!this._mouseCapture(e)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();return true}}if(true===t.data(e.target,this.widgetName+".preventClickEvent")){t.removeData(e.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(t){return i._mouseMove(t)};this._mouseUpDelegate=function(t){return i._mouseUp(t)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();C=true;return true},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button){return this._mouseUp(e)}else if(!e.which){if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey){this.ignoreMissingWhich=true}else if(!this.ignoreMissingWhich){return this._mouseUp(e)}}}if(e.which||e.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false;this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)}return!this._mouseStarted},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(e.target===this._mouseDownEvent.target){t.data(e.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(e)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;C=false;e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});var I=t.ui.plugin={add:function(e,i,s){var o,n=t.ui[e].prototype;for(o in s){n.plugins[o]=n.plugins[o]||[];n.plugins[o].push([i,s[o]])}},call:function(t,e,i,s){var o,n=t.plugins[e];if(!n){return}if(!s&&(!t.element[0].parentNode||t.element[0].parentNode.nodeType===11)){return}for(o=0;o<n.length;o++){if(t.options[n[o][0]]){n[o][1].apply(t.element,i)}}}};var T=t.ui.safeBlur=function(e){if(e&&e.nodeName.toLowerCase()!=="body"){t(e).trigger("blur")}};t.widget("ui.draggable",t.ui.mouse,{version:"1.12.0-rc.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function(t,e){this._super(t,e);if(t==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;this._blurActiveElement(e);if(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(e);if(!this.handle){return false}this._blockFrames(i.iframeFix===true?"iframe":i.iframeFix);return true},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);if(this._getHandle(e)&&s.closest(i).length){return}t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;this.helper=this._createHelper(e);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(t.ui.ddmanager){t.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return t(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(e);this.originalPosition=this.position=this._generatePosition(e,false);this.originalPageX=e.pageX;this.originalPageY=e.pageY;i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt);this._setContainment();if(this._trigger("start",e)===false){this._clear();return false}this._cacheHelperProportions();if(t.ui.ddmanager&&!i.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}this._mouseDrag(e,true);if(t.ui.ddmanager){t.ui.ddmanager.dragStart(this,e)}return true},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(e,true);this.positionAbs=this._convertPositionTo("absolute");if(!i){var s=this._uiHash();if(this._trigger("drag",e,s)===false){this._mouseUp(new t.Event("mouseup",e));return false}this.position=s.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(t.ui.ddmanager){t.ui.ddmanager.drag(this,e)}return false},_mouseStop:function(e){var i=this,s=false;if(t.ui.ddmanager&&!this.options.dropBehaviour){s=t.ui.ddmanager.drop(this,e)}if(this.dropped){s=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!s||this.options.revert==="valid"&&s||this.options.revert===true||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)){t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(i._trigger("stop",e)!==false){
i._clear()}})}else{if(this._trigger("stop",e)!==false){this._clear()}}return false},_mouseUp:function(e){this._unblockFrames();if(t.ui.ddmanager){t.ui.ddmanager.dragStop(this,e)}if(this.handleElement.is(e.target)){this.element.trigger("focus")}return t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new t.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),o=s?t(i.helper.apply(this.element[0],[e])):i.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!o.parents("body").length){o.appendTo(i.appendTo==="parent"?this.element[0].parentNode:i.appendTo)}if(s&&o[0]===this.element[0]){this._setPositionRelative()}if(o[0]!==this.element[0]&&!/(fixed|absolute)/.test(o.css("position"))){o.css("position","absolute")}return o},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(t.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(!e?this.scrollParent.scrollTop():0),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(!e?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,o=this.options,n=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return}if(o.containment==="window"){this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(o.containment==="document"){this.containment=[0,0,t(n).width()-this.helperProportions.width-this.margins.left,(t(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(o.containment.constructor===Array){this.containment=o.containment;return}if(o.containment==="parent"){o.containment=this.helper[0].parentNode}i=t(o.containment);s=i[0];if(!s){return}e=/(scroll|auto)/.test(i.css("overflow"));this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=i},_convertPositionTo:function(t,e){if(!e){e=this.position}var i=t==="absolute"?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,o,n,r=this.options,a=this._isRootNode(this.scrollParent[0]),h=t.pageX,l=t.pageY;if(!a||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(e){if(this.containment){if(this.relativeContainer){s=this.relativeContainer.offset();i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]}else{i=this.containment}if(t.pageX-this.offset.click.left<i[0]){h=i[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<i[1]){l=i[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>i[2]){h=i[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>i[3]){l=i[3]+this.offset.click.top}}if(r.grid){o=r.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY;l=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-r.grid[1]:o+r.grid[1]:o;n=r.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX;h=i?n-this.offset.click.left>=i[0]||n-this.offset.click.left>i[2]?n:n-this.offset.click.left>=i[0]?n-r.grid[0]:n+r.grid[0]:n}if(r.axis==="y"){h=this.originalPageX}if(r.axis==="x"){l=this.originalPageY}}return{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(e,i,s){s=s||this._uiHash();t.ui.plugin.call(this,e,[i,s,this],true);if(/^(drag|start|stop)/.test(e)){this.positionAbs=this._convertPositionTo("absolute");s.offset=this.positionAbs}return t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var o=t.extend({},i,{item:s.element});s.sortables=[];t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");if(i&&!i.options.disabled){s.sortables.push(i);i.refreshPositions();i._trigger("activate",e,o)}})},stop:function(e,i,s){var o=t.extend({},i,{item:s.element});s.cancelHelperRemoval=false;t.each(s.sortables,function(){var t=this;if(t.isOver){t.isOver=0;s.cancelHelperRemoval=true;t.cancelHelperRemoval=false;t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")};t._mouseStop(e);t.options.helper=t.options._helper}else{t.cancelHelperRemoval=true;t._trigger("deactivate",e,o)}})},drag:function(e,i,s){t.each(s.sortables,function(){var o=false,n=this;n.positionAbs=s.positionAbs;n.helperProportions=s.helperProportions;n.offset.click=s.offset.click;if(n._intersectsWith(n.containerCache)){o=true;t.each(s.sortables,function(){this.positionAbs=s.positionAbs;this.helperProportions=s.helperProportions;this.offset.click=s.offset.click;if(this!==n&&this._intersectsWith(this.containerCache)&&t.contains(n.element[0],this.element[0])){o=false}return o})}if(o){if(!n.isOver){n.isOver=1;s._parent=i.helper.parent();n.currentItem=i.helper.appendTo(n.element).data("ui-sortable-item",true);n.options._helper=n.options.helper;n.options.helper=function(){return i.helper[0]};e.target=n.currentItem[0];n._mouseCapture(e,true);n._mouseStart(e,true,true);n.offset.click.top=s.offset.click.top;n.offset.click.left=s.offset.click.left;n.offset.parent.left-=s.offset.parent.left-n.offset.parent.left;n.offset.parent.top-=s.offset.parent.top-n.offset.parent.top;s._trigger("toSortable",e);s.dropped=n.element;t.each(s.sortables,function(){this.refreshPositions()});s.currentItem=s.element;n.fromOutside=s}if(n.currentItem){n._mouseDrag(e);i.position=n.position}}else{if(n.isOver){n.isOver=0;n.cancelHelperRemoval=true;n.options._revert=n.options.revert;n.options.revert=false;n._trigger("out",e,n._uiHash(n));n._mouseStop(e,true);n.options.revert=n.options._revert;n.options.helper=n.options._helper;if(n.placeholder){n.placeholder.remove()}i.helper.appendTo(s._parent);s._refreshOffsets(e);i.position=s._generatePosition(e,true);s._trigger("fromSortable",e);s.dropped=false;t.each(s.sortables,function(){this.refreshPositions()})}}})}});t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var o=t("body"),n=s.options;if(o.css("cursor")){n._cursor=o.css("cursor")}o.css("cursor",n.cursor)},stop:function(e,i,s){var o=s.options;if(o._cursor){t("body").css("cursor",o._cursor)}}});t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var o=t(i.helper),n=s.options;if(o.css("opacity")){n._opacity=o.css("opacity")}o.css("opacity",n.opacity)},stop:function(e,i,s){var o=s.options;if(o._opacity){t(i.helper).css("opacity",o._opacity)}}});t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false)}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset()}},drag:function(e,i,s){var o=s.options,n=false,r=s.scrollParentNotHidden[0],a=s.document[0];if(r!==a&&r.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if(s.overflowOffset.top+r.offsetHeight-e.pageY<o.scrollSensitivity){r.scrollTop=n=r.scrollTop+o.scrollSpeed}else if(e.pageY-s.overflowOffset.top<o.scrollSensitivity){r.scrollTop=n=r.scrollTop-o.scrollSpeed}}if(!o.axis||o.axis!=="y"){if(s.overflowOffset.left+r.offsetWidth-e.pageX<o.scrollSensitivity){r.scrollLeft=n=r.scrollLeft+o.scrollSpeed}else if(e.pageX-s.overflowOffset.left<o.scrollSensitivity){r.scrollLeft=n=r.scrollLeft-o.scrollSpeed}}}else{if(!o.axis||o.axis!=="x"){if(e.pageY-t(a).scrollTop()<o.scrollSensitivity){n=t(a).scrollTop(t(a).scrollTop()-o.scrollSpeed)}else if(t(window).height()-(e.pageY-t(a).scrollTop())<o.scrollSensitivity){n=t(a).scrollTop(t(a).scrollTop()+o.scrollSpeed)}}if(!o.axis||o.axis!=="y"){if(e.pageX-t(a).scrollLeft()<o.scrollSensitivity){n=t(a).scrollLeft(t(a).scrollLeft()-o.scrollSpeed)}else if(t(window).width()-(e.pageX-t(a).scrollLeft())<o.scrollSensitivity){n=t(a).scrollLeft(t(a).scrollLeft()+o.scrollSpeed)}}}if(n!==false&&t.ui.ddmanager&&!o.dropBehaviour){t.ui.ddmanager.prepareOffsets(s,e)}}});t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var o=s.options;s.snapElements=[];t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),i=e.offset();if(this!==s.element[0]){s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}})},drag:function(e,i,s){var o,n,r,a,h,l,f,c,u,p,d=s.options,g=d.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(u=s.snapElements.length-1;u>=0;u--){h=s.snapElements[u].left-s.margins.left;l=h+s.snapElements[u].width;f=s.snapElements[u].top-s.margins.top;c=f+s.snapElements[u].height;if(_<h-g||m>l+g||b<f-g||v>c+g||!t.contains(s.snapElements[u].item.ownerDocument,s.snapElements[u].item)){if(s.snapElements[u].snapping){s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[u].item}))}s.snapElements[u].snapping=false;continue}if(d.snapMode!=="inner"){o=Math.abs(f-b)<=g;n=Math.abs(c-v)<=g;r=Math.abs(h-_)<=g;a=Math.abs(l-m)<=g;if(o){i.position.top=s._convertPositionTo("relative",{top:f-s.helperProportions.height,left:0}).top}if(n){i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top}if(r){i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left}if(a){i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left}}p=o||n||r||a;if(d.snapMode!=="outer"){o=Math.abs(f-v)<=g;n=Math.abs(c-b)<=g;r=Math.abs(h-m)<=g;a=Math.abs(l-_)<=g;if(o){i.position.top=s._convertPositionTo("relative",{top:f,left:0}).top}if(n){i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top}if(r){i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left}if(a){i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left}}if(!s.snapElements[u].snapping&&(o||n||r||a||p)){s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[u].item}))}s.snapElements[u].snapping=o||n||r||a||p}}});t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var o,n=s.options,r=t.makeArray(t(n.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});if(!r.length){return}o=parseInt(t(r[0]).css("zIndex"),10)||0;t(r).each(function(e){t(this).css("zIndex",o+e)});this.css("zIndex",o+r.length)}});t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var o=t(i.helper),n=s.options;if(o.css("zIndex")){n._zIndex=o.css("zIndex")}o.css("zIndex",n.zIndex)},stop:function(e,i,s){var o=s.options;if(o._zIndex){t(i.helper).css("zIndex",o._zIndex)}}});var D=t.ui.draggable;t.widget("ui.resizable",t.ui.mouse,{version:"1.12.0-rc.2",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if(t(e).css("overflow")==="hidden"){return false}var s=i&&i==="left"?"scrollLeft":"scrollTop",o=false;if(e[s]>0){return true}e[s]=1;o=e[s]>0;e[s]=0;return o},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable");t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(e);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(e);this._proportionallyResize()}this._setupHandles();if(i.autoHide){t(this.element).on("mouseenter",function(){if(i.disabled){return}s._removeClass("ui-resizable-autohide");s._handles.show()}).on("mouseleave",function(){if(i.disabled){return}if(!s.resizing){s._addClass("ui-resizable-autohide");s._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){i(this.element);e=this.element;this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e);e.remove()}this.originalElement.css("resize",this.originalResizeStyle);i(this.originalElement);return this},_setOption:function(t,e){this._super(t,e);switch(t){case"handles":this._removeHandles();this._setupHandles();break;default:break}},_setupHandles:function(){var e=this.options,i,s,o,n,r,a=this;this.handles=e.handles||(!t(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=t();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}o=this.handles.split(",");this.handles={};for(s=0;s<o.length;s++){i=t.trim(o[s]);n="ui-resizable-"+i;r=t("<div>");this._addClass(r,"ui-resizable-handle "+n);r.css({zIndex:e.zIndex});this.handles[i]=".ui-resizable-"+i;this.element.append(r)}}this._renderAxis=function(e){var i,s,o,n;e=e||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show()}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=t(this.handles[i]);this._on(this.handles[i],{mousedown:a._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){s=t(this.handles[i],this.element);n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth();o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(o,n);this._proportionallyResize()}this._handles=this._handles.add(this.handles[i])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!a.resizing){if(this.className){r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}a.axis=r&&r[1]?r[1]:"se"}});if(e.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,o=false;for(i in this.handles){s=t(this.handles[i])[0];if(s===e.target||t.contains(s,e.target)){o=true}}return!this.options.disabled&&o},_mouseStart:function(e){var i,s,o,n=this.options,r=this.element;this.resizing=true;this._renderProxy();i=this._num(this.helper.css("left"));s=this._num(this.helper.css("top"));if(n.containment){i+=t(n.containment).scrollLeft()||0;s+=t(n.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:i,top:s};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()};this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()};this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()};this.originalPosition={left:i,top:s};this.originalMousePosition={left:e.pageX,top:e.pageY};this.aspectRatio=typeof n.aspectRatio==="number"?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;o=t(".ui-resizable-"+this.axis).css("cursor");t("body").css("cursor",o==="auto"?this.axis+"-resize":o);this._addClass("ui-resizable-resizing");this._propagate("start",e);return true},_mouseDrag:function(e){var i,s,o=this.originalMousePosition,n=this.axis,r=e.pageX-o.left||0,a=e.pageY-o.top||0,h=this._change[n];this._updatePrevProperties();if(!h){return false}i=h.apply(this,[e,r,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey){i=this._updateRatio(i,e)}i=this._respectSize(i,e);this._updateCache(i);this._propagate("resize",e);s=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!t.isEmptyObject(s)){this._updatePrevProperties();this._trigger("resize",e,this.ui());this._applyChanges()}return false},_mouseStop:function(e){this.resizing=false;var i,s,o,n,r,a,h,l=this.options,f=this;if(this._helper){i=this._proportionallyResizeElements;s=i.length&&/textarea/i.test(i[0].nodeName);o=s&&this._hasScroll(i[0],"left")?0:f.sizeDiff.height;n=s?0:f.sizeDiff.width;r={width:f.helper.width()-n,height:f.helper.height()-o};a=parseFloat(f.element.css("left"))+(f.position.left-f.originalPosition.left)||null;h=parseFloat(f.element.css("top"))+(f.position.top-f.originalPosition.top)||null;if(!l.animate){this.element.css(t.extend(r,{top:h,left:a}))}f.helper.height(f.size.height);f.helper.width(f.size.width);if(this._helper&&!l.animate){this._proportionallyResize()}}t("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",e);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};if(this.position.top!==this.prevPosition.top){t.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){t.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){t.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){t.height=this.size.height+"px"}this.helper.css(t);return t},_updateVirtualBoundaries:function(t){var e,i,s,o,n,r=this.options;n={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:Infinity,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:Infinity};if(this._aspectRatio||t){e=n.minHeight*this.aspectRatio;s=n.minWidth/this.aspectRatio;i=n.maxHeight*this.aspectRatio;o=n.maxWidth/this.aspectRatio;if(e>n.minWidth){n.minWidth=e}if(s>n.minHeight){n.minHeight=s}if(i<n.maxWidth){n.maxWidth=i}if(o<n.maxHeight){n.maxHeight=o}}this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset();if(this._isNumber(t.left)){this.position.left=t.left}if(this._isNumber(t.top)){this.position.top=t.top}if(this._isNumber(t.height)){this.size.height=t.height}if(this._isNumber(t.width)){this.size.width=t.width}},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;if(this._isNumber(t.height)){t.width=t.height*this.aspectRatio}else if(this._isNumber(t.width)){t.height=t.width/this.aspectRatio}if(s==="sw"){t.left=e.left+(i.width-t.width);t.top=null}if(s==="nw"){t.top=e.top+(i.height-t.height);t.left=e.left+(i.width-t.width)}return t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,n=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,r=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,h=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(i),f=/nw|ne|n/.test(i);if(n){t.width=e.minWidth}if(r){t.height=e.minHeight}if(s){t.width=e.maxWidth}if(o){t.height=e.maxHeight}if(n&&l){t.left=a-e.minWidth}if(s&&l){t.left=a-e.maxWidth}if(r&&f){t.top=h-e.minHeight}if(o&&f){t.top=h-e.maxHeight}if(!t.width&&!t.height&&!t.left&&t.top){t.top=null}else if(!t.width&&!t.height&&!t.top&&t.left){t.left=null}return t},_getPaddingPlusBorderDimensions:function(t){var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];for(;e<4;e++){i[e]=parseFloat(s[e])||0;i[e]+=parseFloat(o[e])||0}return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var t,e=0,i=this.helper||this.element;for(;e<this._proportionallyResizeElements.length;e++){t=this._proportionallyResizeElements[e];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(t)}t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||t("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]);e!=="resize"&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,o,n,r,a,h=t(this).resizable("instance"),l=h.options,f=h.element,c=l.containment,u=c instanceof t?c.get(0):/parent/.test(c)?f.parent().get(0):c;if(!u){return}h.containerElement=t(u);if(/document/.test(c)||c===document){h.containerOffset={left:0,top:0};h.containerPosition={left:0,top:0};h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}}else{e=t(u);i=[];t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=h._num(e.css("padding"+s))});h.containerOffset=e.offset();h.containerPosition=e.position();h.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]};s=h.containerOffset;o=h.containerSize.height;n=h.containerSize.width;r=h._hasScroll(u,"left")?u.scrollWidth:n;a=h._hasScroll(u)?u.scrollHeight:o;h.parentData={element:u,left:s.left,top:s.top,width:r,height:a}}},resize:function(e){var i,s,o,n,r=t(this).resizable("instance"),a=r.options,h=r.containerOffset,l=r.position,f=r._aspectRatio||e.shiftKey,c={top:0,left:0},u=r.containerElement,p=true;if(u[0]!==document&&/static/.test(u.css("position"))){c=h}if(l.left<(r._helper?h.left:0)){r.size.width=r.size.width+(r._helper?r.position.left-h.left:r.position.left-c.left);if(f){r.size.height=r.size.width/r.aspectRatio;p=false}r.position.left=a.helper?h.left:0}if(l.top<(r._helper?h.top:0)){r.size.height=r.size.height+(r._helper?r.position.top-h.top:r.position.top);if(f){r.size.width=r.size.height*r.aspectRatio;p=false}r.position.top=r._helper?h.top:0}o=r.containerElement.get(0)===r.element.parent().get(0);n=/relative|absolute/.test(r.containerElement.css("position"));if(o&&n){r.offset.left=r.parentData.left+r.position.left;r.offset.top=r.parentData.top+r.position.top}else{r.offset.left=r.element.offset().left;r.offset.top=r.element.offset().top}i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-c.left:r.offset.left-h.left));s=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-c.top:r.offset.top-h.top));if(i+r.size.width>=r.parentData.width){r.size.width=r.parentData.width-i;if(f){r.size.height=r.size.width/r.aspectRatio;p=false}}if(s+r.size.height>=r.parentData.height){r.size.height=r.parentData.height-s;if(f){r.size.width=r.size.height*r.aspectRatio;p=false}}if(!p){r.position.left=r.prevPosition.left;r.position.top=r.prevPosition.top;r.size.width=r.prevSize.width;r.size.height=r.prevSize.height}},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,o=e.containerPosition,n=e.containerElement,r=t(e.helper),a=r.offset(),h=r.outerWidth()-e.sizeDiff.width,l=r.outerHeight()-e.sizeDiff.height;if(e._helper&&!i.animate&&/relative/.test(n.css("position"))){t(this).css({left:a.left-o.left-s.left,width:h,height:l})}if(e._helper&&!i.animate&&/static/.test(n.css("position"))){t(this).css({left:a.left-o.left-s.left,width:h,height:l})}}});t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var s=t(this).resizable("instance"),o=s.options,n=s.originalSize,r=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-r.top||0,left:s.position.left-r.left||0};t(o.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),o={},n=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(n,function(t,e){var i=(s[e]||0)+(a[e]||0);if(i&&i>=0){o[e]=i||null}});e.css(o)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}});t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0});e._addClass(e.ghost,"ui-resizable-ghost");if(t.uiBackCompat!==false&&typeof e.options.ghost==="string"){e.ghost.addClass(this.options.ghost)}e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");if(e.ghost){e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})}},stop:function(){var e=t(this).resizable("instance");if(e.ghost&&e.helper){e.helper.get(0).removeChild(e.ghost.get(0))}}});t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,o=i.size,n=i.originalSize,r=i.originalPosition,a=i.axis,h=typeof s.grid==="number"?[s.grid,s.grid]:s.grid,l=h[0]||1,f=h[1]||1,c=Math.round((o.width-n.width)/l)*l,u=Math.round((o.height-n.height)/f)*f,p=n.width+c,d=n.height+u,g=s.maxWidth&&s.maxWidth<p,m=s.maxHeight&&s.maxHeight<d,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>d;s.grid=h;if(_){p+=l}if(v){d+=f}if(g){p-=l}if(m){d-=f}if(/^(se|s|e)$/.test(a)){i.size.width=p;i.size.height=d}else if(/^(ne)$/.test(a)){i.size.width=p;i.size.height=d;i.position.top=r.top-u}else if(/^(sw)$/.test(a)){i.size.width=p;i.size.height=d;i.position.left=r.left-c}else{if(d-f<=0||p-l<=0){e=i._getPaddingPlusBorderDimensions(this);

}if(d-f>0){i.size.height=d;i.position.top=r.top-u}else{d=f-e.height;i.size.height=d;i.position.top=r.top+n.height-d}if(p-l>0){i.size.width=p;i.position.left=r.left-c}else{p=l-e.width;i.size.width=p;i.position.left=r.left+n.width-p}}}});var k=t.ui.resizable;t.widget("ui.dialog",{version:"1.12.0-rc.2",options:{appendTo:"body",autoOpen:true,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:true,draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,goTop:false,position:{my:"center center",at:"center center",of:window,using:function(e){options=window.currentOptions;if(t(this).find("#privMsgContainer").length>0){t(this).css("top",(isMobile?50:50)+"px");return false}else if(options.goTop){t(this).css("top",t(window).scrollTop()+(isMobile?50:50)+"px");return false}var i=t(window).scrollTop();var s=t(this).css(e).offset().top;var o=t(this).height();var n=t(window).height();if(o>n/2.5||t(this).find("#captchaCont").length>0||t(this).find(".cptcha_reply").length>0){t(this).css("top",i+(isMobile?50:50)+"px")}else{if(typeof mouseY!="undefined"&&parseInt(mouseY)>0){var r=mouseY-i;if(o+(r+50)>n){var a=r+50+o-n;t(this).css("top",mouseY-a)}else{if(mouseY>70){t(this).css("top",mouseY+-20)}else{t(this).css("top",mouseY+40)}}}}}},resizable:true,show:null,title:null,titleHtml:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");if(this.options.title==null&&this.originalTitle!=null){this.options.title=this.originalTitle}if(this.options.disabled){this.options.disabled=false}this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();if(this.options.draggable&&t.fn.draggable){this._makeDraggable()}if(this.options.resizable&&t.fn.resizable){this._makeResizable()}this._isOpen=false;this.element.parent().topz().on("mousedown",function(){t(this).topz()});setTimeout(function(){if(this.element.find("input").eq(0).length>0){if(this.element.find("input:focus").length==0){this.element.find("input").eq(0).focus()}}else{this.element.closest(".ui-dialog").focus()}if(this.element.find("#captchaCont").length==0&&this.element.find("input").length==1){this.element.find("input").keypress(function(t){if(t.which==13){if(this.element.closest(".ui-dialog").find('button[title="Upload"]').length>0){this.element.closest(".ui-dialog").find('button[title="Upload"]').trigger("click")}else if(this.element.closest(".ui-dialog").find('button[title="Ok"]').length>0){this.element.closest(".ui-dialog").find('button[title="Ok"]').trigger("click")}else if(this.element.closest(".ui-dialog").find("button").eq(2).text()=="Ok"){this.element.closest(".ui-dialog").find("button").eq(2).trigger("click")}else if(this.element.closest(".ui-dialog").find("button").eq(1).text()=="Ok"){this.element.closest(".ui-dialog").find("button").eq(1).trigger("click")}else if(this.element.closest(".ui-dialog").find("button").eq(3).text()=="Ok"){this.element.closest(".ui-dialog").find("button").eq(3).trigger("click")}return false}}.bind(this))}if(this.element.find("#captchaCont").length==0&&this.element.find("input").length==0&&this.element.find("textarea").length==0){this.element.closest(".ui-dialog").keypress(function(t){var e=function(t){return!(event.target.type=="textarea"||event.target.type=="text"||event.target.type=="password"||event.target.type=="embed"||event.target.type=="number"||event.target.type=="tel"||event.target.type=="application/x-shockwave-flash"||event.target.type=="email")};if(t.which==13&&e(t)){if(this.element.closest(".ui-dialog").find('button[title="Upload"]').length>0){this.element.closest(".ui-dialog").find('button[title="Upload"]').trigger("click")}else if(this.element.closest(".ui-dialog").find('button[title="Ok"]').length>0){this.element.closest(".ui-dialog").find('button[title="Ok"]').trigger("click")}else if(this.element.closest(".ui-dialog").find("button").eq(2).text()=="Ok"){this.element.closest(".ui-dialog").find("button").eq(2).trigger("click")}else if(this.element.closest(".ui-dialog").find("button").eq(1).text()=="Ok"){this.element.closest(".ui-dialog").find("button").eq(1).trigger("click")}else if(this.element.closest(".ui-dialog").find("button").eq(3).text()=="Ok"){this.element.closest(".ui-dialog").find("button").eq(3).trigger("click")}return false}}.bind(this))}}.bind(this),50);setTimeout(function(){this.element.parent().css("opacity","1")}.bind(this),30);this._trackFocus()},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var e=this.options.appendTo;if(e&&(e.jquery||e.nodeType)){return t(e)}return this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}t=e.parent.children().eq(e.index);if(t.length&&t[0]!==this.element[0]){t.before(this.element)}else{e.parent.append(this.element)}},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;if(!this._isOpen||this._trigger("beforeClose",e)===false){return}this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();t.ui.safeBlur(t.ui.safeActiveElement(this.document[0]));this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)});t(this.element).remove()},hide:function(){var e=this;if(!this._isOpen||this._trigger("beforeClose",event)===false){return}this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();t.ui.safeBlur(t.ui.safeActiveElement(this.document[0]));this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",event)})},isOpen:function(){return this._isOpen},moveToTop:function(){},_moveToTop:function(e,i){var s=false,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),n=Math.max.apply(null,o);if(n>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",n+1);s=true}if(s&&!i){}return s},open:function(){var e=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=true;this.opener=t(t.ui.safeActiveElement(this.document[0]));this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1)}this._show(this.uiDialog,this.options.show,function(){e._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var t=this._focusedElement;if(!t){t=this.element.find("[autofocus]")}if(!t.length){t=this.element.find(":tabbable")}if(!t.length){t=this.uiDialogButtonPane.find(":tabbable")}if(!t.length){t=this.uiDialogTitlebarClose.filter(":tabbable")}if(!t.length){t=this.uiDialog}t.eq(0).trigger("focus")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);if(!i){this._focusTabbable()}}e.preventDefault();i.call(this);this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE){e.preventDefault();this.close(e);return}if(e.keyCode!==t.ui.keyCode.TAB||e.isDefaultPrevented()){return}var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),o=i.filter(":last");if((e.target===o[0]||e.target===this.uiDialog[0])&&!e.shiftKey){this._delay(function(){s.trigger("focus")});e.preventDefault()}else if((e.target===s[0]||e.target===this.uiDialog[0])&&e.shiftKey){this._delay(function(){o.trigger("focus")});e.preventDefault()}},mousedown:function(t){if(this._moveToTop(t)){}}});window.currentOptions=this.options;if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(e){if(!t(e.target).closest(".ui-dialog-titlebar-close")){}}});this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:false}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault();this.close(t)}});e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(e,"ui-dialog-title");this._title(e);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){if(this.options.title&&this.options.titleHtml){t.html(this.options.title)}else if(this.options.title){t.text(this.options.title)}else{t.html("&#160;")}},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(t.isEmptyObject(i)||t.isArray(i)&&!i.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}t.each(i,function(i,s){var o,n;s=t.isFunction(s)?{click:s,text:i}:s;s=t.extend({type:"button"},s);o=s.click;n={icon:s.icon,iconPosition:s.iconPosition,showLabel:s.showLabel};delete s.click;delete s.icon;delete s.iconPosition;delete s.showLabel;t("<button></button>",s).button(n).appendTo(e.uiButtonSet).on("click",function(){o.apply(e.element[0],arguments)})});this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var e=this,i=this.options;function s(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){e._addClass(t(this),"ui-dialog-dragging");e._blockFrames();e._trigger("dragStart",i,s(o))},drag:function(t,i){e._trigger("drag",t,s(i))},stop:function(o,n){var r=n.offset.left-e.document.scrollLeft(),a=n.offset.top-e.document.scrollTop();i.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(a>=0?"+":"")+a,of:e.window};e._removeClass(t(this),"ui-dialog-dragging");e._unblockFrames();e._trigger("dragStop",o,s(n))}})},_makeResizable:function(){var e=this,i=this.options,s=i.resizable,o=this.uiDialog.css("position"),n=typeof s==="string"?s:"n,e,s,w,se,sw,ne,nw";function r(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:n,start:function(i,s){e._addClass(t(this),"ui-dialog-resizing");e._blockFrames();e._trigger("resizeStart",i,r(s))},resize:function(t,i){e._trigger("resize",t,r(i))},stop:function(s,o){var n=e.uiDialog.offset(),a=n.left-e.document.scrollLeft(),h=n.top-e.document.scrollTop();i.height=e.uiDialog.height();i.width=e.uiDialog.width();i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" "+"top"+(h>=0?"+":"")+h,of:e.window};e._removeClass(t(this),"ui-dialog-resizing");e._unblockFrames();e._trigger("resizeStop",s,r(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget();this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);if(i!==-1){e.splice(i,1)}},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");if(!t){t=[];this.document.data("ui-dialog-instances",t)}return t},_minHeight:function(){var t=this.options;return t.height==="auto"?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");if(!t){this.uiDialog.show()}this.uiDialog.position(this.options.position);if(!t){this.uiDialog.hide()}},_setOptions:function(e){var i=this,s=false,o={};t.each(e,function(t,e){i._setOption(t,e);if(t in i.sizeRelatedOptions){s=true}if(t in i.resizableRelatedOptions){o[t]=e}});if(s){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",o)}},_setOption:function(e,i){var s,o,n=this.uiDialog;if(e==="disabled"){return}this._super(e,i);if(e==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(e==="buttons"){this._createButtons()}if(e==="closeText"){this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()})}if(e==="draggable"){s=n.is(":data(ui-draggable)");if(s&&!i){n.draggable("destroy")}if(!s&&i){this._makeDraggable()}}if(e==="position"){this._position()}if(e==="resizable"){o=n.is(":data(ui-resizable)");if(o&&!i){n.resizable("destroy")}if(o&&typeof i==="string"){n.resizable("option","handles",i)}if(!o&&i!==false){this._makeResizable()}}if(e==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(s.minWidth>s.width){s.width=s.minWidth}t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight();e=Math.max(0,s.minHeight-t);i=typeof s.maxHeight==="number"?Math.max(0,s.maxHeight-t):"none";if(s.height==="auto"){this.element.css({minHeight:e,maxHeight:i,height:"auto"})}else{this.element.height(Math.max(0,s.height-t))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(e){if(t(e.target).closest(".ui-dialog").length){return true}return!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal){return}var e=true;this._delay(function(){e=false});if(!this.document.data("ui-dialog-overlays")){this._on(this.document,{focusin:function(t){if(e){return}if(!this._allowInteraction(t)){t.preventDefault();this._trackingInstances()[0]._focusTabbable()}}})}this.overlay=t("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal){return}if(this.overlay){var t=this.document.data("ui-dialog-overlays")-1;if(!t){this._off(this.document,"focusin");this.document.removeData("ui-dialog-overlays")}else{this.document.data("ui-dialog-overlays",t)}this.overlay.remove();this.overlay=null}}});t.widget("ui.droppable",{version:"1.12.0-rc.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=false;this.isout=true;this.accept=t.isFunction(s)?s:function(t){return t.is(s)};this.proportions=function(){if(arguments.length){e=arguments[0]}else{return e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(i.scope);i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[];t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){var e=0;for(;e<t.length;e++){if(t[e]===this){t.splice(e,1)}}},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if(e==="accept"){this.accept=t.isFunction(i)?i:function(t){return t.is(i)}}else if(e==="scope"){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s);this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass();if(i){this._trigger("activate",e,this.ui(i))}},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass();if(i){this._trigger("deactivate",e,this.ui(i))}},_over:function(e){var i=t.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._addHoverClass();this._trigger("over",e,this.ui(i))}},_out:function(e){var i=t.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._removeHoverClass();this._trigger("out",e,this.ui(i))}},_drop:function(e,i){var s=i||t.ui.ddmanager.current,o=false;if(!s||(s.currentItem||s.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&S(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)){o=true;return false}});if(o){return false}if(this.accept.call(this.element[0],s.currentItem||s.element)){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",e,this.ui(s));return this.element}return false},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var S=function(){function t(t,e,i){return t>=e&&t<e+i}return function(e,i,s,o){if(!i.offset){return false}var n=(e.positionAbs||e.position.absolute).left+e.margins.left,r=(e.positionAbs||e.position.absolute).top+e.margins.top,a=n+e.helperProportions.width,h=r+e.helperProportions.height,l=i.offset.left,f=i.offset.top,c=l+i.proportions().width,u=f+i.proportions().height;switch(s){case"fit":return l<=n&&a<=c&&f<=r&&h<=u;case"intersect":return l<n+e.helperProportions.width/2&&a-e.helperProportions.width/2<c&&f<r+e.helperProportions.height/2&&h-e.helperProportions.height/2<u;case"pointer":return t(o.pageY,f,i.proportions().height)&&t(o.pageX,l,i.proportions().width);case"touch":return(r>=f&&r<=u||h>=f&&h<=u||r<f&&h>u)&&(n>=l&&n<=c||a>=l&&a<=c||n<l&&a>c);default:return false}}}();t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var s,o,n=t.ui.ddmanager.droppables[e.options.scope]||[],r=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;s<n.length;s++){if(n[s].options.disabled||e&&!n[s].accept.call(n[s].element[0],e.currentItem||e.element)){continue}for(o=0;o<a.length;o++){if(a[o]===n[s].element[0]){n[s].proportions().height=0;continue t}}n[s].visible=n[s].element.css("display")!=="none";if(!n[s].visible){continue}if(r==="mousedown"){n[s]._activate.call(n[s],i)}n[s].offset=n[s].element.offset();n[s].proportions({width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight})}},drop:function(e,i){var s=false;t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&S(e,this,this.options.tolerance,i)){s=this._drop.call(this,i)||s}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)){this.isout=true;this.isover=false;this._deactivate.call(this,i)}});return s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){if(!e.options.refreshPositions){t.ui.ddmanager.prepareOffsets(e,i)}})},drag:function(e,i){if(e.options.refreshPositions){t.ui.ddmanager.prepareOffsets(e,i)}t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var s,o,n,r=S(e,this,this.options.tolerance,i),a=!r&&this.isover?"isout":r&&!this.isover?"isover":null;if(!a){return}if(this.options.greedy){o=this.options.scope;n=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===o});if(n.length){s=t(n[0]).droppable("instance");s.greedyChild=a==="isover"}}if(s&&a==="isover"){s.isover=false;s.isout=true;s._out.call(s,i)}this[a]=true;this[a==="isout"?"isover":"isout"]=false;this[a==="isover"?"_over":"_out"].call(this,i);if(s&&a==="isout"){s.isout=false;s.isover=true;s._over.call(s,i)}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable");if(!e.options.refreshPositions){t.ui.ddmanager.prepareOffsets(e,i)}}};if(t.uiBackCompat!==false){t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass)}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}}})}var W=t.ui.droppable;var O=t.widget("ui.sortable",t.ui.mouse,{version:"1.12.0-rc.2",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(t,e){this._super(t,e);if(t==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--){this.items[t].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(e,i){var s=null,o=false,n=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(e);t(e.target).parents().each(function(){if(t.data(this,n.widgetName+"-item")===n){s=t(this);return false}});if(t.data(e.target,n.widgetName+"-item")===n){s=t(e.target)}if(!s){return false}if(this.options.handle&&!i){t(this.options.handle,s).find("*").addBack().each(function(){if(this===e.target){o=true}});if(!o){return false}}this.currentItem=s;this._removeCurrentsFromItems();return true},_mouseStart:function(e,i,s){var o,n,r=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(e);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(e);this.originalPageX=e.pageX;this.originalPageY=e.pageY;r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(r.containment){this._setContainment()}if(r.cursor&&r.cursor!=="auto"){n=this.document.find("body");this.storedCursor=n.css("cursor");n.css("cursor",r.cursor);this.storedStylesheet=t("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(n)}if(r.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",r.opacity)}if(r.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",r.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",e,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!s){for(o=this.containers.length-1;o>=0;o--){this.containers[o]._trigger("activate",e,this._uiHash(this))}}if(t.ui.ddmanager){t.ui.ddmanager.current=this}if(t.ui.ddmanager&&!r.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(e);return true},_mouseDrag:function(e){var i,s,o,n,r=this.options,a=false;this.position=this._generatePosition(e);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity){this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed}else if(e.pageY-this.overflowOffset.top<r.scrollSensitivity){this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity){this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed}else if(e.pageX-this.overflowOffset.left<r.scrollSensitivity){this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed}}else{if(e.pageY-this.document.scrollTop()<r.scrollSensitivity){a=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed)}else if(this.window.height()-(e.pageY-this.document.scrollTop())<r.scrollSensitivity){a=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)}if(e.pageX-this.document.scrollLeft()<r.scrollSensitivity){a=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed)}else if(this.window.width()-(e.pageX-this.document.scrollLeft())<r.scrollSensitivity){a=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed)}}if(a!==false&&t.ui.ddmanager&&!r.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(i=this.items.length-1;i>=0;i--){s=this.items[i];o=s.item[0];n=this._intersectsWithPointer(s);if(!n){continue}if(s.instance!==this.currentContainer){continue}if(o!==this.currentItem[0]&&this.placeholder[n===1?"next":"prev"]()[0]!==o&&!t.contains(this.placeholder[0],o)&&(this.options.type==="semi-dynamic"?!t.contains(this.element[0],o):true)){this.direction=n===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(s)){this._rearrange(e,s)}else{break}this._trigger("change",e,this._uiHash());break}}this._contactContainers(e);if(t.ui.ddmanager){t.ui.ddmanager.drag(this,e)}this._trigger("sort",e,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e,i){if(!e){return}if(t.ui.ddmanager&&!this.options.dropBehaviour){t.ui.ddmanager.drop(this,e)}if(this.options.revert){var s=this,o=this.placeholder.offset(),n=this.options.axis,r={};if(!n||n==="x"){r.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!n||n==="y"){r.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;t(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else{this._clear(e,i)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,this._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}t.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){t(this.domPosition.prev).after(this.currentItem)}else{t(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];e=e||{};t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);if(i){s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}});if(!s.length&&e.key){s.push(e.key+"=")}return s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];e=e||{};i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")});return s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,o=s+this.helperProportions.height,n=t.left,r=n+t.width,a=t.top,h=a+t.height,l=this.offset.click.top,f=this.offset.click.left,c=this.options.axis==="x"||s+l>a&&s+l<h,u=this.options.axis==="y"||e+f>n&&e+f<r,p=c&&u;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]){return p}else{return n<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<s+this.helperProportions.height/2&&o-this.helperProportions.height/2<h}},_intersectsWithPointer:function(t){
var e,i,s=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=s&&o;if(!n){return false}e=this._getDragVerticalDirection();i=this._getDragHorizontalDirection();return this.floating?i==="right"||e==="down"?2:1:e&&(e==="down"?2:1)},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();if(this.floating&&o){return o==="right"&&i||o==="left"&&!i}else{return s&&(s==="down"&&e||s==="up"&&!e)}},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return t!==0&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return t!==0&&(t>0?"right":"left")},refresh:function(t){this._refreshItems(t);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,o,n,r=[],a=[],h=this._connectWith();if(h&&e){for(i=h.length-1;i>=0;i--){o=t(h[i],this.document[0]);for(s=o.length-1;s>=0;s--){n=t.data(o[s],this.widgetFullName);if(n&&n!==this&&!n.options.disabled){a.push([t.isFunction(n.options.items)?n.options.items.call(n.element):t(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n])}}}}a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function l(){r.push(this)}for(i=a.length-1;i>=0;i--){a[i][0].each(l)}return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++){if(e[i]===t.item[0]){return false}}return true})},_refreshItems:function(e){this.items=[];this.containers=[this];var i,s,o,n,r,a,h,l,f=this.items,c=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready){for(i=u.length-1;i>=0;i--){o=t(u[i],this.document[0]);for(s=o.length-1;s>=0;s--){n=t.data(o[s],this.widgetFullName);if(n&&n!==this&&!n.options.disabled){c.push([t.isFunction(n.options.items)?n.options.items.call(n.element[0],e,{item:this.currentItem}):t(n.options.items,n.element),n]);this.containers.push(n)}}}}for(i=c.length-1;i>=0;i--){r=c[i][1];a=c[i][0];for(s=0,l=a.length;s<l;s++){h=t(a[s]);h.data(this.widgetName+"-item",r);f.push({item:h,instance:r,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var i,s,o,n;for(i=this.items.length-1;i>=0;i--){s=this.items[i];if(s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]){continue}o=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item;if(!e){s.width=o.outerWidth();s.height=o.outerHeight()}n=o.offset();s.left=n.left;s.top=n.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(i=this.containers.length-1;i>=0;i--){n=this.containers[i].element.offset();this.containers[i].containerCache.left=n.left;this.containers[i].containerCache.top=n.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}}return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;if(!s.placeholder||s.placeholder.constructor===String){i=s.placeholder;s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+s+">",e.document[0]);e._addClass(o,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(o,"ui-sortable-helper");if(s==="tbody"){e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(o))}else if(s==="tr"){e._createTrPlaceholder(e.currentItem,o)}else if(s==="img"){o.attr("src",e.currentItem.attr("src"))}if(!i){o.css("visibility","hidden")}return o},update:function(t,o){if(i&&!s.forcePlaceholderSize){return}if(!o.height()){o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10))}if(!o.width()){o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}}}}e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,o,n,r,a,h,l,f,c,u=null,p=null;for(i=this.containers.length-1;i>=0;i--){if(t.contains(this.currentItem[0],this.containers[i].element[0])){continue}if(this._intersectsWith(this.containers[i].containerCache)){if(u&&t.contains(this.containers[i].element[0],u.element[0])){continue}u=this.containers[i];p=i}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",e,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(!u){return}if(this.containers.length===1){if(!this.containers[p].containerCache.over){this.containers[p]._trigger("over",e,this._uiHash(this));this.containers[p].containerCache.over=1}}else{o=1e4;n=null;f=u.floating||this._isFloating(this.currentItem);r=f?"left":"top";a=f?"width":"height";c=f?"pageX":"pageY";for(s=this.items.length-1;s>=0;s--){if(!t.contains(this.containers[p].element[0],this.items[s].item[0])){continue}if(this.items[s].item[0]===this.currentItem[0]){continue}h=this.items[s].item.offset()[r];l=false;if(e[c]-h>this.items[s][a]/2){l=true}if(Math.abs(e[c]-h)<o){o=Math.abs(e[c]-h);n=this.items[s];this.direction=l?"up":"down"}}if(!n&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[p]){if(!this.currentContainer.containerCache.over){this.containers[p]._trigger("over",e,this._uiHash());this.currentContainer.containerCache.over=1}return}n?this._rearrange(e,n,null,true):this._rearrange(e,null,this.containers[p].element,true);this._trigger("change",e,this._uiHash());this.containers[p]._trigger("change",e,this._uiHash(this));this.currentContainer=this.containers[p];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[p]._trigger("over",e,this._uiHash(this));this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):i.helper==="clone"?this.currentItem.clone():this.currentItem;if(!s.parents("body").length){t(i.appendTo!=="parent"?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0])}if(s[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!s[0].style.width||i.forceHelperSize){s.width(this.currentItem.width())}if(!s[0].style.height||i.forceHelperSize){s.height(this.currentItem.height())}return s},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(t.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&t.ui.ie){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode}if(o.containment==="document"||o.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(o.containment)){e=t(o.containment)[0];i=t(o.containment).offset();s=t(e).css("overflow")!=="hidden";this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){if(!i){i=this.position}var s=e==="absolute"?1:-1,o=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,n=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():n?0:o.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():n?0:o.scrollLeft())*s}},_generatePosition:function(e){var i,s,o=this.options,n=e.pageX,r=e.pageY,a=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(a[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){n=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){r=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){n=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){r=this.containment[3]+this.offset.click.top}}if(o.grid){i=this.originalPageY+Math.round((r-this.originalPageY)/o.grid[1])*o.grid[1];r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i;s=this.originalPageX+Math.round((n-this.originalPageX)/o.grid[0])*o.grid[0];n=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-o.grid[0]:s+o.grid[0]:s}}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():h?0:a.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():h?0:a.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?e.item[0]:e.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){if(o===this.counter){this.refreshPositions(!s)}})},_clear:function(t,e){this.reverting=false;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!e){s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!e){s.push(function(t){this._trigger("update",t,this._uiHash())})}if(this!==this.currentContainer){if(!e){s.push(function(t){this._trigger("remove",t,this._uiHash())});s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer));s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))}}function o(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}for(i=this.containers.length-1;i>=0;i--){if(!e){s.push(o("deactivate",this,this.containers[i]))}if(this.containers[i].containerCache.over){s.push(o("out",this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!e){this._trigger("beforeStop",t,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!e){for(i=0;i<s.length;i++){s[i].call(this,t)}this._trigger("stop",t,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(t.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})});
(function(e){e.fn.pstrength=function(r){var r=e.extend({verdects:["very weak","weak","medium","strong","stronger"],scores:[16,25,35,45]},r);return this.each(function(){var t=e(this).attr("id");e(this).after('<div id="'+t+'_text"></div>');e(this).after('<div id="'+t+'_bar" style="border: 1px solid white; font-size: 1px; height: 2px; width: 0px;"></div>');e(this).keyup(function(){e.fn.runPassword(e(this).val(),t,r)})})};e.fn.runPassword=function(r,t,s){nPerc=e.fn.checkPassword(r,s);var c="#"+t+"_bar";var n="#"+t+"_text";var i=Math.round(nPerc*2.2);if(i>99)i=99;e(c).css({width:i+"%"});if(nPerc<=s.scores[0]){strColor="red";strText=s.verdects[0]}else if(nPerc>s.scores[0]&&nPerc<=s.scores[1]){strColor="#ffd801";strText=s.verdects[1]}else if(nPerc>s.scores[1]&&nPerc<=s.scores[2]){strColor="#ffd801";strText=s.verdects[2]}else if(nPerc>s.scores[2]&&nPerc<=s.scores[3]){strColor="orange";strText=s.verdects[3]}else{strColor="#3bce08";strText=s.verdects[4]}e(c).css({backgroundColor:strColor});e(n).html("<span style='color: "+strColor+";'>"+strText+"</span>")};e.fn.checkPassword=function(e,r){var t=0;var s=r.verdects[0];if(e.length<5){t=t+3}else if(e.length>4&&e.length<8){t=t+6}else if(e.length>7&&e.length<16){t=t+12}else if(e.length>15){t=t+18}if(e.match(/[a-z]/)){t=t+1}if(e.match(/[A-Z]/)){t=t+5}if(e.match(/\d+/)){t=t+5}if(e.match(/(.*[0-9].*[0-9].*[0-9])/)){t=t+5}if(e.match(/.[!,@,#,$,%,^,&,*,?,_,~]/)){t=t+5}if(e.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)){t=t+5}if(e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)){t=t+2}if(e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)){t=t+2}if(e.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)){t=t+2}return t}})(jQuery);
jQuery.effects||function(e,t){e.effects={};e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,a){e.fx.step[a]=function(e){if(!e.colorInit){e.start=n(e.elem,a);e.end=r(e.end);e.colorInit=true}e.elem.style[a]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});function r(t){var r;if(t&&t.constructor==Array&&t.length==3)return t;if(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))return[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)];if(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))return[parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55];if(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))return[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)];if(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)];if(r=/rgba\(0, 0, 0, 0\)/.exec(t))return a["transparent"];return a[e.trim(t).toLowerCase()]}function n(t,n){var a;do{a=(e.curCSS||e.css)(t,n);if(a!=""&&a!="transparent"||e.nodeName(t,"body"))break;n="backgroundColor"}while(t=t.parentNode);return r(a)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var s=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function o(){var e=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,t={},r,n;if(e&&e.length&&e[0]&&e[e[0]]){var a=e.length;while(a--){r=e[a];if(typeof e[r]=="string"){n=r.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});t[n]=e[r]}}}else{for(r in e){if(typeof e[r]==="string"){t[r]=e[r]}}}return t}function f(t){var r,n;for(r in t){n=t[r];if(n==null||e.isFunction(n)||r in i||/scrollbar/.test(r)||!/color/i.test(r)&&isNaN(parseFloat(n))){delete t[r]}}return t}function l(e,t){var r={_:0},n;for(n in t){if(e[n]!=t[n]){r[n]=t[n]}}return r}e.effects.animateClass=function(t,r,n,a){if(e.isFunction(n)){a=n;n=null}return this.queue(function(){var i=e(this),u=i.attr("style")||" ",c=f(o.call(this)),p,d=i.attr("class")||"";e.each(s,function(e,r){if(t[r]){i[r+"Class"](t[r])}});p=f(o.call(this));i.attr("class",d);i.animate(l(c,p),{queue:false,duration:r,easing:n,complete:function(){e.each(s,function(e,r){if(t[r]){i[r+"Class"](t[r])}});if(typeof i.attr("style")=="object"){i.attr("style").cssText="";i.attr("style").cssText=u}else{i.attr("style",u)}if(a){a.apply(this,arguments)}e.dequeue(this)}})})};e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,r,n,a){return r?e.effects.animateClass.apply(this,[{add:t},r,n,a]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,r,n,a){return r?e.effects.animateClass.apply(this,[{remove:t},r,n,a]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(r,n,a,s,i){if(typeof n=="boolean"||n===t){if(!a){return this._toggleClass(r,n)}else{return e.effects.animateClass.apply(this,[n?{add:r}:{remove:r},a,s,i])}}else{return e.effects.animateClass.apply(this,[{toggle:r},n,a,s])}},switchClass:function(t,r,n,a,s){return e.effects.animateClass.apply(this,[{add:r,remove:t},n,a,s])}});e.extend(e.effects,{version:"1.8.23",save:function(e,t){for(var r=0;r<t.length;r++){if(t[r]!==null)e.data("ec.storage."+t[r],e[0].style[t[r]])}},restore:function(e,t){for(var r=0;r<t.length;r++){if(t[r]!==null)e.css(t[r],e.data("ec.storage."+t[r]))}},setMode:function(e,t){if(t=="toggle")t=e.is(":hidden")?"show":"hide";return t},getBaseline:function(e,t){var r,n;switch(e[0]){case"top":r=0;break;case"middle":r=.5;break;case"bottom":r=1;break;default:r=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:r}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper")){return t.parent()}var r={width:t.outerWidth(true),height:t.outerHeight(true),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a=document.activeElement;try{a.id}catch(e){a=document.body}t.wrap(n);if(t[0]===a||e.contains(t[0],a)){e(a).focus()}n=t.parent();if(t.css("position")=="static"){n.css({position:"relative"});t.css({position:"relative"})}else{e.extend(r,{position:t.css("position"),zIndex:t.css("z-index")});e.each(["top","left","bottom","right"],function(e,n){r[n]=t.css(n);if(isNaN(parseInt(r[n],10))){r[n]="auto"}});t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return n.css(r).show()},removeWrapper:function(t){var r,n=document.activeElement;if(t.parent().is(".ui-effects-wrapper")){r=t.parent().replaceWith(t);if(t[0]===n||e.contains(t[0],n)){e(n).focus()}return r}return t},setTransition:function(t,r,n,a){a=a||{};e.each(r,function(e,r){var s=t.cssUnit(r);if(s[0]>0)a[r]=s[0]*n+s[1]});return a}});function u(t,r,n,a){if(typeof t=="object"){a=r;n=null;r=t;t=r.effect}if(e.isFunction(r)){a=r;n=null;r={}}if(typeof r=="number"||e.fx.speeds[r]){a=n;n=r;r={}}if(e.isFunction(n)){a=n;n=null}r=r||{};n=n||r.duration;n=e.fx.off?0:typeof n=="number"?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default;a=a||r.complete;return[t,r,n,a]}function c(t){if(!t||typeof t==="number"||e.fx.speeds[t]){return true}if(typeof t==="string"&&!e.effects[t]){return true}return false}e.fn.extend({effect:function(t,r,n,a){var s=u.apply(this,arguments),i={options:s[1],duration:s[2],callback:s[3]},o=i.options.mode,f=e.effects[t];if(e.fx.off||!f){if(o){return this[o](i.duration,i.callback)}else{return this.each(function(){if(i.callback){i.callback.call(this)}})}}return f.call(this,i)},_show:e.fn.show,show:function(e){if(c(e)){return this._show.apply(this,arguments)}else{var t=u.apply(this,arguments);t[1].mode="show";return this.effect.apply(this,t)}},_hide:e.fn.hide,hide:function(e){if(c(e)){return this._hide.apply(this,arguments)}else{var t=u.apply(this,arguments);t[1].mode="hide";return this.effect.apply(this,t)}},__toggle:e.fn.toggle,toggle:function(t){if(c(t)||typeof t==="boolean"||e.isFunction(t)){return this.__toggle.apply(this,arguments)}else{var r=u.apply(this,arguments);r[1].mode="toggle";return this.effect.apply(this,r)}},cssUnit:function(t){var r=this.css(t),n=[];e.each(["em","px","%","pt"],function(e,t){if(r.indexOf(t)>0)n=[parseFloat(r),t]});return n}});var p={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){p[t]=function(t){return Math.pow(t,e+2)}});e.extend(p,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,r=4;while(e<((t=Math.pow(2,--r))-1)/11){}return 1/Math.pow(4,3-r)-7.5625*Math.pow((t*3-2)/22-e,2)}});e.each(p,function(t,r){e.easing["easeIn"+t]=r;e.easing["easeOut"+t]=function(e){return 1-r(1-e)};e.easing["easeInOut"+t]=function(e){return e<.5?r(e*2)/2:r(e*-2+2)/-2+1}})}(jQuery);
(function($,undefined){$.extend($.ui,{datepicker:{version:"1.8.23"}});var PROP_NAME="datepicker";var dpuuid=(new Date).getTime();var instActive;function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){if(this.debug)console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){extendRemove(this._defaults,e||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=nodeName=="div"||nodeName=="span";if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else if(inline){this._inlineDatepicker(target,inst)}},_newInst:function(e,t){var a=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:a,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:!t?this.dpDiv:bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(e,t){var a=$(e);t.append=$([]);t.trigger=$([]);if(a.hasClass(this.markerClassName))return;this._attachments(a,t);a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,a,i){t.settings[a]=i}).bind("getData.datepicker",function(e,a){return this._get(t,a)});this._autoSize(t);$.data(e,PROP_NAME,t);if(t.settings.disabled){this._disableDatepicker(e)}},_attachments:function(e,t){var a=this._get(t,"appendText");var i=this._get(t,"isRTL");if(t.append)t.append.remove();if(a){t.append=$('<span class="'+this._appendClass+'">'+a+"</span>");e[i?"before":"after"](t.append)}e.unbind("focus",this._showDatepicker);if(t.trigger)t.trigger.remove();var r=this._get(t,"showOn");if(r=="focus"||r=="both")e.focus(this._showDatepicker);if(r=="button"||r=="both"){var s=this._get(t,"buttonText");var n=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:n,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(n==""?s:$("<img/>").attr({src:n,alt:s,title:s})));e[i?"before":"after"](t.trigger);t.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0])$.datepicker._hideDatepicker();else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(e[0])}else $.datepicker._showDatepicker(e[0]);return false})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,12-1,20);var a=this._get(e,"dateFormat");if(a.match(/[DM]/)){var i=function(e){var t=0;var a=0;for(var i=0;i<e.length;i++){if(e[i].length>t){t=e[i].length;a=i}}return a};t.setMonth(i(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort")));t.setDate(i(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var a=$(e);if(a.hasClass(this.markerClassName))return;a.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,a,i){t.settings[a]=i}).bind("getData.datepicker",function(e,a){return this._get(t,a)});$.data(e,PROP_NAME,t);this._setDate(t,this._getDefaultDate(t),true);this._updateDatepicker(t);this._updateAlternate(t);if(t.settings.disabled){this._disableDatepicker(e)}t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,a,i,r){var s=this._dialogInst;if(!s){this.uuid+=1;var n="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+n+'" style="position: absolute; top: -100px; width: 0px;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);s=this._dialogInst=this._newInst(this._dialogInput,false);s.settings={};$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,i||{});t=t&&t.constructor==Date?this._formatDate(s,t):t;this._dialogInput.val(t);this._pos=r?r.length?r:[r.pageX,r.pageY]:null;if(!this._pos){var d=document.documentElement.clientWidth;var l=document.documentElement.clientHeight;var o=document.documentElement.scrollLeft||document.body.scrollLeft;var c=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[d/2-100+o,l/2-150+c]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");s.settings.onSelect=a;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI)$.blockUI(this.dpDiv);$.data(this._dialogInput[0],PROP_NAME,s);return this},_destroyDatepicker:function(e){var t=$(e);var a=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var i=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME);if(i=="input"){a.append.remove();a.trigger.remove();t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(i=="div"||i=="span")t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e);var a=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var i=e.nodeName.toLowerCase();if(i=="input"){e.disabled=false;a.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(i=="div"||i=="span"){var r=t.children("."+this._inlineClass);r.children().removeClass("ui-state-disabled");r.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e);var a=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var i=e.nodeName.toLowerCase();if(i=="input"){e.disabled=true;a.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(i=="div"||i=="span"){var r=t.children("."+this._inlineClass);r.children().addClass("ui-state-disabled");r.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t});this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e){return false}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]==e)return true}return false},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,a){var i=this._getInst(e);if(arguments.length==2&&typeof t=="string"){return t=="defaults"?$.extend({},$.datepicker._defaults):i?t=="all"?$.extend({},i.settings):this._get(i,t):null}var r=t||{};if(typeof t=="string"){r={};r[t]=a}if(i){if(this._curInst==i){this._hideDatepicker()}var s=this._getDateDatepicker(e,true);var n=this._getMinMaxDate(i,"min");var d=this._getMinMaxDate(i,"max");extendRemove(i.settings,r);if(n!==null&&r["dateFormat"]!==undefined&&r["minDate"]===undefined)i.settings.minDate=this._formatDate(i,n);if(d!==null&&r["dateFormat"]!==undefined&&r["maxDate"]===undefined)i.settings.maxDate=this._formatDate(i,d);this._attachments($(e),i);this._autoSize(i);this._setDate(i,s);this._updateAlternate(i);this._updateDatepicker(i)}},_changeDatepicker:function(e,t,a){this._optionDatepicker(e,t,a)},_refreshDatepicker:function(e){var t=this._getInst(e);if(t){this._updateDatepicker(t)}},_setDateDatepicker:function(e,t){var a=this._getInst(e);if(a){this._setDate(a,t);this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(e,t){var a=this._getInst(e);if(a&&!a.inline)this._setDateFromField(a,t);return a?this._getDate(a):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target);var a=true;var i=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=true;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker();a=false;break;case 13:var r=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);if(r[0])$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,r[0]);var s=$.datepicker._get(t,"onSelect");if(s){var n=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[n,t])}else $.datepicker._hideDatepicker();return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:if(e.ctrlKey||e.metaKey)$.datepicker._clearDate(e.target);a=e.ctrlKey||e.metaKey;break;case 36:if(e.ctrlKey||e.metaKey)$.datepicker._gotoToday(e.target);a=e.ctrlKey||e.metaKey;break;case 37:if(e.ctrlKey||e.metaKey)$.datepicker._adjustDate(e.target,i?+1:-1,"D");a=e.ctrlKey||e.metaKey;if(e.originalEvent.altKey)$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:if(e.ctrlKey||e.metaKey)$.datepicker._adjustDate(e.target,-7,"D");a=e.ctrlKey||e.metaKey;break;case 39:if(e.ctrlKey||e.metaKey)$.datepicker._adjustDate(e.target,i?-1:+1,"D");a=e.ctrlKey||e.metaKey;if(e.originalEvent.altKey)$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:if(e.ctrlKey||e.metaKey)$.datepicker._adjustDate(e.target,+7,"D");a=e.ctrlKey||e.metaKey;break;default:a=false}else if(e.keyCode==36&&e.ctrlKey)$.datepicker._showDatepicker(this);else{a=false}if(a){e.preventDefault();e.stopPropagation()}},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var a=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat"));var i=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||(i<" "||!a||a.indexOf(i)>-1)}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal){try{var a=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));if(a){$.datepicker._setDateFromField(t);$.datepicker._updateAlternate(t);$.datepicker._updateDatepicker(t)}}catch(e){$.datepicker.log(e)}}return true},_showDatepicker:function(e){e=e.target||e;if(e.nodeName.toLowerCase()!="input")e=$("input",e.parentNode)[0];if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);if($.datepicker._curInst&&$.datepicker._curInst!=t){$.datepicker._curInst.dpDiv.stop(true,true);if(t&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}}var a=$.datepicker._get(t,"beforeShow");var i=a?a.apply(e,[e,t]):{};if(i===false){return}extendRemove(t.settings,i);t.lastVal=null;$.datepicker._lastInput=e;$.datepicker._setDateFromField(t);if($.datepicker._inDialog)e.value="";if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(e);$.datepicker._pos[1]+=e.offsetHeight}var r=false;$(e).parents().each(function(){r|=$(this).css("position")=="fixed";return!r});if(r&&BrowserDetect.browser=="Opera"){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;t.dpDiv.empty();t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(t);s=$.datepicker._checkOffset(t,s,r);t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var n=$.datepicker._get(t,"showAnim");var d=$.datepicker._get(t,"duration");var l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var a=$.datepicker._getBorders(t.dpDiv);e.css({left:-a[0],top:-a[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects[n])t.dpDiv.show(n,$.datepicker._get(t,"showOptions"),d,l);else t.dpDiv[n||"show"](n?d:null,l);if(!n||!d)l();if(t.input.is(":visible")&&!t.input.is(":disabled"))t.input.focus();$.datepicker._curInst=t}},_updateDatepicker:function(e){var t=this;t.maxRows=4;var a=$.datepicker._getBorders(e.dpDiv);instActive=e;e.dpDiv.empty().append(this._generateHTML(e));this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");if(!!i.length){i.css({left:-a[0],top:-a[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()})}e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e);var s=r[1];var n=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(s>1)e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",n*s+"em");e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement)e.input.focus();if(e.yearshtml){var d=e.yearshtml;setTimeout(function(){if(d===e.yearshtml&&e.yearshtml){e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml)}d=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,a){var i=e.dpDiv.outerWidth();var r=e.dpDiv.outerHeight();var s=e.input?e.input.outerWidth():0;var n=e.input?e.input.outerHeight():0;var d=document.documentElement.clientWidth+(a?0:$(document).scrollLeft());var l=document.documentElement.clientHeight+(a?0:$(document).scrollTop());t.left-=this._get(e,"isRTL")?i-s:0;t.left-=a&&t.left==e.input.offset().left?$(document).scrollLeft():0;t.top-=a&&t.top==e.input.offset().top+n?$(document).scrollTop():0;t.left-=Math.min(t.left,t.left+i>d&&d>i?Math.abs(t.left+i-d):0);t.top-=Math.min(t.top,t.top+r>l&&l>r?Math.abs(r+n):0);return t},_findPos:function(e){var t=this._getInst(e);var a=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e))){e=e[a?"previousSibling":"nextSibling"]}var i=$(e).offset();return[i.left,i.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var a=this._get(t,"showAnim");var i=this._get(t,"duration");var r=function(){$.datepicker._tidyDialog(t)};if($.effects&&$.effects[a])t.dpDiv.hide(a,$.datepicker._get(t,"showOptions"),i,r);else t.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?i:null,r);if(!a)r();this._datepickerShowing=false;var s=this._get(t,"onClose");if(s)s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]);this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),a=$.datepicker._getInst(t[0]);if(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=a)$.datepicker._hideDatepicker()},_adjustDate:function(e,t,a){var i=$(e);var r=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0])){return}this._adjustInstDate(r,t+(a=="M"?this._get(r,"showCurrentAtPos"):0),a);this._updateDatepicker(r)},_gotoToday:function(e){var t=$(e);var a=this._getInst(t[0]);if(this._get(a,"gotoCurrent")&&a.currentDay){a.selectedDay=a.currentDay;a.drawMonth=a.selectedMonth=a.currentMonth;a.drawYear=a.selectedYear=a.currentYear}else{var i=new Date;a.selectedDay=i.getDate();a.drawMonth=a.selectedMonth=i.getMonth();a.drawYear=a.selectedYear=i.getFullYear()}this._notifyChange(a);this._adjustDate(t)},_selectMonthYear:function(e,t,a){var i=$(e);var r=this._getInst(i[0]);r["selected"+(a=="M"?"Month":"Year")]=r["draw"+(a=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10);this._notifyChange(r);this._adjustDate(i)},_selectDay:function(e,t,a,i){var r=$(e);if($(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])){return}var s=this._getInst(r[0]);s.selectedDay=s.currentDay=$("a",i).html();s.selectedMonth=s.currentMonth=t;s.selectedYear=s.currentYear=a;this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e);var a=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var a=$(e);var i=this._getInst(a[0]);t=t!=null?t:this._formatDate(i);if(i.input)i.input.val(t);this._updateAlternate(i);var r=this._get(i,"onSelect");if(r)r.apply(i.input?i.input[0]:null,[t,i]);else if(i.input)i.input.trigger("change");if(i.inline)this._updateDatepicker(i);else{this._hideDatepicker();this._lastInput=i.input[0];if(typeof i.input[0]!="object")i.input.focus();this._lastInput=null}},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var a=this._get(e,"altFormat")||this._get(e,"dateFormat");var i=this._getDate(e);var r=this.formatDate(a,i,this._getFormatConfig(e));$(t).each(function(){$(this).val(r)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var a=t.getTime();t.setMonth(0);t.setDate(1);return Math.floor(Math.round((a-t)/864e5)/7)+1},parseDate:function(e,t,a){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var i=(a?a.shortYearCutoff:null)||this._defaults.shortYearCutoff;i=typeof i!="string"?i:(new Date).getFullYear()%100+parseInt(i,10);var r=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort;var s=(a?a.dayNames:null)||this._defaults.dayNames;var n=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort;var d=(a?a.monthNames:null)||this._defaults.monthNames;var l=-1;var o=-1;var c=-1;var u=-1;var h=false;var p=function(t){var a=k+1<e.length&&e.charAt(k+1)==t;if(a)k++;return a};var g=function(e){var a=p(e);var i=e=="@"?14:e=="!"?20:e=="y"&&a?4:e=="o"?3:2;var r=new RegExp("^\\d{1,"+i+"}");var s=t.substring(v).match(r);if(!s)throw"Missing number at position "+v;v+=s[0].length;return parseInt(s[0],10)};var f=function(e,a,i){var r=$.map(p(e)?i:a,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});var s=-1;$.each(r,function(e,a){var i=a[1];if(t.substr(v,i.length).toLowerCase()==i.toLowerCase()){s=a[0];v+=i.length;return false}});if(s!=-1)return s+1;else throw"Unknown name at position "+v};var _=function(){if(t.charAt(v)!=e.charAt(k))throw"Unexpected literal at position "+v;v++};var v=0;for(var k=0;k<e.length;k++){if(h)if(e.charAt(k)=="'"&&!p("'"))h=false;else _();else switch(e.charAt(k)){case"d":c=g("d");break;case"D":f("D",r,s);break;case"o":u=g("o");break;case"m":o=g("m");break;case"M":o=f("M",n,d);break;case"y":l=g("y");break;case"@":var m=new Date(g("@"));l=m.getFullYear();o=m.getMonth()+1;c=m.getDate();break;case"!":var m=new Date((g("!")-this._ticksTo1970)/1e4);l=m.getFullYear();o=m.getMonth()+1;c=m.getDate();break;case"'":if(p("'"))_();else h=true;break;default:_()}}if(v<t.length){throw"Extra/unparsed characters found in date: "+t.substring(v)}if(l==-1)l=(new Date).getFullYear();else if(l<100)l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=i?0:-100);if(u>-1){o=1;c=u;do{var D=this._getDaysInMonth(l,o-1);if(c<=D)break;o++;c-=D}while(true)}var m=this._daylightSavingAdjust(new Date(l,o-1,c));if(m.getFullYear()!=l||m.getMonth()+1!=o||m.getDate()!=c)throw"Invalid date";return m},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(e,t,a){if(!t)return"";var i=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort;var r=(a?a.dayNames:null)||this._defaults.dayNames;var s=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort;var n=(a?a.monthNames:null)||this._defaults.monthNames;var d=function(t){var a=h+1<e.length&&e.charAt(h+1)==t;if(a)h++;return a};var l=function(e,t,a){var i=""+t;if(d(e))while(i.length<a)i="0"+i;return i};var o=function(e,t,a,i){return d(e)?i[t]:a[t]};var c="";var u=false;if(t)for(var h=0;h<e.length;h++){if(u)if(e.charAt(h)=="'"&&!d("'"))u=false;else c+=e.charAt(h);else switch(e.charAt(h)){case"d":c+=l("d",t.getDate(),2);break;case"D":c+=o("D",t.getDay(),i,r);break;case"o":c+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=l("m",t.getMonth()+1,2);break;case"M":c+=o("M",t.getMonth(),s,n);break;case"y":c+=d("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":if(d("'"))c+="'";else u=true;break;default:c+=e.charAt(h)}}return c},_possibleChars:function(e){var t="";var a=false;var i=function(t){var a=r+1<e.length&&e.charAt(r+1)==t;if(a)r++;return a};for(var r=0;r<e.length;r++)if(a)if(e.charAt(r)=="'"&&!i("'"))a=false;else t+=e.charAt(r);else switch(e.charAt(r)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":if(i("'"))t+="'";else a=true;break;default:t+=e.charAt(r)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal){return}var a=this._get(e,"dateFormat");var i=e.lastVal=e.input?e.input.val():null;var r,s;r=s=this._getDefaultDate(e);var n=this._getFormatConfig(e);try{r=this.parseDate(a,i,n)||s}catch(e){this.log(e);i=t?"":i}e.selectedDay=r.getDate();e.drawMonth=e.selectedMonth=r.getMonth();e.drawYear=e.selectedYear=r.getFullYear();e.currentDay=i?r.getDate():0;e.currentMonth=i?r.getMonth():0;e.currentYear=i?r.getFullYear():0;this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,a){var i=function(e){var t=new Date;t.setDate(t.getDate()+e);return t};var r=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(e){}var a=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date;var i=a.getFullYear();var r=a.getMonth();var s=a.getDate();var n=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var d=n.exec(t);while(d){switch(d[2]||"d"){case"d":case"D":s+=parseInt(d[1],10);break;case"w":case"W":s+=parseInt(d[1],10)*7;break;case"m":case"M":r+=parseInt(d[1],10);s=Math.min(s,$.datepicker._getDaysInMonth(i,r));break;case"y":case"Y":i+=parseInt(d[1],10);s=Math.min(s,$.datepicker._getDaysInMonth(i,r));break}d=n.exec(t)}return new Date(i,r,s)};var s=t==null||t===""?a:typeof t=="string"?r(t):typeof t=="number"?isNaN(t)?a:i(t):new Date(t.getTime());s=s&&s.toString()=="Invalid Date"?a:s;if(s){s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0)}return this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){if(!e)return null;e.setHours(e.getHours()>12?e.getHours()+2:0);return e},_setDate:function(e,t,a){var i=!t;var r=e.selectedMonth;var s=e.selectedYear;var n=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=n.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=n.getMonth();e.drawYear=e.selectedYear=e.currentYear=n.getFullYear();if((r!=e.selectedMonth||s!=e.selectedYear)&&!a)this._notifyChange(e);this._adjustInstDate(e);if(e.input){e.input.val(i?"":this._formatDate(e))}},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths");var a="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(a,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(a,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(a)},selectDay:function(){window["DP_jQuery_"+dpuuid].datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(a,this,"M");return false},selectYear:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(a,this,"Y");return false}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var a=this._get(e,"isRTL");var i=this._get(e,"showButtonPanel");var r=this._get(e,"hideIfNoPrevNext");var s=this._get(e,"navigationAsDateFormat");var n=this._getNumberOfMonths(e);var d=this._get(e,"showCurrentAtPos");var l=this._get(e,"stepMonths");var o=n[0]!=1||n[1]!=1;var c=this._daylightSavingAdjust(!e.currentDay?new Date(9999,9,9):new Date(e.currentYear,e.currentMonth,e.currentDay));var u=this._getMinMaxDate(e,"min");var h=this._getMinMaxDate(e,"max");var p=e.drawMonth-d;var g=e.drawYear;if(p<0){p+=12;g--}if(h){var f=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-n[0]*n[1]+1,h.getDate()));f=u&&f<u?u:f;while(this._daylightSavingAdjust(new Date(g,p,1))>f){p--;if(p<0){p=11;g--}}}e.drawMonth=p;e.drawYear=g;var _=this._get(e,"prevText");_=!s?_:this.formatDate(_,this._daylightSavingAdjust(new Date(g,p-l,1)),this._getFormatConfig(e));var v=this._canAdjustMonth(e,-1,g,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click"'+' title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(a?"e":"w")+'">'+_+"</span></a>":r?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(a?"e":"w")+'">'+_+"</span></a>";var k=this._get(e,"nextText");k=!s?k:this.formatDate(k,this._daylightSavingAdjust(new Date(g,p+l,1)),this._getFormatConfig(e));var m=this._canAdjustMonth(e,+1,g,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click"'+' title="'+k+'"><span class="ui-icon ui-icon-circle-triangle-'+(a?"w":"e")+'">'+k+"</span></a>":r?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+k+'"><span class="ui-icon ui-icon-circle-triangle-'+(a?"w":"e")+'">'+k+"</span></a>";var D=this._get(e,"currentText");var y=this._get(e,"gotoCurrent")&&e.currentDay?c:t;D=!s?D:this.formatDate(D,y,this._getFormatConfig(e));var M=!e.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>":"";var $=i?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(a?M:"")+(this._isInRange(e,y)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click"'+">"+D+"</button>":"")+(a?"":M)+"</div>":"";var w=parseInt(this._get(e,"firstDay"),10);w=isNaN(w)?0:w;var b=this._get(e,"showWeek");var C=this._get(e,"dayNames");var I=this._get(e,"dayNamesShort");var x=this._get(e,"dayNamesMin");var N=this._get(e,"monthNames");var S=this._get(e,"monthNamesShort");var Y=this._get(e,"beforeShowDay");var A=this._get(e,"showOtherMonths");var F=this._get(e,"selectOtherMonths");var T=this._get(e,"calculateWeek")||this.iso8601Week;var j=this._getDefaultDate(e);var K="";for(var O=0;O<n[0];O++){var P="";this.maxRows=4;for(var R=0;R<n[1];R++){var E=this._daylightSavingAdjust(new Date(g,p,e.selectedDay));var W=" ui-corner-all";var H="";if(o){H+='<div class="ui-datepicker-group';if(n[1]>1)switch(R){case 0:H+=" ui-datepicker-group-first";W=" ui-corner-"+(a?"right":"left");break;case n[1]-1:H+=" ui-datepicker-group-last";W=" ui-corner-"+(a?"left":"right");break;default:H+=" ui-datepicker-group-middle";W="";break}H+='">'}H+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+W+'">'+(/all|left/.test(W)&&O==0?a?m:v:"")+(/all|right/.test(W)&&O==0?a?v:m:"")+this._generateMonthYearHeader(e,p,g,u,h,O>0||R>0,N,S)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var L=b?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var B=0;B<7;B++){var z=(B+w)%7;L+="<th"+((B+w+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[z]+'">'+x[z]+"</span></th>"}H+=L+"</tr></thead><tbody>";var U=this._getDaysInMonth(g,p);if(g==e.selectedYear&&p==e.selectedMonth)e.selectedDay=Math.min(e.selectedDay,U);var Q=(this._getFirstDayOfMonth(g,p)-w+7)%7;var V=Math.ceil((Q+U)/7);var J=o?this.maxRows>V?this.maxRows:V:V;this.maxRows=J;var X=this._daylightSavingAdjust(new Date(g,p,1-Q));for(var Z=0;Z<J;Z++){H+="<tr>";var q=!b?"":'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(X)+"</td>";for(var B=0;B<7;B++){var G=Y?Y.apply(e.input?e.input[0]:null,[X]):[true,""];

var ee=X.getMonth()!=p;var te=ee&&!F||!G[0]||u&&X<u||h&&X>h;q+='<td class="'+((B+w+6)%7>=5?" ui-datepicker-week-end":"")+(ee?" ui-datepicker-other-month":"")+(X.getTime()==E.getTime()&&p==e.selectedMonth&&e._keyEvent||j.getTime()==X.getTime()&&j.getTime()==E.getTime()?" "+this._dayOverClass:"")+(te?" "+this._unselectableClass+" ui-state-disabled":"")+(ee&&!A?"":" "+G[1]+(X.getTime()==c.getTime()?" "+this._currentClass:"")+(X.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!ee||A)&&G[2]?' title="'+G[2]+'"':"")+(te?"":' data-handler="selectDay" data-event="click" data-month="'+X.getMonth()+'" data-year="'+X.getFullYear()+'"')+">"+(ee&&!A?"&#xa0;":te?'<span class="ui-state-default">'+X.getDate()+"</span>":'<a class="ui-state-default'+(X.getTime()==t.getTime()?" ui-state-highlight":"")+(X.getTime()==c.getTime()?" ui-state-active":"")+(ee?" ui-priority-secondary":"")+'" href="#">'+X.getDate()+"</a>")+"</td>";X.setDate(X.getDate()+1);X=this._daylightSavingAdjust(X)}H+=q+"</tr>"}p++;if(p>11){p=0;g++}H+="</tbody></table>"+(o?"</div>"+(n[0]>0&&R==n[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");P+=H}K+=P}K+=$+(BrowserDetect.browser=="IE"&&BrowserDetect.version<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");e._keyEvent=false;return K},_generateMonthYearHeader:function(e,t,a,i,r,s,n,d){var l=this._get(e,"changeMonth");var o=this._get(e,"changeYear");var c=this._get(e,"showMonthAfterYear");var u='<div class="ui-datepicker-title">';var h="";if(s||!l)h+='<span class="ui-datepicker-month">'+n[t]+"</span>";else{var p=i&&i.getFullYear()==a;var g=r&&r.getFullYear()==a;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var f=0;f<12;f++){if((!p||f>=i.getMonth())&&(!g||f<=r.getMonth()))h+='<option value="'+f+'"'+(f==t?' selected="selected"':"")+">"+d[f]+"</option>"}h+="</select>"}if(!c)u+=h+(s||!(l&&o)?"&#xa0;":"");if(!e.yearshtml){e.yearshtml="";if(s||!o)u+='<span class="ui-datepicker-year">'+a+"</span>";else{var _=this._get(e,"yearRange").split(":");var v=(new Date).getFullYear();var k=function(e){var t=e.match(/c[+-].*/)?a+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t};var m=k(_[0]);var D=Math.max(m,k(_[1]||""));m=i?Math.max(m,i.getFullYear()):m;D=r?Math.min(D,r.getFullYear()):D;e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;m<=D;m++){e.yearshtml+='<option value="'+m+'"'+(m==a?' selected="selected"':"")+">"+m+"</option>"}e.yearshtml+="</select>";u+=e.yearshtml;e.yearshtml=null}}u+=this._get(e,"yearSuffix");if(c)u+=(s||!(l&&o)?"&#xa0;":"")+h;u+="</div>";return u},_adjustInstDate:function(e,t,a){var i=e.drawYear+(a=="Y"?t:0);var r=e.drawMonth+(a=="M"?t:0);var s=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+(a=="D"?t:0);var n=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,s)));e.selectedDay=n.getDate();e.drawMonth=e.selectedMonth=n.getMonth();e.drawYear=e.selectedYear=n.getFullYear();if(a=="M"||a=="Y")this._notifyChange(e)},_restrictMinMax:function(e,t){var a=this._getMinMaxDate(e,"min");var i=this._getMinMaxDate(e,"max");var r=a&&t<a?a:t;r=i&&r>i?i:r;return r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");if(t)t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,a,i){var r=this._getNumberOfMonths(e);var s=this._daylightSavingAdjust(new Date(a,i+(t<0?t:r[0]*r[1]),1));if(t<0)s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth()));return this._isInRange(e,s)},_isInRange:function(e,t){var a=this._getMinMaxDate(e,"min");var i=this._getMinMaxDate(e,"max");return(!a||t.getTime()>=a.getTime())&&(!i||t.getTime()<=i.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,a,i){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}var r=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(i,a,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}});function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var a=$(e.target).closest(t);if(!a.length){return}a.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(a){var i=$(a.target).closest(t);if($.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||!i.length){return}i.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");i.addClass("ui-state-hover");if(i.hasClass("ui-datepicker-prev"))i.addClass("ui-datepicker-prev-hover");if(i.hasClass("ui-datepicker-next"))i.addClass("ui-datepicker-next-hover")})}function extendRemove(e,t){$.extend(e,t);for(var a in t)if(t[a]==null||t[a]==undefined)e[a]=t[a];return e}function isArray(e){return e&&(BrowserDetect.browser=="Safari"&&typeof e=="object"&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.fn.datepicker=function(e){if(!this.length){return this}if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var t=Array.prototype.slice.call(arguments,1);if(typeof e=="string"&&(e=="isDisabled"||e=="getDate"||e=="widget"))return $.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t));if(e=="option"&&arguments.length==2&&typeof arguments[1]=="string")return $.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t));return this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)})};$.datepicker=new Datepicker;$.datepicker.initialized=false;$.datepicker.uuid=(new Date).getTime();$.datepicker.version="1.8.23";window["DP_jQuery_"+dpuuid]=$})(jQuery);
(function($){$.fn.markItUp=function(settings,extraSettings){var options,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=false;options={id:"",nameSpace:"",root:"",previewInWindow:"",previewAutoRefresh:true,focusThis:false,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParserPath:"",previewParserVar:"data",resizeHandle:true,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]};$.extend(options,settings,extraSettings);if(!options.root){$("script").each(function(e,t){miuScript=$(t).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/);if(miuScript!==null){options.root=miuScript[1]}})}return this.each(function(){var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this);textarea=this;levels=[];abort=false;scrollPosition=caretPosition=0;caretOffset=-1;options.previewParserPath=localize(options.previewParserPath);options.previewTemplatePath=localize(options.previewTemplatePath);function localize(e,t){if(t){return e.replace(/("|')~\//g,"$1"+options.root)}return e.replace(/^~\//,options.root)}function init(){id="";nameSpace="";if(options.id){id='id="'+options.id+'"'}else if($$.attr("id")){id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'}if(options.nameSpace){nameSpace='class="'+options.nameSpace+'"'}$$.wrap("<div "+nameSpace+"></div>");$$.wrap("<div "+id+' class="markItUp"></div>');$$.wrap('<div class="markItUpContainer"></div>');$$.addClass("markItUpEditor");header=$('<div class="markItUpHeader"></div>').insertBefore($$);$(dropMenus(options.markupSet)).appendTo(header);footer=$('<div class="markItUpFooter"></div>').insertAfter($$);if(options.resizeHandle===true&&BrowserDetect.browser!="Safari"){resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown",function(e){var t=$$.height(),r=e.clientY,i,n;i=function(e){$$.css("height",Math.max(20,e.clientY+t-r)+"px");return false};n=function(e){$("html").unbind("mousemove",i).unbind("mouseup",n);return false};$("html").bind("mousemove",i).bind("mouseup",n)});footer.append(resizeHandle)}$$.keydown(keyPressed).keyup(keyPressed);$$.bind("insertion",function(e,t){if(t.target!==false){get()}if(textarea===$.markItUp.focused){markup(t)}});$$.focus(function(){$.markItUp.focused=this})}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;$("li:hover > ul",ul).css("display","block");$.each(markupSet,function(){var button=this,t="",title,li,j;title=button.title?button.title:button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"";key=button.key?'accesskey="'+button.key+'"':"";if(button.separator){li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul)}else{i++;for(j=levels.length-1;j>=0;j--){t+=levels[j]+"-"}li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu",function(){return false}).click(function(){return false}).bind("focusin",function(){$$.focus()}).mousedown(function(){if(button.call){eval(button.call)()}setTimeout(function(){markup(button)},1);return false}).hover(function(){$("> ul",this).show();$(document).one("click",function(){$("ul ul",header).hide()})},function(){$("> ul",this).hide()}).appendTo(ul);if(button.dropMenu){levels.push(i);$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu))}}});levels.pop();return ul}function magicMarkups(e){if(e){e=e.toString();e=e.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(e,t){var r=t.split("|!|");if(altKey===true){return r[1]!==undefined?r[1]:r[0]}else{return r[1]===undefined?"":r[0]}});e=e.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(e,t){var r=t.split(":!:");if(abort===true){return false}value=prompt(r[0],r[1]?r[1]:"");if(value===null){abort=true}return value});return e}return""}function prepare(e){if($.isFunction(e)){e=e(hash)}return magicMarkups(e)}function build(e){var t=prepare(clicked.openWith);var r=prepare(clicked.placeHolder);var i=prepare(clicked.replaceWith);var n=prepare(clicked.closeWith);if(i!==""){block=t+i+n}else if(selection===""&&r!==""){block=t+r+n}else{e=e||selection;if(e.match(/ $/)){block=t+e.replace(/ $/,"")+n+" "}else{block=t+e+n}}return{block:block,openWith:t,replaceWith:i,placeHolder:r,closeWith:n}}function markup(e){var t,r,i,n;hash=clicked=e;get();$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey});prepare(options.beforeInsert);prepare(clicked.beforeInsert);if(ctrlKey===true&&shiftKey===true){prepare(clicked.beforeMultiInsert)}$.extend(hash,{line:1});if(ctrlKey===true&&shiftKey===true){lines=selection.split(/\r?\n/);for(r=0,i=lines.length,n=0;n<i;n++){if($.trim(lines[n])!==""){$.extend(hash,{line:++r,selection:lines[n]});lines[n]=build(lines[n]).block}else{lines[n]=""}}string={block:lines.join("\n")};start=caretPosition;t=string.block.length+(BrowserDetect.browser=="Opera"?i-1:0)}else if(ctrlKey===true){string=build(selection);start=caretPosition+string.openWith.length;t=string.block.length-string.openWith.length-string.closeWith.length;t=t-(string.block.match(/ $/)?1:0);t-=fixIeBug(string.block)}else if(shiftKey===true){string=build(selection);start=caretPosition;t=string.block.length;t-=fixIeBug(string.block)}else{string=build(selection);start=caretPosition+string.block.length;t=0;start-=fixIeBug(string.block)}if(selection===""&&string.replaceWith===""){caretOffset+=fixOperaBug(string.block);start=caretPosition+string.openWith.length;t=string.block.length-string.openWith.length-string.closeWith.length;caretOffset=$$.val().substring(caretPosition,$$.val().length).length;caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))}$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition});if(string.block!==selection&&abort===false){insert(string.block);set(start,t)}else{caretOffset=-1}get();$.extend(hash,{line:"",selection:selection});if(ctrlKey===true&&shiftKey===true){prepare(clicked.afterMultiInsert)}prepare(clicked.afterInsert);prepare(options.afterInsert);if(previewWindow&&options.previewAutoRefresh){refreshPreview()}shiftKey=altKey=ctrlKey=abort=false}function fixOperaBug(e){if(BrowserDetect.browser=="Opera"){return e.length-e.replace(/\n*/g,"").length}return 0}function fixIeBug(e){if(BrowserDetect.browser=="IE"){return e.length-e.replace(/\r/g,"").length}return 0}function insert(e){if(document.selection){var t=document.selection.createRange();t.text=e}else{textarea.value=textarea.value.substring(0,caretPosition)+e+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}}function set(e,t){if(textarea.createTextRange){if(BrowserDetect.browser=="Opera"&&BrowserDetect.version>=9.5&&t==0){return false}range=textarea.createTextRange();range.collapse(true);range.moveStart("character",e);range.moveEnd("character",t);range.select()}else if(textarea.setSelectionRange){textarea.setSelectionRange(e,e+t)}textarea.scrollTop=scrollPosition;textarea.focus()}function get(){textarea.focus();scrollPosition=textarea.scrollTop;if(document.selection){selection=document.selection;if(BrowserDetect.browser=="IE"){var e=selection.createRange();var t=e.duplicate();t.moveToElementText(textarea);t.setEndPoint("EndToEnd",e);var r=t.text.length-e.text.length;caretPosition=r-(textarea.value.substr(0,r).length-textarea.value.substr(0,r).replace(/\r/g,"").length);selection=e.text}else{caretPosition=textarea.selectionStart}}else{caretPosition=textarea.selectionStart;selection=textarea.value.substring(caretPosition,textarea.selectionEnd)}return selection}function preview(){if(!previewWindow||previewWindow.closed){if(options.previewInWindow){previewWindow=window.open("","preview",options.previewInWindow);$(window).unload(function(){previewWindow.close()})}else{iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>');if(options.previewPosition=="after"){iFrame.insertAfter(footer)}else{iFrame.insertBefore(header)}previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]}}else if(altKey===true){if(iFrame){iFrame.remove()}else{previewWindow.close()}previewWindow=iFrame=false}if(!options.previewAutoRefresh){refreshPreview()}if(options.previewInWindow){previewWindow.focus()}}function refreshPreview(){renderPreview()}function renderPreview(){var e;if(options.previewParserPath!==""){$.ajax({type:"POST",dataType:"text",global:false,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(e){writeInPreview(localize(e,1))}})}else{if(!template){$.ajax({url:options.previewTemplatePath,dataType:"text",global:false,success:function(e){writeInPreview(localize(e,1).replace(/<!-- content -->/g,$$.val()))}})}}return false}function writeInPreview(e){if(previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(e){sp=0}previewWindow.document.open();previewWindow.document.write(e);previewWindow.document.close();previewWindow.document.documentElement.scrollTop=sp}}function keyPressed(e){shiftKey=e.shiftKey;altKey=e.altKey;ctrlKey=!(e.altKey&&e.ctrlKey)?e.ctrlKey:false;if(e.type==="keydown"){if(ctrlKey===true&&e.keyCode!=$.ui.keyCode.ENTER){li=$('a[accesskey="'+String.fromCharCode(e.keyCode)+'"]',header).parent("li");if(li.length!==0){ctrlKey=false;setTimeout(function(){li.triggerHandler("mousedown")},1);return false}}if(e.keyCode===13||e.keyCode===10){if(ctrlKey===true){ctrlKey=false;markup(options.onCtrlEnter);return options.onCtrlEnter.keepDefault}else if(shiftKey===true){shiftKey=false;markup(options.onShiftEnter);return options.onShiftEnter.keepDefault}else{markup(options.onEnter);return options.onEnter.keepDefault}}if(e.keyCode===9){if(shiftKey==true||ctrlKey==true||altKey==true){return false}if(caretOffset!==-1){get();caretOffset=$$.val().length-caretOffset;set(caretOffset,0);caretOffset=-1;return false}else{markup(options.onTab);return options.onTab.keepDefault}}}}init();if(options.focusThis)$(this).focus()})};$.fn.markItUpRemove=function(){return this.each(function(){var e=$(this).unbind().removeClass("markItUpEditor");e.parent("div").parent("div.markItUp").parent("div").replaceWith(e)})};$.markItUp=function(e){var t={target:false};$.extend(t,e);if(t.target){return $(t.target).each(function(){$(this).trigger("insertion",[t])})}else{$("textarea").trigger("insertion",[t])}}})(jQuery);
(function(e){e.fn.ajaxSubmit=function(r){if(!this.length){t("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof r=="function"){r={success:r}}var a=this.attr("action");var i=typeof a==="string"?e.trim(a):"";i=i||window.location.href||"";if(i){i=(i.match(/^([^#]+)/)||[])[1]}r=e.extend(true,{url:i,success:e.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var n={};this.trigger("form-pre-serialize",[this,r,n]);if(n.veto){t("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(r.beforeSerialize&&r.beforeSerialize(this,r)===false){t("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var s,o,u=this.formToArray(r.semantic);if(r.data){r.extraData=r.data;for(s in r.data){if(r.data[s]instanceof Array){for(var l in r.data[s]){u.push({name:s,value:r.data[s][l]})}}else{o=r.data[s];o=e.isFunction(o)?o():o;u.push({name:s,value:o})}}}if(r.beforeSubmit&&r.beforeSubmit(u,this,r)===false){t("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[u,this,r,n]);if(n.veto){t("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var f=e.param(u);if(r.type.toUpperCase()=="GET"){r.url+=(r.url.indexOf("?")>=0?"&":"?")+f;r.data=null}else{r.data=f}var c=this,m=[];if(r.resetForm){m.push(function(){c.resetForm()})}if(r.clearForm){m.push(function(){c.clearForm()})}if(!r.dataType&&r.target){var d=r.success||function(){};m.push(function(t){var a=r.replaceTarget?"replaceWith":"html";e(r.target)[a](t).each(d,arguments)})}else if(r.success){m.push(r.success)}r.success=function(e,t,a){var i=r.context||r;for(var n=0,s=m.length;n<s;n++){m[n].apply(i,[e,t,a||c,c])}};var p=e("input:file",this).length>0;var v="multipart/form-data";var h=c.attr("enctype")==v||c.attr("encoding")==v;if(r.iframe!==false&&(p||r.iframe||h)){if(r.closeKeepAlive){e.get(r.closeKeepAlive,function(){g(u)})}else{g(u)}}else{e.ajax(r)}this.trigger("form-submit-notify",[this,r]);return this;function g(a){var i=c[0],n,s,o,u,l,f,m,d,p,v,h;if(a){for(n=0;n<a.length;n++){e(i[a[n].name]).attr("disabled",false)}}if(e(":input[name=submit],:input[id=submit]",i).length){alert('Error: Form elements must not have name or id of "submit".');return}s=e.extend(true,{},e.ajaxSettings,r);s.context=s.context||s;u="jqFormIO"+(new Date).getTime();if(s.iframeTarget){l=e(s.iframeTarget);p=l.attr("name");if(p==null)l.attr("name",u);else u=p}else{l=e('<iframe name="'+u+'" src="'+s.iframeSrc+'" />');l.css({position:"absolute",top:"-1000px",left:"-1000px"})}f=l[0];m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(r){var a=r==="timeout"?"timeout":"aborted";t("aborting upload... "+a);this.aborted=1;l.attr("src",s.iframeSrc);m.error=a;s.error&&s.error.call(s.context,m,a,a);o&&e.event.trigger("ajaxError",[m,s,a]);s.complete&&s.complete.call(s.context,m,a)}};o=s.global;if(o&&!e.active++){e.event.trigger("ajaxStart")}if(o){e.event.trigger("ajaxSend",[m,s])}if(s.beforeSend&&s.beforeSend.call(s.context,m,s)===false){if(s.global){e.active--}return}if(m.aborted){return}d=i.clk;if(d){p=d.name;if(p&&!d.disabled){s.extraData=s.extraData||{};s.extraData[p]=d.value;if(d.type=="image"){s.extraData[p+".x"]=i.clk_x;s.extraData[p+".y"]=i.clk_y}}}function g(){var t=c.attr("target"),r=c.attr("action");i.setAttribute("target",u);if(i.getAttribute("method")!="POST"){i.setAttribute("method","POST")}if(i.getAttribute("action")!=s.url){i.setAttribute("action",s.url)}if(!s.skipEncodingOverride){c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(s.timeout){h=setTimeout(function(){v=true;k(true)},s.timeout)}var a=[];try{if(s.extraData){for(var n in s.extraData){a.push(e('<input type="hidden" name="'+n+'" value="'+s.extraData[n]+'" />').appendTo(i)[0])}}if(!s.iframeTarget){l.appendTo("body");f.attachEvent?f.attachEvent("onload",k):f.addEventListener("load",k,false)}i.submit()}finally{i.setAttribute("action",r);if(t){i.setAttribute("target",t)}else{c.removeAttr("target")}e(a).remove()}}if(s.forceSync){g()}else{setTimeout(g,10)}var b,x,y=50,T;function k(r){if(m.aborted||T){return}if(r===true&&m){m.abort("timeout");return}var a=f.contentWindow?f.contentWindow.document:f.contentDocument?f.contentDocument:f.document;if(!a||a.location.href==s.iframeSrc){if(!v)return}f.detachEvent?f.detachEvent("onload",k):f.removeEventListener("load",k,false);var i="success",n;try{if(v){throw"timeout"}var u=s.dataType=="xml"||a.XMLDocument||e.isXMLDoc(a);t("isXml="+u);if(!u&&window.opera&&(a.body==null||a.body.innerHTML=="")){if(--y){t("requeing onLoad callback, DOM not available");setTimeout(k,250);return}}var c=a.body?a.body:a.documentElement;m.responseText=c?c.innerHTML:null;m.responseXML=a.XMLDocument?a.XMLDocument:a;if(u)s.dataType="xml";m.getResponseHeader=function(e){var t={"content-type":s.dataType};return t[e]};if(c){m.status=Number(c.getAttribute("status"))||m.status;m.statusText=c.getAttribute("statusText")||m.statusText}var d=s.dataType||"";var p=/(json|script|text)/.test(d.toLowerCase());if(p||s.textarea){var g=a.getElementsByTagName("textarea")[0];if(g){m.responseText=g.value;m.status=Number(g.getAttribute("status"))||m.status;m.statusText=g.getAttribute("statusText")||m.statusText}else if(p){var x=a.getElementsByTagName("pre")[0];var w=a.getElementsByTagName("body")[0];if(x){m.responseText=x.textContent?x.textContent:x.innerHTML}else if(w){m.responseText=w.innerHTML}}}else if(s.dataType=="xml"&&!m.responseXML&&m.responseText!=null){m.responseXML=j(m.responseText)}try{b=S(m,s.dataType,s)}catch(e){i="parsererror";m.error=n=e||i}}catch(e){t("error caught",e);i="error";m.error=n=e||i}if(m.aborted){t("upload aborted");i=null}if(m.status){i=m.status>=200&&m.status<300||m.status===304?"success":"error"}if(i==="success"){s.success&&s.success.call(s.context,b,"success",m);o&&e.event.trigger("ajaxSuccess",[m,s])}else if(i){if(n==undefined)n=m.statusText;s.error&&s.error.call(s.context,m,i,n);o&&e.event.trigger("ajaxError",[m,s,n])}o&&e.event.trigger("ajaxComplete",[m,s]);if(o&&!--e.active){e.event.trigger("ajaxStop")}s.complete&&s.complete.call(s.context,m,i);T=true;if(s.timeout)clearTimeout(h);setTimeout(function(){if(!s.iframeTarget)l.remove();m.responseXML=null},100)}var j=e.parseXML||function(e,t){if(window.ActiveXObject){t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}else{t=(new DOMParser).parseFromString(e,"text/xml")}return t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null};var w=e.parseJSON||function(e){return window["eval"]("("+e+")")};var S=function(t,r,a){var i=t.getResponseHeader("content-type")||"",n=r==="xml"||!r&&i.indexOf("xml")>=0,s=n?t.responseXML:t.responseText;if(n&&s.documentElement.nodeName==="parsererror"){e.error&&e.error("parsererror")}if(a&&a.dataFilter){s=a.dataFilter(s,r)}if(typeof s==="string"){if(r==="json"||!r&&i.indexOf("json")>=0){s=w(s)}else if(r==="script"||!r&&i.indexOf("javascript")>=0){e.globalEval(s)}}return s}}};e.fn.ajaxForm=function(r){if(this.length===0){var a={s:this.selector,c:this.context};if(!e.isReady&&a.s){t("DOM not ready, queuing ajaxForm");e(function(){e(a.s,a.c).ajaxForm(r)});return this}t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){if(!t.isDefaultPrevented()){t.preventDefault();e(this).ajaxSubmit(r)}}).bind("click.form-plugin",function(t){var r=t.target;var a=e(r);if(!a.is(":submit,input:image")){var i=a.closest(":submit");if(i.length==0){return}r=i[0]}var n=this;n.clk=r;if(r.type=="image"){if(t.offsetX!=undefined){n.clk_x=t.offsetX;n.clk_y=t.offsetY}else if(typeof e.fn.offset=="function"){var s=a.offset();n.clk_x=t.pageX-s.left;n.clk_y=t.pageY-s.top}else{n.clk_x=t.pageX-r.offsetLeft;n.clk_y=t.pageY-r.offsetTop}}setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)})};e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(t){var r=[];if(this.length===0){return r}var a=this[0];var i=t?a.getElementsByTagName("*"):a.elements;if(!i){return r}var n,s,o,u,l,f,c;for(n=0,f=i.length;n<f;n++){l=i[n];o=l.name;if(!o){continue}if(t&&a.clk&&l.type=="image"){if(!l.disabled&&a.clk==l){r.push({name:o,value:e(l).val()});r.push({name:o+".x",value:a.clk_x},{name:o+".y",value:a.clk_y})}continue}u=e.fieldValue(l,true);if(u&&u.constructor==Array){for(s=0,c=u.length;s<c;s++){r.push({name:o,value:u[s]})}}else if(u!==null&&typeof u!="undefined"){r.push({name:o,value:u})}}if(!t&&a.clk){var m=e(a.clk),d=m[0];o=d.name;if(o&&!d.disabled&&d.type=="image"){r.push({name:o,value:m.val()});r.push({name:o+".x",value:a.clk_x},{name:o+".y",value:a.clk_y})}}return r};e.fn.formSerialize=function(t){return e.param(this.formToArray(t))};e.fn.fieldSerialize=function(t){var r=[];this.each(function(){var a=this.name;if(!a){return}var i=e.fieldValue(this,t);if(i&&i.constructor==Array){for(var n=0,s=i.length;n<s;n++){r.push({name:a,value:i[n]})}}else if(i!==null&&typeof i!="undefined"){r.push({name:this.name,value:i})}});return e.param(r)};e.fn.fieldValue=function(t){for(var r=[],a=0,i=this.length;a<i;a++){var n=this[a];var s=e.fieldValue(n,t);if(s===null||typeof s=="undefined"||s.constructor==Array&&!s.length){continue}s.constructor==Array?e.merge(r,s):r.push(s)}return r};e.fieldValue=function(t,r){var a=t.name,i=t.type,n=t.tagName.toLowerCase();if(r===undefined){r=true}if(r&&(!a||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||n=="select"&&t.selectedIndex==-1)){return null}if(n=="select"){var s=t.selectedIndex;if(s<0){return null}var o=[],u=t.options;var l=i=="select-one";var f=l?s+1:u.length;for(var c=l?s:0;c<f;c++){var m=u[c];if(m.selected){var d=m.value;if(!d){d=m.attributes&&m.attributes["value"]&&!m.attributes["value"].specified?m.text:m.value}if(l){return d}o.push(d)}}return o}return e(t).val()};e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})};e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();if(e=="text"||e=="password"||t=="textarea"){this.value=""}else if(e=="checkbox"||e=="radio"){this.checked=false}else if(t=="select"){this.selectedIndex=-1}})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType){this.reset()}})};e.fn.enable=function(e){if(e===undefined){e=true}return this.each(function(){this.disabled=!e})};e.fn.selected=function(t){if(t===undefined){t=true}return this.each(function(){var r=this.type;if(r=="checkbox"||r=="radio"){this.checked=t}else if(this.tagName.toLowerCase()=="option"){var a=e(this).parent("select");if(t&&a[0]&&a[0].type=="select-one"){a.find("option").selected(false)}this.selected=t}})};function t(){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(e)}else if(window.opera&&window.opera.postError){window.opera.postError(e)}}})(jQuery);
(function(e){e.fn.lightBox=function(i){i=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:false,imageLoading:"/site/js/sb/loading.gif",imageBtnPrev:"/site/js/sb/prevlabel.gif",imageBtnNext:"/site/js/sb/nextlabel.gif",imageBtnClose:"/site/js/sb/closelabel.gif",imageBlank:"/site/js/sb/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:0,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},i);var t=this;function a(){n(this,t);return false}function n(t,a){e("embed, object, select").css({visibility:"hidden"});o();i.imageArray.length=0;i.activeImage=0;if(t.hasAttribute("data-cachedimgsrc")){i.imageArray.push(new Array(t.getAttribute("data-cachedimgsrc"),t.getAttribute("title"),t.getAttribute("href")))}else{i.imageArray.push(new Array(t.getAttribute("href"),t.getAttribute("title")))}r()}function o(){e(".onHoverImage").remove();e("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+i.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+i.imageBtnClose+'"></a></div></div></div></div>');var t=v();e("#jquery-overlay").css({backgroundColor:i.overlayBgColor,opacity:i.overlayOpacity,width:t[0],height:t[1]}).show();var a=f();e("#jquery-lightbox").css({top:a[1]+t[3]/10,left:a[0]}).show();e("#jquery-overlay,#jquery-lightbox").click(function(){u()});e("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){u();return false});e(window).resize(function(){var i=v();e("#jquery-overlay").css({width:i[0],height:i[1]});var t=f();e("#jquery-lightbox").css({top:t[1]+i[3]/10,left:t[0]})})}function r(){e("#lightbox-loading").show();if(i.fixedNavigation){e("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}else{e("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}var t=new Image;t.onload=function(){e("#lightbox-image").attr("src",i.imageArray[i.activeImage][0]);if(i.imageArray[i.activeImage].length==3){e("#lightbox-image").attr("data-noncachedsrc",i.imageArray[i.activeImage][2]).off().on("mousedown",function(i){if(i.which==1){return}var t=e(this);var a=t.attr("data-noncachedsrc");if(a){t.attr("src",a)}t.off(i)})}c(t.width,t.height);t.onload=function(){}};t.src=i.imageArray[i.activeImage][0]}function c(t,a){var n=e("#lightbox-container-image-box").width();var o=e("#lightbox-container-image-box").height();var r=t+i.containerBorderSize*2;var c=a+i.containerBorderSize*2;var l=n-r;var d=o-c;e("#lightbox-loading").hide();e("#lightbox-container-image-box").animate({width:r,height:c},i.containerResizeSpeed,function(){g()});if(l==0&&d==0){if(BrowserDetect.browser=="IE"){x(250)}else{x(100)}}e("#lightbox-container-image-data-box").css({width:t});e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:a+i.containerBorderSize*2})}function g(){e("#lightbox-image").show();l()}function l(){e("#lightbox-container-image-data-box").show();e("#lightbox-image-details-caption").hide()}function d(){e("#lightbox-nav").show();e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+i.imageBlank+") no-repeat"});if(i.activeImage!=0){if(i.fixedNavigation){e("#lightbox-nav-btnPrev").css({background:"url("+i.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){i.activeImage=i.activeImage-1;r();return false})}else{e("#lightbox-nav-btnPrev").unbind().hover(function(){e(this).css({background:"url("+i.imageBtnPrev+") left 15% no-repeat"})},function(){e(this).css({background:"transparent url("+i.imageBlank+") no-repeat"})}).show().bind("click",function(){i.activeImage=i.activeImage-1;r();return false})}}if(i.activeImage!=i.imageArray.length-1){if(i.fixedNavigation){e("#lightbox-nav-btnNext").css({background:"url("+i.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){i.activeImage=i.activeImage+1;r();return false})}else{e("#lightbox-nav-btnNext").unbind().hover(function(){e(this).css({background:"url("+i.imageBtnNext+") right 15% no-repeat"})},function(){e(this).css({background:"transparent url("+i.imageBlank+") no-repeat"})}).show().bind("click",function(){i.activeImage=i.activeImage+1;r();return false})}}s()}function s(){e(document).keydown(function(e){m(e)})}function h(){e(document).unbind()}function m(e){if(e==null){keycode=event.keyCode;escapeKey=27}else{keycode=e.keyCode;escapeKey=e.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();if(key==i.keyToClose||key=="x"||keycode==escapeKey){u()}if(key==i.keyToPrev||keycode==37){if(i.activeImage!=0){i.activeImage=i.activeImage-1;r();h()}}if(key==i.keyToNext||keycode==39){if(i.activeImage!=i.imageArray.length-1){i.activeImage=i.activeImage+1;r();h()}}}function b(){if(i.imageArray.length-1>i.activeImage){objNext=new Image;objNext.src=i.imageArray[i.activeImage+1][0]}if(i.activeImage>0){objPrev=new Image;objPrev.src=i.imageArray[i.activeImage-1][0]}}function u(){e("#jquery-lightbox").remove();e("#jquery-overlay").fadeOut(function(){e("#jquery-overlay").remove()});e("embed, object, select").css({visibility:"visible"})}function v(){var e,i;if(window.innerHeight&&window.scrollMaxY){e=window.innerWidth+window.scrollMaxX;i=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){e=document.body.scrollWidth;i=document.body.scrollHeight}else{e=document.body.offsetWidth;i=document.body.offsetHeight}var t,a;if(self.innerHeight){if(document.documentElement.clientWidth){t=document.documentElement.clientWidth}else{t=self.innerWidth}a=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){t=document.documentElement.clientWidth;a=document.documentElement.clientHeight}else if(document.body){t=document.body.clientWidth;a=document.body.clientHeight}if(i<a){pageHeight=a}else{pageHeight=i}if(e<t){pageWidth=e}else{pageWidth=t}arrayPageSize=new Array(pageWidth,pageHeight,t,a);return arrayPageSize}function f(){var e,i;if(self.pageYOffset){i=self.pageYOffset;e=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){i=document.documentElement.scrollTop;e=document.documentElement.scrollLeft}else if(document.body){i=document.body.scrollTop;e=document.body.scrollLeft}arrayPageScroll=new Array(e,i);return arrayPageScroll}function x(e){var i=new Date;t=null;do{var t=new Date}while(t-i<e)}return this.unbind("click").click(a)}})(jQuery);
(function(t,e){var n=t.fn.domManip,l="_tmplitem",i=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,r={},a={},p,o={key:0,data:{}},u=0,f=0,c=[];function m(e,n,l,i){var p={data:i||(n?n.data:{}),_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:w,nest:v,wrap:T,html:k,update:j};if(e){t.extend(p,e,{nodes:[],parent:n})}if(l){p.tmpl=l;p._ctnt=p._ctnt||p.tmpl(t,p);p.key=++u;(c.length?a:r)[u]=p}return p}t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){t.fn[e]=function(l){var i=[],a=t(l),o,u,c,m,s=this.length===1&&this[0].parentNode;p=r||{};if(s&&s.nodeType===11&&s.childNodes.length===1&&a.length===1){a[n](this[0]);i=this}else{for(u=0,c=a.length;u<c;u++){f=u;o=(u>0?this.clone(true):this).get();t.fn[n].apply(t(a[u]),o);i=i.concat(o)}f=0;i=this.pushStack(i,e,a.selector)}m=p;p=null;t.tmpl.complete(m);return i}});t.fn.extend({tmpl:function(e,n,l){return t.tmpl(this[0],e,n,l)},tmplItem:function(){return t.tmplItem(this[0])},template:function(e){return t.template(e,this[0])},domManip:function(e,l,i,a){if(e[0]&&e[0].nodeType){var o=t.makeArray(arguments),u=e.length,c=0,m;while(c<u&&!(m=t.data(e[c++],"tmplItem"))){}if(u>1){o[0]=[t.makeArray(e)]}if(m&&f){o[2]=function(e){t.tmpl.afterManip(this,e,i)}}n.apply(this,o)}else{n.apply(this,arguments)}f=0;if(!p){t.tmpl.complete(r)}return this}});t.extend({tmpl:function(e,n,l,i){var p,u=!i;if(u){i=o;e=t.template[e]||t.template(null,e);a={}}else if(!e){e=i.tmpl;r[i.key]=i;i.nodes=[];if(i.wrapped){$(i,i.wrapped)}return t(s(i,null,i.tmpl(t,i)))}if(!e){return[]}if(typeof n==="function"){n=n.call(i||{})}if(l&&l.wrapped){$(l,l.wrapped)}p=t.isArray(n)?t.map(n,function(t){return t?m(l,i,e,t):null}):[m(l,i,e,n)];return u?t(s(i,null,p)):p},tmplItem:function(e){var n;if(e instanceof t){e=e[0]}while(e&&e.nodeType===1&&!(n=t.data(e,"tmplItem"))&&(e=e.parentNode)){}return n||o},template:function(e,n){if(n){if(typeof n==="string"){n=h(n)}else if(n instanceof t){n=n[0]||{}}if(n.nodeType){n=t.data(n,"tmpl")||t.data(n,"tmpl",h(n.innerHTML))}return typeof e==="string"?t.template[e]=n:n}return e?typeof e!=="string"?t.template(null,e):t.template[e]||t.template(null,i.test(e)?e:t(e)):null},encode:function(t){return(""+t).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});t.extend(t.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(t){r={}},afterManip:function e(n,l,i){var r=l.nodeType===11?t.makeArray(l.childNodes):l.nodeType===1?[l]:[];i.call(n,l);g(r);f++}});function s(e,n,i){var r,a=i?t.map(i,function(t){return typeof t==="string"?e.key?t.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+l+'="'+e.key+'" $2'):t:s(t,e,t._ctnt)}):e;if(n){return a}a=a.join("");a.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(e,n,l,i){r=t(l).get();g(r);if(n){r=d(n).concat(r)}if(i){r=r.concat(d(i))}});return r?r:d(a)}function d(e){var n=document.createElement("div");n.innerHTML=e;return t.makeArray(n.childNodes)}function h(e){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;"+"with($data){_.push('"+t.trim(e).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(e,n,l,i,r,a,p){var o=t.tmpl.tag[l],u,f,c;if(!o){throw"Template command not found: "+l}u=o._default||[];if(a&&!/\w$/.test(r)){r+=a;a=""}if(r){r=y(r);p=p?","+y(p)+")":a?")":"";f=a?r.indexOf(".")>-1?r+a:"("+r+").call($item"+p:r;c=a?f:"(typeof("+r+")==='function'?("+r+").call($item):("+r+"))"}else{c=f=u.$1||"null"}i=y(i);return"');"+o[n?"close":"open"].split("$notnull_1").join(r?"typeof("+r+")!=='undefined' && ("+r+")!=null":"true").split("$1a").join(c).split("$1").join(f).split("$2").join(i?i.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(t,e,n,l){l=l?","+l+")":n?")":"";return l?"("+e+").call($item"+l:t}):u.$2||"")+"_.push('"})+"');}return _;")}function $(e,n){e._wrap=s(e,true,t.isArray(n)?n:[i.test(n)?n:t(n).html()]).join("")}function y(t){return t?t.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function _(t){var e=document.createElement("div");e.appendChild(t.cloneNode(true));return e.innerHTML}function g(e){var n="_"+f,i,p,o={},c,s,d;for(c=0,s=e.length;c<s;c++){if((i=e[c]).nodeType!==1){continue}p=i.getElementsByTagName("*");for(d=p.length-1;d>=0;d--){h(p[d])}h(i)}function h(e){var i,p=e,c,s,d;if(d=e.getAttribute(l)){while(p.parentNode&&(p=p.parentNode).nodeType===1&&!(i=p.getAttribute(l))){}if(i!==d){p=p.parentNode?p.nodeType===11?0:p.getAttribute(l)||0:0;if(!(s=r[d])){s=a[d];s=m(s,r[p]||a[p],null,true);s.key=++u;r[u]=s}if(f){h(d)}}e.removeAttribute(l)}else if(f&&(s=t.data(e,"tmplItem"))){h(s.key);r[s.key]=s;p=t.data(e.parentNode,"tmplItem");p=p?p.key:0}if(s){c=s;while(c&&c.key!=p){c.nodes.push(e);c=c.parent}delete s._ctnt;delete s._wrap;t.data(e,"tmplItem",s)}function h(t){t=t+n;s=o[t]=o[t]||m(s,r[s.parent.key+n]||s.parent,null,true)}}}function w(t,e,n,l){if(!t){return c.pop()}c.push({_:t,tmpl:e,item:this,data:n,options:l})}function v(e,n,l){return t.tmpl(t.template(e),n,l,this)}function T(e,n){var l=e.options||{};l.wrapped=n;return t.tmpl(t.template(e.tmpl),e.data,l,e.item)}function k(e,n){var l=this._wrap;return t.map(t(t.isArray(l)?l.join(""):l).filter(e||"*"),function(t){return n?t.innerText||t.textContent:t.outerHTML||_(t)})}function j(){var e=this.nodes;t.tmpl(null,null,null,this).insertBefore(e[0]);t(e).remove()}})(jQuery);
(function(e,t,r,a){e.fn.caret=function(e,n){var s,i,o=this[0],l=BrowserDetect.browser=="IE";if(typeof e==="object"&&typeof e.start==="number"&&typeof e.end==="number"){s=e.start;i=e.end}else if(typeof e==="number"&&typeof n==="number"){s=e;i=n}else if(typeof e==="string"){if((s=o.value.indexOf(e))>-1)i=s+e[t];else s=null}else if(Object.prototype.toString.call(e)==="[object RegExp]"){var c=e.exec(o.value);if(c!=null){s=c.index;i=s+c[0][t]}}if(typeof s!="undefined"){if(l){var u=this[0].createTextRange();u.collapse(true);u.moveStart("character",s);u.moveEnd("character",i-s);u.select()}else{this[0].selectionStart=s;this[0].selectionEnd=i}this[0].focus();return this}else{if(l){var f=document.selection;if(this[0].tagName.toLowerCase()!="textarea"){var v=this.val(),d=f[r]()[a]();d.moveEnd("character",v[t]);var x=d.text==""?v[t]:v.lastIndexOf(d.text);d=f[r]()[a]();d.moveStart("character",-v[t]);var h=d.text[t]}else{var d=f[r](),p=d[a]();p.moveToElementText(this[0]);p.setEndPoint("EndToEnd",d);var x=p.text[t]-d.text[t],h=x+d.text[t]}}else{var x=o.selectionStart,h=o.selectionEnd}var m=o.value.substring(x,h);return{start:x,end:h,text:m,replace:function(e){return o.value.substring(0,x)+e+o.value.substring(h,o.value[t])}}}}})(jQuery,"length","createRange","duplicate");
(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){var t=e(document),i=e(window),o=e("body");var n="displayController",s="hasActiveHover",r="forcedOpen",a="hasMouseMove",f="mouseOnToPopup",l="originalTitle",p="powertip",u="powertipjq",c="powertiptarget",w=180/Math.PI;var d={isTipOpen:false,isFixedTipOpen:false,isClosing:false,tipOpenImminent:false,activeHover:null,currentX:0,currentY:0,previousX:0,previousY:0,desyncTimeout:null,mouseTrackingActive:false,delayInProgress:false,windowWidth:0,windowHeight:0,scrollTop:0,scrollLeft:0};var h={none:0,top:1,bottom:2,left:4,right:8};e.fn.powerTip=function(t,i){if(!this.length){return this}if(e.type(t)==="string"&&e.powerTip[t]){return e.powerTip[t].call(this,this,i)}var o=e.extend({},e.fn.powerTip.defaults,t),s=new g(o);y();this.each(function t(){var i=e(this),r=i.data(p),a=i.data(u),f=i.data(c),w;if(i.data(n)){e.powerTip.destroy(i)}w=i.attr("title");if(!r&&!f&&!a&&w){i.data(p,w);i.data(l,w);i.removeAttr("title")}i.data(n,new m(i,o,s))});if(!o.manual){this.on({"mouseenter.powertip":function t(i){e.powerTip.show(this,i)},"mouseleave.powertip":function t(){e.powerTip.hide(this)},"focus.powertip":function t(){e.powerTip.show(this)},"blur.powertip":function t(){e.powerTip.hide(this,true)},"keydown.powertip":function t(i){if(i.keyCode===27){e.powerTip.hide(this,true)}}})}return this};e.fn.powerTip.defaults={fadeInTime:200,fadeOutTime:100,followMouse:false,popupId:"powerTip",intentSensitivity:7,intentPollInterval:100,closeDelay:100,placement:"n",smartPlacement:false,offset:10,mouseOnToPopup:false,manual:false};e.fn.powerTip.smartPlacementLists={n:["n","ne","nw","s"],e:["e","ne","se","w","nw","sw","n","s","e"],s:["s","se","sw","n"],w:["w","nw","sw","e","ne","se","n","s","w"],nw:["nw","w","sw","n","s","se","nw"],ne:["ne","e","se","n","s","sw","ne"],sw:["sw","w","nw","s","n","ne","sw"],se:["se","e","ne","s","n","nw","se"],"nw-alt":["nw-alt","n","ne-alt","sw-alt","s","se-alt","w","e"],"ne-alt":["ne-alt","n","nw-alt","se-alt","s","sw-alt","e","w"],"sw-alt":["sw-alt","s","se-alt","nw-alt","n","ne-alt","w","e"],"se-alt":["se-alt","s","sw-alt","ne-alt","n","nw-alt","e","w"]};e.powerTip={show:function t(i,o){if(o){H(o);d.previousX=o.pageX;d.previousY=o.pageY;e(i).data(n).show()}else{e(i).first().data(n).show(true,true)}return i},reposition:function t(i){e(i).first().data(n).resetPosition();return i},hide:function t(i,o){if(i){e(i).first().data(n).hide(o)}else{if(d.activeHover){d.activeHover.data(n).hide(true)}}return i},destroy:function t(i){e(i).off(".powertip").each(function t(){var i=e(this),o=[l,n,s,r];if(i.data(l)){i.attr("title",i.data(l));o.push(p)}i.removeData(o)});return i}};e.powerTip.showTip=e.powerTip.show;e.powerTip.closeTip=e.powerTip.hide;function v(){var t=this;t.top="auto";t.left="auto";t.right="auto";t.bottom="auto";t.set=function(i,o){if(e.isNumeric(o)){t[i]=Math.round(o)}}}function m(e,t,i){var o=null;function n(n,a){l();if(!e.data(s)){if(!n){d.tipOpenImminent=true;o=setTimeout(function e(){o=null;f()},t.intentPollInterval)}else{if(a){e.data(r,true)}i.showTip(e)}}}function a(n){l();d.tipOpenImminent=false;if(e.data(s)){e.data(r,false);if(!n){d.delayInProgress=true;o=setTimeout(function t(){o=null;i.hideTip(e);d.delayInProgress=false},t.closeDelay)}else{i.hideTip(e)}}}function f(){var o=Math.abs(d.previousX-d.currentX),s=Math.abs(d.previousY-d.currentY),r=o+s;if(r<t.intentSensitivity){i.showTip(e)}else{d.previousX=d.currentX;d.previousY=d.currentY;n()}}function l(){o=clearTimeout(o);d.delayInProgress=false}function p(){i.resetPosition(e)}this.show=n;this.hide=a;this.cancel=l;this.resetPosition=p}function T(){function e(e,o,n,s,r){var a=o.split("-")[0],f=new v,l;if(b(e)){l=i(e,a)}else{l=t(e,a)}switch(o){case"n":f.set("left",l.left-n/2);f.set("bottom",d.windowHeight-l.top+r);break;case"e":f.set("left",l.left+r);f.set("top",l.top-s/2);break;case"s":f.set("left",l.left-n/2);f.set("top",l.top+r);break;case"w":f.set("top",l.top-s/2);f.set("right",d.windowWidth-l.left+r);break;case"nw":f.set("bottom",d.windowHeight-l.top+r);f.set("right",d.windowWidth-l.left-20);break;case"nw-alt":f.set("left",l.left);f.set("bottom",d.windowHeight-l.top+r);break;case"ne":f.set("left",l.left-20);f.set("bottom",d.windowHeight-l.top+r);break;case"ne-alt":f.set("bottom",d.windowHeight-l.top+r);f.set("right",d.windowWidth-l.left);break;case"sw":f.set("top",l.top+r);f.set("right",d.windowWidth-l.left-20);break;case"sw-alt":f.set("left",l.left);f.set("top",l.top+r);break;case"se":f.set("left",l.left-20);f.set("top",l.top+r);break;case"se-alt":f.set("top",l.top+r);f.set("right",d.windowWidth-l.left);break}return f}function t(e,t){var i=e.offset(),o=e.outerWidth(),n=e.outerHeight(),s,r;switch(t){case"n":s=i.left+o/2;r=i.top;break;case"e":s=i.left+o;r=i.top+n/2;break;case"s":s=i.left+o/2;r=i.top+n;break;case"w":s=i.left;r=i.top+n/2;break;case"nw":s=i.left;r=i.top;break;case"ne":s=i.left+o;r=i.top;break;case"sw":s=i.left;r=i.top+n;break;case"se":s=i.left+o;r=i.top+n;break}return{top:r,left:s}}function i(e,t){var i=e.closest("svg")[0],o=e[0],n=i.createSVGPoint(),s=o.getBBox(),r=o.getScreenCTM(),a=s.width/2,f=s.height/2,l=[],p=["nw","n","ne","e","se","s","sw","w"],u,c,h,v;function m(){l.push(n.matrixTransform(r))}n.x=s.x;n.y=s.y;m();n.x+=a;m();n.x+=a;m();n.y+=f;m();n.y+=f;m();n.x-=a;m();n.x-=a;m();n.y-=f;m();if(l[0].y!==l[1].y||l[0].x!==l[7].x){c=Math.atan2(r.b,r.a)*w;h=Math.ceil((c%360-22.5)/45);if(h<1){h+=8}while(h--){p.push(p.shift())}}for(v=0;v<l.length;v++){if(p[v]===t){u=l[v];break}}return{top:u.y+d.scrollTop,left:u.x+d.scrollLeft}}this.compute=e}function g(l){var p=new T,u=e("#"+l.popupId);if(u.length===0){u=e("<div/>",{id:l.popupId});if(o.length===0){o=e("body")}o.append(u)}if(l.followMouse){if(!u.data(a)){t.on("mousemove",g);i.on("scroll",g);u.data(a,true)}}if(l.mouseOnToPopup){u.on({mouseenter:function e(){if(u.data(f)){if(d.activeHover){d.activeHover.data(n).cancel()}}},mouseleave:function e(){if(d.activeHover){d.activeHover.data(n).hide()}}})}function c(e){e.data(s,true);u.queue(function t(i){w(e);i()})}function w(e){var t;if(!e.data(s)){return}if(d.isTipOpen){if(!d.isClosing){m(d.activeHover)}u.delay(100).queue(function t(i){w(e);i()});return}e.trigger("powerTipPreRender");t=O(e);if(t){u.empty().append(t)}else{return}e.trigger("powerTipRender");d.activeHover=e;d.isTipOpen=true;u.data(f,l.mouseOnToPopup);if(!l.followMouse){b(e);d.isFixedTipOpen=true}else{g()}u.fadeIn(l.fadeInTime,function t(){if(!d.desyncTimeout){d.desyncTimeout=setInterval(H,500)}e.trigger("powerTipOpen")})}function m(e){d.isClosing=true;d.activeHover=null;d.isTipOpen=false;d.desyncTimeout=clearInterval(d.desyncTimeout);e.data(s,false);e.data(r,false);u.fadeOut(l.fadeOutTime,function t(){var i=new v;d.isClosing=false;d.isFixedTipOpen=false;u.removeClass();i.set("top",d.currentY+l.offset);i.set("left",d.currentX+l.offset);u.css(i);e.trigger("powerTipClose")})}function g(){if(!d.isFixedTipOpen&&(d.isTipOpen||d.tipOpenImminent&&u.data(a))){var e=u.outerWidth(),t=u.outerHeight(),i=new v,o,n;i.set("top",d.currentY+l.offset);i.set("left",d.currentX+l.offset);o=P(i,e,t);if(o!==h.none){n=I(o);if(n===1){if(o===h.right){i.set("left",d.windowWidth-e)}else if(o===h.bottom){i.set("top",d.scrollTop+d.windowHeight-t)}}else{i.set("left",d.currentX-e-l.offset);i.set("top",d.currentY-t-l.offset)}}u.css(i)}}function b(t){var i,o;if(l.smartPlacement){i=e.fn.powerTip.smartPlacementLists[l.placement];e.each(i,function(e,i){var n=P(y(t,i),u.outerWidth(),u.outerHeight());o=i;if(n===h.none){return false}})}else{y(t,l.placement);o=l.placement}u.addClass(o)}function y(e,t){var i=0,o,n,s=new v;s.set("top",0);s.set("left",0);u.css(s);do{o=u.outerWidth();n=u.outerHeight();s=p.compute(e,t,o,n,l.offset);u.css(s)}while(++i<=5&&(o!==u.outerWidth()||n!==u.outerHeight()));return s}function H(){var e=false;if(d.isTipOpen&&!d.isClosing&&!d.delayInProgress){if(d.activeHover.data(s)===false||d.activeHover.is(":disabled")){e=true}else{if(!k(d.activeHover)&&!d.activeHover.is(":focus")&&!d.activeHover.data(r)){if(u.data(f)){if(!k(u)){e=true}}else{e=true}}}if(e){m(d.activeHover)}}}this.showTip=c;this.hideTip=m;this.resetPosition=b}function b(e){return window.SVGElement&&e[0]instanceof SVGElement}function y(){if(!d.mouseTrackingActive){d.mouseTrackingActive=true;e(function e(){d.scrollLeft=i.scrollLeft();d.scrollTop=i.scrollTop();d.windowWidth=i.width();d.windowHeight=i.height()});t.on("mousemove",H);i.on({resize:function e(){d.windowWidth=i.width();d.windowHeight=i.height()},scroll:function e(){var t=i.scrollLeft(),o=i.scrollTop();if(t!==d.scrollLeft){d.currentX+=t-d.scrollLeft;d.scrollLeft=t}if(o!==d.scrollTop){d.currentY+=o-d.scrollTop;d.scrollTop=o}}})}}function H(e){d.currentX=e.pageX;d.currentY=e.pageY}function k(e){var t=e.offset(),i=e[0].getBoundingClientRect(),o=i.right-i.left,n=i.bottom-i.top;return d.currentX>=t.left&&d.currentX<=t.left+o&&d.currentY>=t.top&&d.currentY<=t.top+n}function O(t){var i=t.data(p),o=t.data(u),n=t.data(c),s,r;if(i){if(e.isFunction(i)){i=i.call(t[0])}r=i}else if(o){if(e.isFunction(o)){o=o.call(t[0])}if(o.length>0){r=o.clone(true,true)}}else if(n){s=e("#"+n);if(s.length>0){r=s.html()}}return r}function P(e,t,i){var o=d.scrollTop,n=d.scrollLeft,s=o+d.windowHeight,r=n+d.windowWidth,a=h.none;if(e.top<o||Math.abs(e.bottom-d.windowHeight)-i<o){a|=h.top}if(e.top+i>s||Math.abs(e.bottom-d.windowHeight)>s){a|=h.bottom}if(e.left<n||e.right+t>r){a|=h.left}if(e.left+t>r||e.right<n){a|=h.right}return a}function I(e){var t=0;while(e){e&=e-1;t++}return t}});
(function(t){t.path={};var s={rotate:function(t,s){var i=s*Math.PI/180,e=Math.cos(i),h=Math.sin(i);return[e*t[0]-h*t[1],h*t[0]+e*t[1]]},scale:function(t,s){return[s*t[0],s*t[1]]},add:function(t,s){return[t[0]+s[0],t[1]+s[1]]},minus:function(t,s){return[t[0]-s[0],t[1]-s[1]]}};t.path.bezier=function(i,e){i.start=t.extend({angle:0,length:.3333},i.start);i.end=t.extend({angle:0,length:.3333},i.end);this.p1=[i.start.x,i.start.y];this.p4=[i.end.x,i.end.y];var h=s.minus(this.p4,this.p1),n=s.scale(h,i.start.length),r=s.scale(h,-1),a=s.scale(r,i.end.length);n=s.rotate(n,i.start.angle);this.p2=s.add(this.p1,n);a=s.rotate(a,i.end.angle);this.p3=s.add(this.p4,a);this.f1=function(t){return t*t*t};this.f2=function(t){return 3*t*t*(1-t)};this.f3=function(t){return 3*t*(1-t)*(1-t)};this.f4=function(t){return(1-t)*(1-t)*(1-t)};this.css=function(t){var s=this.f1(t),i=this.f2(t),h=this.f3(t),n=this.f4(t),r={};if(e){r.prevX=this.x;r.prevY=this.y}r.x=this.x=this.p1[0]*s+this.p2[0]*i+this.p3[0]*h+this.p4[0]*n+.5|0;r.y=this.y=this.p1[1]*s+this.p2[1]*i+this.p3[1]*h+this.p4[1]*n+.5|0;r.left=r.x+"px";r.top=r.y+"px";return r}};t.path.arc=function(t,s){for(var i in t){this[i]=t[i]}this.dir=this.dir||1;while(this.start>this.end&&this.dir>0){this.start-=360}while(this.start<this.end&&this.dir<0){this.start+=360}this.css=function(t){var i=(this.start*t+this.end*(1-t))*Math.PI/180,e={};if(s){e.prevX=this.x;e.prevY=this.y}e.x=this.x=Math.sin(i)*this.radius+this.center[0]+.5|0;e.y=this.y=Math.cos(i)*this.radius+this.center[1]+.5|0;e.left=e.x+"px";e.top=e.y+"px";return e}};t.fx.step.path=function(s){var i=s.end.css(1-s.pos);if(i.prevX!=null){t.cssHooks.transform.set(s.elem,"rotate("+Math.atan2(i.prevY-i.y,i.prevX-i.x)+")")}s.elem.style.top=i.top;s.elem.style.left=i.left}})(jQuery);
(function(e){e.fn.replaceText=function(i,n,t){return this.each(function(){var f=this.firstChild,l,o,r=[];if(f){do{if(f.nodeType===3){l=f.nodeValue;o=l.replace(i,n);if(o!==l){if(!t&&/</.test(o)){e(f).before(o);r.push(f)}else{f.nodeValue=o}}}}while(f=f.nextSibling)}r.length&&e(r).remove()})}})(jQuery);
jQuery.cachedScript=function(e,r){r=$.extend(r||{},{dataType:"script",cache:true,url:e});return jQuery.ajax(r)};
jQuery.fn.topz=function(i){var o=$.extend({focus:true,popup:false},i);var t=-999;var n=false;var e=this[0];if(typeof window.topz==="undefined"){window.topz=[]}if(topz.indexOf($(this)[0])==-1&&!$(this)[0].hasAttribute("role")){$(this).attr({role:"dialog",tabindex:"1"}).on("keyup",function(i){if(i.which==27&&$(e).find(".bottomClose3").length>0){$(e).remove()}}).find(".bottomClose3").on("click",function(){$(e).remove()});if(o.focus)$(e).focusWithoutScrolling()}if(topz.indexOf($(this)[0])<0){topz.push($(this)[0]);$(this).bind("destroyed",function(){clearInterval(window.destroyIt);window.destroyIt=setTimeout(function(){if(topz.indexOf(e)!=-1){topz.splice(topz.indexOf(e),1);var i=-999,t=false;topz.forEach(function(o){var n=parseInt($(o).css("z-index"));if(n>i){i=n;t=$(o)}});if(t!==false&&o.focus)t.focusWithoutScrolling()}},130)})}if(topz.length>1){var s=-999;topz.forEach(function(i){cz=parseInt($(i).css("z-index"));if(cz==s){$(i).css("z-index",s-10);cz=cz-10}s=cz;if(cz>t)t=cz});var f=$(this).css("z-index");if(f<=t&&t>0){n=true}if(n){var c=-999,r;topz.forEach(function(i){if(i!=e){var o=parseInt($(i).css("z-index"));if(o>=t){$(i).css("z-index",t-1);if(t-1==c){r.css("z-index",c-1)}else{$(i).css("z-index",t-1)}}c=parseInt($(i).css("z-index"));r=$(i)}});$(e).css("z-index",t)}}return this};(function(i){i.event.special.destroyed={remove:function(i){if(i.handler){i.handler()}}}})(jQuery);$.fn.focusWithoutScrolling=function(){var i=window.scrollX,o=window.scrollY;this.focus();window.scrollTo(i,o)};
$.fn.overflown=function(){var t=this[0];return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth};
window.showMoreRecentCount=0;window.lastRecentPic=false;function showMoreRecent(e){$.ajax({type:"post",url:"/ajax/userGallery",dataType:"html",data:{startAmount:$(e).attr("data-startAmount")},success:function(e){$("#selectRecentlyUploadedContainer").animate({scrollTop:0},200);$("#recentPics").find(".ui-icon-closethick").bind("click",function(){$("#recentPics").addClass("peaceOut");return false});console.log(e.length);var t=$("#recentPics");$("#selectRecentlyUploadedContainer").html(e);$("#selectRecentlyUploadedContainer").css({maxHeight:"450px",overflow:"auto"});t.css("left","calc(50% - "+t.width()/2+"px)");$("#selectRecentlyUploadedContainer").on("click",".bottomClose2",closeRecentPic);$("#selectRecentlyUploadedContainer").on("click","img",recentPicAdd)}.bind(this),error:function(){f.e("Request failed")}});$("#selectRecentlyUploadedContainer").off().on("click",".bottomClose2",closeRecentPic);$("#selectRecentlyUploadedContainer").on("click","img",recentPicAdd)}function closeRecentPic(){var e=$(this);var t=$.parseJSON(e.parent().find("img").attr("data-info"));$.ajax({type:"POST",data:{params:t},dataType:"json",url:"/ajax/removeRecentPic/",success:function(e){}});$(this).parent().remove()}function recentPicAdd(){div=gMovePreview();var e=$(this);var t=JSON.parse(e.attr("data-info"));$("#recentPics").addClass("peaceOut");var n=$("<input>").attr({type:"hidden",name:qqinput_name,value:t.name});parentElemU.find('input[name="'+qqinput_name+'"]').remove();parentElemU.append(n);enableSubmitButtonU();$("form.commentsReply").find(".extraInfo,#voiceR,#voiceStart").remove();var o=t.path;if(typeof t.ext!="undefined"&&(t.ext=="mp4"||t.ext=="webm")){div.find("video").remove().end().append('<video width="320" height="240" '+(t.type==20?'autoplay="" muted="" loop=""':"controls")+">"+'<source src="'+o+'" type="video/'+t.ext+'">'+"Your browser does not support the video tag."+"</video>").find("a").hide()}else{div.find("a").show().attr("href",o).lightBox().end().find("img").attr("src",o).end().find("video").remove()}parentElemU.find('input[name="ihash"]').remove();window.lastRecentPic=e.parent();return false}if(!Array.prototype.filter){Array.prototype.filter=function(e){"use strict";if(this==null){throw new TypeError}var t=Object(this);var n=t.length>>>0;if(typeof e!="function"){throw new TypeError}var o=[];var i=arguments[1];for(var a=0;a<n;a++){if(a in t){var r=t[a];if(e.call(i,r,a,t)){o.push(r)}}}return o}}String.prototype.startsWith=function(e){return this.indexOf(e)===0};String.prototype.nl2br=function(e){var t="<br/>";var n=(this+"").replace(/([^>]?)\n/g,"$1"+t+"\n");if(typeof e!="undefined"){var o=n.split("<br");var i=e-o.length;if(i>0){var a="";for(var r=0;r<i;++r){a+=t}n+=a}}return n};String.prototype.textareaQuote=function(){return("> "+this).replace(/([^>]?)\n/g,"$1\n> ").replace(/\n>\ >/g,"\n>>")};String.prototype.quote=function(){return(""+this).replace(/  /g,"&nbsp;&nbsp;")};String.prototype.limitChars=function(e,t){if(typeof t=="undefined"||t==true){t="..."}else{t=""}var n=strip_html_tags(this);if(n.length>e){return n.substr(0,e)+t}else{return n}};commentChars=function(){comments.countSkip++;if(comments.countSkip>1){comments.countSkip=0;return false}if(comments.count===0){comments.count=$(".commentsReply #replyComment").attr("data-charlimit")}var e=$(".commentsReply #replyComment").val().length;if(e>comments.count){$(".commentsReply .charsLimit").html("The number of characters exceeds the limit: "+(e-comments.count)).addClass("redError")}else{$(".commentsReply .charsLimit").html("Remaining character count: "+(comments.count-e)).removeClass("redError")}},Array.prototype.getFirstItemStartsWith=function(e){var t="";for(var n=0;n<this.length;n++){if(this[n].startsWith(e)){t=this[n];break}}return t};Array.prototype.getItemsStartsWith=function(e){var t=[];for(var n=0;n<this.length;n++){if(this[n].startsWith(e)){t[t.length]=this[n]}}return t};Date.prototype.time12=function(){var e=this.getHours();e=e<13?e:e-12;var t=this.getMinutes();var t=t<10?"0"+t:t;var n=e<12?"am":"pm";return e+":"+t+n};Date.prototype.getDate2=function(){var e=this.getDate();if(e<10){return"0"+e}return e};Date.prototype.getMonthShortName=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e[this.getMonth()]};function countChildren(e){var t=e.length;return t}var html={swapElements:function(e,t,n,o,i){if(e.html()==null||t.html()==null)return;var a=e.html();var r=t.html();if(!n){e.html(r);t.html(a)}else{e.fadeOut(o,function(){e.html(r);e.fadeIn(o)});t.fadeOut(o,function(){t.html(a);if(i!=null){i.call()}t.fadeIn(o)})}},refreshImage:function(e){var t=$(e).attr("src");$(e).attr("src",t+"/")},refreshCaptcha:function(e){e=$(e);if(e.attr("src")!=undefined&&e.attr("src").indexOf("captcha/")>-1)e.attr("src",e.attr("src")+"/");else e.attr("src",e.attr("longdesc"))},htmlstrip:function(e){var t=document.createElement("div");t.innerHTML=$(e).val();var n=t.textContent||t.innerText;$(e).val(n)},aZstrip:function(e){var t=new RegExp("[^a-zA-Z0-9]");var n=$(e).val();$(e).val(n.replace(t,""))},limitChars:function(e,t,n,o,i){var a=$(e).val().length;if(typeof i!=="undefined"&&i===true)this.htmlstrip(e);if(o==undefined)o="redError";if(a>t){$(n).html("The number of characters exceeds the limit: "+(a-t)).addClass(o);return false}else{$(n).html("Remaining character count: "+(t-a)).removeClass(o);return true}},genCaptchaId:function(e){var t="0123456789abcdef";var n="";if(e==undefined)e=13;for(var o=0;o<e;++o){n+=t[Math.floor(Math.random()*t.length)]}return n},activateUpload:function(){if(!ALLOW_ANONYMOUS_TO_ADD_CONTENT){$(".uploadBttn").click(function(){var e=$(this).attr("href");return mustLogin(function(){document.location.href=e})})}},markSelectedComment:function(e){var t=$("#"+e);$("#commentsList .selected_com").removeClass("selected_com");t.parents(".com").addClass("selected_com")}};var dropdown={setSelected:function(e){$(e).closest("ul").find(".selected").removeClass("selected");$(e).addClass("selected")},onBtnClick:function(e){$(e).closest(".btn-group").toggleClass("open")}};var pictures={currentPage:1,orderDefault:"asc",sectionDefault:"picturelatest",perPage:20,sortBy:"",page:1,setPicPerPage:function(e,t,n){pictures.loadSettings(t);pictures.currentPage=1;pictures.sectionDefault=t;pictures.perPage=e;pictures.loadContentList(1,t,n)},setSortBy:function(e,t,n){pictures.currentPage=1;pictures.loadSettings(t);pictures.sortBy=e;pictures.sectionDefault=t;pictures.loadContentList(1,t,n)},setSortOrder:function(e,t,n){pictures.currentPage=1;pictures.loadSettings(t);pictures.sectionDefault=t;pictures.orderDefault=e;pictures.loadContentList(1,t,n)},loadContentList:function(e,t,n,o,a){if(t==null){t=pictures.sectionDefault}var r=$("<div>").addClass("contetLoadingw8");var s=$("<div>").addClass("contetLoadingw8");$("#"+t+"_content").append(s);var l="";if(document.getElementById("hiddenTypeId")&&document.getElementById("hiddenTypeId").value!=""){l=$("#hiddenTypeId").val();n=l}if(l==""&&(n==null||n=="")){n=0}var c=window.location.pathname.split("/");var d=0;var u=false;var p="";for(i=0;i<c.length;i++){if(c[i]=="tagnew"){d=c[i+1];d=d.replace("+"," ")}else if(c[i]=="members"){u=true;p=$("#hiddenUserId").val();userName=$("#hiddenUserName").val()}else if(c[i]=="membernew"){u=true;p=$("#hiddenUserId").val();userName=$("#hiddenUserName").val()}else if(c[i]=="user"&&$("#hiddenUserId").length>0){u=true;p=$("#hiddenUserId").val();userName=$("#hiddenUserName").val()}}s.animate({height:"16px"},200);if($("#"+t+"_perPage_input").length==0){pictures.perPage=$("#"+t+"_perPage").find("a.selected").attr("data-value")}else{pictures.perPage=$("#"+t+"_perPage_input").val()}if($("#"+t+"_picSort_input").length==0){pictures.sortBy=$("#"+t+"_picSort").find("a.selected").attr("data-value")}else{pictures.sortBy=$("#"+t+"_picSort_input").val()}if($("#"+t+"_picOrder_input").length==0){pictures.orderDefault=$("#"+t+"_picOrder").find("a.selected").attr("data-value")}else{pictures.orderDefault=$("#"+t+"_picOrder_input").val()}if(pictures.sortBy==""){pictures.sortBy="Select"}if(t=="favorites"){o="/base_content/userFavorites/"+p+"/"+pictures.orderDefault+"/"+pictures.perPage+"/"+pictures.sortBy+"/"+e}else if(u==true&&p!=""){o="/base_content/userProfileContentC/"+t+"/"+n+"/"+pictures.orderDefault+"/"+pictures.perPage+"/"+pictures.sortBy+"/"+e+"/"+p+"/"+userName}else{o="/funnycontent/pages_ajax/"+t+"/"+n+"/"+pictures.orderDefault+"/"+pictures.perPage+"/"+pictures.sortBy+"/"+e+"/"+d}$.ajax({type:"get",url:o,success:function(e){if(a!=undefined){a.call()}else{$("#"+t+"_content").html(e).parent().find(".pag1").html($("#"+t+"_content").find(".centerCom").html());$(".contetLoadingw8").remove()}content.setClickHandlers.thumbsProfile();paginationArrowsPositions()},error:function(){}});return false},loadUserLatest:function(e,t){var n="/"+t+"/latestcontent/"+e;$.ajax({type:"get",url:n,success:function(e){$(".main").html(e);$(".contetLoadingw8").remove();content.setClickHandlers.thumbsProfile()},error:function(){return false}});return false},loadTypedContentList:function(e,t,n){if(t==null){t=pictures.sectionDefault}var o=$("<div>").addClass("contetLoadingw8");$("#"+t+"_content").append(o);o.animate({height:"16px"},200);var a=window.location.pathname.split("/");var r=0;for(i=0;i<a.length;i++){if(a[i]=="tags"&&a.length>i+1){r=a[i+1];break}}var s="/funnycontent/pages_typed_ajax/"+t+"/"+e;if(r!=0){s="/funnycontent/pages_tag/"+r+"/"+t+"/"+e}$.ajax({type:"get",url:s,success:function(e){$("#"+t+"_content").html(e).parent().find(".pag1").html($("#"+t+"_content").find(".centerCom").html());$(".contetLoadingw8").remove()},error:function(){}});return false},loadUserFavorites:function(e){pictures.loadSettings("favorites");var t=$("<div>").addClass("w8");var n=$("<div>").addClass("w8");$("#comType .w8, #favorites_content .w8").remove();$("#comType").append(t);$("#favorites_content").append(n);var o=document.getElementById("hiddenUserId").value;if(e!=""){url="/base_content/userFavorites/"+o+"/"+pictures.orderDefault+"/"+pictures.perPage+"/"+pictures.sortBy+"/"+e}else{url="/base_content/userFavorites/"+o+"/"+pictures.orderDefault+"/"+pictures.perPage+"/"+pictures.sortBy+"/1"}n.animate({height:"16px"},200);$.ajax({type:"get",url:url,success:function(e){$("#favorites_content").html(e)},error:function(){$("#loader").text("Request Failed")}});return false},loadUserFriends:function(e){var t=$("<div>").addClass("w8");var n=$("<div>").addClass("w8");$("#comType .w8, #friends_content .w8").remove();$("#comType").append(t);$("#friends_content").append(n);var o=document.getElementById("hiddenUserId").value;if(e!=""){url="/base_content/userFriends/"+o+"/"+e}else{url="/base_content/userFriends/"+o+"/1"}n.animate({height:"16px"},200);$.ajax({type:"get",url:url,success:function(e){$("#friends_content").html(e)},error:function(){$("#loader").text("Request Failed")}});return false},loadSettings:function(e){if($("#"+e+"_perPage_input").length==0){pictures.perPage=$("#"+e+"_perPage").find("a.selected").attr("data-value")}else{pictures.perPage=$("#"+e+"_perPage_input").val()}if($("#"+e+"_picOrder_input").length==0){pictures.orderDefault=$("#"+e+"_picOrder").find("a.selected").attr("data-value")}else{pictures.orderDefault=$("#"+e+"_picOrder_input").val()}if($("#"+e+"_picSort_input").length==0){pictures.sortBy=$("#"+e+"_picSort").find("a.selected").attr("data-value")}else{pictures.sortBy=$("#"+e+"_picSort_input").val()}}};var tagsObj={sectionDefault:"taglatest",loadTypedContentList:function(e,t,n){return tagsObj.loadContentList(e)},loadContentList:function(e){var t=$("<div>").addClass("contetLoadingw8");$("#"+tagsObj.sectionDefault+"_content").append(t);t.animate({height:"16px"},200);var n=window.location.pathname.split("/");var o=0;for(i=0;i<n.length;i++){if(n[i]=="t"&&n.length>i+1){o=n[i+1];break}}var a="/t/"+o+"/"+e;$.ajax({type:"get",url:a,success:function(e){$("#"+tagsObj.sectionDefault+"_content").html(e);$(".contetLoadingw8").remove()}});return false}};function canHaveAccess(e,t){var n={settingName:e,userId:t};var o=new Array(true,"");$.ajax({async:true,type:"post",url:"/ajax/canHaveAccess/",data:n,success:function(e){var t=e.split("|");if(t[0]!="OK"){o[0]=false}o[1]=t[1]},error:function(){}});return o}function validateWithFilterSet(e,t,n){if(typeof n=="undefined"){n=""}return validateWithFilterSetEx(e,t,n,null)}function validateWithFilterSetEx(e,t,n,o,i){if(typeof i!=="undefiend"&&i!=="null"&&i!==null)html.htmlstrip(i);if(typeof o=="undefined"||o==null||o==""){o="/ajax/filterSet"}if(typeof n=="undefined"||n==""||!n)var a=jform.find(".ajaxResponse");else a=$("#"+n);var r={};var s=$("#"+e);r["text"]=s.val();r["filterSetName"]=t;$.ajax({type:"post",url:o,data:r,success:function(e){var t=e.split("|");if(t[0]=="OK"){a.hide().html(e.substr(3));s.val(a.text());a.hide().html("");s.removeClass("red_border")}else if(t[0]!=="FAIL"){a.addClass("red").show().html("Request Failed");f.e("Request Failed");s.addClass("red_border")}else{a.addClass("red").show().html(t[1]);f.e(t[1]);s.addClass("red_border")}},error:function(){a.addClass("red").show().html("Request Failed");f.e("Request Failed");s.addClass("red_border")}});return false}function limitTextArea(e,t){if(e.value.length>t){e.value=e.value.substr(0,t);alert("Your text cannot be longer")}}function youtubeVideoInfo(e,t,n){if(t==undefined)return false;$(".ajaxResponse").empty().addClass("submitContentW8");var o={url:t};$.ajax({url:"/youtube/info/",type:"POST",data:o,dataType:"json",async:true,success:function(e){$(".ajaxResponse").removeClass("submitContentW8");var t=$("#urlError").text("").hide();$("#submit_url1").removeClass("invalid");if(/^OK/.test(e.result)){if(typeof n!="undefined"){n()}}else if(e.result=="repost_alert"){t.html(e.description).show();$("#submit_url1").addClass("invalid");$(".ajaxResponse").html(e.description);dialog.alert(e.description)}else{if(e.result=="Invalid YouTube url"){t.text(e.result).show();$("#submit_url1").addClass("invalid")}else $(".ajaxResponse").html(e.result);f.e(e.result)}},error:function(){$(".ajaxResponse").removeClass("submitContentW8")}});return false}function changeSubmitCheckbox(e,t){t=$(t);if(e==1){if(t.find("input").prop("checked")){t.parent().prop("checked",true)}else{t.parent().find("input").removeAttr("checked")}}else if(e==2){if(t.find("input").prop("checked")){$("#cm_1 input").prop("checked",true)}else if(!$("#cm_3 input").prop("checked")){$("#cm_1 input").prop("checked",false)}}else if(e==3){if(t.find("input").prop("checked")){$("#cm_1 input").prop("checked",true)}else if(!$("#cm_2 input").prop("checked")){$("#cm_1 input").prop("checked",false)}}}function showAdminAlert(){var e=$("#adminAlertMain").attr("class");if($.cookie("hideAdminAlert")!=e){$("#adminAlertMain").show()}}function hideAdminAlert(){var e=$("#adminAlertMain").attr("class");$("#adminAlertMain").hide();$.cookie("hideAdminAlert",e,{expires:4,path:"/"})}function hideShareButtons(e){$("#srBtn").remove();$(".someBtnLarge").remove();$(".twBtn").remove();$("#rdBtn").remove();if(typeof e==="undefined")$.cookie("hideShareButtons","true",{expires:4,path:"/"})}function hideBottomNav(){dialog.confirmWithCallback(siteTitle,"Do you want to hide the bottom nav bar forever?",function(){$("#bottomNav").remove();$.cookie("hideBottomNav1","true",{expires:4,path:"/"})},null,"Yes")}function hideBottomThumbs(){dialog.confirmWithCallback(siteTitle,"Do you want to hide the bottom thumbs forever?",function(){$("#contentFooter").remove();$.cookie("hBT","1",{expires:4,path:"/"})},null,"Yes")}var uC={cook:function(e){var e=$(e);if(e.prop("tagName")!=="INPUT")e=e.find("input");var t=e.attr("name");if(e.prop("checked")){$.cookie(t,1,{expires:365,path:"/"})}else{$.cookie(t,0,{expires:365,path:"/"})}},fCC:function(e){if($("#futureContent").css("display")=="none"){$.cookie("fCC",1,{expires:365,path:"/"});$("#futureContent").show();$(e).find("span").text("[-]")}else{$.cookie("fCC",null,{path:"/"});$("#futureContent").hide();$(e).find("span").text("[+]")}},dCB1:function(e){if(parseInt($(e).val())>0){$.cookie("dCB1",parseInt($(e).val()),{expires:365,path:"/"})}else{$.cookie("dCB1",null,{path:"/"})}},dCB2:function(e){if(parseInt($(e).val())>0){$.cookie("dCB2",parseInt($(e).val()),{expires:365,path:"/"})}else{$.cookie("dCB2",null,{path:"/"})}},dCBR:function(e){var t=$(e).closest("label");var n=t.find("input").eq(0);$(n).val("");uC.dCB1($(n));var o=t.find("input").eq(1);$(o).val("");uC.dCB2($(o))},rDC:function(){var e=parseInt($("#date").val());if(e>0){$.cookie("rDC",e,{expires:365,path:"/"})}else{$.cookie("rDC",null,{path:"/"})}}};function hideFrontPageTopComments(e){dialog.confirmWithCallback(siteTitle,"Do you want to hide the front page top comments forever?",function(){$(e).parent().remove();$.cookie("hTC","1",{expires:4,path:"/"})}.bind(e),null,"Yes")}function hideCommentsCompletely(){$.cookie("hideCommentsCompletely","true",{expires:4,path:"/"});var e=$("#refreshCom").length?$("#refreshCom")[0]:null;setTimeout(function(){$(e).trigger("click")},1e3);$("#commentsList").before(""+'<a id="removeHideCommentsCompletely" onclick="removeHideCommentsCompletely();return false;'+'" href="#" title="Disable hiding comments completely">&#10006; Disable hiding comments completely</A>'+"")}function hideTooManyComms(){$.cookie("hideTooManyComms","true",{expires:4,path:"/"});$("#tooManyComms").replaceWith(""+'<a id="tooManyComms" onclick="hideTooManyCommsEnable();return false;'+'" href="#"><strong>&#10006; Enable hiding images to prevent browser lag.</strong></A>'+"");var e=$("#refreshCom").length?$("#refreshCom")[0]:null;setTimeout(function(){$(e).trigger("click")},1e3)}function hideTooManyCommsEnable(){$.cookie("hideTooManyComms","",{path:"/",expires:-1});$("#tooManyComms").replaceWith(""+'<a id="tooManyComms" onclick="hideTooManyComms();return false;'+'" href="#"><strong>&#10006; Too many comments. Images disabled to prevent lag.</strong></A>'+"");var e=$("#refreshCom").length?$("#refreshCom")[0]:null;setTimeout(function(){$(e).trigger("click")},1e3)}function removeHideCommentsCompletely(){$.cookie("hideCommentsCompletely","",{path:"/",expires:-1});$("#removeHideCommentsCompletely").remove();var e=$("#refreshCom").length?$("#refreshCom")[0]:null;$(e).trigger("click")}function hideAlert(e,t){$(t).closest("div").hide();$.cookie("hideAlert4"+e,1,{expires:1,path:"/"});return false}function hideChannelsBar(e){dialog.confirmWithCallback(siteTitle,"Do you want to hide the channels bar forever?",function(){$(e).closest("nav").remove();$.cookie("hideChannelsBar",1,{expires:1,path:"/"})},null,"Yes");return false}function hideBoardsHeader(e){dialog.confirmWithCallback(siteTitle,"Do you want to hide the boards header forever?",function(){$(document.querySelectorAll("#boards_bar")).remove();$.cookie("hideBoardsHeader",1,{expires:1,path:"/"})},null,"Yes");return false}function forceIsMobile(e){$.ajax({url:"/ajax/isMobileToggle",type:"get",dataType:"json",success:function(t){$(e).html("<strong>Mobile Status: "+(t.msg===true?"mobile":"non-mobile")+"</strong><BR>(Needs full page reload)");document.location.reload()}})}function forceIsRobot(e){$.ajax({url:"/ajax/isRobotToggle",type:"get",dataType:"json",success:function(t){$(e).html("<strong>isRObot Status: "+(t.msg===true?"isRobot":"!isRObot")+"</strong><BR>(Needs full page reload)")}})}function updateUserSettingsByUser(e,t,n,o){if(window.updateLock)return false;window.updateLock=true;var i=["announcement_popup","announcement_popup_2","show_bottom_nav_bar","show_bottom_nav_bar_mobile","show_channels_bar","show_boards_bar","show_bottom_thumbnails","show_bottom_thumbnails_mobile","show_contributer_message","show_share_buttons","show_mod_rankings","show_mod_menu","show_mod_menu","show_front_page_top_comments","show_level_bar","item_game_realtime","item_game_everywhere","realtime_comments_non_mobile","realtime_comments_mobile","live_video","force_newest_comments"];t=t===true?1:t===false?0:t;var a=i.indexOf(e);if(typeof contentId==="undefined")contentId=false;if(a!==-1){$.ajax({url:"/ajax/updateUserSettingsByUser",type:"post",data:{type:e,setting:t,userId:n,contentId:contentId},dataType:"json",success:function(t){if(t.msg=="success"){window.updateLock=false;if(e==="show_boards_bar"){$(".boards_bar").remove()}else if(e==="show_contributer_message"){$(o).remove();$("#contributorAlert").remove()}else if(e==="show_share_buttons"){hideShareButtons()}else if(e=="realtime_comments_non_mobile"||e=="realtime_comments_mobile"){liveUpdates(o);return false}else if(e=="live_video"){liveVideoSwitch(o);return false}else if(e=="force_newest_comments"){f.s("Comments will be sorted by newest by default.");$(o).remove();return false}else if(e=="item_game_realtime"){realtimeItems=!realtimeItems;window.refreshItemsEnabled=!realtimeItems;var n=realtimeItems===true?"On":"Off";f.s("Realtime Items: "+n);$("#liveItems").toggleClass("selected").text("Live Item Updates: "+n);return false}else if(e=="item_game_everywhere"){itemgameEverywhere=!itemgameEverywhere;var n=itemgameEverywhere===true?"On":"Off";f.s("Items everywhere: "+n+". Close your browser and reopen for realtime items to work on all pages.");$("#itemsEverywhere").toggleClass("selected").text("Items everywhere: "+n);return false}else{$(o).parent().remove()}if(e!=="announcement_popup"&&e!=="announcement_popup_2"){f.s("You'll never see this again. It can be turned back on in user settings.");return false}}else{f.e(t.msg);return false}},error:function(){window.updateLock=false}})}}function updateContentSetting(e,t,n,o,i){var a=["force_captcha","start_comment_sort","show_online_users"];var r=a.indexOf(t);if(r!==-1){$.ajax({url:"/ajax/updateContentSetting",type:"post",data:{setting:t,value:n,userId:o,contentId:i},dataType:"json",success:function(e){if(e.msg=="success"){f.e(e.msg);return false}}})}}function hideVerticalBar(e){dialog.confirmWithCallback(siteTitle,"Hide this menu? You can turn it back on in the settings.",function(){if(e=="hot"){$.ajax({url:"/ajax/setTrending",type:"post",data:{type:0},dataType:"json",success:function(t){if(t.type=="success"){$("#"+e+"TopMenu").hide()}else{f.e(t.msg)}}})}else{$("#"+e+"TopMenu").hide();$.cookie("hide"+e+"TopMenu",1,{path:"/",expires:365})}},null,"Yes")}function hideBar(e,t,n,o){dialog.confirmWithCallback(siteTitle,n,function(){o.hide();$.cookie(e,1,{path:"/",expires:t})})}function switchLevelBar(e){if(e!="1"&&e!="0"){e="1"}dialog.confirmWithCallback(siteTitle,"Do you want to "+(e=="0"?"hide":"show")+" level bar?",function(){$.ajax({type:"post",url:"/ajax/switchLevelBar",data:{type:e},dataType:"json",success:function(e){if(e.type=="success"){document.location.reload()}else{f.e(e.msg)}}})},null,"Yes");return false}function userProfileBttns(){if(BrowserDetect.browser=="IE"&&BrowserDetect.version==7){var e;var t;$("#pclN li div.a").each(function(){e=$(this).parent().width();t=e-$(this).width();$(this).css("margin-left",t)})}$("#pclN li").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}).click(function(){document.location.href=$(this).find("a").attr("href")})}function getCookie(e){if(document.cookie.length>0){c_start=document.cookie.indexOf(e+"=");if(c_start!=-1){c_start=c_start+e.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;return unescape(document.cookie.substring(c_start,c_end))}}return""}function loadcookieData(){var e=getCookie("cookname");if(e!==""){if(document.loginfrm&&document.loginfrm.username){document.loginfrm.username.value=e;document.loginfrm.remember.checked="checked"}}}function pause(e){var t=new Date;var n=t.getTime()+e;while(true){t=new Date;if(t.getTime()>n)return}}function validatePwd(e){if(document.getElementById("passwordRegisterMember").value.length<8){document.getElementById("passwordRegisterMember_minchar").innerHTML='<span style="color: #FF0000">Minimum number of chars is 8.</span>';return false}re=/[0-9]/;if(!re.test(document.getElementById("passwordRegisterMember").value)){document.getElementById("passwordRegisterMember_minchar").innerHTML='<span style="color: #FF0000">Password must contain at least one number.</span>';return false}re=/[a-zA-Z]/;if(!re.test(document.getElementById("passwordRegisterMember").value)){document.getElementById("passwordRegisterMember_minchar").innerHTML='<span style="color: #FF0000">Password must contain at least one letter of the alphabet.</span>';return false}document.getElementById("passwordRegisterMember_minchar").innerHTML="";return true}function changeContentMargin(){var e=$("#adminAlertMain").attr("class");if($.cookie("hideAdminAlert")==e){$("#content").css("margin-top","49px")}}function refreshComment(){comments.loadPage(comments.currentPage,true)}function makeLowercase(e){e.value=e.value.toLowerCase()}function emailToFriends(e){var t=$("<div>").addClass("dialogBlackW8").attr({id:"tellFriendForm"}).load("/tellafriend/show",{contentId:e},function(){$(this).removeClass("dialogBlackW8");$(this).find("input").eq(0).focus();$(this).height("auto")});t.dialog({title:"Tell a friend",closeOnEscape:true,resizable:true,width:520,close:function(){Recaptcha.destroy();$(this).remove()},open:function(){t.parent("div").css("overflow","visible")},buttons:{Send:function(){$(this).find("form").submit();return false},Cancel:function(){Recaptcha.destroy();$(this).dialog("close")}}})}$(document).ready(function(){html.activateUpload();$("img.captcha").on("click",function(){var e=$(this).attr("src")+"/";$(this).attr("src",e)});$("#passwordRegisterMember, #passwordRegisterMember1").pstrength();var e=null;$("#float-quick-menu").on("mouseenter",function(){if(e){clearTimeout(e);e=null}else{$(this).animate({marginRight:0},500)}}).on("mouseleave",function(){if(!e){obj=$(this);e=setTimeout(function(){obj.animate({marginRight:-27},250);e=null},1e3)}});window.onbeforeunload=function(e){if($("#uploaderContainer").length||$(".commentsReply").length){e=e||window.event;var t="Are you sure you want to leave this page and close this form?";if(e){e.returnValue=t}return t}}});function myButtonToggle(e){e=$(e);boardMenu=$(".boardsMenu_sub");clearTimeout(window.dropRemove);var t=false;if(e.closest(".com").length>0){var n=e.find(".myButtonMenu");t=true}else{var n=e.parent().find(".myButtonMenu")}if(n.length===0||n.hasClass("peaceOut")){var o=e.attr("data-cid");var i=e.attr("data-aid");if(n.length===0){if(o!==undefined){e.attr("data-cid","").append(commR[o]);delete commR[o]}else if(i!==undefined){e.attr("data-aid","").append(commA[i]);delete commA[i]}}else{n.removeClass("peaceOut");if(t){n.attr("style","")}}window.myButtonMenu=true;if(e.hasClass("boardsMenu")&&boardMenu.width()+300>$(window).width()){boardMenu.css({left:"10px",top:"50px"})}else if(e.hasClass("boardsMenu")){boardMenu.css({left:$("#columnLeftSeparator").offset().left+"px",top:"45px"})}var a=$(e).parent().find(".dropdown-menu");if(a.length>0&&a.offset().left<0){a.css("right",a.offset().left-5+"px")}}else if(document.middleClick===false){window.myButtonMenu=false;if(!n.hasClass("peaceOut"))n.addClass("peaceOut")}}function paginationArrowsPositions(){if($(".paginationSlider:visible").length===0)return false;var e=41,t=15,n=$(window).height(),o=$(window).scrollTop();$.each($(".paginationSlider:visible"),function(i,a){var r=$(a).offset(),s=$(a).height(),l=0,c=o-r.top*1.1+n/2;if($(a).hasClass("paginationSliderNext")){l=-e}if(top>s-e-t){top=s-e-t}else if(top<0){top=0}$(a).css({backgroundPosition:l+"px "+top+"px"});$(a).find("i").css({top:top+39+"px",display:"block"})})}function showAllLatestUsers(){$.ajax({url:"/ajax/viewAllLatestUsers",type:"post",data:{contentId:contentId,pageType:pageType||""},dataType:"json",success:function(e){if(e.type=="err"){dialog.alert(e.msg);return}var t="<div>";var n=e.users.length;for(i=0;i<n;i++){var o=e.users[i];o.is_mobile=parseInt(o.is_mobile);t+=(o.is_mobile!==0?'<span class="glyphicon glyphicon-phone g3"></span>':"")+'<a href="/user/'+o.username+'">'+o.username+"</a>";if(i==n-1){t+="."}else{t+=", "}}t+="</div>";$(t).dialog({title:"Latest Users",closeOnEscape:true,resizable:false,width:380,buttons:{Hide:function(){$(this).dialog("close")}}})}});return false}stick={seconds:null,intervalID:null,initTimer:function(e,t){this.seconds=e;if(e){if(t){this.intervalID=setInterval(this.updateTime.bind(this),1e3)}this.showTimer()}},showTimer:function(){var e=this.seconds;var t=this.pad(parseInt(e/(60*60)),2);var n=this.pad(parseInt((e-60*60*t)/60),2);var o=this.pad(e-60*60*t-60*n,2);var i=t+":"+n+":"+o;$("#stickTimer").html(" - "+i)},updateTime:function(){this.seconds--;this.showTimer();if(this.seconds==0){clearInterval(this.intervalID)}},pad:function(e,t,n){n=n||"0";e=e+"";return e.length>=t?e:new Array(t-e.length+1).join(n)+e},hideStickies:function(){dialog.confirmWithCallback(siteTitle,"Hide all content stickies for 48 hours?",function(){$.cookie("hideContentStickies",1,{path:"/",expires:2});document.location.reload()});return false}};function onSearchSubmit(e){var t=$(e).closest(".search-container").find("input");if(t.val()==""){f.e("Please, enter search string")}else{document.location.href="/search/?q="+$(e).closest(".search-container").find("input").val()}return false}function onSearchKeyUp(e){if(e.which==13){return onSearchSubmit(e.target)}return false}window.socialResult=null;window.socialLogin=null;function onSocialLogin(t){var t=$(t);var n=t.attr("class").replace(" add","");var o=function(){if(a&&a.closed){window.clearInterval(e);if(window.socialResult!=null){if(window.socialResult){$("."+n+".remove").show();t.hide()}}else if(window.socialLogin){document.location.reload()}}};var i=new URL(document.location.href).origin+"/";switch(n){case"btnFb":{var a=window.open("https://www.facebook.com/dialog/oauth?client_id="+FB_PUBLIC_KEY+"&scope=email&response_type=code&display=popup&redirect_uri="+encodeURIComponent(i+"ajax/socialLogin/fb/"),"SocialLogin","width=500,height=600,left="+(screen.width-500)/2+",top="+(screen.height-600)/2);e=window.setInterval(o,50);break}case"btnGplus":{var a=window.open("https://accounts.google.com/o/oauth2/auth?response_type=code&client_id="+GA_PUBLIC_KEY+"&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&redirect_uri="+encodeURIComponent(i+"ajax/socialLogin/ga/"),"SocialLogin","width=600,height=600,left="+(screen.width-600)/2+",top="+(screen.height-600)/2);e=window.setInterval(o,50);break}}}function removeSocialProfile(e){var e=$(e);var t="";var n=e.attr("class").replace(" remove","");switch(n){case"btnFb":{t="fb";break}case"btnGplus":{t="ga";break}}$.ajax({url:"/ajax/removeSocialProfile",type:"post",data:{provider:t},dataType:"json",success:function(t){if(t.type=="err"){dialog.alert(t.msg)}else{dialog.alert(t.msg);$("."+n+".add").show();e.hide()}}})}function shuffleArray(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1));var o=e[t];e[t]=e[n];e[n]=o}return e}function sessionRefresh(){var e=document.cookie.split(/; */);for(var t=0;t<e.length;t++){var n=e[t].substring(0,e[t].indexOf("="));$.cookie(n,null,{path:"/"});$.cookie(n,null,{path:"/",domain:"."+SITE_URL});$.cookie(n,null,{path:"/",domain:SITE_URL})}document.location.reload()}function voiceR(){if(document.location.protocol!=="https:"){$(".commentsReply #voiceStart").html("Browsers now force you to be on https for this to work.");return false}$(".commentsReply #voiceStart").remove();$(".commentsReply #voiceR").attr("class","")}function removeSection(e,t,n){var o=e.substring(0,e.indexOf("_"));e=o!=""?o:e;var i=$.cookie("rS");if(i!=null&&typeof i!="undefined"){var a=i.split(",")}else{var a=[]}var r=a.indexOf(e);if(r>=0){}else{a.push(e)}var s=a.toString();$.cookie("rS",s,{expires:365,domain:SITE_URL,path:"/"});$(n).parent().remove().parent();$("#contentRight").find(".main:not(.hidden)").slice(0,2).find("img").trigger("appear");$("#sectionBlocks").show().attr("onclick","clearSectionBlocks('"+t+"');")}function clearSectionBlocks(e){switch(e){case"channel":var t=["channeltopall","channeltop180d","channeltop30d","channeltop7d","channeltop24h","channellatest"];

break;case"nsfwchannel":var t=["nsfwchanneltopall","nsfwchanneltop180d","nsfwchanneltop30d","nsfwchanneltop7d","nsfwchanneltop24h","nsfwchannellatest"];break;case"home":var t=["hometop24h","hometopday2","hometopday3","hometopday4","hometopday5","hometopday6","hometopday7","mainpagetop30d","homenewest24h"];break;case"mature":var t=["homematuretop24h","homematureday2","homematureday3","homematureday4","homematureday5","homematureday6","homematureday7","homematuretop30d","homematurenewest24h"];break}var n=$.cookie("rS");if(n!==null&&typeof n!=="undefined"){var o=n.split(",")}else{var o=[]}t.map(function(e){if(o.indexOf(e)>=0){o.splice(o.indexOf(e),1)}});var i=o.toString();$.cookie("rS",i,{expires:365,domain:SITE_URL,path:"/"});document.location.reload()}function stickHide(e,t){$.cookie(e,1,{expires:7,domain:SITE_URL,path:"/"});$(t).parent().remove()}function loadComms(e,t,n,o,i,a){$.ajax({url:"/content/commentsShow/"+e+"/"+t+"/"+n+"/"+o+"/"+i+"/"+a+"/?ajaxLoad=1",type:"get",success:function(e){$(".commCont").empty().append(e);var t=$("#main");if(showCommentImages===true)t.find("a[rel^='lightbox']").lightBox();comments_initCdnSwitch();commYoutube();hoverMyButtons();comments.initImagesOnMouseHover(t);comments_initReply();comments.initSpoiler(t);comments.loadSettings();refreshCollapsibleComments(t);content.setClickHandlers.comments();listsInit.clInitLists();listsInit.mlInitLists();comments.initLazyImages();if(typeof window.rollCallback!=="undefined"){window.rollCallback()}if(e.successmessage!==undefined){}else if(e.errormessage!==undefined){}}})}function hideAllComms(e){comments.commentsHidden=true;var t=$(".topRightUsername").text();var n=$("#commCountThingy").text();$.cookie("sC",2,{expires:365,domain:SITE_URL,path:"/"});$(".commCont").empty().html('<div class="main" id="main">'+'<div style="text-align: center;" id="ajax_comm">'+'<span id="showAllComms" '+'onclick="loadComms('+contentId+","+webId+",1,'"+t.trim()+"',"+webId+",'"+e+"');\" "+'style="cursor:pointer;">'+"Show Comments "+n.trim()+"</span>"+"</div></div>")}var dd={confirm:function(e,t,n){dd.promise=new $.Deferred;t='<span style="font: 400 '+n+'px arial, serif;">'+t+"</span>";var o={};o.Ok=function(){$(this).dialog("close");dd.promise.resolve()};o.Cancel=function(){$(this).dialog("close");dd.promise.reject()};$("<div>").html(t).dialog({title:e,closeOnEscape:true,resizable:false,close:function(){$(this).remove()},buttons:o})}};function showGuide(e){e=parseInt(e);var t="";var n="";switch(e){case 1:t="/ajax/getGuide";n="Skin and PC Level Guide";break;case 2:t="/ajax/modGuide";n="Mod Guide";break;case 3:t="/ajax/flagGuide";n="Flag Guide";break}$.ajax({url:t,success:function(e){$("<div>").dialog({modal:true,open:function(){$(this).html(e)},height:400,width:isMobile?400:$(window).width()*.8>800?800:$(window).width()*.8,title:n})}})}function showAllChannels(e){e=parseInt(e);var t,n="chanHeightLimit";switch(e){case 1:t=$("#topRatedMature");break;case 2:t=$("#topRatedMatureWeek");break;case 3:t=$("#newestChannelsMature");break}if(t.hasClass(n)){t.removeClass(n).find(".showAllChan").text("Hide")}else{t.addClass(n).find(".showAllChan").text("Show All")}}function expandJs(e){var t=$(e);if(t.parent().find(".commSnippets").hasClass("expandedPreFull")){t.text("expand ++")}else{t.text("expand --")}t.parent().find(".commSnippets").toggleClass("expandedPreFull");return false}function demUsersToggle(){var e=$(".demUsersToggle").find("strong");var t=$(".allDemusers");if(e.text()=="[+]"){e.text("[-]").css("margin","0 6px 0 0");t.css("display","inline-block")}else{e.text("[+]").css("margin","");t.css("display","none")}}function isSecure(){return window.location.protocol=="https:"}function getSumNewContent(e){$.ajax({type:"GET",dataType:"html",url:"/ajax/leftColUpdate",success:function(e){comments.newUploads=0;var e=$(e);e=e.find(".nUploads").html();$(".nUploads").html(e);$("#newUploadAlert").hide();if(isMobile)showMobileLeftColImages()}})}function gParem(e,t){if(!t){t=window.location.href}e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=n.exec(t);if(!o)return null;if(!o[2])return"";return decodeURIComponent(o[2].replace(/\+/g," "))}function nohtml(e){var t=document.createElement("div");t.innerHTML=e;return t.textContent||t.innerText}function popChannelsList(){var e=$('#contentVisibilityOptions input[name="nsfw"]');if(e.length&&e[0].checked){var t=lastChTopListsMature}else{var t=lastChTopLists}if(t.length<1)return false;lastChTopListsHtml="";for(i=0;i<t.length;i++){lastChTopListsHtml+="<span "+hideOrNot(i)+' data-id="'+i+"\" class='lll "+(parseInt(t[i].is_mature_channel)===1?" nsfwBg3":"")+"'>"+t[i].name+"</span> "}if(lastChTopListsHtml!==""){lastChTopListsHtml+=showMoreButton(t.length);$(".popularChannels").find(".lll").remove();$(".popularChannels").parent().show();$(".popularChannels").append(lastChTopListsHtml);$(".popularChannels").off().on("click",".lll",function(){var e=$(this).attr("data-id");chs.changeChannel(t[e].channel_id,t[e].default_content_visibility,t[e].name,false,t[e].is_mature_channel)})}$(".showMore").on("click",function(){$(this).parent().find("span").attr("style","");$(this).remove()})}function removeUploadPart(){$(this).parent().remove();if(typeof window.deletedContents==="undefined")window.deletedContents=[];window.deletedContents.push(parseInt($(this).attr("data-content-id")));f.s("This part will be deleted upon submitting your changes.")}function submitMyOC(){if(window.lockOC)return false;window.lockOC=true;$.ajax({url:"/ajax/submitMyOC",type:"post",data:{contentId:contentId},dataType:"json",success:function(e){console.log(e);if(e.status===true){f.s(e.message)}else{f.e(e.message)}window.lockOC=false;$("#ocReview").remove()},error:function(){window.lockOC=false}})}function showLiveVidControls(e){$(e).remove();$("#liveVidControls").show()}function repost(e,t){$.ajax({url:"/repost/repostContent",type:"post",data:{contentId:e},dataType:"json",success:function(t){console.log(t);window.lastMentionLists=t.lastMentionLists;var n=new RegExp("\\[.*?mentionlist (.*)]");window.lastMentionListsHtml="";window.lastChLists=t.lastChLists;window.lastChListsHtml="";window.lastChTopLists=t.lastChTopLists;window.lastChTopListsHtml="";window.lastChTopListsMature=t.lastChTopListsMature;window.lastChTopListsMatureHtml="";pollz.makeHtml2({html:t.html},"Repost");makeLastChannels();$("#repostDesc").markItUp(myMarkdownSettingsContent);$(".sRepost").on("click",function(){var t={contentId:e,title:$("#reTitle").val(),strip_collection:$("#stripMention")[0].checked,strip_desc:$("#stripDesc")[0].checked,channelId:$("#channelId").val(),visibility:$("#homepage_and_channel")[0].checked,description:$("#repostDesc").val(),delay:$("#date").val(),noIndex:$("#no_index")[0].checked,showFlags:$("#show_flags")[0].checked};$(".sRepost").hide();$.ajax({url:"/repost/repostContent2",type:"post",data:t,dataType:"json",success:function(e){if(e.success){f.s(e.message);$("#pollzRepost").remove()}else{$(".sRepost").show();f.e(e.message)}}})})}})}function showOp(){$("#bbRank, .comX, #powerStuff, #bbRank").toggle()}
var dialog={commOptions:false,confirmed:null,privMsg:function(e){var a=$("<div>");var i=$("<label>").text("Subject:").addClass("block");var t=$("<label>").text("Message:").addClass("block").addClass("pt10");var o=$("<input>").attr({type:"text",maxlength:"45"}).addClass("privMsgSubject");var n=$("<textarea>").addClass("privMsgMessage");a.append(i);a.append(o);a.append(t);a.append(n);loadCaptcha(a);a.dialog({resizable:false,width:400,title:"Send Message to "+e,buttons:{Send:function(){$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})},flagCommentPicture:function(e,a,i,t){if(typeof FLAG_COMMENTPICTURE!="undefined"&&!FLAG_COMMENTPICTURE){var o=" cannot flag Comment Picture.";if(loggedIn()){dialog.alert(GROUP_LABEL+o)}else{loginOpen("Anonymous"+o)}return}var n=$('<form class="formModFlag">').attr({method:"post",action:"/ajax/flag_CommentPicture/"+e,id:"CommentPictureFlag_"+e});var l='<input type="hidden" name="node_id" value="'+nze.node_id+'"><div id="flagResponse_'+e+'"></div>';l+='<label><input type="radio" name="flag" value="nsfw" /> NSFW</label>';l+='<label><input type="radio" name="flag" value="borderline_nsfw" /> Borderline NSFW</label>';l+='<label><input type="radio" checked="checked" id="flag" name="flag" value="illegal" /> Illegal</label>';l+='<label><input type="radio" name="flag" value="spam" /> Spam</label>';l+='<label><input type="radio" name="flag" value="harassment" /> Harassment/Posting Personal Info</label>';l+='<label><input type="radio" name="flag" value="gore" /> Gore</label>';if(IS_FLAG_MODERATOR||IS_ADMIN){l+='<label><input type="radio" name="flag" value="copyright" /> Copyright Issue</label>';l+='<label><input type="radio" name="flag" value="boardSpam15" /> Board Spam: 15 minutes</label>';l+='<label><input type="radio" name="flag" value="boardSpam30" /> Board Spam: 30 minutes</label>';l+='<label><input type="radio" name="flag" value="boardSpam60" /> Board Spam: 60 minutes</label>';l+='<label><input type="radio" name="flag" value="boardSpam120" /> Board Spam: 2 hours</label>'}l+='<input type="hidden" name="CommentId" value="'+e+'" />';var s=300;if(!IS_FLAG_MODERATOR&&!IS_ADMIN){l+='<br />Captcha:<div id="flagCaptcha"  align="left" >&nbsp;</div>';s=580}var r=function(){if($("input[name=flag]:checked").val()=="copyright"){var a="http://funnyjunk.com/showcomment/"+e+"/#cc"+e;var o="Comment link:\n"+a;document.location.href="/contact/copyright?message="+encodeURIComponent(o)+"&link="+encodeURIComponent(a)+"&link_fixed=1"}else{sendForm(n,"flagResponse_"+e,false,function(){$("#CommentPictureFlag_"+e).dialog("close");f.s("Comment was flagged, homie.");$("#CommentPictureFlags"+e).before("FLAGGED!");$("#CommentPictureFlags"+e).remove();if($("#flagResponse_"+e).html()=="flagged"){$("#CommentPictureFlag_"+e).dialog("close");$("#image_div"+e).html('<img src="'+MEDIA_URL+'flagged.gif" class="av_img" alt="Flagged Comment Picture" style="border:none;"/>')}if(typeof t=="undefined"){var a=$(n).find('input[name="flag"]:checked').val();admintools.makeFlaggedCommentHtml(e,a,FJUserName);if(typeof i!="undefined"&&i){}}else{t.call()}})}};function c(e){if(e.keyCode==$.ui.keyCode.ENTER){e.preventDefault();e.stopPropagation();r()}}n.html(l);n.dialog({width:s,resizable:false,title:"Flag this image",focus:function(){$(this).closest(".ui-dialog").off("keydown",c);$(this).closest(".ui-dialog").on("keydown",c)},buttons:{Flag:r,Close:function(){$(this).dialog("close")}}});if(!IS_FLAG_MODERATOR&&!IS_ADMIN){Recaptcha.create(captcha_public_key,"flagCaptcha",{theme:"blackglass",callback:""})}},flagContent:function(e,a,i){if(typeof FLAG_CONTENT!="undefined"&&!FLAG_CONTENT){var t=" cannot flag content.";if(loggedIn()){dialog.alert(GROUP_LABEL+t)}else{loginOpen("Anonymous"+t)}return}$("#contentFlag").remove();var o=$("<form>").attr({method:"post",action:"/flag/",id:"contentFlag"});var n='<div id="flagResponse"></div>';n+='<label><input type="radio" name="flag" value="nsfw" /> NSFW</label><br />';n+='<label><input type="radio" name="flag" value="borderline_nsfw" /> Borderline Whatever (flag with no ban time)</label><br />';var l=$("<div>").text("");n+='<label><input type="radio" name="flag" value="illegal" /> Illegal</label><br />';n+='<label><input type="radio" name="flag" value="spam" /> Spam</label><br />';n+='<label><input type="radio" name="flag" value="copyright" /> Copyright Issue</label><br />';n+='<label><input type="radio" name="flag" value="harassment" /> Harassment/Posting Personal Info</label><br />';n+='<label><input type="radio" name="flag" value="copyrighted_content" /> Copyrighted content</label><br />';n+='<label><input type="radio" name="flag" value="gore" /> Gore</label><br /><br />';n+='<input type="hidden" name="contentId" value="'+contentId+'" />';var s=300;if(!IS_FLAG_MODERATOR&&!IS_ADMIN){n+='<br />Captcha:<div id="flagCaptcha"  align="left" >&nbsp;</div>';s=580}var r=function(){if($("input[name=flag]:checked").val()=="copyright"){copyright.redirectToCopyrightForm()}else{sendForm(o,"flagResponse",false,function(){$("#contentFlag").dialog("close");$("#contentFlags").html("Thank you");if(typeof i=="undefined"){if(typeof a!="undefined"&&a){document.location.reload()}}else{i.call()}})}};o.html(n);o.append(l);function c(e){if(e.keyCode==$.ui.keyCode.ENTER){e.preventDefault();e.stopPropagation();r()}}o.dialog({width:s,resizable:false,title:"Flag this content",close:function(){$(this).remove()},focus:function(){$(this).closest(".ui-dialog").off("keydown",c);$(this).closest(".ui-dialog").on("keydown",c)},buttons:{Flag:r,Close:function(){$(this).dialog("close")}}});Recaptcha.create(captcha_public_key,"flagCaptcha",{theme:"blackglass",callback:""})},flagAvatar:function(e,a){if(typeof FLAG_AVATAR!="undefined"&&!FLAG_AVATAR){var i=" cannot flag avatar.";if(loggedIn()){dialog.alert(GROUP_LABEL+i)}else{loginOpen("Anonymous"+i)}return}var t=$("<form>").attr({method:"post",action:"/flag_avatar/",id:"avatarFlag"});var o='<div id="flagResponse"></div>';o+='<label><input type="radio" checked="checked" name="flag" value="1" /> Flag as inappropriate</label><br /><br />';o+='<input type="hidden" name="userId" value="'+e+'" />';var n=300;if(!IS_FLAG_MODERATOR&&!IS_ADMIN){o+='<br />Captcha:<div id="flagCaptcha"  align="left" >&nbsp;</div>';n=580}var l=function(){sendForm(t,"flagResponse",false,function(){$("#avatarFlag").dialog("close");$("#avatarFlags").html("Thank you");if(typeof a=="undefined"){document.location.reload()}else{a.call()}})};t.html(o);t.dialog({width:n,resizable:false,title:"Flag avatar",close:function(){$(this).remove()},focus:function(){$(this).closest(".ui-dialog").keydown(function(e){if(e.keyCode==$.ui.keyCode.ENTER){e.preventDefault();e.stopPropagation();l()}})},buttons:{Flag:l,Close:function(){$(this).dialog("close")}}});if(!IS_FLAG_MODERATOR&&!IS_ADMIN){Recaptcha.create(captcha_public_key,"flagCaptcha",{theme:"blackglass",callback:""})}},alert:function(e,a,i,t){if(a==null){a=e;e="Notice:"}$("<div>").html(a).dialog({resizable:false,id:"flashM",title:e,close:function(){$(this).remove()},buttons:{Ok:function(){if(i!=null&&i==true){document.location.reload()}$(this).dialog("close");if(t!=null){t.call()}}}})},logoutalert:function(e,a,i){if(a==null){a=e;e=siteTitle}$("<div>").html(a).dialog({resizable:false,title:e,buttons:{Ok:function(){if(true==i){document.location.href="/"}else if(FJ.isInUrl("accountsettings",1)||FJ.isInUrl("inbox",1)||FJ.isInUrl("alerts",1)){users.showLoginForm()}else{document.location.href="/"}$(this).dialog("close")}}})},uploadalert:function(e,a,i,t){if(dialog.confirmed!=null){setTimeout(function(){dialog.confirmed=null},100);return dialog.confirmed}$("<div>").html(a).dialog({title:e,closeOnEscape:false,resizable:false,buttons:{Yes:function(){$(this).dialog("close");document.getElementById("uploadCheck").value=1;document.submitcontent.submit()},No:function(){$(this).dialog("close")}}});return false},betauploadalert:function(e,a,i,t){if(dialog.confirmed!=null){setTimeout(function(){dialog.confirmed=null},100);return dialog.confirmed}$("<div>").html(a).dialog({title:e,closeOnEscape:false,resizable:false,buttons:{Yes:function(){$(this).dialog("close");document.getElementById("uploadCheck").value=1;document.submitbetacontent.submit()},No:function(){$(this).dialog("close")}}});return false},confirm:function(e,a,i,t,o,n){if(dialog.confirmed!=null){setTimeout(function(){dialog.confirmed=null},100);return dialog.confirmed}o=o||"Ok";n=n||"Cancel";var l={};l[o]=function(){$(this).dialog("close");dialog.confirmed=true;if(i!=null){i.call()}};l[n]=function(){$(this).dialog("close");dialog.confirmed=false;if(t==true&&i!=null){i.call()}};$("<div>").html(a).dialog({title:e,closeOnEscape:false,resizable:false,close:function(){$(this).remove()},buttons:l});return false},confirmWithCallback:function(e,a,i,t,o,n){o=o||"Ok";n=n||"Cancel";var l={};l[o]=function(){$(this).dialog("close");if(i!=null){i.call()}};l[n]=function(){$(this).dialog("close");if(t!=null){t.call()}};$("<div>").html(a).dialog({title:e,closeOnEscape:false,resizable:false,close:function(){$(this).remove()},buttons:l});return false},waitDialog:null,showWaitDialog:function(e,a){dialog.hideWaitDialog();if(a==null){a=e;e=siteTitle}dialog.waitDialog=$("<div>").html(a).dialog({title:e,closeOnEscape:false,resizable:false,close:function(){$(this).remove()}})},hideWaitDialog:function(){if(dialog.waitDialog!=null){dialog.waitDialog.dialog("close");dialog.waitDialog=null}},genCaptchaId:function(e){var a="0123456789abcdef";var i="";if(e==undefined)e=13;for(var t=0;t<e;++t){i+=a[Math.floor(Math.random()*a.length)]}return i},showCommentsOptions:function(){var e=$('<div id="commentsOptionsPopup">').append($("#commentsOptions label"));e.children("label").click(function(){e.children("label").each(function(){if($(this).find("input").prop("checked")){$(this).removeClass("inactive")}else{$(this).addClass("inactive")}})});e.dialog({title:"Comments Options",width:300,closeOnEscape:true,resizable:false,close:function(){$("#commentsOptions").append(e.children("label"));e.remove()},buttons:{Save:function(){$("#commentsOptions").append(e.children("label"));e.remove()}}});dialog.commOptions=e},editProfileTab:function(e,a){$(".profile_popup_a_active").removeClass("profile_popup_a_active");$(a).addClass("profile_popup_a_active");$("#pop_opt").hide();$("#nsfw_options_container").hide();$("#profile_options_container").hide();$("#privacy_options_container").hide();$("#mobile_options_container").hide();$("#alerts_settings_container").hide();$("#video_play_options_settings_container").hide();$("#comment_options_settings_container").hide();$("#layout_settings_container").hide();$("#message_settings_container").hide();$("#avatar_upload_container").hide();$("#pop-last-ips").hide();$(".ui-dialog-buttonpane").hide();$(".ui-dialog-buttonpane>div>button").show();users.currentPrefsTab=e;switch(e){case"privacy":$("#privacy_options_container").show();$(".ui-dialog-buttonpane").show();break;case"profile":$("#profile_options_container").show();$(".ui-dialog-buttonpane").show();break;case"nsfw":$("#nsfw_options_container").show();$(".ui-dialog-buttonpane").show();break;case"alerts":$("#alerts_settings_container").show();$(".ui-dialog-buttonpane").show();break;case"commentoptions":$("#comment_options_settings_container").show();$(".ui-dialog-buttonpane").show();break;case"layout":$("#layout_settings_container").show();$(".ui-dialog-buttonpane").show();break;case"mobile_options":$("#mobile_options_container").show();$(".ui-dialog-buttonpane").show();break;case"videoplayoptions":$("#video_play_options_settings_container").show();$(".ui-dialog-buttonpane").show();break;case"message":$("#message_settings_container").show();$(".ui-dialog-buttonpane").show();break;case"ips":$("#pop-last-ips").show();$(".ui-dialog-buttonpane").show();$(".ui-dialog-buttonpane>div>button:first-child").hide();dialog.showLastIps();break;case"social":$("#pop-social-accounts").show();$(".ui-dialog-buttonpane").show();$(".ui-dialog-buttonpane>div>button:first-child").hide();break;case"account":$("#pop_opt").show();$(".ui-dialog-buttonpane").show();break;default:$(".ui-dialog-buttonpane").show()}},showLastIps:function(){var e=["ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bw","by","bz","ca","cg","cf","cd","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","fi","fj","fm","fo","fr","ga","gb","gd","ge","gg","gh","gi","gl","gm","gn","gp","gq","gr","gt","gu","gw","gy","hk","hn","hr","ht","hu","id","ie","il","im","in","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","md","me","mg","mh","mk","ml","mm","mn","mo","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","ng","ni","nl","no","np","nr","nz","om","pa","pe","pf","pg","ph","pk","pl","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","si","sk","sl","sm","sn","so","sr","st","sv","sy","sz","tc","td","tg","th","tj","tl","tm","tn","to","tr","tt","tv","tw","tz","ua","ug","us","uy","uz","va","vc","ve","vg","vi","vn","vu","ws","ye","za","zm","zw"];var a=$('<img src="/site/funnyjunk/images/blackBg_w8.gif">');a.css({position:"relative",left:"45%"});$("#pop-last-ips").append(a);var i=users.getLastLoginInfo();a.remove();if(i){$("table#last-ips").find("tbody").html("");for(var t=0;t<i.length;t++){var o;var n;var l=i[t]["city"]?i[t]["city"]:"";if(i[t]["region"]){l=l?l+", "+i[t]["region"]:i[t]["region"]}l=l?l:"<i>undefined</i>";if(i[t]["country_code"]){var s=336+16*e.indexOf(i[t]["country_code"].toLowerCase());o=$('<div class="last-ips-flag">').css("background-position","0 -"+s+"px")}else{o=$('<div class="last-ips_flag-undefined">')}var r=i[t]["ip_hash"]?i[t]["ip_hash"]:"";r=r?r.substr(0,10)+"..."+r.substr(-10):"";$("table#last-ips").append($("<tr>").append($('<td class="last-ips-date">').html(i[t]["date"]?i[t]["date"]:"")).append($('<td class="last-ips-location">').html(" "+l).prepend(o)).append($('<td class="last-ips-ip">').html(r)).append($('<td class="last-ips-logins">').html(i[t]["login_count"]?i[t]["login_count"]:"")))}}},showCountdowns:function(){var e="<div></div>";$(e).dialog({title:"Your Permissions",width:900,closeOnEscape:true,resizable:true,close:function(){},open:function(){$(this).load("/ajax/getCountdowns",function(){$(this).height("auto")})},buttons:{Close:function(){$(this).dialog("close")}}})},showVerifyEmailWarning:function(e){var a=$('<div id="verified_email_warning"><div style="padding-bottom:10px;">'+e+'</div><label for="not_show_again"><input type="checkbox" name="not_show_again" id="not_show_again" />Never show this again.</label></div>');a.dialog({resizable:false,title:"Warning",width:350,buttons:{Ok:function(){if($("#verified_email_warning").find('input[name="not_show_again"]:checked').length){$.ajax({url:"/ajax/neverShowVerifyEmailWarning/",success:function(e){var a=e.split("|");if(a[0]!="OK"){dialog.alert("Sorry, but your settings cannot be updated.")}}})}$(this).dialog("close")}}})},showRegistrationPopOver:function(){var e="<div>";e+='Please <a href="javascript: users.showLoginForm(window.location);" title="Login">login</a>';e+=' or <a href="javascript: users.showLoginForm(window.location);" title="Login">register</a>';e+=" to use all available features of "+siteTitle;e+="<br /><br />";e+='<label for="not_show_again"><input type="checkbox" name="not_show_again" id="not_show_again" />Never show this again.</label></div>';e=$(e);e.dialog({bgiframe:true,resizable:false,title:"Welcome to "+siteTitle+"",buttons:{Ok:function(){if($(this).find('input[name="not_show_again"]:checked').length){$.ajax({url:"/ajax/neverShowRegistrationPopOver/",success:function(e){var a=e.split("|");if(a[0]!="OK"){dialog.alert("Sorry, but your settings cannot be updated.")}}})}$(this).dialog("close")}}})}};
var users={lastLoginInfo:[],_returnVal:"",disableAlertSettings:false,checkSame:function(e){var t=$("#profileEditForm").find('input[name="'+$(e).attr("name")+'"]');t.prop("checked",$(e).prop("checked"));return false},makeLoggedInUserBar:function(){var e='<a href="/user/'+FJUserName.replace(/\+/g,"%20")+'" class="white no_decoration" title="My Profile">'+FJUserName.replace(/\+/g,"%20")+"</a>";$("a[href='/members/']").attr("href","/user/"+FJUserName.replace(/\+/g,"%20"));$("#newCommNameTop").val(FJUserName);$(".forUnlogged").addClass("hidden")},makeLoggedIn:function(){users.makeLoggedInUserBar()},makeLoggedOutUserBar:function(){$("#userbarLoginInf").html(ANON_LABEL+".");$(".forLogged").addClass("hidden");$(".forUnlogged").removeClass("hidden");$("#newCommNameTop").val(ANON_LABEL)},bindLoginClickEvent:function(){$("#userbar_login").bind("click",function(){users.showLoginForm(window.location);return false})},makeLoggedOut:function(){users.makeLoggedOutUserBar();if(typeof fjChat!=="undefined"&&fjChat.isConnect()){fjChat.disconnect()}},logout:function(e){$.ajax({type:"POST",data:{doLogoutThingy:true},datatype:"JSON",url:"/sso/logout",success:function(){t()},error:function(){t()}});function t(){if(typeof fjChat!=="undefined"&&fjChat.isConnect()){fjChat.disconnect()}users.makeLoggedOut();FJMsg.reset();FJFriends.reset();FJFav.reset();FJUserId=false;FJUserName=false;$.cookie("FJCBAC",null,{path:"/"});f.s("You've been logged out.");setTimeout(function(){document.location.reload()},1500)}},showLogoutForm:function(){$("<div>").load("/sso/logout",null,function(){if(FJ.isInUrl("member",0)){dialog.logoutalert("Message","You are not logged in",false)}else{dialog.alert("Message","You are not logged in")}})},showLoginForm:function(e,t){$("#a-top,#a-bottom,#k2399d,.mediumRectagleAd").empty();setTimeout(function(){this.showCombinedSignForm(e,t)}.bind(this),100)},passRecovery:function(){$("#passRecPopup").remove();var e=$("<form>").addClass("dialogBlackW8").attr({id:"passRecPopup",action:"/member/password",method:"post"}).submit(function(){sendForm($(this),"",undefined,users.passRecConfirm);return false}).load("/member/passRecovery",function(){$(this).removeClass("dialogBlackW8");$(this).find("input[type=submit]").remove();$(this).find("input").eq(0).focus();$(this).height("auto")});e.keydown(function(t){if(t.keyCode==13){e.trigger("submit")}});e.dialog({title:"Password Recovery",closeOnEscape:false,resizable:false,width:500,close:function(){Recaptcha.destroy()},buttons:{Submit:function(){$("#passRecPopup").trigger("submit");return false},Cancel:function(){Recaptcha.destroy();$(this).dialog("close")}}})},passRecConfirm:function(){$("#passRecPopup").remove();dialog.alert("Password recovery","If there is an e-mail address used for an account then password recovery instructions have been sent.")},matchPasswords:function(e,t,s){var a=$(e).val();if(a==""){return false}var i=a==$(t).val();var n=i?"matched":"do not match";$(s).css("color",i?"#0f0":"#f00").html(n);return i},profile_askForPassword:function(e){$("#askForPass_popup").remove();var t=$('<div id="askForPass_popup">').addClass("aCenter");t.html('<span class="red">For safety reasons, please enter your current password.</span><br />');t.append('<input type="password" id="old_pass_popup" name="pass" value="" class="txt mt3 aCenter" type="password" "required>');var s=function(){if(e=="deleteAccount"){$("#pass_to_delete").val($("#old_pass_popup").val());users.deleteAccountAction()}else if(e=="deleteContent"){$("#pass_to_delete").val($("#old_pass_popup").val());users.deleteContentAction()}else if(e=="deleteComment"){$("#pass_to_delete").val($("#old_pass_popup").val());users.deleteCommentAction()}else if(e=="disableAccount"){$("#pass_to_disable").val($("#old_pass_popup").val());users.disableAccountAction()}else if(e=="set_email"){$("#old_pass").val($("#old_pass_popup").val());users.saveNewEmail()}else{$("#old_pass").val($("#old_pass_popup").val());$("#profileEditForm").trigger("submit")}$(this).dialog("close")};t.keydown(function(e){if(e.keyCode==13){s()}});t.dialog({title:"Enter Password",closeOnEscape:false,resizable:false,width:250,open:function(){$("#old_pass_popup").focus()},buttons:{OK:s,Cancel:function(){$(this).dialog("close")}}})},currentPrefsTab:"privacy",editAccount:function(e){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){users.editAccount(e)});users.showLoginForm();return}$(".mobUserMenu").removeClass("open");$("#profileEditForm").remove();var t=null;var s=null;var a=null;var i=$("<form >").html('<div class="dialogBlackW8"></div>').attr({id:"profileEditForm",action:"/member/profile",method:"post"}).submit(function(){if(s!==""&&$(this).find("input[name=email]").val()===""&&!dialog.confirmed){dialog.confirm("Confirmation","If you remove your e-mail, password recovery and newsletter options won't work.<br /><br />Proceed?",users.profile_askForPassword,false)}else if($("#old_pass").val()===""&&!isSocialUser&&users.currentPrefsTab!="privacy"&&users.currentPrefsTab!="profile"&&users.currentPrefsTab!="nsfw"&&users.currentPrefsTab!="commentoptions"&&users.currentPrefsTab!="layout"&&users.currentPrefsTab!="alerts"&&users.currentPrefsTab!="mobile_options"&&users.currentPrefsTab!="videoplayoptions"){users.profile_askForPassword()}else{$(this).find('input[name="do"]').val(users.currentPrefsTab);var e=$(this).find("input[name=show_mature]:checked").val()!=t||$(this).find("input[name^=show_extended_sb]").prop("checked")!=a||$(this).find("input[name^=hide_viewed_content]").prop("checked")!=oldViewedContent||$(this).find("input[name^=show_level_bar]").prop("checked")!=oldLevelBar||$(this).find("input[name^=show_trending_bar]").prop("checked")!=oldTrendingBar||$(this).find("input[name^=com_show_anons]").prop("checked")!=oldComShowAnons;editProfile($(this),e)}return false}).load("/userbar/getprofile",function(){$(this).find("input[name=email]").attr("autocomplete","off");t=$(this).find("input[name=show_mature]:checked").val();s=$(this).find("input[name=email]").val();a=$(this).find("input[name^=show_extended_sb]").prop("checked");oldViewedContent=$(this).find("input[name^=hide_viewed_content]").prop("checked");oldLevelBar=$(this).find("input[name^=show_level_bar]").prop("checked");oldTrendingBar=$(this).find("input[name^=show_trending_bar]").prop("checked");oldComShowAnons=$(this).find("input[name^=com_show_anons]").prop("checked");if(typeof e==="function")e.call();$(this).removeClass("dialogBlackW8");setTimeout(function(){$("#memberMonth2, #memberDay2, #memberYear2").selectbox();$("#passwordRegisterMember2").pstrength()},100);i.find("input").keydown(function(e){if(e.keyCode==13){i.trigger("submit")}});if(users.disableAlertSettings==false){if($(i.find('input[name="email_alerts[]"]')).is(":checked")){i.find('input[name="alerts_offline_switch[]"]').attr("disabled",false);i.find('input[name="email_alerts_type"]').attr("disabled",false)}else{i.find('input[name="alerts_offline_switch[]"]').attr("disabled",true);i.find('input[name="email_alerts_type"]').attr("disabled",true)}if($(i.find('input[name="email_pm[]"]')).is(":checked")){i.find('input[name="email_pm_type"]').attr("disabled",false)}else{i.find('input[name="email_pm_type"]').attr("disabled",true)}i.find('input[name="email_alerts[]"]').click(function(e){if($(this).is(":checked")){i.find('input[name="alerts_offline_switch[]"]').attr("disabled",false);i.find('input[name="email_alerts_type"]').attr("disabled",false)}else{i.find('input[name="alerts_offline_switch[]"]').attr("disabled",true);i.find('input[name="email_alerts_type"]').attr("disabled",true)}});i.find('input[name="email_pm[]"]').click(function(e){if($(this).is(":checked")){i.find('input[name="email_pm_type"]').attr("disabled",false)}else{i.find('input[name="email_pm_type"]').attr("disabled",true)}})}$(this).height("auto")});i.dialog({title:"Edit Account Settings",closeOnEscape:true,resizable:false,width:600,minHeight:450,close:function(){users.currentPrefsTab="privacy"},buttons:{Save:function(){$("#profileEditForm").trigger("submit");return false},Cancel:function(){$(this).dialog("close")}}}).parent().attr("id","setboxthing");$("div.ui-draggable").css("overflow","visible")},disableEmailAlertSettings:function(){$('#alerts_settings_container  input[name="email_pm[]"]').attr("disabled",true);$('#alerts_settings_container  input[name="email_pm_type"]').attr("disabled",true);$('#alerts_settings_container  input[name="email_alerts[]"]').attr("disabled",true);$('#alerts_settings_container  input[name="email_alerts_type"]').attr("disabled",true);$('#alerts_settings_container  input[name="alerts_offline_switch[]"]').attr("disabled",true);users.disableAlertSettings=true},signUpUserExists:false,signUp:function(){this.showCombinedSignForm()},registerEmailField:function(e){e=$(e);var t=e.parent().find("#newsletter");if(e.val().length<4){t.prop("checked",false).attr("disabled","disabled");e.parent().find("#emailInfo").show();t.parent().addClass("greyLight")}else{t.prop("checked",true).removeAttr("disabled");e.parent().find("#emailInfo").hide();t.parent().removeClass("greyLight")}},hideLoginForm:function(){$("#login_form_hidden").dialog("close");$("#login_form_hidden").remove()},hideCaptchaForm:function(){$("#userForm").dialog("close");$("#userForm").remove()},hideRegisterForm:function(){$("#userSignupForm").dialog("close");$("#userSignupForm").remove()},validatePwd:function(e){e=$(e);var t=e.val();var s=e.parents("form").find("#signupForm_comm1");if(t.length<8){s.html("Your password must be at least 8 characters long");return false}re=/[0-9]/;if(!re.test(t)){s.html("Your password must have a number in it.");return false}re=/[a-zA-Z]/;if(!re.test(t)){s.html("Password must contain at least one alphabet.");return false}s.html("");return true},validateConfirmPwd:function(e){e=$(e);var t=e.val();var s=e.parents("form").find('input[name="password"]').val();var a=e.parents("form").find("#signupForm_comm1");if(t!=s){a.html("Please type your password twice");return false}a.html("");return true},checkUsername:function(e){e=$(e);var t=e.val();var s=e.parents("form").find("#signupForm_comm1");if(t.length<3||t.length>18){s.html("Your username must be between 3 and 18 characters");users.signUpUserExists=true;return users.makeRegisterLoginIcon(e,s,false)}else if(t.match(/[^A-Za-z]/)){s.html("Your username can contain only letters");users.signUpUserExists=true;return users.makeRegisterLoginIcon(e,s,false)}else{$.ajax({url:"/ajax/checkLogin/"+t,success:function(t){if(t=="OK"){users.signUpUserExists=false;return users.makeRegisterLoginIcon(e,s,true)}else{s.html(t);users.signUpUserExists=true;return users.makeRegisterLoginIcon(e,s,false)}}})}return false},makeRegisterLoginIcon:function(e,t,s){var a=s?"tick.gif":"error.gif";var i=$("<img>").attr({src:SCRIPT_URL+"site/funnyjunk/images/"+a,id:"loginIcon",alt:""});if(s){t.html("")}$("#loginIcon").remove();e.after(i);return false},olduser_askCaptcha:function(e,t,s){var a='<div id="user_captcha" class="block" align="center">&nbsp;</div>';a+='<input type="hidden" name="username" value="'+e+'" />';a+='<input type="hidden" name="password" value="'+t+'" />';a+='<input type="hidden" name="remember" value="'+s+'" />';a+='<div class="bold pt20 pt10 left" style="width: 500px;">You need to type in this captcha just this one time before you login.<br /><br />Why? Because we found out thousands of fake accounts were made before we beefed up our captcha security, so we must weed the fake ones out from the real ones.<br /><br />You only have to do this one time on this account.<br /><br /><span style="color:red;">If the captcha does not show for you, try logging in from a different browser such as firefox or IE.</span><br /></div>';a+='<div id="userPopError" class="left"></div>';$("#userForm").remove();var i=$("<form>").attr({id:"userForm",name:"userForm",method:"post",action:"#"}).html(a).submit(function(){loginOlduser();return false});if(BrowserDetect.browser=="IE"){i.keydown(function(e){if(e.keyCode==13){i.trigger("submit")}})}i.dialog({title:"Enter Recaptcha",width:580,closeOnEscape:true,resizable:false,buttons:{Close:function(){$(this).dialog("close")},Submit:function(){loginOlduser()}}});Recaptcha.create(captcha_public_key,"user_captcha",{theme:"blackglass",callback:Recaptcha.focus_response_field})},getLastLoginInfo:function(){if(users.lastLoginInfo.length==0){$.ajax({url:"/ajax/getlastlogininfo",dataType:"json",async:false,success:function(e){if(typeof e.data=="object"){users.lastLoginInfo=e.data}users._returnVal=e.data},error:function(){users._returnVal="Can not get list of IPs: request failed"}})}return users._returnVal},showUserProfileCommentRecursive:function(e){var t=e;if(e.length>0){e.each(function(){var e=$(this).parent();var s=users.getUserProfileCommentId($(this));if(!isNaN(s)){var a=$(this).find(".userComExpCol");if(a.length>0&&a.html()==="[+]"){e.find(".up"+s).each(function(){var e=$(this);t=$.grep(t,function(t){return t!=e[0]})})}}})}itemLength=t.length;$.each(t,function(){if(itemLength<=5){$(this).removeClass("peaceOut")}else{$(this).removeClass("peaceOut")}})},hideUserProfileCommentRecursive:function(e){if(e.length>0){e.each(function(){$(this).slideUp();var e=users.getUserProfileCommentId($(this));if(!isNaN(e)){users.hideUserProfileCommentRecursive($(this).find(".up"+e))}})}},getUserProfileCommentId:function(e){var t=null;if(e.attr("id")!=undefined){t=parseInt(e.attr("id").replace("ucc",""),10)}if(t==null||isNaN(t)){var s=e.parent();if(s.attr("id")!=undefined){t=parseInt(s.attr("id").replace("ucc",""),10)}if(t==null||isNaN(t)){s=s.parent();if(s.attr("id")!=undefined){t=parseInt(s.attr("id").replace("cc",""),10)}if(t==null||isNaN(t)){s=s.parent();if(s.attr("id")!=undefined){t=parseInt(s.attr("id").replace("ucc",""),10)}}}}return t},resendVerificationEmail:function(){$("#sendLoading").show();$.ajax({type:"post",url:"/ajax/resendVerificationEmail",success:function(e){data=e.split("|");if(data[0]=="OK"){var t="Verification email has been sent! <br />";t+="Action required: Please check your email and follow the instruction inside to validate the email address. "+"Please remember to check the spam box as well. "+"If you don't receive the verification email within 24 hours, "+"please report here: <a href='http://www.funnyjunk.com/reportbugs/'>http://www.funnyjunk.com/reportbugs/</a>";dialog.alert("Message",t,false)}else{dialog.alert("Message","Couldn't sent verification email. Please try again.",false)}$("#sendLoading").hide()},error:function(){}})},changeEmail:function(){var e='<div id="setNewEmailDialog"><input style="width:95%" name="new_email" id="new_email" class="txt mt10" maxlength="100" value="'+$("#settings_email").val()+'" type="email" required><br /></div>';$("#setNewEmailDialog").remove();$(e).dialog({title:"New Email",closeOnEscape:false,resizable:false,width:250,buttons:{Cancel:function(){$(this).dialog("close")},Save:function(){if($("#old_pass").val()==""){users.profile_askForPassword("set_email")}else{users.saveNewEmail();return false}}}});return false},saveNewEmail:function(){$.ajax({type:"post",url:"/userbar/setprofiledata",data:{new_email:$("#new_email").val(),password:$("#old_pass").val(),do:"set_email"},dataType:"json",success:function(e){if(e.type=="success"){f.s(e.msg);$("#settings_email").val($("#new_email").val());$("#setNewEmailDialog").dialog("close")}else{f.e(e.msg);if(e.msg.match(/password/)){$("#old_pass").val("")}}},error:function(){f.e("Request failed")}})},showCombinedSignForm:function(e,t){window.noRegisterCaptcha=false;$.ajax({url:"/ajax/checKIfNotRegisteredBefore",type:"POST",dataType:"json",success:function(e){if(e.success){window.noRegisterCaptcha=true}}});var s='<div id="combinedSignForm"></div>';setCookie2("cookset","1");var a=getCookie("cookset");if(loggedIn())$("<div>").load("/sso/logout");var i=$("#combinedSignBox").html();i=$(i);var n=$('<div id="loginForm_comm"></div>');i.find('form[name="loginfrm"]').append(n);i.find('form[name="loginfrm"]').on("submit",function(){loginn(this,t);return false});var r=i.find("form#userSignupForm");r.on("submit",function(){if(users.signUpUserExists){dialog.alert("Error","Please choose another username.");return false}var e=i.find("#signupForm_comm1");if($.trim(e.html())!=""){return false}loginn($(this));return false});var o=Math.floor(Math.random()*10+1);r.find("#memberMonth, #memberDay, #memberYear").selectbox();r.find("#passwordRegisterMember").attr("id","passwordRegisterMember"+o);r.find("#passwordRegisterMember_bar,#passwordRegisterMember_text").remove();r.find("#passwordRegisterMember"+o).pstrength();r.find("#passwordRegisterMember"+o+"_bar,#passwordRegisterMember"+o+"_text").hide();r.find('input[name="password"]').on("change keydown paste input",function(){r.find("#passwordRegisterMember"+o+"_bar,#passwordRegisterMember"+o+"_text").show()});r.find('input[name="password"],input[name="username"]').on("change keydown paste input",function(){$("#login_form_hidden").css({height:"auto"});if(r.find('input[name="password"]').val()!=""&&r.find('input[name="username"]').val()!=""&&r.find("#captchaCont").hasClass("peaceOut")){if(!window.noRegisterCaptcha){r.find("#captchaCont").toggleClass("peaceOut").find("#only_reg_captcha").attr("id","only_reg_captcha"+o);Recaptcha.destroy();Recaptcha.create(captcha_public_key,"only_reg_captcha"+o,{theme:"blackglass",callback:""})}}});var l=$(i).find("form");r.on("keydown","#cap_code",function(e){if(e.keyCode==13){r.trigger("submit")}});var d=BrowserDetect.browser=="IE"&&Number(BrowserDetect.version)<8?320:310;d*=2;var u=$("<div>").attr("id","login_form_hidden").css({height:"auto"});if(e!=undefined&&e){$(i).find(".loginInfo").removeClass("hidden").html(e)}u.append(i).dialog({title:'<span id="combinedLeftTitle">Member Login</span><span id="combinedRightTitle">CREATE A NEW ACCOUNT</span>',titleHtml:true,closeOnEscape:true,resizable:false,width:d,height:"auto",buttons:{}}).attr("id","lForm").find("#pickUserName").on("focus",function(){if(isMobile){$("#lForm").find("#combinedLeft").hide().parent().find(".ui-dialog-titlebar").hide();$("#combinedLeftTitle").text("Create a new account")}});loadcookieData()}};onFJPageLoadedOrSelectorExists("#userbar_login",users.bindLoginClickEvent);
window.clickToReply=false;var thumbsLocked=false;var comments={countSkip:0,count:0,popped:false,oldAltText:false,lockedThumbs:{},oldLoadPage:false,typing:false,currentPage:1,displayRating:-999,zm:true,perPage:40,sort:"parent_id",sortOrder:"desc",justAddedComment:false,toInsert:null,dsds:"",showAllReplies:1,newCommsAlert:false,wsNewThreads:0,wsNewThreadsOld:0,wsNewReplies:0,wsNewRepliesOld:0,newUploads:0,videoIndex:0,lastInsertId:false,liveUpdates:false,v2:[],v2S:[],v1:[],v1S:[],resetCommArray:true,flaggedCommentIds:[],commentsHidden:false,commentsAdded:"",ajaxCom:false,amountOfFails:0,curWinTop:0,curWinHeight:0,preCommSize:0,curCommSize:0,countChecker:function(){return false;if(typeof contentDate==="undefined"||nze.connected||comments.commentsHidden)return false;var e=Math.floor(Date.now()/1e3);if(e-contentDate<=86400||isBoard){$.ajax({type:"post",url:"/ajax/checkForNewComments",data:{contentId:contentId},dataType:"json",success:function(e){var t="commentCount"+contentId;var o="topCommentCount"+contentId;var n=parseInt(e.allComments);var s=parseInt(e.topComments);if(typeof window[t]!=="undefined"&&typeof window[o]!=="undefined"&&(n>window[t]||s>window[o])){newCommCountDiff=n-window[t]+newCommCountDiff;topCommCountDiff=s-window[o]+topCommCountDiff;comments.alertNewComments(null,null,newCommCountDiff,topCommCountDiff);window[t]=n;window[o]=s}}})}},alertNewCommentsHtml:function(e){var t=$("#ajax_comm");if(comments.newCommsAlert){$("#newComms").html(e)}else{var o='<div id="newComms">'+e+"</div>";t.before(o)}comments.newCommsAlert=true},liveUpdateThumbs:function(e,t,o,n,s){if(!t&&!n){var i=$("#wideThumbs #whoThumbed");i.text(s).attr("class","fta2");clearTimeout(window.fta3);window.fta3=setTimeout(function(){i.attr("class","peaceOut")},7e3);var m=$("#wideThumbs .pointsBig");var a=parseInt(m.text())+parseInt(o);if(a<0){m.text(a).attr("class","pointsBig thRed")}else{m.text("+"+a).attr("class","pointsBig thGreen")}}else if(!t&&n){}else if(!e){var r=commentIdMemory[t]+commentIdDOM[t];if(r>=0){$("#cc"+t+" .r .tt").eq(0).text((r>0?"+":"")+r).attr("class","tt greenLight")}else{$("#cc"+t+" .r .tt").eq(0).text(r).attr("class","tt redLight")}var l=$("#cc"+t+" .r .ft");l.text(s).attr("class","ft fta");clearTimeout(window.fta3);window.fta3=setTimeout(function(){l.attr("class","ft peaceOut")},7e3)}},alertNewUploads:function(){comments.newUploads++;$("#newUploadAlert").show().html(comments.newUploads+" new!<span>Click to refresh.</span>")},alertNewComments:function(e,t,o,n,s,i,m,a){if($("#showAllComms").length||!$("#ajax_comm").length)return false;var r="";if(s){comments.wsNewReplies++}else if(i){comments.wsNewThreads++}else{var l=o-n;if(n){comments.wsNewThreads=n}if(l){comments.wsNewReplies=l}}var c={sdds:function(){console.log("sddss")}};if(e&&(s||i)){$("#newT").css({visibility:"visible",display:"inline-block"}).html('<span class="newT">'+""+e+'</span><span class="newT">'+(t?" -"+t:"zz")+"</span>").off("click").on("click",function(){if($("#cc"+a).length){comments.scrollTo($("#cc"+a))}else{window.location.href=cUrl+m+"#"+m}return false})}var d=comments.wsNewThreadsOld===0||comments.wsNewThreadsOld!==comments.wsNewThreads?' class="pomf"':false;var f=comments.wsNewRepliesOld===0||comments.wsNewRepliesOld!==comments.wsNewReplies?' class="pomf"':false;if(comments.wsNewThreads){if(d){$("#newThreads").attr("style","").show().html("<strong>"+comments.wsNewThreads+"</strong> new threads.").attr("class","")}else{$("#newThreads").attr("style","").show().html("<strong>"+comments.wsNewThreads+"</strong> new threads.")}}if(comments.wsNewReplies){if(f){$("#newReplies").attr("style","").show().html("<strong>"+comments.wsNewReplies+"</strong> new replies.")}else{$("#newReplies").attr("style","").show().html("<strong>"+comments.wsNewReplies+"</strong> new replies.")}}if(t){$("#uTyping").attr("style","display: inline-block").html(""+t+" is typing...");clearInterval(window.isTypingTimer);window.isTypingTimer=setTimeout(function(){$("#uTyping").hide()},5e3)}comments.wsNewThreadsOld=comments.wsNewThreads;comments.wsNewRepliesOld=comments.wsNewReplies;comments.newCommsAlert=true},hideImage:function(){$("#commentReplyForm").find('input[name="ihash"], input[name="screen_name"]').remove();$("#commentReplyForm").find(".image_preview").hide()},rollButton:function(e){e=nohtml(e);if($("#showAllComms").length<=0){if(!$("#commentReplyForm").length){comments.addComment(comments.rollButtonInsert(e))}else{this.rollButtonInsert(e)}}else{window.rollCallback=function(){comments.addComment(comments.rollButtonInsert(e))};$("#showAllComms").trigger("click")}},rollButtonInsert:function(e){setTimeout(function(){var t=$("#commentReplyForm").find("textarea").val();var o=t.length>0?t+"\n"+e:e;$("#commentReplyForm").find("textarea").val(o)},100)},commentScrollTo:function(){if(comments.justAddedComment){if($(comments.justAddedComment).length){$(comments.justAddedComment).removeClass("peaceOut");comments.scrollTo(comments.justAddedComment)}comments.justAddedComment=false}},onSpoilerImgClick:function(e){var t=$(e).closest('div[id^="image_div"]');var o=t.attr("id");var n=o.replace("image_div","");$.ajax({type:"post",url:"/ajax/getCommentMedia",data:{id:n},dataType:"html",success:function(e){t.html(e);t.find("a[rel^='lightbox']").lightBox();comments.initImagesOnMouseHover(t)}});return false},onVideoDrag:function(e,t){var o=$(e).find("source").eq(0).attr("src");var n=$(e).find("source").eq(0).attr("type");t.dataTransfer.setData("text/html",'<source type="'+n+'" src="'+o+'">')},showVideo:function(e){var t=$(e).attr("href");var o="";var n=$(e).attr("data-cachedvideosrc");var o=$(e).attr("data-noncachedsrc");if(n){t=n}var s=t.length;var i="webm";if(t.substr(-4)==".mp4"){i="mp4"}var m="";var a="";if(typeof IS_FJDATA_PAGE!="undefined"&&IS_FJDATA_PAGE){m="right_pos";a="hidden"}var r=$(e).attr("rel");var l=false;if(r){relData=$.parseJSON(r);if(typeof relData.type!="undefined"&&relData.type==20){l=true}}var c=$(e).attr("data-poster");$(".cm-video-close").click();var d=videoVolumeAtLowest===true?' onloadstart="this.volume=0" ':' onloadstart="this.volume=.3" ';var f='<div class="cm-video-cont-inner">'+'<span style="display:inline-block;" id="cm-video-'+this.videoIndex+'">'+'<video autoplay id="cmv-video-'+this.videoIndex+'" width="320"  '+(c?' poster="'+c+'"':"")+(l?' muted="" loop=""':' controls="controls"')+(o?' data-noncachedsrc="'+o+'"':"")+d+">"+'<source src="'+t+'" type="video/'+i+'" />'+"Your browser does not support the video tag."+"</video></span>"+'<div class="video-controls"><a href="#" onclick="return comments.closeVideo(this);" class="cm-video-close '+m+'" title="Close">X</a><br />'+"</div></div>";$(e).hide().after(f);if(o){$(e).next("div").find("video:not(.boxed2)").addClass("boxed2").mousedown(inner_cdn_switch_video)}this.initImagesOnMouseHover($(e).next("div"));var u=$("#cm-video-"+this.videoIndex);function p(e){if(e.get(0).paused)e.trigger("play")}setTimeout(p,100,u.find("video"));setTimeout(function(){u.parent().parent().on("click",function(){if(window.playLocked)return false;var e=$(this).find("video");if(e.get(0).paused===false){e.get(0).pause()}else{e.get(0).play()}})},200);this.videoIndex++;return false},closeVideo:function(e){$(e).closest("div.cm-video-cont-inner").fadeOut(300,function(){$(this).closest("div.cm-video-cont-inner").prev("a").fadeIn(300,function(){$(this).closest("div.cm-video-cont-inner").remove()}.bind(this))}.bind(e));return false},expandVideo:function(e){if($(e).hasClass("cm-video-collapse")){$(e).closest("div").find("video,span").animate({width:320},300,function(){$(e).removeClass("cm-video-collapse")});$(e).attr("title","Expand")}else{$(e).closest("div").find("video, span").animate({width:500},300,function(){$(e).addClass("cm-video-collapse")});$(e).attr("title","Collapse")}return false},downloadVideo:function(e){var t=$(e).attr("href");if(BrowserDetect.browser=="Chrome"||BrowserDetect.browser=="Safari"){var o=document.createElement("a");o.href=t;if(o.download!==undefined){var n=t.substring(t.lastIndexOf("/")+1,t.length);o.download=n}if(document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent("click",true,true);o.dispatchEvent(s);return false}}var i="?download";window.open(t+i);return false},setDisplayRating:function(e){if(e==comments.displayRating)return;comments.currentPage=1;comments.loadSettings();comments.displayRating=e;comments.loadCommentsList()},setSort:function(e){$("#comSort").val(e);comments.currentPage=1;comments.loadSettings();comments.sort=e;comments.loadCommentsList()},updateComSortTab:function(e){if($("#showCommentsOptions:visible").length){$(e).closest("#showCommentsOptions").find(".showCommentsButton").removeClass("selected")}else{$(e).closest("ul").find("a").removeClass("selected")}if($(e).length>0){$(e).addClass("selected")}},setPerPage:function(e){if(e==comments.perPage)return;comments.loadSettings();comments.currentPage=1;comments.perPage=e;comments.loadCommentsList()},setSortOrder:function(e){if(e==comments.sortOrder)return;comments.loadSettings();comments.sortOrder=e;comments.loadCommentsList()},setZm:function(){comments.currentPage=1;comments.loadSettings();comments.loadCommentsList()},showUnreviewedOC:function(){var e=$("#show_unreviewed").prop("checked")?1:0;$.cookie("OCShowUnreviewed",e,{path:"/",expires:365});comments.currentPage=1;comments.loadSettings();comments.loadCommentsList()},isLoadPageRequest:false,loadPage:function(e,t,o){if(typeof o==="undefined"||o===null)o=false;if(e==comments.currentPage&&t!==true){return false}if(window.refreshItemsEnabled){setTimeout(function(){items.getActiveItems(true)},20)}if(!t){this.isLoadPageRequest=true}comments.loadSettings();comments.currentPage=e;if(!o&&(comments.oldLoadPage==e||!comments.oldLoadPage&&e==1)){comments.refreshComments()}else{comments.loadCommentsList()}comments.oldLoadPage=e;return false},reloadPageAfterAddedTopComment:function(){comments.loadSettings();if(!loggedIn()&&currentCommentId===""&&(comments.sortOrder!="desc"||comments.sort!="parent_id")){$("#comNewest").trigger("click");comments.sort="parent_id";$("#sortOrder_input_desc").trigger("select_item");comments.sortOrder="desc"}comments.currentPage=1;comments.refreshComments();return false},reset:function(){comments.currentPage=1;comments.loadCommentsList()},scrollTo:function(e){if($(e).length>0){$("html, body").animate({scrollTop:$(e).offset().top-$("#topUserbar").height()-$(window).height()*.2},500)}},hideByIp:function(e){requestUrl="/comment/hideComments/"+e+"/comments-hide-ip/";comments.changeVisibleComments(requestUrl)},hideByMember:function(e){requestUrl="/comment/hideComments/"+e+"/comments-hide-member/";comments.changeVisibleComments(requestUrl)},showByIp:function(e){requestUrl="/comment/showComments/"+e+"/comments-hide-ip/";comments.changeVisibleComments(requestUrl)},showByMember:function(e){requestUrl="/comment/showComments/"+e+"/comments-hide-member/";comments.changeVisibleComments(requestUrl)},refreshBoardLevelBar:function(e){if(typeof e==="undefined")e=$("#powerStuff2");var t=$("#powerStuff");if(t.length){t.html(e.html());e.remove()}if(typeof powerClickHandler!=="undefined")powerClickHandler()},isLoadingListActive:false,isLoadingListReentranced:false,refreshComments:function(url,callback){if(!IN_PRODUCTION)console.log("refresh comments()");newRepliesCheck();if(!newTFixed){comments.wsNewThreads=0;comments.wsNewReplies=0}if(window.hoverCommentImage===true){$(".onHoverImage").remove();window.hoverCommentImage=false}if(comments.isLoadingListActive){return false}if(window.refreshItemsEnabled){setTimeout(function(){items.getActiveItems(true)},20)}clearTimeout(window.isLoadListActiveTimeoutCheck);window.isLoadListActiveTimeoutCheck=setTimeout(function(){if(comments.isLoadingListActive){comments.isLoadingListActive=false;return false}},3e3);comments.isLoadingListActive=true;$("#refreshCom").html('Refresh<div id="commz"></div>').delay(1e3).queue(function(e){$("#refreshCom").html("Refresh");e()});if(typeof url==="undefined"||!url){url="/comment/anonymous/"+pageType+"/"+contentId+"/"+comments.displayRating+"/"+comments.zm+"/"+comments.sort+"/"+comments.perPage+"/"+comments.currentPage+"/"+comments.sortOrder+"/"+currentCommentId}if(comments.resetCommArray){comments.v2=[];comments.v2S=[];if(!IN_PRODUCTION)console.log("getting new comm array");comments.ajaxCom=$("#ajax_comm");var match=[];comments.ajaxCom.find(".com").each(function(){if($(this).hasClass("st9")){match[2]="st9"}else{match[2]="com"}if($(this).hasClass("z1")){match[3]="z1"}else{match[3]=""}if($(this).hasClass("f9")){match[4]="f9"}else{match[4]=""}match[1]=$(this).attr("id");comments.v2.push(match[1]);comments.v2S.push(match[1]+match[2]+match[3]+match[4])});comments.resetCommArray=false}dataObj={v2S:comments.v2S,refreshCom:1};$.ajax({type:"post",url:url,data:dataObj,success:function(response){comments.curWinTop=$(window).scrollTop();comments.curWinHeight=$(window).height();comments.preCommSize=$("#ajax_comm").height();var updateCommFormPos=false;if($("#commentReplyForm").length>0){var commBoxTop=$("#commentReplyForm").offset().top-$(window).scrollTop();updateCommFormPos=true}var responseHtml=$("<div></div>").append(response);comments.ajaxCom="";comments.commentsAdded="";if(response==="false"){comments.isLoadingListActive=false;if(!IN_PRODUCTION)console.log("no comments. return false");return false}if(typeof callback!=="undefined"){if(response=="Error"){dialog.alert("Can't delete this comment.")}callback.call()}else{comments.v1=[];comments.v1S=[];var responseCommArr=responseHtml.find("#v1");if(responseCommArr.length>0){comments.v1=JSON.parse(responseCommArr.html());comments.v1S=JSON.parse(responseHtml.find("#v2").html())}var aDiff=comments.v1S.diff(comments.v2S);var aDiffAdd=comments.v1.diff(comments.v2);var aDiff3=comments.v2S.diff(comments.v1S);var aDiffDel=comments.v2.diff(comments.v1);if(aDiff.length>0||aDiff3.length>0){var reg=/\/\/commDateStart([\S\s]*)\/\/commDateEnd/gi;match=reg.exec(response);if(match!==null&&typeof match[1]!=="undefined"){var newCommJs=match[1];jQuery.globalEval(newCommJs)}if(!comments.ajaxCom)comments.ajaxCom=$("#ajax_comm");var currComm1;var currCommID;var curPos;for(i=0;i<comments.v2.length;i++){currComm1=comments.v2S[i];currCommID=comments.v2[i];curPos=comments.v1S.indexOf(currComm1);if(curPos<0){var childz=parseInt(comments.ajaxCom.find("#"+currCommID).attr("data-child_count"));if(typeof childz!=="undefined"){for(z=0;z<childz;z++){var badComm=comments.ajaxCom.find("#"+currCommID).next();responseHtml.prepend(badComm);var dellComID=comments.v2[i+1].substr(2,comments.v2[i+1].length);if(typeof commA[dellComID]!=="undefined")delete commA[dellComID];if(typeof commR[dellComID]!=="undefined")delete commR[dellComID];if(!IN_PRODUCTION)console.log("delete child comm");comments.v2.splice(i+1,1);comments.v2S.splice(i+1,1)}}if(responseHtml.find("#"+currCommID).length<1){var badComm=comments.ajaxCom.find("#"+currCommID);responseHtml.prepend(badComm)}else{comments.ajaxCom.find("#"+currCommID).remove()}if(typeof currCommID!=="undefined"){var dellComID=currCommID.substr(2,currCommID.length);if(typeof commA[dellComID]!=="undefined")delete commA[dellComID];if(typeof commR[dellComID]!=="undefined")delete commR[dellComID];if(!IN_PRODUCTION)console.log("delete comm")}comments.v2.splice(i,1);comments.v2S.splice(i,1)}}for(i=0;i<comments.v1.length;i++){currComm1=comments.v1S[i];currCommID=comments.v1[i];curPos=comments.v2S.indexOf(currComm1);if(curPos!==i){if(curPos>0){if(responseHtml.find("#"+currCommID).length<1){var badComm=comments.ajaxCom.find("#"+currCommID);responseHtml.prepend(badComm)}else{comments.ajaxCom.find("#"+currCommID).remove()}responseHtml.prepend(badComm);if(typeof currCommID!=="undefined"){var dellComID=currCommID.substr(2,currCommID.length);if(typeof commA[dellComID]!=="undefined")delete commA[dellComID];if(typeof commR[dellComID]!=="undefined")delete commR[dellComID];if(!IN_PRODUCTION)console.log("delete comm2")}comments.v2.splice(curPos,1);comments.v2S.splice(curPos,1)}if(i===0){var toInsert=responseHtml.find("#"+currCommID);if(toInsert.length<1){var toInsert=comments.ajaxCom.find("#"+currCommID);toInsert.removeClass("toRemove")}comments.ajaxCom.prepend(toInsert);comments.commentsAdded+="#"+currCommID+",";if(!IN_PRODUCTION)console.log("add comm #"+i);comments.v2S.splice(i,0,currComm1);comments.v2.splice(i,0,currCommID);comments.findJs=responseHtml.find(".rJs").html();if(comments.findJs!==undefined){comments.jsNum=currCommID.substr(2,currCommID.length);comments.zRe=new RegExp("commA\\["+comments.jsNum+"\\] ?= ?'(.*?)';");comments.matchJs=comments.findJs.match(comments.zRe);comments.matchJs=comments.matchJs!==null&&typeof comments.matchJs[1]!=="undefined"?comments.matchJs[1]:"";eval("commA["+comments.jsNum+"] = '"+comments.matchJs+"'");comments.zRe=new RegExp("commR\\["+comments.jsNum+"\\] ?= ?'(.*?)';");comments.matchJs=comments.findJs.match(comments.zRe);comments.matchJs=comments.matchJs!==null&&typeof comments.matchJs[1]!=="undefined"?comments.matchJs[1]:"";eval("commR["+comments.jsNum+"] = '"+comments.matchJs+"'")}}else{var toInsert=responseHtml.find("#"+currCommID);if(toInsert.length<1){var toInsert=comments.ajaxCom.find("#"+currCommID);toInsert.removeClass("toRemove")}comments.ajaxCom.find("#"+comments.v1[i-1]).after(toInsert);comments.findJs=responseHtml.find(".rJs").html();if(comments.findJs!==undefined){comments.jsNum=currCommID.substr(2,currCommID.length);comments.zRe=new RegExp("commA\\["+comments.jsNum+"\\] ?= ?'(.*?)';");comments.matchJs=comments.findJs.match(comments.zRe);comments.matchJs=comments.matchJs!==null&&typeof comments.matchJs[1]!=="undefined"?comments.matchJs[1]:"";eval("commA["+comments.jsNum+"] = '"+comments.matchJs+"'");comments.zRe=new RegExp("commR\\["+comments.jsNum+"\\] ?= ?'(.*?)';");comments.matchJs=comments.findJs.match(comments.zRe);comments.matchJs=comments.matchJs!==null&&typeof comments.matchJs[1]!=="undefined"?comments.matchJs[1]:"";eval("commR["+comments.jsNum+"] = '"+comments.matchJs+"'")}comments.commentsAdded+="#"+currCommID+",";if(!IN_PRODUCTION)console.log("add comm #"+i);comments.v2S.splice(i,0,currComm1);comments.v2.splice(i,0,currCommID)}}}}if(aDiff.length>=10){var paginator1=document.querySelectorAll("#main .comPaginator")[0];var paginator2=document.querySelectorAll("#main .comPaginator")[1];if(typeof paginator1!=="undefined"&&typeof paginator2!=="undefined"){paginator1.innerHTML=paginator2.innerHTML;paginator2.parentNode.removeChild(paginator2);paginator1=document.querySelectorAll("#main .comPaginator")[0];paginator2=document.querySelectorAll("#main .comPaginator")[1];if(typeof paginator1!=="undefined"&&typeof paginator2!=="undefined"){paginator2.innerHTML=paginator1.innerHTML}}}else if(aDiff.length>0){$("#main .comPaginator").eq(0).html(responseHtml.find(".comPaginator").html());$("#main .comPaginator").eq(1).html(responseHtml.find(".comPaginator").html())}if(aDiff.length>=10){var commCountVal=isNaN($("#commentsCount").val())?0:parseInt($("#commentsCount").val());var topCommCount=isNaN($("#topCommentsCount").val())?0:parseInt($("#topCommentsCount").val())}else if(aDiff.length>0){var commCountVal=isNaN(responseHtml.find("#commentsCount").val())?0:parseInt(responseHtml.find("#commentsCount").val());var topCommCount=isNaN(responseHtml.find("#topCommentsCount").val())?0:parseInt(responseHtml.find("#topCommentsCount").val())}if(aDiff.length>0){comments.ajaxCom.find(".toRemove").remove();$(".commCounter").text("("+commCountVal+")");if(typeof contentId!=="undefined"){newCommCountDiff=0;topCommCountDiff=0;var strCon="commentCount"+contentId;var strCon2="topCommentCount"+contentId;window[strCon]=commCountVal;window[strCon2]=topCommCount}}if(comments.newCommsAlert&&!newTFixed){$("#newReplies, #newThreads").css("visibility","hidden")}if(aDiff.length>=10){var countCom=$("#ajax_comm #commentsCount").html();$("#activeItemsList").html($("#ajax_comm #hiddenActiveItemsList").html())}else if(aDiff.length>0){var countCom=responseHtml.find("#commentsCount").html();$("#activeItemsList").html(responseHtml.find("#hiddenActiveItemsList").html())}else{}countCom=countCom!==null?countCom:0;$("#countComm").html(countCom);if(aDiff.length===0){comments.isLoadingListActive=false;if(!IN_PRODUCTION)console.log("no comment diff but got comm response from server");nze.refreshQueue=nze.refreshQueue>0?nze.refreshQueue-1:nze.refreshQueue;if(nze.refreshQueue>0){if(!IN_PRODUCTION)console.log("refreshQueue is > 1. attempting second refresh to clear it.");comments.refreshComments()}return false}if(aDiff.length>0){if(!comments.justAddedComment){var tHeight=0;for(i=0;i<aDiffAdd.length;i++){var entryT=$("#"+aDiffAdd[i]).offset().top;if(entryT<comments.curWinTop+(loggedIn?$("#topUserbar").height():0)){tHeight+=$("#"+aDiffAdd[i]).height()+($(window).width()<600?3:2)+(newTOffset===0?newTHeight:0)}if(i=aDiffAdd.length){var newScrollT=comments.curWinTop+tHeight;if(newScrollT!=comments.curWinTop){if(newScrollT+$(window).height!=$(document).height())$(window).scrollTop(newScrollT)}}}}else{comments.commentScrollTo()}clearInterval(window.commProcess);clearInterval(window.commProcess2);clearInterval(window.commProcess3);if(comments.commentsAdded===""){window.commProcess=setTimeout(function(){makeDelayedImagesWork();$("#ajax_comm a[rel^='lightbox']:not(.boxed)").addClass("boxed").lightBox();comments.initImagesOnMouseHover();comments.initSpoiler(comments.ajaxCom);hoverMyButtons();comments_initCdnSwitch();comments_initReply();comments_initLazyImages()},200);$(".commentNew:not(.willDie)").addClass("willDie").delay(15e3).fadeOut()}else{comments.commentsAdded=comments.commentsAdded.slice(0,-1);comments_initLazyImages(comments.commentsAdded);makeDelayedImagesWork(comments.commentsAdded);$(comments.commentsAdded).find("a[rel^='lightbox']").lightBox();comments.initImagesOnMouseHover(comments.commentsAdded);comments.initSpoiler(comments.commentsAdded);hoverMyButtons(comments.commentsAdded);comments_initCdnSwitch(comments.commentsAdded);comments_initReply(comments.commentsAdded);$(comments.commentsAdded).find(".commentNew").delay(15e3).fadeOut();$(".comParent").each(function(){var e=$(this).attr("id");e="p"+e.substring(2);var t=$("."+e).length;$(this).attr("data-child_count",t).find(".commentsCounter").text("("+t+" replies)")})}commYoutube();hoverPlayVideos();listsInit.clInitLists();listsInit.mlInitLists();refreshCollapsibleComments(comments.ajaxCom);comments.refreshBoardLevelBar(responseHtml.find("#powerStuff2"))}if(comments.isLoadPageRequest){comments.isLoadPageRequest=false;if(!comments.ajaxCom)comments.ajaxCom=$("#ajax_comm");var commMain=comments.ajaxCom.closest(".main");var topPaginationPosition=commMain.find(".comPaginatorPages:first").offset();if(commMain.find(".comPaginatorPages").length==2&&typeof topPaginationPosition!="undefined"){$(window).scrollTop(topPaginationPosition.top-$("#topUserbar").height()-$(window).height()*.2)}}}comments.isLoadingListActive=false;nze.refreshQueue=nze.refreshQueue>0?nze.refreshQueue-1:nze.refreshQueue;clearTimeout(window.isLoadListActiveTimeoutCheck);if(nze.refreshQueue>0){console.log("refreshQueue is > 1. attempting second refresh to clear it.");nze.refreshQueue=0;comments.refreshComments()}if(updateCommFormPos)$("#commentReplyForm").css("top",commBoxTop+$(window).scrollTop())},error:function(){comments.isLoadingListActive=false;clearTimeout(window.isLoadListActiveTimeoutCheck)}});if($("#cToggle")){}return false},loadCommentsList:function(e,t){comments.resetCommArray=true;if(!IN_PRODUCTION)console.log("load comment list");comments.wsNewThreads=0;comments.wsNewReplies=0;if(window.hoverCommentImage===true){$(".onHoverImage").remove();window.hoverCommentImage=false}if(comments.isLoadingListActive){return}comments.isLoadingListActive=true;if(window.refreshItemsEnabled){setTimeout(function(){items.getActiveItems(true)},20)}$("#refreshCom").append('<div id="commz"></div>').delay(1e3).queue(function(e){$("#commz").remove();e()});if(typeof e==="undefined"||!e){e="/comment/anonymous/"+pageType+"/"+contentId+"/"+comments.displayRating+"/"+comments.zm+"/"+comments.sort+"/"+comments.perPage+"/"+comments.currentPage+"/"+comments.sortOrder+"/"+currentCommentId}$.ajax({type:"get",url:e,success:function(e){commA={},commR={};if(typeof t!=="undefined"){if(e=="Error"){dialog.alert("Can't delete this comment.")}t.call()}else{var o=$("#ajax_comm");o.html(e);var n=document.querySelectorAll("#main .comPaginator")[0];var s=document.querySelectorAll("#main .comPaginator")[1];if(typeof n!=="undefined"&&typeof s!=="undefined"){n.innerHTML=s.innerHTML;s.parentNode.removeChild(s);n=document.querySelectorAll("#main .comPaginator")[0];s=document.querySelectorAll("#main .comPaginator")[1];if(typeof n!=="undefined"&&typeof s!=="undefined"){s.innerHTML=n.innerHTML}}var i=isNaN($("#commentsCount").val())?0:parseInt($("#commentsCount").val());var m=isNaN($("#topCommentsCount").val())?0:parseInt($("#topCommentsCount").val());$(".commCounter").text("("+i+")");if(typeof contentId!=="undefined"){newCommCountDiff=0;topCommCountDiff=0;var a="commentCount"+contentId;var r="topCommentCount"+contentId;window[a]=i;window[r]=m}if(comments.newCommsAlert){$("#newReplies, #newThreads").css("visibility","hidden")}var l=$("#ajax_comm .latest-users-list").html()||"";var c=document.getElementsByClassName("latest-users-list")[1];if(typeof c!=="undefined")c.parentNode.removeChild(c);var d=document.querySelector(".latest-users-list");if(typeof d!=="undefined"&&l!=""){d.innerHTML=l}var f=$("#ajax_comm #commentsCount").html();f=f!==null?f:0;$("#countComm").html(f);$("#activeItemsList").html($("#ajax_comm #hiddenActiveItemsList").html());jQuery(function(e){e("a[rel^='lightbox']").lightBox()});comments_initLazyImages();listsInit.clInitLists();listsInit.mlInitLists();comments_initReply();setTimeout(function(){jQuery(function(e){e("#ajax_comm a[rel^='lightbox']").lightBox()});commYoutube();hoverPlayVideos();comments.initImagesOnMouseHover();comments.initSpoiler(o);comments_initCdnSwitch();makeDelayedImagesWork()},200);setTimeout(function(){hoverMyButtons()},500);comments.refreshBoardLevelBar()}comments.commentScrollTo();refreshCollapsibleComments(o);comments.isLoadingListActive=false;nze.updateCommentPollIds()},error:function(){comments.isLoadingListActive=false}});if($("#cToggle")){}return false},onMouseHoverTime:null,onImageMouseEnter:function(e){var t=$(e.target);var o=t.closest("a");if(o.length){var n=o.attr("href");if(o.attr("data-cachedimgsrc")){n=o.attr("data-cachedimgsrc")}var s=$('<div class="onHoverImage" style="display:none;"><div class="onHoverCorner"><!-- --></div><img src='+n+" /></div>");s.find("img").on("load",function(){var t=$(this).closest("div");this.mouseyPos={x:e.pageX,y:e.pageY};t.find("img").css({"max-height":$(window).height()*.9});this.PicElementWidth=$(e.target).width();this.hoverPicWidth=t.width();this.PicElementHeight=$(e.target).height();this.ePos=$(e.target).offset();if($(window).width()-(this.hoverPicWidth+this.ePos.left+this.PicElementWidth+20)>=0){var o=this.ePos.left+this.PicElementWidth+20+"px"}else{var o="calc(100% - "+(this.hoverPicWidth+10)+"px)"}t.show();t.css({top:"calc(50% - "+t.height()/2+"px)",left:o,position:"fixed"});window.hoverCommentImage=true});$("body").append(s);var i=t.closest("a").position();var m=t.width();var a=t.height();$(".onHoverImage").css({top:i.top+a/2,left:i.left+m+10})}return false},gifMovingStarted:false,gifMovingStartPosition:{x:0,y:0},gifElement:null,gifElementWidth:0,gifElementHeight:0,startedMoving:false,gifStartMoving:function(e){this.gifMovingStarted=true;this.gifMovingStartPosition={x:e.pageX,y:e.pageY};this.gifElement=$(e.target);this.gifElementWidth=$(e.target).width();this.gifElementHeight=$(e.target).height()},gifMoving:function(e){var t=this.gifMovingStartPosition.x-e.pageX;var o=this.gifMovingStartPosition.y-e.pageY;var n=Math.max(t,o);this.gifElement.css({width:this.gifElementWidth-n*2,height:"auto",maxWidth:this.gifElementWidth-n*2,maxHeight:this.gifElementHeight*(this.gifElementWidth-n*2)/this.gifElementWidth,cursor:"nw-resize"})},gifStopMoving:function(e){this.gifMovingStarted=false;this.gifMovingStartPosition={x:0,y:0};this.gifElement.css({cursor:"default"});this.gifElement=null;this.gifElementWidth=0},initImagesOnMouseHover:function(e){if(typeof e==="undefined"){var t=$("#ajax_comm")}else{t=$(e)}if(!isMobile){t.find('.av_img[original$=".gif"]:not(.boxed4), video:not(.boxed4)').addClass("boxed4").on("mousedown",function(e){var t=$(e.target);var o=!t.closest("a").length;this.startedMoving=true;if(o){this.gifStartMoving(e);return false}return true}.bind(this)).on("mousemove",function(e){if(this.startedMoving){if(!window.playLocked){window.playLockTimeout=setTimeout(function(){window.playLocked=true},150)}}if(this.gifMovingStarted){this.gifMoving(e)}}.bind(this)).on("mouseup",function(e){this.startedMoving=false;clearTimeout(window.playLockTimeout);window.playLockTimeout=setTimeout(function(){window.playLocked=false;clearInterval(window.playLockTimeout)},50);if(this.gifMovingStarted){this.gifStopMoving(e)}}.bind(this)).on("mouseleave",function(e){if(this.gifMovingStarted){this.gifStopMoving(e)}}.bind(this)).closest("div").append('<div class="gifResize"><!-- --></div>').css({float:"left",position:"relative"}).closest("div").append($('<div class="addToImageGallery"><!-- --></div>').on("click",this.addPictureToGallery.bind(this)));if(typeof e==="undefined"&&showCommentImages===false)return false;t.find('a[rel="lightbox"] .av_img').not("boxed5").addClass("boxed5").on("mouseenter",function(e){if(this.onMouseHoverTime!=null){clearTimeout(this.onMouseHoverTime)}this.onMouseHoverTime=setTimeout(function(){this.onImageMouseEnter(e)}.bind(this),500)}.bind(this)).on("mouseleave",function(e){$(".onHoverImage").remove();clearTimeout(this.onMouseHoverTime);this.onMouseHoverTime=null;window.hoverCommentImage=false;return false}.bind(this)).closest('a[rel="lightbox"]').append($('<div class="onHoverImg"><!-- --></div>')).css({float:"left",display:"block",position:"relative"}).closest('a[rel="lightbox"]').append($('<div class="addToImageGallery" title="Add picture to gallery"><!-- --></div>').on("click",this.addPictureToGallery.bind(this)))}else{if(typeof e==="undefined"&&showCommentImages===false)return false;t.find('.av_img[original$=".gif"]').not("boxed6").addClass("boxed6").closest("div").css({float:"left",position:"relative"}).append($('<div class="addToImageGallery"><!-- --></div>').on("click",this.addPictureToGallery.bind(this)));t.find('a[rel="lightbox"]').not("boxed7").addClass("boxed7").css({float:"left",display:"block",position:"relative"}).append($('<div class="addToImageGallery" title="Add picture to gallery"><!-- --></div>').on("click",this.addPictureToGallery.bind(this)))}},addPictureToGallery:function(e){if(loggedIn()){var t=$(e.target).closest('a[rel="lightbox"]').attr("href");if(!t){t=$(e.target).parent("div").find("img").attr("src")}$.ajax({type:"post",url:"/ajax/addToUserGallery",data:{url:t},dataType:"json",success:function(e){if($("#selectRecentlyUploadedContainer").length){console.log(JSON.stringify({path:t,name:t.substring(t.lastIndexOf("/")+1),ext:t.substr(t.lastIndexOf(".")+1),type:0}))}if(e.type=="success"){f.s(e.msg)}else{f.e(e.msg)}},error:function(){f.e("Request Failed")}})}else{loginOpen("Please login first")}return false},initSpoiler:function(e){$(e).find(".spoiler .spoiler-icon:not(.boxed3)").addClass("boxed3").off("click").on("click",function(e){var t=$(e.target).closest(".spoiler");if(t.hasClass("openedSpoiler")){t.removeClass("openedSpoiler")}else{t.addClass("openedSpoiler")}})},initMultiReplies:function(e){$("#ajax_comm").on("mouseenter",".com .multiReply, .pink.commentNumber",function(e){clearInterval(window.ahm);window.ahm=setTimeout(pinkhover,250,e)}.bind(this)).on("mouseleave",".com .multiReply, .pink.commentNumber",function(e){clearInterval(window.ahm);$(".replyCommentPopup").remove();$(".com").removeClass("selected");comments.popped=false;$(".com").removeClass("selected")}).on("mousemove",".com .multiReply, .pink.commentNumber",function(e){
clearInterval(window.ahmz);window.ahmz=setTimeout(o,5,e)});var t=["^(?:http://|https://)?(?:www.)?(?:"+SITE_URL+")?/?(?:[^/]+?)/?(?:funny-pictures|funny-gifs|hdgifs|movies|youtube|text)/(?:[0-9]+)/([0-9]+)#?(?:[0-9]+)?$","^(?:http://|https://)?(?:www.)?(?:"+SITE_URL+")?/?user/(?:[ +a-zA-Z0-9]+)/([0-9]+)#?(?:[0-9]+)?$","^(?:http://|https://)?(?:www.)?(?:"+SITE_URL+")?/(?:[a-zA-Z-]{1,30})/([0-9]+)#?(?:[0-9]+)?$","^(?:http://|https://)?(?:www.)?(?:"+SITE_URL+")?/?user_pictures/(?:[ +a-zA-Z0-9]+)/(?:[0-9]+)/(?:[^/]+)/([0-9]+)#?(?:[0-9]+?)?$","^(?:http://|https://)?(?:www.)?(?:"+SITE_URL+")?/?channel/(?:[ +a-zA-Z0-9+]+)/(?:[ +a-zA-Z0-9+]+)/(?:[a-zA-Z0-9]+)/([0-9]+)#?(?:[0-9]+)?$"];$("#ajax_comm").on("mouseenter",".com .t a:not(.multiReply)",function(e){clearInterval(window.sdl);window.sdl=setTimeout(n,10,e)}.bind(this)).on("mouseleave",".com .t a:not(.multiReply)",function(e){clearInterval(window.ahm);$(".replyCommentPopup").remove();$(".com").removeClass("selected");comments.popped=false;$("body").find(".com").removeClass("highlighted")}).on("mousemove",".com .t a:not(.multiReply)",function(e){clearInterval(window.ahmz);window.ahmz=setTimeout(o,5,e)});$("#mediaContainer").on("mouseenter","a",n).on("mouseleave","a",function(e){clearInterval(window.ahm);$(".replyCommentPopup").remove();$(".com").removeClass("selected");comments.popped=false}).on("mousemove","a",function(e){clearInterval(window.ahmz);window.ahmz=setTimeout(o,5,e)});function o(e){$(".replyCommentPopup").css({left:e.pageX-40,top:e.pageY+15})}function n(e){var o,n,s,m=false,a;for(i=0;i<t.length;i++){o=new RegExp(t[i]),n=$(e.target).attr("href");if(n!==undefined){var r=new RegExp("(http://|https://)?(www.)?("+SITE_URL+")?");n=n.replace(r,"");s=n.match(o);if(s!==null&&typeof s[1]!=="undefined"){m=parseInt(s[1]);a=s[0];break}}}if(m){if(typeof commHover[a]==="undefined"){$.ajax({type:"get",url:n,success:function(t){t=$(t);var o=t.find(".com #"+m).closest(".com");var o=o.html();if(o.length>10){makePopup(e,o,this);commHover[a]=o}else{commHover[a]=""}},error:function(){commHover[a]=""}})}else{if(commHover[a].length>10)makePopup(e,commHover[a],this)}}}},loadHighestRatedComments:function(e,t){var o=$("<div>").addClass("w8");var n=$("<div>").addClass("w8");$("#comType .w8, #ajax_comm .w8").remove();$("#comType").append(o);$("#ajax_comm").append(n);$("#frontpageCom").remove();$("#highestComPag").remove();$("#comSlider").remove();if(e!=""){url="/highest_comments/highestRatedComment/"+e}else{url="/highest_comments/highestRatedComment/1"}if(t){url=url+"/1"}o.animate({height:"16px"},200);n.animate({height:"16px"},200);$.ajax({type:"get",url:url,success:function(e){$("#ajax_comm").html(e);$("#frontHighestComments").html(e);comments.initLazyImages();commYoutube();comments_initReply();paginationArrowsPositions();comments_initCdnSwitch()},error:function(){$("#loader").text("Request Failed")}});return false},loadMatureHighestRatedComments:function(e){comments.loadHighestRatedComments(e,true)},loadUserComments:function(e){var t=$("<div>").addClass("w8");var o=$("<div>").addClass("w8");$("#comType .w8, #ajax_comm1 .w8").remove();$("#comType").append(t);$("#ajax_comm1").append(o);var n=document.getElementById("hiddenUserId").value;if(e!=""){url="/base_content/userComment/"+n+"/"+e}else{url="/base_content/userComment/"+n+"/1"}o.animate({height:"16px"},200);$.ajax({type:"get",url:url,success:function(e){$("#ajax_comm1").html(e).promise().done(function(){content.setClickHandlers.profileComments()});refreshCollapsibleUserLatestComments();comments_initLazyImages();commYoutube();comments_initCdnSwitch()},error:function(){$("#loader").text("Request Failed")}});return false},loadSettings:function(){if($("#comSort").val())comments.sort=$("#comSort").val();if($("#comShow").val())comments.displayRating=$("#comShow").val();if($("#mobSortOrder").length){comments.sortOrder=$("#mobSortOrder").find("a.selected").attr("data-value")}var e=$("#mobPerPage").find("a.selected");if(e.length){comments.perPage=e.attr("data-value")}else{comments.perPage=0}comments.zm=1},updateRating:function(e,t,o){var n=$("#up_"+e).parent().parent();var s=n.children("span.redLight, span.greenLight");var i=parseInt(s.text());i+=o;if(i<0){s.removeClass("greenLight").addClass("redLight").text(i)}else if(i==0){s.removeClass("redLight").addClass("greenLight").text(i)}else{s.removeClass("redLight").addClass("greenLight").text("+"+i)}if(o==-t){comments.setThumbs(e,false,false)}else if(o<0){comments.setThumbs(e,false,true)}else if(o>0){comments.setThumbs(e,true,false)}},thumbsVote:function(e,t){if(thumbsLocked||window.clickToReply)return;if(typeof comments.lockedThumbs[t]==="number"){comments.lockedThumbs[t]++;return false}window.clickToReply=true;thumbsLocked=true;var o="/thumb/add/";var n=$("#cmn_thumb_"+t);$.ajax({url:o,type:"post",data:{contentId:contentId,commentId:t,upOrDown:e,node_id:nze.node_id},beforeSend:function(){var e=$("<span>").addClass("thWait");n.children("#up_"+t+", #dn_"+t).hide();n.append(e)},success:function(o){clearInterval(window.clicktoReplyTimeout);window.clicktoReplyTimeout=setTimeout(function(){window.clickToReply=false},250);thumbsLocked=false;n.children(".thWait").remove();n.children("#up_"+t+", #dn_"+t).show().blur();if(/^OK/.test(o)){var s=parseInt(o.split("|")[1]);var i=e=="up"?1:-1;comments.updateRating(t,i,s);commentIdDOM[t]=parseInt($("#cc"+parseInt(t)+" .r .tt").eq(0).text());return false}else if(/^FAIL/.test(o)){var s=o.split("|")[1];if(s=="NOT RELEASED"){f.e("Content has not been released yet.")}}comments.lockedThumbs[t]=1;$("#up_"+t).removeClass("thUp").addClass("thUp_i");$("#dn_"+t).removeClass("thUp").addClass("thDn_i")},error:function(){thumbsLocked=false;clearInterval(window.clicktoReplyTimeout);window.clicktoReplyTimeout=setTimeout(function(){window.clickToReply=false},250);console.log("Request failed")}})},setThumbs:function(e,t,o){comments_setThumbs(e,t,o)},showHide:function(e){if(e.text()=="Show"){e.parents(".com").find(".t, .noavatar, .av").removeClass("peaceOut");e.text("Hide")}else{e.parents(".com").find(".t, .noavatar, .av").addClass("peaceOut");e.text("Show")}},hideCommentsByIP:function(e){var t="/comment/hideComments/"+e+"/comments-hide-ip/";comments.changeVisibleComments(t)},changeVisibleComments:function(e){$.ajax({type:"get",url:e,success:function(e){comments.loadSettings();comments.loadCommentsList()},error:function(){f.e("Request failed")}})},suggestionsRegisterInfo:function(){dialog.alert('Only registered users can post suggestions.<br /><div class="aCenter bold pt15"><a href="#" onclick="users.showLoginForm(); return false;">Login</a></div>');return false},ocAppRegisterInfo:function(){dialog.alert('<div class="aCenter">Only registered users can post.<br /><div class="aCenter bold pt15"><a href="#" onclick="users.showLoginForm(); return false;">Login or register</a></div></div>');return false},reloadComCap:function(e){console.log("reloading captcha");Recaptcha.reload()},sendComment:function(e,t,o){if(typeof window.lockComments!=="undefined"&&window.lockComments)return false;window.lockComments=true;try{var n=$(e);var s=n.parent().find(":submit, input[type=button]");s.attr("disabled",true);var i=n.find("input[name=replyCommentId]").length!==0;var m=n.parents(".main").find(".f");n.find(".replButtons").addClass("commReplyW8");var a="/comment/add/"+pageType+"/"+contentId;var r=n.find(".ajaxResponse");var l=n.serialize();l+="&node_id="+nze.node_id;$.ajax({type:"post",url:a,data:l,success:function(m){if(window.lastRecentPic&&$("#selectRecentlyUploadedContainer").length){$("#selectRecentlyUploadedContainer .showMoreRecent").eq(0).after(window.lastRecentPic)}if(m.match(/^OK\|[0-9]+/)){if($('#commentReplyForm input[name="scrollToCom"]').prop("checked"))comments.justAddedComment="#cc"+m.replace("OK|","");nze.refreshQueue=nze.refreshQueue<2?nze.refreshQueue+1:2;if(i){comments.loadPage(comments.currentPage,true)}else{comments.reloadPageAfterAddedTopComment()}n.find("ul.qq-upload-list").children().remove();n.find('input[name="screen_name"]').remove();r.html("Your comment has been added successfully").show("fast").removeClass("redError").addClass("greenLink");n.find(".replButtons").removeClass("commReplyW8");var a=$("iframe.markItUpPreviewFrame");if(a!==undefined){a.remove()}setTimeout(function(){window.lockComments=false},300);t&&t()}else{r.html(m).removeClass("hidden2").removeClass("green").addClass("redError");s.removeAttr("disabled");$(".ui-dialog-buttonpane button[rel='sbutton']").attr("disabled",false).removeClass("ui-state-disabled");n.find(".replButtons").removeClass("commReplyW8");if(!userLogged)var l=false;else var l=e.find("input[name=isAnon]").length>0?e.find("input[name=isAnon]")[0].checked:false;comments.showReplyCaptchaForAnon(l,o,e);setTimeout(function(){window.lockComments=false},300)}},error:function(){r.html("Request Failed");s.removeAttr("disabled");$(".ui-dialog-buttonpane button[rel='sbutton']").attr("disabled",false).removeClass("ui-state-disabled");comments.commentSendingInProgress=false;n.find(".replButtons").removeClass("commReplyW8");setTimeout(function(){window.lockComments=false},300)}})}catch(e){}return false},onCommentNumberClick:function(e){if(this.addCommentDialogActive!=null){var t=$(e.target);var o=$(".ui-dialog #replyComment");o.val(">>"+t.html().replace("#","")+", "+o.val());return false}},addComment:function(e){window.disableShortcuts=true;clearTimeout(window.dsT);window.dsT=setTimeout(function(){window.disableShortcuts=false},2e3);this.reply(null,contentId,null,null,null,0,e)},addCommentDialogActive:null,reply:function(e,t,o,n,s,i,m){if($("#commentReplyForm").length>0){if(document.activeElement.id!="replyComment"){$("#commentReplyForm").css("top",$(window).scrollTop()+50+"px")}return false}if(window.commentsLocked!=="undefined"&&window.commentsLocked===true){return"nope"}if(typeof IS_OC_APPLICATION!="undefined"&&IS_OC_APPLICATION){if(e!=null){$(".oc_app_info").hide()}else{$(".oc_app_info").show()}}$("#cancelAddFormTop, #cancelCommentForm").trigger("click");$("#commentsList .commentsReply").remove();if(!loggedIn()){if(t==-11){return comments.suggestionsRegisterInfo()}if(typeof IS_OC_APPLICATION!="undefined"&&IS_OC_APPLICATION){return comments.ocAppRegisterInfo()}}var a=$("#replyCommentForm").html();var r=$("<form>").addClass("commentsReply").attr({action:"/comment/add/content/"+t}).html(a);var l="Reply";var c="Reply";var d="Reply (Ctrl + Enter)";if(n){r.find("input[name=replyCommentId]").val(e);l="Enter reply to #"+n+" by "+s}else{r.find("input[name=replyCommentId]").remove();if(t!=-4&&t!=-11){l="Leave a comment";c="Add a comment";d="Add a comment (Ctrl + Enter)"}else if(t==-4){l="Report a bug";c="Report a bug";d="Report a bug (Ctrl + Enter)"}else if(t==-11){l="Add a suggestion";c="Add a suggestion";d="Add a suggestion (Ctrl + Enter)"}}r.find("div.cptcha_reply").attr({id:"cptcha_reply_"+n});var f=function(){r.dialog("close");$("#commentReplyForm").remove()};var u={my:"center",at:"center"};if(typeof o!="undefined"&&o!=null){u={my:"right top",at:"right top",of:isMobile?window:o}}r.dialog({autoOpen:false,width:550,title:l,closeOnEscape:true,resizable:false,close:function(){if(typeof getSound!="undefined"){getSound.recording=false;getSound.recordingStarted=false}$(this).remove();comments.addCommentDialogActive=null;if(o!=null){$(o).parents(".com").removeClass("selectedCom")}if(typeof commentsFormUploader=="object"&&commentsFormUploader!=null){commentsFormUploader.dispose()}},open:function(){r.find("textarea").focus();setTimeout(function(){window.disableShortcuts=false},300);comments.addCommentDialogActive=this;if(o!=null){$(o).parents(".com").addClass("selectedCom")}var e=r.find("textarea:visible");e.markItUp(myMarkdownSettingsComment);comments.initShowHideMediaUploader();if(typeof m==="function"){m()}if(typeof window.replyText!="undefined"){r.find("textarea").val(window.replyText);window.replyText=undefined}},buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:d,text:c,rel:"sbutton",click:function(){$(".ui-dialog-buttonpane button[rel='sbutton']").attr("disabled",true).addClass("ui-state-disabled");comments.sendComment($(this),f,n)}}]});r.submit(function(){$(".ui-dialog-buttonpane button[rel='sbutton']").attr("disabled",true).addClass("ui-state-disabled");return comments.sendComment($(this),f,n)});function p(e){e.find("textarea").focus()}setTimeout(p,25,r);setTimeout(p,50,r);$(".checkCom").on("click",function(){$(this).prev().trigger("click")});r.keydown(function(e){if(e.keyCode==$.ui.keyCode.ENTER&&(e.target.type!="textarea"||e.ctrlKey)){e.preventDefault();e.stopPropagation();$(".ui-dialog-buttonpane button[rel='sbutton']").attr("disabled",true).addClass("ui-state-disabled");comments.sendComment($(this),f,n)}(function(){if(comments.typing)return false;comments.typing=true;nze.isTyping();window.stopTyping=setTimeout(function(){comments.typing=false},1e4)})()});var h=document.getElementById("reqcap").value;if(t!=-4&&t!=-11&&r.find("#ImageDiv3").length){init_qq_uploader_for_reply_form(r.find("div#uploader3"));comments.CommentUpimgChk(t,pageType)}else if(t==-4){if(n==null){if(r.find("div#uploader_screenshot_top").length){init_qq_uploader_for_reply_form(r.find("div#uploader_screenshot_top"))}r.find("select.noSelectbox").selectbox()}else{r.find(".bug_report_info").remove()}}if(!userLogged)var v=false;else var v=r.find("input[name=isAnon]").length>0?r.find("input[name=isAnon]")[0].checked:false;comments.showReplyCaptchaForAnon(v,n,r);r.find("input[name=isAnon]").off().click(function(){comments.showReplyCaptchaForAnon(this.checked,n,r)});r.dialog("open").parent().attr("id","commentReplyForm");if($.cookie("scrollToCom")==0)$('input[name="scrollToCom"]').prop("checked",false);else $('input[name="scrollToCom"]').prop("checked",true);$("#commentReplyForm").find("textarea").on("keyup",commentChars);var g=$("#commentReplyForm").find(".commentsReply");var C=g.find("#randCommSub");if(C.length===0){var w=Math.floor(Math.random()*9999999999+1);g.append('<input id="randCommSub" type="hidden" name="formCommRand" value="'+w+'">')}return false},setReplyText:function(e,t){window.replyText=e;$(t).closest(".com").find(".commentReplyLink").trigger("click")},initShowHideMediaUploader:function(){if($.cookie("hideReplyMedia")){$(".showHideReplyMedia").html("[ + ]");$(".commentsReply").find("#uploader3").css({display:"none"})}else{$(".showHideReplyMedia").html("[ - ]");$(".commentsReply").find("#uploader3").css({display:""})}},showHideMediaUploader:function(e){var t=$(e).html();if(t=="[ + ]"){$(e).html("[ - ]");$(".commentsReply").find("#uploader3").css({display:""});$.cookie("hideReplyMedia",null,{path:"/",expires:365})}else{$(e).html("[ + ]");$(".commentsReply").find("#uploader3").css({display:"none"});$.cookie("hideReplyMedia",1,{path:"/",expires:365})}return false},addCaptchaControls:function(e,t){if(!e.find("div.cptcha_reply").length){e.find("label.newCommCaptchaTop").html("Enter Captcha Code:").after('<div id="cptcha_reply_'+t+'" class="cptcha_reply">&nbsp;</div>');if(e.find("#ImageDiv3")){e.find("#ImageDiv3").css("float","none")}}},genCaptchaId:function(e){var t="0123456789abcdef";var o="";if(e==undefined)e=13;for(var n=0;n<e;++n){o+=t[Math.floor(Math.random()*t.length)]}return o},commentDelete:function(e,t,o,n,s){if(t==undefined||t!=true){var i="Do you really want to delete this comment?";if(o==1)i="Delete comment and leave no trace?<br/>All replies to this comment will be also deleted.";if(!dialog.confirm("Confirmation",i,function(){comments.commentDelete(e,false,o,n,s)}))return false}var m="/comment/delete/"+pageType+"/"+contentId+"/"+comments.displayRating+"/"+comments.sort+"/"+comments.zm+"/"+comments.perPage+"/"+comments.currentPage+"/"+e+"/"+o+"/"+s+"/"+currentCommentId;return comments.loadCommentsList(m)},commentDeleteProfile:function(e){var t='Leave message that says "comment was deleted"<br /><strong>or</strong><br />delete comment and leave no trace?';var o=comments.commentDeleteProfileConfirm("Confirmation",t,function(){comments.commentDeleteProfile(e)});if(o==false){return false}else if(o==1){var n="/comment/delete/"+pageType+"/"+contentId+"/"+comments.displayRating+"/"+comments.sort+"/"+comments.zm+"/"+comments.perPage+"/"+comments.currentPage+"/"+e+"/1//"+currentCommentId;return comments.loadCommentsList(n)}else{comments.commentDelete(e,true)}return false},confirmed:null,commentDeleteProfileConfirm:function(e,t,o){if(comments.confirmed!=null){setTimeout(function(){comments.confirmed=null},100);return comments.confirmed}$("<div>").html(t).addClass("aCenter").dialog({title:e,closeOnEscape:false,resizable:false,width:380,buttons:{Cancel:function(){$(this).dialog("close")},"Leave no trace":function(){comments.confirmed=1;o.call();$(this).dialog("close")},"Leave message":function(){comments.confirmed=2;o.call();$(this).dialog("close")}}});return false},show_stick_dialog:function(e,t,o,n,s,i,m,a,r){var l=$("<div>");var c="";c+='<label>Seconds to live <input type="text" id="limit_time_to_live" maxlength="10" style="width:40px" value="'+o+'" /> (0 - forever)</label><br />';c+='<label>Auto-unstick after <input type="text" id="limit_replies" maxlength="10" style="width:40px" value="'+n+'" /> comments (0 - never)</label><br />';c+='<label><input type="checkbox" id="disable_replies" '+(s?'checked="checked"':"")+" /> Disable replies</label><br />";c+='<label><input type="checkbox" id="enforce_captcha" '+(i?'checked="checked"':"")+" /> Enforce captcha</label><br />";c+='<label><input type="checkbox" id="minimize" '+(m?'checked="checked"':"")+" /> Minimize by default</label><br />";l.html(c);var d=null;if(!e){d={Save:function(){o=l.find("#limit_time_to_live").val();n=l.find("#limit_replies").val();s=l.find("#disable_replies").prop("checked")?1:0;i=l.find("#enforce_captcha").prop("checked")?1:0;m=l.find("#minimize").prop("checked")?1:0;a(o,n,s,i,m);$(this).dialog("close")},Close:function(){$(this).dialog("close")}}}else{d={Save:function(){o=l.find("#limit_time_to_live").val();n=l.find("#limit_replies").val();s=l.find("#disable_replies").prop("checked")?1:0;i=l.find("#enforce_captcha").prop("checked")?1:0;m=l.find("#minimize").prop("checked")?1:0;a(o,n,s,i,m);$(this).dialog("close")},Unstick:function(){r();$(this).dialog("close")},Close:function(){$(this).dialog("close")}}}l.dialog({width:500,resizable:false,title:t,close:function(){l.remove()},buttons:d})},edit_stick:function(e,t,o,n,s,i,m){var a="Edit stickied comment";if(t!=0){a+=". Will be automatically unstickied in "+m+" seconds"}else{a+=". Created "+m+" seconds ago"}comments.show_stick_dialog(true,a,t,o,n,s,i,function(t,o,n,s,i){var m="/ajax/update_stickied_comment/"+e+"/"+t+"/"+o+"/"+n+"/"+s+"/"+i;$.ajax({type:"POST",data:{contentId:contentId,node_id:nze.node_id},url:m,success:function(e){if(e!=""){dialog.alert("Error",e)}else{comments.loadPage(1,true)}},error:function(){dialog.alert("Error","Request Failed")}})},function(){comments.unstick(e,1)});return false},stick:function(e,t){comments.show_stick_dialog(false,"Stick comment",0,0,0,0,0,function(o,n,s,i,m){var a="/ajax/stick_comment/"+e+"/"+o+"/"+n+"/"+s+"/"+i+"/"+m;$.ajax({type:"POST",data:{contentId:contentId,node_id:nze.node_id},url:a,success:function(e){if(e!="Sticky success"){f.e(e)}else{f.s(e);comments.loadPage(t,true)}},error:function(){dialog.alert("Error","Request Failed")}})});return false},unstick:function(e,t){var o="/ajax/unstick_comment/"+e;$.ajax({type:"POST",url:o,data:{contentId:contentId,node_id:nze.node_id},success:function(e){if(e!="Unsticky success"){f.e(e)}else{f.s(e);comments.loadPage(t,true)}},error:function(){dialog.alert("Error","Request Failed")}});return false},deleteAllProfileComments:function(e){if(!dialog.confirm("Confirmation","Do you really want do delete all comments on your profile?",function(){comments.deleteAllProfileComments(e)})){return false}$("#loader").html('<img src="'+SCRIPT_URL+"site/"+SITE_NAME+'/images/blackBg_w8.gif">');$("#loader").removeClass("hidden");$("#deleteButton").addClass("hidden");$.ajax({type:"GET",url:"/comment/deleteAllProfileComments/"+e,success:function(e){if(e=="Error"){dialog.alert("Can't delete profile comments.")}$("#loader").html("");$("#loader").addClass("hidden");$("#deleteButton").removeClass("hidden");comments.loadCommentsList()},error:function(){dialog.alert("Error","Request Faild")}})},CommentUpimgChk:function(e,t){var o="/ajax/UploadCommentImageChk/"+e+"/"+t;$.ajax({type:"get",url:o,success:function(e){if(e!="YES"){$("#ImageDiv1").hide();$("#ImageDiv2").hide()}else{$("#screen_fileName").html("");$("#screen_fileName2").html("");$("#screen_fileName3").html("")}},error:function(){}});$("#screen_fileName").html("");$("#screen_fileName2").html("");$("#screen_progressBar").html("");$("#screen_progressBar2").html("");$("#upPercentage").html("");$("#upPercentage2").html("");$("#screen_name").val("");$("#screen_name2").val("")},showDialogTypeOfEditedImage:function(e,t,o,n,s){if("full"!=COMMENTS_MODE&&"full"!=CONTENTS_MODE){dialog.alert("Error","<center>Sorry, "+siteTitle+" is under maintenance. Please try again later!</center>");return false}n=n=="1";s=s=="1";if(n&&!s){if(e!=null){e.call()}return false}else if(!n&&s){if(t!=null){t.call()}return false}else if(!n&&!s){dialog.alert("Error","Editing of images not allowed");return false}var i={my:"center",at:"center"};if(typeof o!="undefined"){i={my:"right bottom",at:"right top",of:o}}$("<div>").html("Do you want to submit image as a comment or post it as new content ?").dialog({title:"Type of image",closeOnEscape:false,resizable:false,close:function(){$(this).remove()},buttons:{Cancel:function(){$(this).dialog("close")},Content:function(){$(this).dialog("close");if(t!=null){t.call()}},Comment:function(){$(this).dialog("close");if(e!=null){e.call()}}}});return false},EditContentImageAndUploadAsComment:function(e,t,o,n,s){comments.showDialogTypeOfEditedImage(function(){if("full"!=COMMENTS_MODE){dialog.alert("Error","<center>Sorry, "+siteTitle+" is under maintenance. Please try again later!</center>");return false}comments.addComment();var o=$("div.ui-dialog").find(".commentsReply").find("div#uploader3");var n="pixlr_edit_and_comment_receiver";o.addClass(n);FJPixlr.show_overlay(e,t,"callback/"+n)},function(){if("full"!=CONTENTS_MODE){dialog.alert("Error","<center>Sorry, "+siteTitle+" is under maintenance. Please try again later!</center>");return false}FJPixlr.open_image_as_content(e)},o,n,s)},EditCommentImageAndReply:function(e,t,o,n,s){comments.showDialogTypeOfEditedImage(function(){$(o).siblings("a.commentReplyLink").trigger("click");var n=$("div.ui-dialog").find(".commentsReply").find("div#uploader3");var s="pixlr_reply_and_comment_receiver";n.addClass(s);FJPixlr.show_overlay(e,t,"callback/"+s)},function(){FJPixlr.open_image_as_content(e)},o,n,s)},initLazyImages:function(){comments_initLazyImages()},resized:function(e){$(e).find("img").trigger("appear");$(e).find("video").trigger("appear").trigger("play")},initCaptcha:function(e,t,o){var n=$("#cptcha_reply_null").html();if(typeof n==="undefined")n="";comments.addCaptchaControls(t,o);if(!Recaptcha.is_loaded(e)&&n.length<10){console.log("loading new captcha");Recaptcha.create(captcha_public_key,e,{theme:"blackglass",callback:""})}else{comments.reloadComCap(e)}},showReplyCaptchaForAnon:function(e,t,o){var n=$("#haveCaptcha").val();$.ajax({type:"POST",url:"/comment/anonCaptchaReq/",data:{contentId:contentId,isAnon:!userLogged||userLogged&&e},success:function(s){var i=s.split("|");if(i.length==2){if(i[0]==1){document.getElementById("reqcap").value=1}else{document.getElementById("reqcap").value=0}if(i[1]==1){document.getElementById("anonReqcap").value=1}else{document.getElementById("anonReqcap").value=0}}if(s=="1|1"){comments.showCap(t,o,t);return}var m=i[0];var a=i[1];if(parseInt(a)===0){if(e){comments.hideCap(o)}else{if(m==1){comments.showCap(t,o,t)}else{comments.hideCap(o)}}}else{if(e){comments.showCap(t,o,t)}else{if(n==1){comments.showCap(t,o,t)}else{comments.hideCap(o)}}}}})},hideCap:function(e){$("#cptcha_reply_null").hide();$(".newCommCaptchaTop").hide()},showCap:function(e,t,e){console.log("show cap");$("#cptcha_reply_null").show();t.find(".newCommCaptchaTop").show();comments.addCaptchaControls(t,e);comments.initCaptcha("cptcha_reply_"+e,t,e)},initMedia:function(e){e.find(".media-soundcloud").attr("target","_blank")},jumpToPage:function(e){var t='<div id="jumpToPageDialog">'+'Jump to <input type="text" id="jumpto" name="jumpto" class="txt" style="width:50px;" /> page'+"</div>";$(t).dialog({title:siteTitle,closeOnEscape:false,resizable:false,width:200,close:function(){$(this).remove()},buttons:{Go:function(){var t=parseInt($("#jumpto").val());if(!t){dialog.alert("Please, enter a valid page number.")}if(typeof e!="undefined"){e(t)}else{comments.loadPage(t)}$(this).dialog("close")},Close:function(){$(this).dialog("close")}}})},autoRefresherSec:0,autoRefresherID:null,toggleAutoRefresh:function(e){var t=parseInt($(e).text())||parseInt($(e).val())||0;if(this.autoRefresherID==null||this.autoRefresherSec!=t){this.autoRefresherSec=t;if(this.autoRefresherID!=null){clearInterval(this.autoRefresherID);this.autoRefresherID=null}if(this.autoRefresherSec>=1&&this.autoRefresherSec<=60){this.autoRefresherID=setInterval(function(){this.loadPage(1,true)}.bind(this),this.autoRefresherSec*1e3);$(e).closest("div").find("a").removeClass("wheatBtn");$(e).addClass("wheatBtn")}else{$(e).removeClass("wheatBtn")}}else{clearInterval(this.autoRefresherID);this.autoRefresherID=null;$(e).removeClass("wheatBtn")}return false},customAutoRefreshVal:0,customAutoRefresh:function(e){var t=parseInt($(e).val())||0;if(t!=this.customAutoRefreshVal){this.customAutoRefreshVal=t;this.toggleAutoRefresh(e)}}};var mediaObj={showMedia:function(e,t){return true}};function refreshCollapsibleComments(e){var t=[];e.find("div.com").filter(function(){return this.id.match(/^cc\d+/)}).each(function(){var e=this.className.split(/\s+/);$.each(e,function(e,o){if(o.indexOf("p")==0){var n=parseInt(o.replace("p",""),10);if(!(n==null||n==0||isNaN(n))&&t.indexOf(n)==-1){t.push(n)}}})});e.find("div.com").filter(function(){return this.id.match(/^cc\d+/)}).each(function(){if(this.id.indexOf("cc")==0){var e=parseInt(this.id.replace("cc",""),10);if(!(e==null||e==0||isNaN(e))&&t.indexOf(e)!=-1){$(this).find(".comExpColPanel").css("display","inline-block")}}})}function toggleAllReplies(){if(comments.showAllReplies==0){expandAllReplies()}else if(comments.showAllReplies==1){collapseAllReplies()}else{}return false}function collapseAllReplies(){$(".comRepl").each(function(){$(this).addClass("peaceOut")});var e=0;$(".comExpCol").each(function(){var t=getCommentId($(this));if(!isNaN(t)){var o=$(this).html()=="[-]";e++;$(this).html("[+]");var n=$(this).parent().find(".commentsCounter");if(o){hideRecursive($(".p"+t));var s=$("#cc"+t).attr("data-child_count");if(undefined==s||s==0){s=$(".p"+t).length}var i=s==1?"reply":"replies";n.html("("+s+" "+i+")")}}});comments.showAllReplies=0;$("#cToggle").html("Show All Replies");$.ajax({url:"/ajax/setComShowReplies",type:"post",data:{val:1},dataType:"json",success:function(e){if(e.type=="success"){}else{f.e(e.msg)}}});return true}function expandAllReplies(){$(".comRepl").each(function(){$(this).removeClass("peaceOut");comments.resized(this)});var e=0;$(".comExpCol").each(function(){var t=getCommentId($(this));if(!isNaN(t)){var o=$(this).html()=="[+]";e++;$(this).html("[-]");var n=$(this).parent().find(".commentsCounter");if(o){showRecursive($(".p"+t));n.html("")}}});comments.showAllReplies=1;$("#cToggle").html("Hide All Replies");$.ajax({url:"/ajax/setComShowReplies",type:"post",data:{val:0},dataType:"json",success:function(e){if(e.type=="success"){}else{f.e(e.msg)}}});return true}function showGifsInsteadOfMp4s(e,t){this.o=t;$.ajax({url:"/ajax/showGifsInsteadOfMp4s",type:"post",context:this,data:{val:e},dataType:"json",success:function(t){if(t.type=="success"){if(e=="1"){$(this.o).hide();$("#showMp4sInsteadOfGifs").css("display","inline-block")}else if(e=="0"){$(this.o).hide();$("#showGifsInsteadOfMp4s").css("display","inline-block")}comments.loadCommentsList()}else{f.e(t.msg)}}})}function addToggleRepliesKeyCode(){$(document).on("keypress",function(e){var t=e.keyCode?e.keyCode:e.which;if(e.ctrlKey&&(t==5||t==101)){toggleAllReplies()}})}function showRecursive(e){var t=e;if(e.length>0){e.each(function(){var e=getCommentId($(this));var o=$(this).find(".comExpCol");if(o.length>0&&o.html()=="[+]"){$(".p"+e).each(function(){var e=$(this);t=$.grep(t,function(t){return t!=e[0]})})}})}var o=t.length;$.each(t,function(){if(o<=5){$(this).removeClass("peaceOut")}else{$(this).removeClass("peaceOut")}comments.resized(this)})}function hideRecursive(e){var t=e.length;if(e.length>0){e.each(function(){if(t<=5){$(this).addClass("peaceOut")}else{$(this).addClass("peaceOut")}})}}function countRecursive(e){var t=e.length;return t}function userCommExpandThingy(){$("body").on("click",".userCmtReplies .userComExpCol",function(){var e=$(this).parent().parent().parent().parent();var t=users.getUserProfileCommentId($(this));if(!isNaN(t)){var o=$(this).html()==="[+]";if(o){$(this).html("[-]")}else{$(this).html("[+]")}var n=$(this).parent().find(".commentsCounter");if(o){users.showUserProfileCommentRecursive(e.find(".up"+t));n.html("")}else{users.hideUserProfileCommentRecursive(e.find(".up"+t));var s=$("tr#"+t+" #ucc"+t).attr("data-child_count");if(undefined==s||s==0){s=e.find(".up"+t).length}var i=s==1?"reply":"replies";n.html("("+s+" "+i+")")}}})}function classComExpCommentsPlusThingy(){$("body").on("click",".comExpCol",function(){window.clickToReply=true;var e=getCommentId($(this));if(!isNaN(e)){var t=$(this).html()==="[+]";$(this).html(t?"[-]":"[+]");var o=$(this).parent().find(".commentsCounter");if(t){showRecursive($(".p"+e));o.html("")}else{hideRecursive($(".p"+e));var n=$("#cc"+e).attr("data-child_count");if(undefined==n||n==0){n=$(".p"+e).length}var s=n==1?"reply":"replies";o.html("("+n+" "+s+")")}}clearInterval(window.clicktoReplyTimeout);window.clicktoReplyTimeout=setTimeout(function(){window.clickToReply=false},200)})}function refreshCollapsibleUserLatestComments(){$(".cl_tx span.userComExpCol").each(function(){var e=$(this);$(this).off().click(function(){if(e.html()=="[+]"){e.parent().find(".commentsCounter").addClass("peaceOut");e.html("[-]");e.closest("div").find(".userCmtReplies.peaceOut").eq(0).removeClass("peaceOut");comments.resized(e.closest("div").find(".userCmtReplies"))}else{e.closest("div").find(".userCmtReplies").addClass("peaceOut");e.html("[+]").closest(".cl_tx").find(".commentsCounter").removeClass("peaceOut")}})})}function liveUpdates(e){if(!liveUpdatesComments){$.cookie("liveComOff",0,{expires:365,path:"/"});liveUpdatesComments=true;$(e).text("Realtime Comments: On").addClass("selected");f.s("Comments will update in real time.")}else{$.cookie("liveComOff",1,{expires:365,path:"/"});liveUpdatesComments=false;$(e).text("Realtime Comments: Off").removeClass("selected");f.e("Comments no longer update in real time.")}}function liveVideoSwitch(e){if(!liveVideo){$.cookie("liveVideoOn",1,{expires:365,path:"/"});liveVideo=true;$(e).text("Live Video: On").addClass("selected");f.s("Live videos will be shown if available. Note: You can resize the video pop-up when it appears.");liveVideoCheck()}else{$("#pollzYTEmbed").remove();$.cookie("liveVideoOn",0,{expires:365,path:"/"});liveVideo=false;$(e).text("Live Video: Off").removeClass("selected");f.e("Live videos will NOT be shown.")}}function makeDelayedImagesWork(e){if(!$("#ajax_comm").length)return false;if(typeof e==="undefined"){$("#ajax_comm .anonId").on("click",selectAnon);$("#ajax_comm .av_img[data-delayed]:not(.dStarted)").addClass("dStarted").each(function(){$(this).parent().append('<span class="showingSoon">Image converting... Showing in a few seconds.</span>');setTimeout(function(){$(this).attr("src",$(this).attr("data-delayed")).parent().find(".showingSoon").remove()}.bind(this),$(this).attr("data-timeDelay")*1e3);

})}else{$(e).find(".anonId").on("click",selectAnon);$(e).find(".av_img[data-delayed]").each(function(){$(this).parent().append('<span class="showingSoon">Image converting... Showing in a few seconds.</span>');setTimeout(function(){$(this).attr("src",$(this).attr("data-delayed")).parent().find(".showingSoon").remove()}.bind(this),$(this).attr("data-timeDelay")*1e3)})}}function selectAnon(){var e=$(this).clone();e.find("b").remove();var t=e.html();if(!$(this).closest(".com").hasClass("selected")){$(".com").removeClass("selected");$("."+t).closest(".com").addClass("selected");f.s("Highlighted all anons posting from the same IP.")}else{$("."+t).closest(".com").removeClass("selected")}}function pinkhover(e){clearInterval(window.ahm);$(".replyCommentPopup").remove();$(".com").removeClass("selected");comments.popped=false;$("#ajax_comm").find(".com").removeClass("highlighted");var t=$(e.target);var o=t.text().replace("#","").replace(String.fromCharCode(160)+"to"+String.fromCharCode(160),"");var n=$("#"+o).closest(".com");if(n.length>0&&n.offset().top<$(window).scrollTop()+$(window).height()&&n.offset().top+n.height()>$(window).scrollTop()+50){n.addClass("selected");comments.popped=true}else{if(n.length>0){makePopup(e,n.html(),this)}else{var s=$(e.target).attr("href");var i=$(e.target).attr("href");var m=new RegExp("(http://|https://)?(www.)?("+SITE_URL+")?");s=s.replace(m,"");console.log(s);if(typeof commHover[i]==="undefined"){$.ajax({type:"get",url:s,success:function(t){t=$(t);var n=t.find(".com #"+o).closest(".com");var n=n.html();if(n.length>10){makePopup(e,n,this);commHover[i]=n}else{commHover[i]=""}},error:function(){commHover[i]=""}})}else{if(commHover[i].length>10)makePopup(e,commHover[i],this)}}}}function makePopup(e,t,o){comments.popped=true;var n=$(window).width()-e.pageX;var s=$('<div class="com noFt3 replyCommentPopup" style="border-radius: 2px;padding: 6px;border:2px solid grey;'+"max-width:"+n+"px;width:50%;background:#000;z-index:9999;position:absolute;"+"left:"+(e.pageX-40)+"px;top:"+(e.pageY+15)+'px" />');var o=$(e.target);var i=o.text().replace("#","").replace(String.fromCharCode(160)+"to"+String.fromCharCode(160),"");var m=$(t);var a=m.position().top;var r=m.height();var l=$(window).scrollTop();if(!$("#topUserbar").hasClass("non-logged")){l+=$("#topUserbar").height()}var c=$(window).height();if(a>l&&a+r<l+c){m.addClass("highlighted");return true}s.html(t);s.find(".comExpCol,.r,.sbtBzttn").hide();if($(o).closest("#mediaContainer").length>0){if($("#commentsList").length<=0){$("#ajax_comm").append('<div id="commentsList" style="text-align:left;"></div>')}$("#commentsList").append(s)}else{$(o).closest(".com").after(s)}$(o).attr("title","");$(".replyCommentPopup img, .replyCommentPopup video").lazyload({placeholder:SCRIPT_URL+"site/funnyjunk/images/transparent_pixel.gif",threshold:200}).find(".myButtonToggle").remove();$(".replyCommentPopup img").trigger("appear");$(".replyCommentPopup video").trigger("appear").trigger("play").parent().attr("style","");$(".replyCommentPopup").find(".myButtonToggle, .addToImageGallery, .onHoverImg").remove();$(".replyCommentPopup").find(".avaC").attr("style","float: left !important;")}$("#ajax_comm .com").on("mouseenter",function(){if(comments.popped){clearInterval(window.ahm);$(".replyCommentPopup").remove();$(".com").removeClass("selected");comments.popped=false}});
function sendContactUsForm(e){sendForm(e,"",true)}function editContent2(e){sendForm(e,"",true)}function sendPasswordRecoveryForm(e){sendForm(e,null,false,function(){$(e).hide();$("#passRecConfirm").show()})}function sendForm(e,t,a,r){var s=$(e);var o=s.find(":submit");o.attr("disabled","disabled");var i;if(typeof t=="undefined"||t==""||!t)i=s.find(".ajaxResponse");else i=$("#"+t);var l=typeof s.attr("action")!=="undefined"?s.attr("action"):document.location.href;if(l.indexOf("member/submit")>0){l+="/"+$("#kind").val()}try{$.ajax({type:"post",url:l,data:s.serialize(),success:function(t){var n=t.split("|");if(n[0]=="OK"||l=="/flag/"&&t=="Thank you"){if(!a){s.find("div").not(i).not(".selectOuter").hide();i.parent().show();i.parent().parent().show()}i.removeClass("red").addClass("greenLight").html("");i.html(n[1]);if(a)e.submit();if(r!=undefined&&typeof r=="function")r.call()}else{i.addClass("red");i.html(t);f.e(t);if($("#recaptcha_response_field")&&t==message_CaptchaFailed){Recaptcha.reload()}if(s.find("a[name='ajaxResponseAnchor']").length>0)window.location.hash="ajaxResponseAnchor";o.removeAttr("disabled")}},error:function(){i.html("Request Failed");f.e("Request Failed");o.removeAttr("disabled")}})}catch(e){i.addClass("red").html("Request Failed");f.e("Request Failed");return false}return false}var uploaded=false;var selected=false;function sendFormUpload(e,t,a,r){var s=$(e);var o=s.find(":submit");o.attr("disabled","disabled");var i;if(typeof t=="undefined"||t==""||!t){i=s.find(".ajaxResponse")}else{i=$("#"+t)}var l=s.attr("action")!=""?s.attr("action"):document.location.href;if(l.indexOf("member/simpleuploader")>0){l+="/"+$("#kind").val()}try{$.ajax({type:"post",url:l,data:s.serialize(),success:function(t){var r=t.split("|");if(r[0]=="OK"){if(a)e.submit()}else if(r[0]=="new_type"){var l=$("<input>").attr({type:"hidden",name:"real_type_id",value:r[1]});e.append(l);if(a){e.submit()}}else if(r[0]=="alert"){o.removeAttr("disabled");uploaded=false;dialog.alert("Content already uploaded",r[1])}else if(r[0]=="uploadalert"){dialog.betauploadalert("Content already uploaded",r[1])}else if($("#recaptcha_response_field")&&r[0]==message_CaptchaFailed){$("#captchaError").text(message_CaptchaFailed).show();Recaptcha.reload();o.removeAttr("disabled")}else if(/^This youtube video has already been posted/.test(r[0])){var n=$("#urlError").text("").hide();n.html(r[0]).show();$("#submit_url1").addClass("invalid");$(".ajaxResponse").html(r[0]);dialog.alert(r[0]);o.removeAttr("disabled");f.e(r[0])}else{if(!a){i.addClass("red");i.html(t);f.e(t)}else{s.find(".invalid").removeClass("invalid");var d=$("#contentTitleError").text("").hide();var u=$("#tagError").text("").hide();var c=$("#captchaError").text("").hide();var n=$("#urlError").text("").hide();$("#contentTitle").removeClass("invalid");switch(r[0]){case"You must upload your file first":case"upload file":upfile.text(r[0]).show();$("#fileName").addClass("invalid");break;case"You must specify a title":case"title":d.text(r[0]).show();$("#contentTitle").addClass("invalid");break;case"Field cannot be empty.":d.text(r[0]).show();$("#contentTitle").addClass("invalid");break;case"You must specify url":case"url":n.text(r[0]).show();$("#submit_url1").addClass("invalid");break;case"You can use only letters, numbers and spaces in your tags":case"You must enter 1 tag minimum to help your content be more visible to searches.":case"tag_error":u.text(r[0]).show();$("#tagform").addClass("invalid");break;case"This content has already been uploaded.":uploaded=false;n.html(r[1]).show();upfile.html(r[1]).show();$("#submit_url1").addClass("invalid");break;case"Invalid YouTube url":n.text("Invalid YouTube url").show();$("#submit_url1").addClass("invalid");break;default:c.text(r[0]).show();break}o.removeAttr("disabled");f.e(r[0])}}return false},error:function(){i.html("Request Failed");f.e("Request Failed");o.removeAttr("disabled")}})}catch(e){i.addClass("red").html("Request Failed");return false}return false}function sendComment(e,t){comments.sendComment(e,t)}function betaFormSubmit(e){$("#captchaError").text("").show();var t=document.getElementById("kind").value;if(t!="3"&&t!="18"){var a=document.getElementById("file");var r=a.value;var s=r.substring(r.lastIndexOf(".")+1)}if(t!="3"&&t!="18"&&document.getElementById("file").value==""){f.e("You must browse a file");$("#captchaError").text("You must browse a file").show();return false}else if(t=="3"&&document.getElementById("submit_url1").value==""){f.e("You must specify url");$("#captchaError").text("You must specify url").show();return false}else if(t=="1"&&(s!="gif"&&s!="GIF"&&s!="JPEG"&&s!="jpeg"&&s!="jpg"&&s!="JPG"&&s!="png"&&s!="PNG"&&s!="bmp"&&s!="BMP")){f.e("Incorrect image format : "+s);$("#captchaError").text("Incorrect image format : "+s).show();return false}else if(t=="11"&&(s!="gif"&&s!="GIF")){f.e("Incorrect image format : "+s);$("#captchaError").text("Incorrect image format : "+s).show();return false}else if(t=="2"&&(s.toLowerCase()!="mp4"&&s.toLowerCase()!="webm")){f.e("Incorrect video format : "+s);$("#captchaError").text("Incorrect video format : "+s).show();return false}else if(t=="15"&&(s!="gif"&&s!="GIF"&&s!="JPEG"&&s!="jpeg"&&s!="jpg"&&s!="JPG"&&s!="png"&&s!="PNG"&&s!="bmp"&&s!="BMP")){f.e("Incorrect video format : "+s);$("#captchaError").text("Incorrect image format : "+s).show();return false}sendFormUpload(e,"",true)}function submitCheck(){document.getElementById("uploadCheck").value=1;document.submitbetacontent.submit()}function submitAvatarContent(e){$("#captchaError").text("").show();var t=document.getElementById("file");var a=t.value;var r=a.substring(a.lastIndexOf(".")+1);if(a==""){$("#captchaError").text("Please select a file").show();return false}else if(r!="gif"&&r!="GIF"&&r!="JPEG"&&r!="jpeg"&&r!="jpg"&&r!="JPG"&&r!="png"&&r!="PNG"&&r!="bmp"&&r!="BMP"){$("#captchaError").text("Incorrect image format : "+r).show();return false}return true}
var statuses={focused:false,updateUserStatus:function(t){var e={};var s={};t=strip_html_tags(t);if(t=="")return f.e("Status is empty");e["text"]=t;$.ajax({type:"post",url:"/statuses_ajax/updateUserStatus/",data:e,success:function(t){s=t.split("|");if(s[0]=="OK"){$("#current_status,#status_field").html(s[2]);$("#current_status_update_id").val(s[1])}else{f.e(t);return false}$("#statusUpdateField").val("Update your status...").css({height:"17px"});$("#updateStatusButton").hide();$("#statusUpdateCharsLimit").html("Remaining character count: 140").removeClass("redError").hide();$("#current_status_block").fadeIn();$("#latest_status_comments").html("");statuses.getOlderStatuses();statuses.focused=false}})},updateStatusFocus:function(t){if(this.focused){return}t.style.height="45px";t.value="";$("#statusUpdateCharsLimit").show();$("#updateStatusButton").show();$("#current_status_block").fadeOut();this.focused=true},toggleStatusReplies:function(t,e){$("#status_replies_"+e).fadeToggle();$("#status_comments_hide_"+e).toggle()},toggleFriendsStatuses:function(){$("#friends_statuses_show").toggle();$(".friends_statuses_list").fadeToggle();if($("#friends_statuses_toggler").html()=="[-]"){$("#friends_statuses_toggler").html("[+]");$.cookie("show_fs",0,{expires:9999,path:"/"})}else{$("#friends_statuses_toggler").html("[-]");$.cookie("show_fs",1,{expires:9999,path:"/"})}},showMoreFriendStatuses:function(t){var e="";$(".statusReplies").each(function(){if($(this).is(":visible")==true){e+=$(this).find(".statusRepliesId").val()+";"}});$.ajax({url:"/statuses_ajax/getFriendsStatuses/"+t+"/"+e,success:function(t){$("#fs_block").html(t);refreshCollapsibleComments($("#fs_block"))}})},toggleStatusComment:function(t,e){$(".status_comment").html("");$(".reply_s_comment").html("");var s=$("#"+e+"_comment_button_"+t).html();if(s=="comment"||s=="Reply"){$("#"+e+"_comment_button_"+t).html("cancel");$("#"+e+"_comment_"+t).html('<textarea name="status_comment" class="genericTextarea" cols="45" rows="2" style="height: 45px;" id="'+e+"_comment_text_"+t+'"></textarea><br />'+'<button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover" role="button" aria-disabled="false" onclick="statuses.addStatusComment('+t+", '"+e+'\');"><span class="ui-button-text">Comment</span></button>')}else{$("#"+e+"_comment_button_"+t).html("Reply");$("#"+e+"_comment_"+t).html("")}},addStatusComment:function(t,e){var s="empty response";s=this.submitComment(t,$("#"+e+"_comment_text_"+t).val());if(s=="OK"){if(e=="fs"){$("#status_replies_"+t).show();statuses.showMoreFriendStatuses(parseInt($("#statuses_page").val())+1)}else if(e=="os"){statuses.getOlderStatuses()}}else{f.e(s);$(".commentStatusButton").html("comment")}},submitComment:function(t,e){var s={};var a;e=strip_html_tags(e);if(e=="")return"empty";s["text"]=e;s["status_id"]=t;$.ajax({type:"post",data:s,async:false,url:"/statuses_ajax/addStatusComment/",success:function(t){if(t=="OK"){a="OK"}else{a=t}}});return a},toggleOlderStatuses:function(){if($("#older_statuses").is(":visible")==false){statuses.getOlderStatuses()}$("#older_statuses_hide").toggle();$("#older_statuses").fadeToggle();$("#latest_status_comments").toggle()},getOlderStatuses:function(t){$.ajax({url:"/statuses_ajax/getOlderStatuses/",success:function(e){if(e.length>0){$("#show_older_statuses_link").show()}else{$("#show_older_statuses_link").hide()}$("#older_statuses").html(e);refreshCollapsibleComments($("#older_statuses"));statuses.expandComments(t)}})},deleteStatus:function(t){$.ajax({url:"/statuses_ajax/deleteStatus/"+t,success:function(e){if(e=="OK"){$("#user_status_update_"+t).remove();statuses.getOlderStatuses()}else{f.e(e)}}})},deleteLatestStatus:function(){var t=[];$.ajax({url:"/statuses_ajax/deleteLatestStatus/",success:function(e){t=e.split("|");if(t[0]=="OK"){if(t[1]!=""){$("#current_status_update_id").val(t[1])}if(t[2]!=""){$("#current_status,#status_field").html(t[2])}else{$("#current_status_block").hide();$("#status_field").html("-")}statuses.updateLatestStatusComments("lsc");statuses.getOlderStatuses()}else{f.e(e)}}})},updateLatestStatusComments:function(t,e,s,a){var u=$("input[name="+t+"_comments_page_num]").val();s=s==undefined||s==""?u:s;s=s==undefined?0:s;$("#latest_status_comments").html("");$.ajax({url:"/statuses_ajax/getLatestStatusComments/"+t+"/"+e+"/"+s,success:function(e){var s=null;if(t=="ulsc"){s=$("#latest_user_status_comments")}else{s=$("#latest_status_comments")}s.html(e);refreshCollapsibleComments(s);statuses.expandComments(a)}})},expandComments:function(t){if(undefined!=t||0!=t){$("#cc"+t+" .comExpCol").trigger("click")}},commentOwnStatus:function(t){var e=this.submitComment($("#current_status_update_id").val(),$("#own_comment_text").val());if(e=="OK"){if(t=="ulsc"){this.updateLatestStatusComments("ulsc",$("#profile_user_id").val())}else{this.updateLatestStatusComments("lsc");$("#older_statuses_hide").hide();$("#older_statuses").hide();$("#latest_status_comments").show()}}else{f.e(e)}$("#own_status_comment").hide();$(".comment_own_text").toggle()},toggleReplyComment:function(t,e,s){if(undefined==s||""==s){s=0}$(".status_comment").html("");$(".reply_s_comment").html("");$("#"+e+"_reply_"+t).toggle();$("#"+e+"_cancel_"+t).toggle();if($("#"+e+"_cancel_"+t).is(":visible")==true){$("#"+e+"_r_box_"+t).html('<textarea name="status_comment" class="genericTextarea" cols="45" rows="2" style="height: 45px;" id="'+e+"_reply_text_"+t+'"></textarea><br />'+'<button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover" role="button" aria-disabled="false" onclick="statuses.replyComment('+t+", '"+e+"', "+s+');"><span class="ui-button-text">Reply</span></button>')}},replyComment:function(t,e,s){var a={};a["parent_comment_id"]=t;a["text"]=$("#"+e+"_reply_text_"+t).val();$.ajax({type:"post",data:a,url:"/statuses_ajax/replyStatusComment/",success:function(a){var u=a.split("|");if(u[0]!="OK"){f.e(a)}if(e=="fs"){statuses.showMoreFriendStatuses(parseInt($("#statuses_page").val())+1);statuses.toggleReplyComment(t)}else if(e=="lsc"){statuses.updateLatestStatusComments(e,"",0,s)}else if(e=="ulsc"){statuses.updateLatestStatusComments(e,$("#profile_user_id").val(),0,s)}else if(e=="os"){statuses.getOlderStatuses(s)}}})},deleteComment:function(t,e,s){var a='Leave message that says "comment was deleted"<br /><strong>or</strong><br />delete comment and leave no trace?';var u=false;var l=false;$("<div>").html(a).addClass("aCenter").dialog({title:"Comment Removal",closeOnEscape:false,resizable:false,width:380,buttons:{Cancel:function(){l=true;$(this).dialog("close")},"Leave no trace":function(){u="true";$(this).dialog("close")},"Leave message":function(){u="false";$(this).dialog("close")}},close:function(){if(l)return false;$.ajax({url:"/statuses_ajax/deleteComment/"+t+"/"+u,success:function(t){if(t=="OK"){if(e=="fs"){statuses.showMoreFriendStatuses($("#statuses_page").val()-1)}else if(e=="lsc"){statuses.updateLatestStatusComments(e,"",0,s)}else if(e=="ulsc"){statuses.updateLatestStatusComments(e,$("#profile_user_id").val(),0,s)}else if(e=="os"){statuses.getOlderStatuses(s)}}else{f.e(t)}}})}})}};
var rollDataTypes=[];rollDataTypes[rollDataTypes.length]={name:"Roll a picture",title:"Rolls a picture",replaceWith:function(l){$(l.textarea).val("*roll picture*"+$(l.textarea).val())},className:"roll-picture"};rollDataTypes[rollDataTypes.length]={name:"Roll a number",title:"Rolls a number",replaceWith:function(){var l=$("<div>"+'<label for="range_start" style="width:100px;display:inline-block;">'+'Count of rolls:</label><input type="text" id="rolls_cnt" class="txt" value="1" '+'style="width:30px" /><br />'+'<label for="range_start" style="width:100px;'+'display:inline-block;">Range:</label><input type="text" id="range_start" class="txt" '+'value="1" style="width:30px" /> - '+'<input type="text" id="range_end" class="txt" '+'value="1000000" style="width:70px" /></div>');l.dialog({autoOpen:true,width:300,bgiframe:true,title:"Roll a number",closeOnEscape:true,resizable:false,buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Roll",text:"Roll",click:function(){var l=$("#range_start").val();var t=$("#range_end").val();var e=$("#rolls_cnt").val();if(l<t){$.markItUp({replaceWith:"*roll "+e+", "+l+"-"+t+"*"})}$(this).dialog("close");return false}}]});return false},className:"roll-number"};rollDataTypes[rollDataTypes.length]={name:"Roll a pokemon",title:"Rolls a pokemon",replaceWith:function(l){var t=$("<div>"+'<label for="range_start" style="width:100px;display:inline-block;">Count of rolls:</label><input type="text" id="rolls_cnt" class="txt" value="1" style="width:30px" /></div>');t.dialog({autoOpen:true,width:200,minHeight:"auto",bgiframe:true,title:"Roll a pokemon",closeOnEscape:true,resizable:false,buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Roll",text:"Roll",click:function(){var t=$("#rolls_cnt").val();if(t){$(l.textarea).val("*roll "+t+", pokemon*"+$(l.textarea).val())}$(this).dialog("close");return false}}]});return false},className:"roll-pokemon"};rollDataTypes[rollDataTypes.length]={name:"Roll a CAH Question",title:"Rolls a CAH Question",replaceWith:function(l){var t=$("<div>"+'<label for="range_start" style="width:100px;display:inline-block;">Count of rolls:</label><input type="text" id="rolls_cnt" class="txt" value="1" style="width:30px" /></div>');t.dialog({autoOpen:true,width:200,minHeight:"auto",bgiframe:true,title:"Roll a CAH Question",closeOnEscape:true,resizable:false,buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Roll",text:"Roll",click:function(){var t=$("#rolls_cnt").val();if(t){$(l.textarea).val("*roll "+t+", cah question*"+$(l.textarea).val())}$(this).dialog("close");return false}}]});return false},className:"roll-cah-question"};rollDataTypes[rollDataTypes.length]={name:"Roll a CAH Answer",title:"Rolls a CAH Answer",replaceWith:function(l){var t=$("<div>"+'<label for="range_start" style="width:100px;display:inline-block;">Count of rolls:</label><input type="text" id="rolls_cnt" class="txt" value="1" style="width:30px" /></div>');t.dialog({autoOpen:true,width:200,minHeight:"auto",title:"Roll a CAH Question",closeOnEscape:true,resizable:false,buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Roll",text:"Roll",click:function(){var t=$("#rolls_cnt").val();if(t){$(l.textarea).val("*roll "+t+", cah answer*"+$(l.textarea).val())}$(this).dialog("close");return false}}]});return false},className:"roll-cah-answer"};rollDataTypes[rollDataTypes.length]={name:"Roll RPG Name",title:"Rolls a random RPG name",replaceWith:function(l){var t=$("<div>"+'<label for="range_start" style="width:100px;display:inline-block;">Count of rolls:</label><input type="text" id="rolls_cnt" class="txt" value="1" style="width:30px" /></div>');t.dialog({autoOpen:true,width:200,minHeight:"auto",title:"Roll a random RPG name",closeOnEscape:true,resizable:false,buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Roll",text:"Roll",click:function(){var t=$("#rolls_cnt").val();if(t){$(l.textarea).val("*roll "+t+", rpg name*"+$(l.textarea).val())}$(this).dialog("close");return false}}]});return false},className:"roll-rpg-name-class"};rollDataTypes[rollDataTypes.length]={name:"Roll D&D Class",title:"Rolls a D&D Class",replaceWith:function(l){var t=$("<div>"+'<label for="range_start" style="width:100px;display:inline-block;">Count of rolls:</label><input type="text" id="rolls_cnt" class="txt" value="1" style="width:30px" /></div>');t.dialog({autoOpen:true,width:200,minHeight:"auto",title:"Roll a random D&D class",closeOnEscape:true,resizable:false,buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Roll",text:"Roll",click:function(){var t=$("#rolls_cnt").val();if(t){$(l.textarea).val("*roll "+t+", DD Class*"+$(l.textarea).val())}$(this).dialog("close");return false}}]});return false},className:"roll-dd-class-class"};rollDataTypes[rollDataTypes.length]={name:"Roll cis privilege",title:"Rolls a cis privilege",replaceWith:function(l){var t=$("<div>"+'<label for="range_start" style="width:100px;display:inline-block;">Count of rolls:</label><input type="text" id="rolls_cnt" class="txt" value="1" style="width:30px" /></div>');t.dialog({autoOpen:true,width:200,minHeight:"auto",title:"Roll your cis privilege!",closeOnEscape:true,resizable:false,buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Roll",text:"Roll",click:function(){var t=$("#rolls_cnt").val();if(t){$(l.textarea).val("*roll "+t+", cis privilege*"+$(l.textarea).val())}$(this).dialog("close");return false}}]});return false},className:"roll-cis-privilege-class"};rollDataTypes[rollDataTypes.length]={name:"Roll male privilege",title:"Rolls a male privilege",replaceWith:function(l){var t=$("<div>"+'<label for="range_start" style="width:100px;display:inline-block;">Count of rolls:</label><input type="text" id="rolls_cnt" class="txt" value="1" style="width:30px" /></div>');t.dialog({autoOpen:true,width:200,minHeight:"auto",title:"Roll your cis privilege!",closeOnEscape:true,resizable:false,buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Roll",text:"Roll",click:function(){var t=$("#rolls_cnt").val();if(t){$(l.textarea).val("*roll "+t+", male privilege*"+$(l.textarea).val())}$(this).dialog("close");return false}}]});return false},className:"roll-male-privilege-class"};rollDataTypes[rollDataTypes.length]={name:"Roll Magic 8-Ball",title:"Rolls the Magic 8-Ball!",replaceWith:function(l){var t=$("<div>"+'<label for="range_start" style="width:100px;display:inline-block;">Count of rolls:</label><input type="text" id="rolls_cnt" class="txt" value="1" style="width:30px" /></div>');t.dialog({autoOpen:true,width:200,minHeight:"auto",title:"Roll the magic 8-ball!",closeOnEscape:true,resizable:false,buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Roll",text:"Roll",click:function(){var t=$("#rolls_cnt").val();if(t){$(l.textarea).val("*roll "+t+", Magic 8-Ball*"+$(l.textarea).val())}$(this).dialog("close");return false}}]});return false},className:"roll-8ball"};
function hoverMyButtons(t){if(typeof t==="undefined"){$(".myButtonToggle:not(.boxed)").addClass("boxed").off("click").on("click",function(){myButtonToggle(this);return false});$(".myButtonMenu:not(.boxed)").addClass("boxed").off("click").on("click",function(){if(window.myButtonMenu!==true){}myButtonToggle(this)});$(".rJs").remove()}else{$(t).find(".myButtonToggle").off("click").on("click",function(){myButtonToggle(this);return false});$(t).find(".myButtonMenu").off("click").on("click",function(){if(window.myButtonMenu!==true){}myButtonToggle(this)})}}function hurrDurr1(){$(".t").text("\" durrrr hurrrrrrrrr 'I want more buttans!' - posttwo \"")}function hurrDurr2(){$("body").addClass("flipBG")}function hurrDurr3(){document.location="http://www.pornhub.com/gay/video/search?search=big+tranny+cocks"}function hurrDurr4(){$("body").addClass("flipBG2")}onFJPageLoaded(function(){$("body").get(0).addEventListener("click",function(t){if(typeof alerts!=="undefined"&&alerts.pmIsOpen===true){var e=false;var n=document.getElementsByClassName("ui-dialog");for(var o=0;o<n.length;o++){var r=n.item(o);if(r.contains(t.target)){e=true}}var i=document.getElementById("privMsgContainer");var u=document.getElementsByClassName("pmLi")[0];var a=i.contains(t.target)||u.contains(t.target)||e===true;if(!a){$(".ui-dialog-titlebar-close").trigger("click")}}if(typeof alerts!=="undefined"&&alerts.isOpened===true){var i=document.getElementById("alertContainer");var u=document.getElementById("alertLi");var c=document.getElementById("alertLi2");var d=document.getElementById("alertLink");var a=i.contains(t.target)||u.contains(t.target)||c.contains(t.target)||d.contains(t.target);if(!a){alerts.hide()}}if(typeof myButtonMenu!=="undefined"&&myButtonMenu===true){if(!$(".myButtonToggle").is($(t.target))){$(".myButtonMenu").addClass("peaceOut");window.myButtonMenu=false}}},true)});
if(typeof rankPage!=="undefined"&&rankPage){function getUsersRanking(n,t){var e;$.ajax({type:"POST",data:n=="form"?$("#urf").serialize():null,url:t,dataType:"html",beforeSend:function(n,t){showLoader()},success:function(t,e,o){console.log(t);if(n=="form"){$("#ajaxContent").html(t);$("#ajaxContent select:not(.noSelectbox)").selectbox()}else{$(".ratingErrors").html($(t).find(".ratingErrors").html());var a=[1,7,30,90];for(var r=0;r<a.length;r++){var i=a[r];if($(t).find("#periodContent-"+i).length){$("#mainRankingTable #periodContent-"+i).html($(t).find("#periodContent-"+i).html());$("#mainRankingTable #periodContent-"+i).next("tr").html($(t).find("#periodContent-"+i).next("tr").html())}}}},error:function(n,t,e){},complete:function(n,t){hideLoader()}})}function hideLoader(){$(".fjLoader").css("display","none")}function showLoader(){$(".fjLoader").css("display","inline-block")}$(document).on("click","#findMe",function(n){n.preventDefault();var t=$(this).attr("href");getUsersRanking("me",t)});$(document).on("click",".comPaginator a",function(n){if($(this).hasClass("active")){return}n.stopPropagation();n.preventDefault();var t=$(this).attr("href");getUsersRanking("all",t)});$(document).on("click","#urf input:submit",function(n){n.stopPropagation();n.preventDefault();var t=$(this).attr("href");getUsersRanking("form",t)});$(document).on("submit","#urf",function(n){n.stopPropagation();n.preventDefault();var t=$(this).attr("action");getItemsRanking("form",t)})}
function catBlock(e,t){var l=$(e).attr("data-id"),a,n;console.log($(e).text()+"text");l=parseInt(l);if(t==="category"){a="cBlocks"}else{a="cBlocksSkin"}n=$.cookie(a);if(typeof n!=="undefined"&&n!==null){n=JSON.parse(n);console.log(n);if($(e).hasClass("cBlocked")){while(n.indexOf(l)>=0){n.splice(n.indexOf(l),1)}$(e).removeClass("cBlocked");f.s($(e).text()+" category block removed.")}else{o.call(this)}}else{n=[];o.call(this)}function o(){if(n.indexOf(l)<0){n.push(parseInt(l))}$(e).addClass("cBlocked");f.s($(e).text()+" category block added.")}n=JSON.stringify(n);$.cookie(a,n,{path:"/",expires:365});console.log(n);$.ajax({url:"/ajax/leftColUpdate",type:"post",data:{mature:maturePage},dataType:"html",success:function(e){var t=$("<div></div>");t.html(e);var l=$("#hotTopMenu");var a=$(".menu1").eq(0);var n=$(".menu1").eq(1);var o=$("#mainpagesmalltop24h_content");var i=$("#mature24_content");if(l.length){l.html(t.find("#hotTopMenu").html())}if(a.length){a.html(t.find(".menu1").eq(0).html());n.html(t.find(".menu1").eq(1).html())}if(o.length){o.html(t.find("#mainpagesmalltop24h_content").html())}if(i.length){o.html(t.find("#mature24_content").html())}}})}
var commentIdDOM={},commentIdMemory={},pollIdDOM,pollIdMemory={};var nze={connected:false,connecting:false,node_id:false,interval:1,nodeConnect:false,neverReconnect:false,attempts:1,version:1.1,refreshQueue:0,lockCommentThumbs:false,lockContentThumbs:false,lockIsTyping:false,oldCommentPolls:[],itemCount:0,updateCommentPollIds:function(){},start:function(){that=this;if(this.connected&&!this.neverReconnect){return false}contentId=typeof contentId==="undefined"?0:parseInt(contentId);var e=["experimental1","experimental2","experimental3","experimental4"];e=e[Math.floor(Math.random()*e.length)];if(isSecure()){nze.wsUrl=IN_PRODUCTION?"wss://"+e+".funnyjunk.com":"wss://localhost"}else{nze.wsUrl=IN_PRODUCTION?"ws://"+e+".funnyjunk.com:64500":"ws://localhost:64500/"}var t=nze.wsUrl;var n=IN_PRODUCTION?"wss://"+e+".funnyjunk.com":"wss://localhost";if(this.attempts%2!==0&&!isSecure())nze.wsUrl=t;else nze.wsUrl=n;this.ws=new WebSocket(nze.wsUrl);this.ws.onopen=function(){nze.pollsShownContent=[];$("#mediaContainer .pollBackground[data-pollMain-id]").each(function(){nze.pollsShownContent.push($(this).attr("data-pollMain-id"))});nze.pollsShownComments=[];$("#ajax_comm .comPoll[data-pollMain-id]").each(function(){var e=$(this).attr("data-pollMain-id");if(nze.pollsShownContent.indexOf(e)<0)nze.pollsShownComments.push(e)});nze.oldCommentPolls=nze.pollsShownComments;this.interval=this.attempts=1;contentIdArray=typeof contentIdArray==="undefined"||isMobile?[]:contentIdArray;contentIdArray=[];var e={id:"new_connection",contentId:contentId,sess:$.cookie("fjsession"),username:FJUserName,version:this.version,pollsContent:nze.pollsShownContent,pollsComments:nze.pollsShownComments,contentIdsArray:contentIdArray};this.ws.send(JSON.stringify(e));this.connected=true}.bind(this);function o(e){nze.processSingleMessage(JSON.parse(e))}this.ws.onmessage=function(e){var t=JSON.parse(e.data);if(t.constructor!==Array){nze.processSingleMessage(t)}else if(t.constructor===Array){len=t.length;var n=1;var i=20/len;for(var s=0;s<len;s++){var r=t[s];setTimeout(o,n,r);n=n+i}}};this.ws.onclose=function(){reconn()};reconn=function(){if(this.connecting||this.neverReconnect)return false;this.connecting=true;console.log("dead, attempting restart");this.connected=false;setTimeout(function(){console.log("connect attempt "+this.attempts++ +". Interval is now "+this.interval+" seconds.");this.interval=this.interval+1<5?this.interval+1:5;this.connecting=false;this.start()}.bind(this),this.interval*1e3)}.bind(this);this.ws.onerror=function(e){reconn()}},getOnline:function(){if(!this.connected)return false;this.ws.send(JSON.stringify({show_online:true}))},isTyping:function(){if(!this.connected)return false;$.ajax({data:{contentId:contentId,node_id:this.node_id},type:"post",url:"/ajax/isTyping",success:function(){},error:function(){}})},processSingleMessage:function(e,t){var n=e;if(!IN_PRODUCTION){console.log(n)}if(typeof n.your_id!=="undefined"){this.node_id=n.your_id;console.log("Your node server ID: "+n.your_id+" and you are on: "+nze.wsUrl+". Server #:"+n.server);return}if(typeof n.comm_type!=="undefined"&&(n.comm_type==="reply"||n.comm_type==="thread")){if(typeof n.insert_id!=="undefined")comments.lastInsertId=parseInt(n.insert_id);var o=n.comm_type==="reply"?1:0;var s=n.comm_type==="thread"?1:0;if(liveUpdatesComments){if(!IN_PRODUCTION)console.log("realtime comm update refresh");nze.refreshQueue=nze.refreshQueue<2?nze.refreshQueue+1:2;clearTimeout(window.alertRefresh);window.randTime=Math.floor(Math.random()*250+1);window.alertRefresh=setTimeout(function(){comments.loadPage(comments.currentPage,true)},window.randTime)}comments.alertNewComments(n.comment_text,n.username,null,null,o,s,n.commNumber,n.insert_id);return}if(n.thumb>=-2&&n.thumb<=2){if(typeof n.comment_id==="number"&&typeof n.thumb!=="undefined"){if(typeof commentIdDOM[n.comment_id]==="undefined"){if($("#cc"+n.comment_id+" .r .tt").length===0)return false;commentIdDOM[n.comment_id]=parseInt($("#cc"+n.comment_id+" .r .tt").eq(0).text());if(typeof commentIdDOM[n.comment_id]==="undefined")commentIdDOM[n.comment_id]=0}if(typeof commentIdMemory[n.comment_id]==="undefined"){commentIdMemory[n.comment_id]=0}commentIdMemory[n.comment_id]+=parseInt(n.thumb)}if(typeof n.username==="undefined")n.username="anonymous";if(typeof n.comment_id==="number"&&typeof n.thumb!=="undefined"){if(!nze.lockCommentThumbs){nze.lockCommentThumbs=true;comments.liveUpdateThumbs(null,n.comment_id,n.thumb,null,n.username);setTimeout(function(){nze.lockCommentThumbs=false},200)}}else if(n.thumb!=="undefined"&&typeof n.content_id==="number"&&!n.comment_id&&typeof n.l==="undefined"){if(!nze.lockContentThumbs){comments.liveUpdateThumbs(n.content_id,null,n.thumb,null,n.username);setTimeout(function(){nze.lockContentThumbs=false},200)}}return}if(typeof n.poll_id==="number"){if(typeof pollIdMemory[n.poll_id]==="undefined")pollIdMemory[n.poll_id]=1;else pollIdMemory[n.poll_id]++;var r=$('#ajax_comm span[data-pollmain-id="'+n.poll_id+'"] .pollVoter,#mediaContainer div[data-pollmain-id="'+n.poll_id+'"] .pollVoter');if(r.length>0){r.removeClass("peaceOut").text("&nbsp;"+pollIdMemory[n.poll_id]+" new vote"+(pollIdMemory[n.poll_id]>1?"s":"")+"! "+n.username+" voted!&nbsp;")}$('.pollResults[data-pollmain-id="'+n.poll_id+'"] ').each(function(){$(this).next().find(".resultInfo").each(function(){var e=$(this).prev().attr("data-poll-id");var t=null;if(n.answers.indexOf(e)<0)return false})});return}if(typeof n.mod_alert==="boolean"&&typeof n.comment_id==="number"&&typeof n.username==="string"){admintools.makeFlaggedCommentHtml(n.comment_id,n.flag_reason,n.username);return false}if(typeof n.message==="string"){console.log(n.message);return}if(typeof n.ping==="number"){return}if(typeof n.typing==="boolean"){if(!this.lockIsTyping){if(n.username=="null"){n.username="anonymous"}comments.alertNewComments(null,n.username,null,null,null,null);setTimeout(function(){this.lockIsTyping=false}.bind(this),200)}return}if(typeof n.new_content==="boolean"&&(maturePage&&n.is_mature==1||!maturePage&&n.is_mature==0)){setTimeout(comments.alertNewUploads,5e3);return}if(typeof n.error==="string"){this.neverReconnect=true;console.log(n.error);this.ws.close();return}if(typeof n.board_online==="boolean"){$("#latestUserJoin strong").text(n.username).parent().removeClass("fadeOut").css("display","block");$("#latestUserJoin").width($("#latestUserJoin > strong").width()+75).addClass("fadeOut");return}if(typeof n.a==="number"){if(!alerts.noAlertPop){getNewData();console.log("got new alert from node server")}return}if(typeof n.pick_amount==="number"&&typeof n.active_item_id==="number"){var m=$("#iQ"+n.active_item_id);if(m.length){var a=parseInt(m.text());a=a-n.pick_amount;if(a>0){m.text(a)}else{m.closest("li").remove();if($("#itemPickup"+n.active_item_id).length){$("#itemPickup"+n.active_item_id).parent().parent().remove();f.e("Sorry, quantity just ran out.")}}}$("#itemPickUpdates").html("<span>"+n.username+" picked up "+n.pick_amount+' of <img src="'+n.img+'"></span>');return}if(typeof n.item_quantity==="number"&&parseInt(n.item_quantity)>0&&realtimeItems){var l=$("#activeItemsContainer");if(l.length){var c='<li class="itemsBox" id="itemId'+n.active_item_id+'">'+'<span class="itemPos"></span>'+'<img class="iImageB" onclick="items.pickItem('+n.active_item_id+');return false;" src="'+n.item_image+'">'+'<span class="itembottom"><span class="itemQ" id="iQ'+n.active_item_id+'">'+n.item_quantity+"</span>"+'<span class="itemTimer" id="iTime'+n.active_item_id+'">'+n.expire+"s</span></span>"+"</li>";var d=[n.expire*10,n.active_item_id,Math.floor(Date.now()/100)-epochDiffServer];window.itemJsTime.push(d);l.find("ul").prepend(c);clearInterval(window.itemPosTimer);itemPosTimer=setTimeout(function(){var e=$(".itemsBox").length;for(i=0;i<e;i++){if(i<11){$(".itemsBox").eq(i).find(".itemPos").text("#"+(i+1))}else{$(".itemsBox").eq(i).find(".itemPos").text("-")}}},350)}return}if(typeof n.youtube==="string"){makeLiveYT(n);return}if(typeof n.endVideo==="number"){$("#currPlaying").parent().hide()}}};if(!isRobot)nze.start();
var newTFixed=false;$(window).on("scroll",timeCheck);$(window).on("resize",resetNewTPx);var firstNewTpx=0;var newTOffset=0;var newTHeight=0;var idNewComms=$("#newComms");var winTop=0;var ajaxHeight;var newTpx=0;function timeCheck(){clearTimeout(window.bcheck);window.bcheck=setTimeout(newRepliesCheck,100)}function newRepliesCheck(){if(typeof idNewComms==="undefined"){return false}var e=idNewComms.offset();if(typeof e==="undefined")return false;winTop=$(window).scrollTop();ajaxHeight=$("#ajax_comm").height();newTHeight=idNewComms.height();newTOffset=e.top;newTpx=newTHeight+newTOffset;if(newTOffset>0&&winTop>newTpx){if(!newTFixed){if(firstNewTpx===0){firstNewTpx=newTOffset}newTFixed=true;idNewComms.addClass("boardFixed").css({top:loggedIn()?44:2,left:$("#columnLeftSeparator").offset().left+20})}}else if(newTFixed&&winTop<firstNewTpx){idNewComms.removeClass("boardFixed");idNewComms.css("top","");newTFixed=false;comments.wsNewThreads=0;comments.wsNewReplies=0;$("#newReplies, #newThreads, #newT").css("visibility","hidden")}}function resetNewTPx(){firstNewTpx=0;idNewComms.removeClass("boardFixed");idNewComms.css("top","");newTFixed=false;comments.wsNewThreads=0;comments.wsNewReplies=0;$("#newReplies, #newThreads, #newT").css("visibility","hidden")}
function addUserContentBlock(e,n,o){if(e&&n){$.ajax({context:o,url:"/blocks/addUserContentBlock",type:"post",data:{userIdToBlock:e},dataType:"json",success:function(e){if(e.msg==="success"){$(this).toggle();$("#removeUserContentBlock").css("display","inline-block");content.loadContent('<a href="'+window.location.pathname+'"></a>',true)}else{f.e(e.msg)}}})}}function RemoveUserContentBlock(e,n,o){if(e&&n){$.ajax({context:o,url:"/blocks/RemoveUserContentBlock",type:"post",data:{userIdToBlock:e},dataType:"json",success:function(e){if(e.msg==="success"){$(this).toggle();$("#addUserContentBlock").css("display","inline-block");content.loadContent('<a href="'+window.location.pathname+'"></a>',true)}else{f.e(e.msg)}}})}}function addUserChannelBlock(e,n,o){if(e&&n){$.ajax({context:o,url:"/blocks/addUserChannelBlock",type:"post",data:{channelIdToBlock:e},dataType:"json",success:function(e){if(e.msg=="success"){$(this).toggle();$("#removeUserChannelBlock").css("display","inline-block");content.loadContent('<a href="'+window.location.pathname+'"></a>',true)}else{f.e(e.msg)}}})}}function removeUserChannelBlock(e,n,o){if(e&&n){$.ajax({context:o,url:"/blocks/removeUserChannelBlock",type:"post",data:{channelIdToBlock:e,userId:n},dataType:"json",success:function(e){if(e.msg=="success"){$(this).toggle();$("#addUserChannelBlock").css("display","inline-block");content.loadContent('<a href="'+window.location.pathname+'"></a>',true)}else{f.e(e.msg)}}})}}function ClearUserContentBlocks(e,n){if(e){$.ajax({context:n,url:"/blocks/clearUserContentBlocks",type:"post",data:{userId:e},dataType:"json",success:function(e){if(e.msg=="success"){content.loadContent('<a href="'+window.location.pathname+'"></a>',true);return false}else{f.e(e.msg)}}})}}function ClearChannelBlocks(e,n){if(e){$.ajax({context:n,url:"/blocks/clearChannelBlocks",type:"post",data:{userId:e},dataType:"json",success:function(e){if(e.msg=="success"){content.loadContent('<a href="'+window.location.pathname+'"></a>',true);return false}else{f.e(e.msg)}}})}}
function customHandler(e,t,n,s){if(false){alert("The error was handled by "+"a customized error handler.\n"+"\nError description: 	"+e+"\nPage address:      	"+t+"\nLine number:       	"+n)}return true}if(typeof FJUserId=="undefined"){FJUserId=""}var FJUserSid="";var GROUP_LABEL="You";var FrameClosed=false;var AutoCheckerID=false;var FJConf={display_logs:false,display_trace:false,display_warnings:false,display_errors:false};if(typeof console=="undefined"||typeof console.warn=="undefined"){FJConf={display_logs:false,display_trace:false,display_warnings:false,display_errors:false}}else{var conf=$.cookie("FJConf");if(conf){conf=conf.split("|");FJConf={display_logs:conf[0],display_trace:conf[1],display_warnings:conf[2],display_errors:conf[3]}}}function strip_html_tags(e){e=e.replace(/&(lt|gt);/g,function(e,t){return t=="lt"?"<":">"});e=e.replace(/<\/?[^>]+(>|$)/g,"");return e}function Pagination(e,t,n,s){this.handler=e;if(typeof t!="undefined"){this.onclick=t.replace("/()/gi","")}if(typeof s=="undefined"){this.itemName=false}else{this.itemName=s}if(typeof n!="undefined"&&FJ.isNumeric(n)){this.count=n}else{this.count=5}}Pagination.prototype.display=function(e,t,n){if(typeof this.handler=="undefined"||!$("#"+this.handler)){FJ.error("Pagination error: wrong handler!");return}if(typeof this.onclick=="undefined"){FJ.error("Pagination error: wrong onclick function!");return}if(typeof e=="undefined"||t<=n){$("#"+this.handler).html("");return}if(typeof t=="undefined"||!FJ.isNumeric(t)){FJ.error("Pagination error: wrong count!");return}if(typeof n=="undefined"||!FJ.isNumeric(n)){FJ.error("Pagination error: wrong per page count!");return}count=this.count;var s=Math.floor(this.count/2);var i=Math.ceil(t/n);if(count>i){count=i}var r=e-s;var a=r+n;if(r<1){r=1;a=count}else{a=r+2*s;if(a>i){a=i;r=a-2*s;if(r<1){r=1}}}var o="";if(r>1){o+='<a href="#" onclick="'+this.onclick+'(1)">First</a>'}if(e>1){o+='<a href="#" onclick="'+this.onclick+"("+(e-1)+')">Previous</a>'}for(var l=r;l<=a;l++){if(l==e){o+="<strong>"+l+"</strong>"}else{o+='<a href="#" onclick="'+this.onclick+"("+l+')">'+l+"</a>"}}if(e<i){o+='<a href="#" onclick="'+this.onclick+"("+(e+1)+')">Next</a>'}if(a<i){o+='<a href="#" onclick="'+this.onclick+"("+i+')">Last</a>'}if(this.itemName){o+=" ["+t+" "+this.itemName;if(i>1){o+="s"}o+="]"}$("#"+this.handler).html(o)};function getColor(e){var t=e.match(/^.*\((\d+),\s*(\d+),\s*(\d+)\)$/);if(!t||typeof t=="string"){var n=e.split("#").join("")}else{delete t[0];for(var s=1;s<=3;++s){t[s]=parseInt(t[s]).toString(16);if(t[s].length==1){t[s]="0"+t[s]}}n=t.join("")}return n}function loggedIn(){return!(FJUserId==="deleted"||FJUserId===""||FJUserName===false||FJUserName===""||FJUserId===null||FJUserName===null)}function mustLogin(e){if(!loggedIn()){if(typeof e!="undefined"){FJ.changeCallback("onLoginSuccess",e)}users.showLoginForm();return false}return true}function isSessionServer(){return true}function showElements(e){if(e.substr(.1)!="."){e="."+e}$(e).each(function(){$(this).show()})}function hideElements(e,t){if(e.substr(.1)!="."){e="."+e}$(e).each(function(){if(typeof t!="undefined"&&this.id==t){}else{$(this).hide()}})}function getUserData(e,t,n){if(typeof n=="undefined"){n=false}if(n||!loggedIn()){if(!n){FJUserId=null!==$.cookie("userId")?$.cookie("userId"):"";FJUserName=null!==$.cookie("userName")?$.cookie("userName"):"";FJUserSid=null!==$.cookie("fjsession")?$.cookie("fjsession"):"";if(FJUserId=="deleted"){FJUserId=false;FJUserName=false;$.cookie("userId",null);$.cookie("userName",null)}}if((n||!loggedIn())&&FJON){if($.cookie("remember")){getNewData(e);return false}getNewData(e);return false}else{if(!n&&!loggedIn()&&$.cookie("remember")&&FJON){getNewData();return false}}}if(typeof e!="undefined"){FJ.callback(e,"getUserData")}return true}function loginn(e,t){url=$(e).attr("action");$(e).find("input[type=submit], button").attr("disabled","disabled");if(url.indexOf("ajaxlogin")>-1){var n=false;$("#loginForm_comm").addClass("loginForm_comm_loading").text("")}else{n=true;$(e).find("#signupForm_comm").addClass("singUp_form_loading").text("")}var s=new Date;$.ajax({type:"post",url:url,data:$(e).serialize(true)+"&user_gmt_time="+s.getTime()/1e3,success:function(s){var i=s||"Request Error";var r=i.split("|");if(r[0]=="OK"){try{if(n){loginSuccess(r[1],r[2],true)}else{if(typeof r[1]!="undefined"&&r[1]=="Old"){$(e).find("#loginForm_comm").removeClass("loginForm_comm_loading").text("");users.olduser_askCaptcha(r[2],r[3],r[4])}else{if(typeof r[3]!="undefined"&&r[3]=="first"){firstLogin=true}else{firstLogin=false}loginSuccess(r[1],r[2],firstLogin,function(){if(typeof t!=="undefined"&&t===true){document.location.href=document.location}else{if(!FJ.callbackExist("onLoginSuccess")){document.location.reload()}}});users.hideLoginForm()}}}catch(e){FJ.error(e.message+" "+e.lineNumber)}}else{if(n){$(e).find("#signupForm_comm").removeClass("singUp_form_loading").html(i).show();if($("#recaptcha_response_field")&&i.match(/captcha/gi)){Recaptcha.destroy();$("#only_reg_captcha5").empty();Recaptcha.reload()}}else{document.getElementById("loginForm_comm").style.height="auto";$(e).find("#loginForm_comm").removeClass("loginForm_comm_loading").html(i)}}$(e).find("input[type=submit], button").removeAttr("disabled","disabled")},error:function(){if(n){$(e).find("#signupForm_comm").text("Request Failed")}else{if($("#login_boxx_info").lenght>0){$(e).find("#loginForm_comm").text("Request Failed")}}$(e).find("#loginForm_comm").removeClass("loginForm_comm_loading").text("Request failed.");$(e).find("input[type=submit], button").removeAttr("disabled","disabled")}});return false}function loginSuccess(e,t,n,s){FJUserId=e;FJUserName=t;FJUserSid=$.cookie("fjsession");if(window.location.href.match("extLogin=1")){window.location.replace(SESSION_SERVER);return}if(typeof n!="undefined"&&n==true){document.location.href="/user/"+t;return}document.location.reload(true);return}function loginOpen(e){try{if(loggedIn()){users.makeLoggedIn();return false}else{users.showLoginForm(e);return false}}catch(e){FJ.error(e)}if(typeof event!="undefined"){event.returnValue=false}return false}function loginOpen2(e){if(loggedIn()){makeLoggedIn();window.location.href=e;return false}FJ.addOneCallback("onLoginSuccess",function(){window.location.href=e});loginOpen();if(typeof event!="undefined"){event.returnValue=false}return false}function loginOpen3(e){if(loggedIn()){makeLoggedIn();window.location.href=e;return false}FJ.addOneCallback("onLoginSuccess",function(){window.location.href=e});loginOpen();if($("#loginBox_addonText").length>0){$("#loginBox_addonText").html("<p style=\"padding-left: 5px; padding-right: 5px;\">You must login first to upload. Don't have an account? Register now (It's free and takes seconds).</p>")}if(typeof event!="undefined"){event.returnValue=false}return false}function loginClose(){$("#loginWindow").hide()}function frameClose(){FrameClosed=true;loginClose()}function registerOpen(){$("#loginBox").hide();$("#registerSuccess").hide();$("#registerButtonBox").hide();$("#register_boxx_info").hide();$("#reg_form").show();$("#registerBox").show();if(!$("#reg_form").length>0){$("#registerBoxContent").html('<img src="'+SCRIPT_URL+"site/"+SITE_NAME+'/images/userbar/aload2.gif">');$.ajax({type:"get",url:"/userbar/getsignup",success:function(e){$("#registerBoxContent").html(e)},error:function(){$("#registerBoxContent").text("Request error")}})}loadCaptcha("rregForm")}function passwordRecoveryOpen(){$("#passwordRec_info").hide();$("#passwordRecoveryWindow").show();loadCaptcha("passwordRec");loginClose();return true}function setNewPassword(e){var t=$("#recPass1").get(0);var n=$("#recPass2").get(0);var s=$(e);if(t.value!=n.value){$("#recerror").show();$("#recerror").html('<p style="color: red;">Please type your password twice</p>');return false}if(t.value.length<8){$("#recerror").show();$("#recerror").html('<p style="color: red;">Your password must be at least 8 characters long</p>');return false}var i="/ajax/setNewPass/";$.ajax({type:"post",url:i,data:s.serialize(),success:function(e){if(e=="OK"){$("#recerror").show();$("#setNewPass, #pass_recover_form").hide();$("#recerror").html('<p class="greenLight bold aCenter">Password changed<br /><br /><a href="/member" onclick="loginAndGoToMainPage(); return false;">Click here to login</a></p>')}else{f.e(e)}},error:function(){$("#recerror").html('<p style="color: red;">Request Failed. Please try again.</p>')}});return false}function loginAndGoToMainPage(){FJ.changeCallback("onLoginSuccess",function(){document.location.href="/"});users.showLoginForm()}function passwordRecover(e){$("#passwordRec_info").html('<img src="'+SCRIPT_URL+"site/"+SITE_NAME+'/images/userbar/aload2.gif">');$("#passwordRec_info").show();$.ajax({type:"post",url:"/userbar/password",data:$(e).serialize(true),success:function(e){var t=e.split("|");if(t[0]=="OK"){$("#passwordRec_info").hide();$("#passwordRecoveryWindow").hide();FJ.alert(t[1])}else{$("#passwordRec_info").html(e)}},error:function(){$("#passwordRec_info").text("Request Failed")}});return false}function makeLoggedIn(e){users.makeLoggedIn()}function makeLoggedOut(){users.makeLoggedOut()}function synchronizeSession(e){if(FJON){AutoCheckerID=setInterval(function(){autoChecker()},5e3)}if(loggedIn()){users.makeLoggedIn()}else{makeLoggedOut()}}function autoChecker(e,t){if(nze.connected&&!t)return false;if(FJUserId!=""||FJUserId!="nu11"){if(!e){if(!FJ.callbackExist("aCheck")){FJ.addCallback("aCheck","autoChecker(true)")}if(loggedIn()){getNewData("aCheck")}else{loop=0;getUserData("aCheck",false,true);if(loggedIn()){getNewData()}}return}if(loggedIn()){if(!isSessionServer()){getNewData()}makeLoggedIn()}else{makeLoggedOut()}}}function closeTabs(e){hideElements("userbarTab",e);$(".userbarButton").each(function(){if(typeof e!="undefined"&&this.id==e){}else{$(this).removeClass("userbarButtonCurrent")}})}function hideTab(e,t){closeTabs(e);$("#"+e).hide();$("#"+t).removeClass("userbarButtonCurrent")}function showTab(e,t){closeTabs(e);$("#"+e).show();$("#"+t).addClass("userbarButtonCurrent")}function toggleTab(e,t){closeTabs(e);$("#"+e).toggle();if($("#"+e).is(":hidden")){$("#"+t).removeClass("userbarButtonCurrent")}else{$("#"+t).addClass("userbarButtonCurrent")}}function favoritesTab(){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",favoritesTab);loginOpen();return}$("#favoritesContainer").remove();$("#favoritesListContainer").remove();var e=$('<div id="favoritesContainer" name="favorites">');var t={comment:"Comments",allcontent:"All Content",links:"Text/Links",picture:"Pictures",animation:"Animated Gifs",hdgifs:"Hdgifs",video:"Videos",youtube:"YouTube Videos"};FJFav.type=FJUserBar.get("favType");if(FJFav.type==null){FJFav.type="allcontent"}var n='<span id="favTabs" class="popTabs">';for(var s in t){n+='<span rel="'+s+'"'+(FJFav.type==s?' class="selected"':"")+">"+t[s]+"</span>"}n+="</span>";var i='<div id="favoritesSortBy" class="clearfix">';i+='<div class="left">';i+="<strong>Sort by: </strong>";i+='<a id="fav_title" href="#favorites" onclick="FJFav.changeSorting(\'title\');">Name</a>';i+='<a id="fav_date" href="#favorites" onclick="FJFav.changeSorting(\'date\');">Date</a>';i+='<a id="fav_thumbs" class="sortByLast" href="#favorites" onclick="FJFav.changeSorting(\'thumbs\');">Most thumbs</a>'+'<div style="'+(!nsfwMode?"display:none;":"")+'text-align: left; margin: 8px 0 0;"><span onclick="FJFav.nsfwFav(this)" class="nsfwBg3 favNsfw">'+'NSFW?<input class="nsfwFavCheck" type="checkbox" style="pointer-events: none;vertical-align: top;\n    margin: 1px 0 0 8px;\n"></span></div>'+"</span>";i+="</div>";i+='<div class="right">';i+='<button id="deleteAllFavoritesButton" type="button" onclick="return FJFav.deleteAllFavorites();">Delete all favorites</button>';i+="</div>";i+="</div>";var r=$("<div>").attr({id:"favoritesHeader",class:"clearfix"}).html(n+i);var a=$("<div>").attr({id:"favoritesListContainer"}).css("clear","both");e.html(r).append(a);e.dialog({width:$(window).width()>=620?620:"90%",height:450,minHeight:300,maxHeight:600,title:"Favorites",resizable:true,close:function(){FJFav.close();$(this).remove()},buttons:{Close:function(){$("#favoritesContainer").remove();$(this).dialog("close")}}}).parent().attr("id","favBoxxy");$("#favoritesHeader .popTabs > span ").on("click",function(){$("#favoritesHeader .popTabs > span").removeClass("selected");if(!$(this).hasClass("selected")){$(this).addClass("selected");FJFav.type=$(this).attr("rel");FJUserBar.set("favType",FJFav.type);FJFav.openn()}});$("#favoritesHeader a").on("click",function(){$("#favoritesHeader").find("a").removeClass("selected");$(this).addClass("selected")});FJFav.openn()}function pmTab(){if(alerts.pmIsOpen===true){$("#pmBox").remove();alerts.pmIsOpen=false;return false}if(typeof window.itsReady==="undefined"){$(document).ready(function(){window.itsReady=true;pmTab()});return false}if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){return pmTab();s});loginOpen();return false}$("#privMsgContainer").empty().remove();var e=$("<div>").attr("id","privMsgContainer");var t='<span class="showFolder active" id="showFolder_inbox" onclick="FJMsg.showFolder(\'inbox\');return false;">';t+='Inbox (<span id="pmTabUnread_inbox">'+FJMsg.folderSum["pmTabUnread_inbox"]+"</span>/";t+='<span id="pmTabAll_inbox">'+FJMsg.folderSum["pmTabAll_inbox"]+"</span>)</a></span>";t+='<span id="showFolder_sent" class="showFolder" onclick="FJMsg.showFolder(\'sent\');return false;">';t+='Sent (<span id="pmTabUnread_sent">'+FJMsg.folderSum["pmTabUnread_sent"]+"</span>/";t+='<span id="pmTabAll_sent">'+FJMsg.folderSum["pmTabAll_sent"]+"</span>)</a></span>";t+='<span id="emptyInboxButton"  class="showFolder nsfwBackground" onclick="FJMsg.emptyFolder(\'inbox\');return false;">Empty Inbox</span>';var n=$("<div>").attr("class","popTabs").html(t);var i=$("<div>").attr("id","inboxContainer").addClass("w8");var r=$("<div>").attr("id","pmPag");e.append(n).append(i).append(r);e.dialog({title:"Inbox",dialogClass:"no-titlebar",resizable:true,close:function(){$(this).remove();alerts.pmIsOpen=false},open:function(){var e='<div class="extraInfo" onclick='+"\"users.editAccount( function(){ $('#profilePopup_privacy').trigger('click'); }); return false;\""+">[ Manage PM settings, privacy, etc. ]</div>"+'<div class="extraInfo shortCutInfo">Press "Q" anywhere to toggle alerts.</div>';$(this).closest(".ui-dialog").find(".ui-dialog-buttonpane button").before(e);alerts.pmIsOpen=true;$(this).parent().css({"margin-right":"10px",position:isMobile?"absolute":"fixed",top:"45px",width:"800px",left:"calc(50% - 400px)"}).attr("id","pmBox").topz().on("mousedown",function(){$(this).topz()});$(window).scrollTop($("#pmBox"))},buttons:{Close:function(){$(this).dialog("close");$("#privMsgContainer").empty().remove();alerts.pmIsOpen=false}}});FJMsg.openn();return false}var sInboxLeft="";function sPmTab(){if(typeof window.itsReady==="undefined"){$(document).ready(function(){window.itsReady=true;sPmTab()});return false}if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){return sPmTab()});loginOpen();return false}$("#privMsgContainer").empty().remove();$.ajax({url:"/ajax/getStaffInboxLeft",success:function(e){if($.trim(e)!=""){var t=$("<div>").attr("id","privMsgContainer");var n=e;var s=$("<div>").attr("class","popTabs").html(n);var i=$("<div>").attr("id","inboxContainer").addClass("w8");var r=$("<div>").attr("id","pmPag");t.append(s).append(i).append(r);t.dialog({title:"Inbox",resizable:true,close:function(){$(this).empty().remove();alerts.pmIsOpen=false},open:function(){$(this).parent().css({"margin-right":"10px",position:isMobile?"absolute":"fixed",width:"800px",left:"calc(50% - 400px)"}).attr("id","pmBox").topz().on("mousedown",function(){$(this).topz()});$(window).scrollTop($("#pmBox"));var e='<div class="extraInfo" onclick='+"\"users.editAccount( function(){ $('#profilePopup_privacy').trigger('click'); }); return false;\""+">[ Manage PM settings, privacy, etc. ]</div>"+'<div class="extraInfo shortCutInfo">Press "Q" anywhere to toggle alerts.</div>';$(this).closest(".ui-dialog").find(".ui-dialog-buttonpane button").before(e);alerts.pmIsOpen=true},buttons:{Close:function(){alerts.pmIsOpen=false;$(this).dialog("close");$("#privMsgContainer").empty().remove()}}});FJMsg.openn();FJMsg.initInbox();return false}}});return false}function myProfile(){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){myProfile()});loginOpen();return}document.location.href="/members/"}function showProfile(){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){showProfile()});loginOpen();return false}if(!$("#profileWindowContent").length>0){return false}$("#profileWindow").show();if(!$("#profileEditForm").length>0){$("#profileWindow_info").html('<img src="'+SCRIPT_URL+"site/"+SITE_NAME+'/images/userbar/aload2.gif">');$.ajax({type:"get",url:"/userbar/getprofile",success:function(e){$("#profileWindow_info").text("");$("#profileWindowContent").html(e);$("body").append($("#extraProfileWindows").html());$("#extraProfileWindows").remove()},error:function(){$("#profileWindow_info").text("Request error")}})}return false}function accountDeleteOpen(){$("#accountDeleteWindow").toggle();$("#adw_message").text("")}function accountDeleteClose(){$("#accountDeleteWindow").hide()}function accountDelete(e){$.ajax({type:"post",url:"/userbar/accountdelete",data:$(e).serialize(),success:function(e){data=e.split("|");if(data[0]=="OK"){document.location.href="/"}else{$("#adw_message").html(e);$("#adw_message").show();FJ.error(e)}},error:function(){}})}function resendActivationOpen(){$("#resendActivationWindow").toggle();$("#raw_message").text("")}function resendActivationClose(){$("#resendActivationWindow").hide()}function resendActivation(e){$.ajax({type:"post",url:"/userbar/resendactivation",data:$(e).serialize(),success:function(e){data=e.split("|");if(data[0]=="OK"){$("#raw_message").html(data[1])}else{$("#raw_message").html(e);FJ.error(e)}},error:function(){}})}function editProfile(e,t){$("#profileWindow_info").empty().addClass("w8").show("fast");$.ajax({type:"post",url:"/userbar/setprofiledata",data:$(e).serialize(true),success:function(n){if(n==""&&$(e).find("#password2").val()!=""&&$(e).find("#passwordRegisterMember2").val()!=""){users.logout("An unexpected error occurred. You have been logged out to avoid damage to messages.")}var s=n||"Request Error";var i=s.split("|");if(i[0]=="OK"){try{if(t==true){document.location.reload()}}catch(e){}document.location.reload();$(e).dialog("close")}else{f.e(s);$("#old_pass").val("")}},failure:function(){$("#profileWindow_info").removeClass("w8");$("#profileWindow_info").html(response)},error:function(){if($(e).find("#password2").val()!=""&&$(e).find("#passwordRegisterMember2").val()!=""){users.logout("An unexpected error occurred. You have been logged out to avoid damage to messages.")}}});return false}function setMaxlength(e,t,n){t=parseInt(t);var s=$("#"+e+" textarea");if(n){$("#"+n).text(t-s.val().length)}else{$("#"+e).find(".charsRemaining").text(t-s.val().length)}s.keypress(function(s){var i=s.which;if(i>=33||i==13){var r=this.value.length;if(r>=t){s.preventDefault()}}if(n){$("#"+n).text(t-$(this).val().length)}else{$("#"+e).find(".charsRemaining").text(t-$(this).val().length)}})}function processUserDataJSON(e,t){if(typeof e.ss!="undefined"){setUserData(t,e.ss)}if(loggedIn()){FJFriends.addOnlineUsers(e.users);FJMsg.addNewData(e.pm);alerts.setSoundStat(e.ss.alert_sound);alerts.setNum(e.ua.count);if(e.ua.count>0&&e.us.bottompopup=="1"){if(e.alert.length>0){alerts.popupdata=e.alert;alerts.generateRightPopup($("#rightPopupAlert"))}}if(typeof e.fav!="undefined"){FJFav.addNewData(e.fav)}if(typeof e.subs!="undefined"){FJSubs.addNewData(e.subs)}if(typeof e.isB!="undefined"&&e.isB==true){users.logout()}if(typeof e.er!="undefined"){}if(typeof e.is!="undefined"){FJItems.updateItemsInfo(e.is)}}}function getNewData(e,t){if(!FJON){return}var n={};n.bar=1;if(typeof e!="undefined"&&isSessionServer()&&loggedIn()){n.ss=1}if(!FJMsg.opened){n.st=1}if(typeof pmData.inbox.data!="undefined"&&typeof pmData.inbox.data.last!="undefined"){n.lm=pmData.inbox.data.last}if(typeof pmData.copyright.data!="undefined"&&typeof pmData.copyright.data.last!="undefined"){n.cpm=pmData.copyright.data.last}if(typeof pmData.abuse.data!="undefined"&&typeof pmData.abuse.data.last!="undefined"){n.abm=pmData.abuse.data.last}$.ajax({type:"get",url:"/userbar/getnewdata/",data:n,dataType:"json",success:function(n){if(typeof n.redirect!="undefined"){if(!FJ.isInUrl(n.redirect)){document.location.href=n.redirect}return}processUserDataJSON(n,e);if(t){t.call()}},error:function(){if(t){t.call()}}})}function setUserData(e,t){if(t.hasOwnProperty("userId")){if(t.userName!==FJUserName){location.reload();return false}FJUserId=t.userId;FJUserName=t.userName;FJUserSid=$.cookie("fjsession");if(t.hasOwnProperty("label")){GROUP_LABEL=t["label"]}}if(t.hasOwnProperty("avatar")){FJUserAvatar=t.avatar}if(t.hasOwnProperty("im")){FJChatPolicy=t.im}if(e){FJ.callback(e)}}var FJUserBar={};FJUserBar.get=function(e){var t=null;var n=$.cookie("fjUserBar");if(n!=null){n=JSON.parse(n);t=n[e]}return t};FJUserBar.set=function(e,t){var n=$.cookie("fjUserBar");n=n!=null?JSON.parse(n):{};n[e]=t;$.cookie("fjUserBar",JSON.stringify(n),{expires:30,path:"/"})};var FJBlock={block:function(e,t,n,s){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJBlock.block(e,t,n,s)});loginOpen();return false}var i="Block this user from commenting on your content, sending you mail, viewing your profile, or inviting you to be a friend?";if(!dialog.confirm("Block user?",i,function(){FJBlock.block(e,t,n,s);return false})){return false}if(n){$(n).off().click(function(){FJBlock.unBlock(e,t,$(this));return false}).text("Unblock").attr("title","Unblock").removeAttr("onclick")}$.ajax({type:"post",url:"/userbar/block/",data:{userId:e},success:function(t){if(t=="OK"){if(FJFriends.cache.friends!=null){FJFriends.opennIf()}FJFriends.remove(e,false,true,false,true);$(".userBlockF").addClass("hidden");$(".userUnblockF").removeClass("hidden");$("#block").css("display","none");$("#unblock").css("display","inline-block");f.s("User has been blocked");if(FJCHAT&&fjChat.isConnect()){fjChat.update()}if(s!=undefined){s.call()}}else{dialog.alert(t)}},error:function(){}});return false},unBlock:function(e,t,n){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJBlock.unBlock(e,t,n)});loginOpen();return false}if(!dialog.confirm("Confirmation","Are you sure you want to unblock <strong>"+t+"</strong>?",function(){FJBlock.unBlock(e,t,n);return false})){return false}if(n!=undefined){$(n).off().click(function(){FJBlock.block(e,t,$(this));return false}).text("Block").attr("title","Block").removeAttr("onclick")}$("#friendsListContainer").addClass("dialogBlackW8");$.ajax({type:"post",url:"/userbar/unblock/",data:{userId:e},success:function(t){var n=t||"Request Error";if(n=="OK"&&FJFriends.cache.friends!=null){deleteJSONItem(FJFriends.cache.blocked,"id",e);if(FJFriends.current!=undefined){var s=0;for(var i in FJFriends.cache.blocked){s++}if(s<=2){FJFriends.tab(FJFriends.current,FJFriends.pagination.bpage-1)}else{FJFriends.tab(FJFriends.current)}}FJMsg.changeBlockade(e,0);$(".userBlockF").removeClass("hidden");$(".userUnblockF").addClass("hidden");if(FJCHAT&&fjChat.isConnect()){fjChat.update()}f.s("User has been unblocked")}else{$(".userBlockF").removeClass("hidden");$(".userUnblockF").addClass("hidden");dialog.alert(n)}$("#unblock").css("display","none");$("#block").css("display","inline-block");$("#friendsListContainer").removeClass("dialogBlackW8")},error:function(){$("#friendsListContainer").removeClass("dialogBlackW8");f.e("Request failed")}});return false},blockIP:function(e,t,n){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJBlock.blockIP(e,t,n)});loginOpen();return false}if(n=="forum"){var s="Block this IP address from posting on your threads?"}else{var s="Block this IP address from commenting on your content or profile?"}var i='<div id="blockUserText"><p>'+s+"</p>"+"</div>";if(!dialog.confirm("Confirmation",i,function(){FJBlock.blockIP(e,t,n)})){return false}var r="/userbar/blockip/"+e+"/"+n;$.ajax({type:"get",url:r,success:function(s){$(t).removeAttr("onclick").off().click(function(){FJBlock.unblockIP(e,t,n);return false}).text("Unblock IP");return false},error:function(){alert("Request Failed")}});return false},unblockIP:function(e,t,n){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJBlock.unblockIP(e,t,n)});loginOpen();return false}var s="Are you sure you want to <strong>unblock this IP address?</strong>";if(!dialog.confirm("Confirmation",s,function(){FJBlock.unblockIP(e,t,n)})){return false}$.ajax({type:"get",url:"/userbar/unblockip/"+e+"/"+n,success:function(n){$(t).removeAttr("onclick").off().click(function(){FJBlock.blockIP(e,t);return false}).text("Block IP");return false},error:function(){alert("Request Failed")}});return false}};function deleteUserContent(e,t,n){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){deleteUserContent(e,t,n)});loginOpen();return false}if(dialog.confirmed==false){dialog.confirmed=null}var s="Are you sure you want to delete this content?";if(!dialog.confirm("Delete content?",s,function(){deleteUserContent(e,t,n)})){return false}$.ajax({type:"post",url:"/ajax/deleteContent/"+e+"/undefined",success:function(e){if(e==""){if(n==undefined){$(t).parents("li").fadeOut("fast")}else{if(n==true){window.location.href="/"}}}else{dialog.alert(e)}},error:function(){dialog.alert("Could not delete the content")}});return false}function friendsTab(e){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){friendsTab()});loginOpen();return}$("#friendsContainer").remove();$("#friendsListContainer").remove();var t=FJUserBar.get("friendsType");if(t==null){t="friends"}var n=$('<div id="friendsContainer" name="friends">');var s='<div class="popTabs"><span class="fTab'+(t=="friends"?" activeTab":"")+'" id="fTabFriends">Friends (<span id="fFriendsOverall">'+FJFriends.status.friends+"</span>)</span>";s+='<span class="fTab'+(t=="blocked"?" activeTab":"")+'" id="fTabBlocked">Blocked users (<span id="fBlockedUsers">'+FJFriends.status.blocked+"</span>)</span>";s+='<span class="fTab'+(t=="requests"?" activeTab":"")+'" id="fTabRequestsReceived">Requests received (<span id="fRequestReceived"'+(FJFriends.status.requestsReceived>0?' style="color: red;"':"")+">"+FJFriends.status.requestsReceived+"</span>)</span>";s+='<span class="fTab'+(t=="requestsReceived"?" activeTab":"")+'" id="fTabRequests">Requests sent (<span id="fRequestsFriends" style="">'+FJFriends.status.request+"</span>)</span>";s+="</div>";var i=$("<div>").attr({id:"friendsListContainer"}).css("clear","both");n.html(s).append(i);n.dialog({width:"90%",maxWidth:"800px",minWidth:$(window).width()>=665?"auto":"90%",height:430,minHeight:430,maxHeight:800,title:"Friends Interface",resizable:true,open:function(){if(e!=null){e.call()}},buttons:{Close:function(){$(this).dialog("close")}}}).parent().attr("id","fronds");FJFriends.open(n);$("#friendsContainer .popTabs > span ").off().on("click",function(){$(".fTab").removeClass("activeTab");$(this).addClass("activeTab");var e=$(this).attr("id");switch($(this).attr("id")){case"fTabFriends":e="friends";break;case"fTabBlocked":e="blocked";break;case"fTabRequests":e="requests";break;case"fTabRequestsReceived":e="requestsReceived";break}FJUserBar.set("friendsType",e);FJFriends.tab(e)})}function itemsTab(e){if(!items.tpls){items.loadTpls(function(){itemsTab(e)});return false}if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){itemsTab()});loginOpen();return}$("#itemsContainer").remove();$("#itemsListContainer").remove();itemsType="items";var t=$('<div id="itemsContainer"">');var n='<span class="popTabs"><span href="#items" class="iTab'+(itemsType=="items"?" activeTab":"")+'" id="iTabItems">Items (<span id="iItemsOverall">'+FJItems.status.items+"</span>)</span>";if(typeof ITEM_TRADING_ENABLED!="undefined"&&ITEM_TRADING_ENABLED){n+='<span class="iTab'+(itemsType=="requestsReceived"?" activeTab":"")+'" id="iTabRequestsReceived">Requests received (<span id="iRequestReceived"'+(FJItems.status.requestsReceived>0?' style="color: red;"':"")+">"+FJItems.status.requestsReceived+'</span>)</span><span class="iTab'+(itemsType=="requests"?" activeTab":"")+'" id="iTabRequests">Requests sent (<span id="iRequests" style="">'+FJItems.status.request+'</span>)</span><span class="iTab'+(itemsType=="offers"?" activeTab":"")+'" id="iTabOffers">Offers(<span id="iOffers" style="">'+FJItems.status.offers+"</span>)</span></span>"}n+="</div>";var s=$("<div>").attr({id:"itemsListContainer"}).css("clear","both").css("padding-top","5px");t.html(n).append(s);t.dialog({width:$(window).width()>=665?665:"90%",title:"Items Interface",resizable:true,open:function(){if(e!=null){e.call()}},buttons:{Close:function(){$(this).dialog("close")},Workshop:function(){items.combineItems()},"Auction House":function(){window.location.href="/item/auction"}}});FJItems.open(t,itemsType);$('div[aria-describedby="itemsContainer"] .popTabs > span').off().on("click",function(){$('div[aria-describedby="itemsContainer"] .popTabs > span').removeClass("activeTab");$(this).addClass("activeTab");var e=$(this).attr("id");switch($(this).attr("id")){case"iTabItems":e="items";break;case"iTabRequests":e="requests";break;case"iTabRequestsReceived":e="requestsReceived";break;case"iTabOffers":e="offers";break}FJUserBar.set("itemsType",e);FJItems.tab(e)});return false}function askToChat(e,t){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){askToChat(e,t)});loginOpen();return}$(document).ready(function(){if(fjChat.isConnect()){channelManager.createPrivateChat(t)}else{alert("Connecting to chat server. Please try again in a few seconds.")}})}var permissions={data:null,list:null,current:null,elem:"#pCnt",show:function(e){if(e==undefined){return}this.makeContainer(e)},makeContainer:function(e){$("#permissionsContainer").remove();var t=$('<div id="permissionsContainer">');t.append('<div id="pCnt"></div>');t.dialog({width:485,maxWidth:485,minWidth:485,height:400,minHeight:400,maxHeight:800,title:"Permissions",resizable:true,buttons:{Close:function(){$(this).dialog("close")},"Show all groups":function(){permissions.load($(permissions.elem),"list",e)},Back:function(){permissions.load($(permissions.elem),"show")}}});this.addIdToButtons();this.hideb("perm_back");this.load($(this.elem),"show",e)},addIdToButtons:function(){$(".ui-dialog-buttonpane").find('button:contains("Back")').attr("id","perm_back");$(".ui-dialog-buttonpane").find('button:contains("Show all groups")').attr("id","perm_show_all")},hideb:function(e){$("#"+e).hide()},showb:function(e){$("#"+e).show()},load:function(e,t,n){if(t==undefined||t=="show"){if(permissions.current!=null){e.html(permissions.generateHtml(permissions.current,t,n))}else{$.ajax({type:"get",url:"/userbar/getpermission/"+n+"/",dataType:"json",success:function(n){permissions.current=n;e.html(permissions.generateHtml(n,t))},error:function(){f.e("Request failed")}})}permissions.hideb("perm_back");permissions.showb("perm_show_all")}else{if(t=="details"){if(permissions.list!=null){e.html(permissions.generateHtml(permissions.list,t,n))}permissions.hideb("perm_back");permissions.showb("perm_show_all")}else{if(t=="list"){if(this.list!=null){e.html(permissions.generateHtml(permissions.list,t))}else{$.ajax({type:"get",url:"/userbar/getpermissions/",dataType:"json",success:function(n){permissions.list=n;e.html(permissions.generateHtml(permissions.list,t))},error:function(){f.e("Request failed")}})}permissions.setTitle("Permissions list");permissions.showb("perm_back");permissions.hideb("perm_show_all")}}}},setTitle:function(e){$("#permissionsContainer").dialog("option","title",e)},generateHtml:function(e,t,n){var s="<table>";if(t==undefined||t=="show"){for(key in e){s+=this.generateRecord(e[key])}}else{if(t=="details"){for(key in e){if(key==n){s+=this.generateRecord(e[key])}}
}else{if(t=="list"){for(key in e){for(r in e[key]){s+=permissions.generateName(e[key][r],key)}}}}}s+="</table>";return s},generateRecord:function(e){var t="";for(r in e){if(e[r].name!=undefined){this.setTitle(e[r].name)}t+=this.generateLine(e[r])}return t},generateName:function(e,t){var n="";if(e.name!=undefined){n+='<tr><td class="pink "><a href = "#" onclick = "permissions.load($(\''+this.elem+"'), 'details', "+t+');">'+e.name+"</a></td></tr>"}return n},generateLine:function(e){var t="";if(e.desc!=undefined&&e.title!=undefined){t='<tr><td class="pink ">'+e.title+"</td><td>"+e.desc+"</td></tr>"}else{if(e.info!=undefined){t='<tr><td colspan="2"><span class="s10px">'+e.info+"</span></td></tr>"}else{if(e.link!=undefined){t='<tr><td colspan="2"><span class="s10px"><a onclick="'+e.onclick+'" href="'+e.href+'">'+e.link+"</a></span></td></tr>"}}}return t}};function loginOlduser(){var e=$("#userForm").serialize();$("#userPopError").empty().removeClass("red pt10").addClass("newPopW8").show("fast");$.ajax({type:"post",url:"/ajax/old_userCaptcha/",data:e,success:function(e){var t=e||"Request Error";var n=t.split("|");if(n[0]=="OK"){users.hideCaptchaForm();loginSuccess(n[1],n[2],false);users.hideLoginForm();document.location.reload()}else{$("#userPopError").addClass("red pt10").html(t).show().removeClass("newPopW8")}},error:function(){FJ.alert("Request Failed :(")}})}var bb={_emots:[[":\\)","icon_e_smile.gif"],[";\\)","icon_e_wink.gif"],[":\\(","icon_e_sad.gif"],[";\\(","icon_cry.gif"],[":D|:d|;D|;d","icon_e_biggrin.gif"],["xD","icon_mrgreen.gif"]],parse:function(e){var t=this._cutUrls(e);e=t[0];e=this.wordWrap(e,30);e=this._insertUrls(e,t[1],true);for(s in this._emots){var n=new RegExp("("+this._emots[s][0]+")","gi");e=e.replace(n,'<img src="'+chatEmotsDir()+this._emots[s][1]+'" alt="$1">')}return e},_findUrls:function(e){var t=new RegExp("((((ht|f)tps?://)|(www\\.))"+"((([a-z0-9]+\\.)+"+"[a-z]{2,6})|([0-9\\.]+))"+"([0-9a-z_!~\\*'()\\.;\\?:@&=\\+\\$,%\\#-\\?]*)?)","gi");text2=e.replace(t,"<#&B><#&S>$1<#&E>");var n=text2.split("<#&B>");var s=new Array;for(m in n){if(typeof n[m]=="string"){var i=n[m].split("<#&E>")[0];if(i.substr(0,5)=="<#&S>"){s.push(i.split("<#&S>")[1])}}}return s},_cutUrls:function(e,t){if(t==undefined){t=this._findUrls(e)}var n=new Object;for(u in t){e=e.split(t[u]).join("<#&_"+u+">");n[u]=["<#&_"+u+">",t[u]]}return[e,n]},_insertUrls:function(e,t,n){if(n!=undefined&&n==true){for(u in t){if(typeof t[u][1]=="string"){var s=t[u][1].substr(0,3);var i=s=="htt"||s=="ftp"?t[u][1]:"http://"+t[u][1];e=e.split(t[u][0]).join('<a target="_blank" href="'+i+'">'+t[u][1]+"</a>")}}}return e},wordWrap:function(e,t){var n=e.split(" ");var s=n.length;for(w in n){if(n[w].length>t){n[w]=n[w].substr(0,t)+" "+n[w].substr(t,n[w].length);if(n[w].length>2*t){n[w]=this.wordWrap(n[w],t)}}}return n.join(" ")}};(function(e){e.fn.textBlink=function(t){var n={start:0,delay:500,alt:false};if(t=="stop"){this.each(function(){var t=e(this);if(t.data("blink")||t.data("blink2")){i(t)}});return this}if(t){e.extend(n,t)}var s=function(e){if(e.data("blink")||e.data("blink2")){i(e)}var t=false;e.data("alt",n.alt);if(n.alt!==false){t=true;e.data("html",e.html())}var s=1;if(t){var r=setInterval(function(){if(s){e.html(e.data("alt"));s=0}else{e.html(e.data("html"));s=1}},n.delay);e.html(e.data("alt"));s=0}else{var r=setInterval(function(){if(s){e.css("visibility","hidden");s=0}else{e.css("visibility","visible");s=1}},n.delay);e.css("visibility","hidden");s=0}e.data("blink",r)};this.each(function(){if(n.start){var t=e(this);var i=setTimeout(function(){t.removeData("blink2");s(t)},n.start);t.data("blink2",i);return}s(e(this))});function i(e){if(e.data("blink2")){clearTimeout(e.data("blink2"));e.removeData("blink2");return}clearInterval(e.data("blink"));e.removeData("blink");if(e.data("alt")!==false){e.html(e.data("html")).removeData("html").removeData("alt")}else{e.css("visibility","visible")}}return this}})(jQuery);(function(e){e.fn.autoResize=function(t){var n=e.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1e3},t);this.filter("textarea").each(function(){var t=e(this).css({resize:"none","overflow-y":"hidden"}),s=t.height(),i=function(){var n=["height","width","lineHeight","textDecoration","letterSpacing"],s={};e.each(n,function(e,n){s[n]=t.css(n)});return t.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(s).attr("tabIndex","-1").insertBefore(t)}(),r=null,a=function(){o();i.height(0).val(e(this).val()).scrollTop(1e4);var a=Math.max(i.scrollTop(),s)+n.extraSpace,l=e(this).add(i);if(r===a){if(!used){newH=Math.ceil(e(this).val().length*9/e(this).width())*14;if(newH>=n.limit){e(this).css("overflow-y","");return}if(newH==14){newH=16}if(newH!=e(this).height()&&newH>=16){e(this).height(newH)}}return}if(!r){used=true}if(a>=n.limit){e(this).css("overflow-y","");return}n.onResize.call(this);n.animate&&t.css("display")==="block"?l.stop().animate({height:a},n.animateDuration,n.animateCallback):l.height(a)},o=function(){i.width(t.width())};t.unbind(".dynSiz").bind("keyup.dynSiz",a)});return this}})(jQuery);var Reports={_reports:Object(),start:function(e,t,n,s){if(typeof this._reports[e]!="undefined"&&this._reports[e]){if(s!=undefined){FJ.addOneCallback("reports_"+e,s);this._reports[e]=setTimeout(function(){FJ.callback("reports_"+e)},n*1e3)}return}this._reports[e]=setTimeout(function(){Reports.report(e,t)},n*1e3);if(s!=undefined){FJ.addOneCallback("reports_"+e,s)}},stop:function(){for(i in this._reports){clearTimeout(this._reports[i])}},end:function(e){clearTimeout(this._reports[e]);FJ.removeCallback("reports_"+e);this._reports[e]=false},report:function(e,t,n){if(this._reports[e]===true){return}clearTimeout(this._reports[e]);this._reports[e]=true;if(typeof n=="undefined"||n==false){n=0}if(t==undefined){t=""}if(n===false){s={type:e,message:t}}else{try{var s={message:t,line:n,ver:chat.version,fjUserId:FJUserId,fjUserName:FJUserName,fjUserSid:FJUserSid,pos:$.cookie("fjchat")}}catch(e){return}}var i={type:e,data:chat.serialize(s,true)}}};function getNewPmData(){if(!FJON){return}var e={};if(!FJMsg.opened){e.st=1}if(typeof pmData.inbox.data!="undefined"&&typeof pmData.inbox.data.last!="undefined"){e.lm=pmData.inbox.data.last}if(typeof pmData.copyright.data!="undefined"&&typeof pmData.copyright.data.last!="undefined"){e.cpm=pmData.copyright.data.last}if(typeof pmData.abuse.data!="undefined"&&typeof pmData.abuse.data.last!="undefined"){e.abm=pmData.abuse.data.last}$.ajax({type:"get",url:"/userbar/getnewdata/",data:e,dataType:"json",success:function(e){if(typeof e.redirect!="undefined"){if(!FJ.isInUrl(e.redirect)){document.location.href=e.redirect}return}if(loggedIn()){FJFriends.addOnlineUsers(e.users);FJMsg.addNewData(e.pm)}},error:function(){FJ.warn("getNewPmData() request failed")}})}function showShortcuts(){var e='<div id="keyboardShortcuts">';e+='<table cellspacing="2" cellpadding="2" border="0" style="width:100%;">';e+='<tr><th style="text-align:left;">Key</th><th style="text-align:left;">Description</th></tr>';e+='<tr><td><strong><span style="font-size:17px">&rarr;</span></strong></td><td>Next Content</td></tr>';e+='<tr><td><strong><span style="font-size:17px">&larr;</span></strong></td><td>Previous Content</td></tr>';e+='<tr><td><strong>Shift + <span style="font-size:17px">&rarr;</span></strong></td><td>Thumb Up Content and View Next</td></tr>';e+='<tr><td><strong>Ctrl + <span style="font-size:17px">&rarr;</span></strong></td><td>Thumb Down Content and View Next</td></tr>';e+='<tr><td><strong>Shift/Ctrl + <span style="font-size:16px">&uarr;</span></strong></td><td>Thumb Up Content</td></tr>';e+='<tr><td><strong>Shift/Ctrl + <span style="font-size:16px">&darr;</span></strong></td><td>Thumb Down Content</td></tr>';e+="<tr><td><strong>R</strong></td><td>Get recently added comments</td></tr>";e+="<tr><td><strong>C</strong></td><td>Add new comment</td></tr>";e+="<tr><td><strong>Ctrl + E</strong></td><td>Show/Hide All Replies</td></tr>";e+="<tr><td><strong>Double click the comment</strong></td><td>Reply to comment</td></tr>";e+="<tr><td><strong>I</strong></td><td>Refresh items</td></tr>";e+='<tr><td><strong>PM + <span style="font-size:17px">&rarr;</span></strong></td><td>Next PM</td></tr>';e+='<tr><td><strong>PM + <span style="font-size:17px">&larr;</span></strong></td><td>Previous PM</td></tr>';e+="<tr><td><strong>PM + R</strong></td><td>Reply to PM</td></tr>";e+="</table>";e+="</div>";$(e).dialog({width:420,height:450,title:"Keyboard Shortcuts",resizable:true,close:function(){$(this).remove()},buttons:{Close:function(){$("#keyboardShortcuts").remove();$(this).dialog("close")}}});return false}
var FJ={log:function(e){if(FJConf.display_logs==true){console.log(e)}},trace:function(e){if(FJConf.display_trace==true){var a=new Date;console.log("-> "+e+" "+a.toTimeString())}},warn:function(e){if(FJConf.display_warnings==true){console.warn(e)}},error:function(e){if(FJConf.display_errors==true){console.error(e)}},var_reg:Object(),reg:function(e,a){if(typeof a=="undefined"){if(typeof this.var_reg[e]!="undefined")return this.var_reg[e];else return false}else this.var_reg[e]=a;return false},var_callback:Object(),var_callbackType:Object(),callbackExist:function(e){if(this.var_callback[e])return true;return false},addCallback:function(e,a){if(this.var_callback[e]){FJ.warn('Duplicate callback "'+e+'"');return false}this.var_callback[e]=a;this.var_callbackType[e]=0;return true},addOneCallback:function(e,a){if(!this.addCallback(e,a))return false;this.var_callbackType[e]=1;return true},addMultiCallback:function(e,a){if(typeof this.var_callback[e]=="undefined")this.var_callback[e]=new Array;this.var_callback[e].push(a);this.var_callbackType[e]=2},removeCallback:function(e){if(typeof this.var_callback[e]!="undefined"){delete this.var_callback[e];delete this.var_callbackType[e]}},changeCallback:function(e,a){if(a==null){delete this.var_callback[e]}this.var_callback[e]=a;return true},callback:function(name,message){if(!name||!this.var_callback[name])return false;var callbacks=Object();if(this.var_callbackType[name]==2)callbacks=this.var_callback[name];else callbacks[0]=this.var_callback[name];for(call in callbacks){if(typeof callbacks[call]=="function")callbacks[call].call();else eval(callbacks[call])}if(this.var_callbackType[name]==1)delete this.var_callback[name];return true},IE7:navigator.userAgent.toLowerCase().indexOf("msie 7")!=-1,IE6:navigator.userAgent.toLowerCase().indexOf("msie 6")!=-1&&navigator.userAgent.toLowerCase().indexOf("msie 7")==-1,trim:function(e){e=e.replace(/^\s+/,"");e=e.replace(/\s+$/,"");return e},urlSegment:function(e,a){if(typeof a=="undefined")a=document.location.href;return a.split("http://").join("").split("/")[parseInt(e)+1]},isInUrl:function(e,a){if(typeof a=="undefined"){if(document.location.href.indexOf(e)>-1)return true}else{try{if(this.urlSegment(a).indexOf(e)>-1)return true}catch(e){return false}}return false},empty:function(e){var a;if(e===""||e===0||e==="0"||e===null||e===false||e===undefined){return true}if(typeof e=="object"){for(a in e){return false}return true}return false},strip_tags:function(e,a){var r="",n=false;var t=[];var i=[];var l="";var c=0;var f="";var o="";var s=function(e,a,r){return r.split(e).join(a)};if(a){i=a.match(/([a-zA-Z]+)/gi)}e+="";t=e.match(/(<\/?[^>]+>)/gi);for(r in t){if(isNaN(r)){continue}o=t[r].toString();n=false;for(f in i){l=i[f];c=-1;if(c!=0){c=o.toLowerCase().indexOf("<"+l+">")}if(c!=0){c=o.toLowerCase().indexOf("<"+l+" ")}if(c!=0){c=o.toLowerCase().indexOf("</"+l)}if(c==0){n=true;break}}if(!n){e=s(o,"",e)}}return e},random:function(e){if(typeof e=="undefined")e=1000002;return Math.floor(Math.random()*(e-1))},isNumeric:function(e){var a=parseFloat(e);if(isNaN(a))return false;else return true},clone:function(e){return jQuery.extend({},e)},alert:function(e){if(e!=""&&typeof e!="undefined"){$("#alertWindowText").html(e);$("#alertWindow").hide();$("#alertWindow").show()}},var_confirmed:false,confirm:function(e,a){if(this.var_confirmed){this.var_confirmed=false;return true}if(typeof a=="undefined"||a==""){this.error("FJ.confirm() need callback (text: "+e+")");return true}if(e!=""&&typeof e!="undefined"){$("#confirmWindowText").html(e);if(this.callbackExist("fj_confirm"))this.changeCallback("fj_confirm",a);else this.addOneCallback("fj_confirm",a);var r=""+'<button id="FJConfirmButton" onclick="FJ.confirmExec(); return false">OK</button>'+"<button onClick=\"$('#confirmWindow').hide()\">Cancel</button>";$("#FJConfirmButtons").html(r);$("#confirmWindow").hide();$("#confirmWindow").show();return false}return false},confirmExec:function(){$("#confirmWindow").hide();$("#FJConfirmButtons").html("");$("#confirmWindowText").html("");this.var_confirmed=true;this.callback("fj_confirm")}};
var favData={data:{count:0,all:0}};var FJFav={matureOnly:false,hasNSFW:false,data:{actual:0},pagination:false,type:$.cookie("FavsType")=="comment"||$.cookie("FavsType")=="picture"?$.cookie("FavsType"):"comment",sortBy:$.cookie("FavsSortBy")=="date"||$.cookie("FavsSortBy")=="title"||$.cookie("FavsSortBy")=="thumbs"?$.cookie("FavsSortBy"):"date",page:1,divided:$.cookie("FavsDivided")==0||$.cookie("FavsDivided")==1?$.cookie("FavsDivided"):1,category:0,cache:{},opened:false,openn:function(){this.opened=true;this.getFavs()},close:function(){this.opened=false},reset:function(){FJFav.data={actual:0}},changeSorting:function(a){if(a=="title"||a=="thumbs"||a=="date"){if(a!=FJFav.sortBy){FJFav.page=1;FJFav.sortBy=a;$.cookie("FavsSortBy",a,{path:"/",expires:365});FJFav.getFavs()}}},changePage:function(a){$("#favoritesListContainer").addClass("dialogBlackW8");FJFav.page=parseInt(a)>0?parseInt(a):1;FJFav.getFavs()},initFavs:function(){$("#favoritesList").on("mouseover","tr",function(){$(this).addClass("hover")}).on("mouseout","tr",function(){$(this).removeClass("hover")})},getFavs:function(){if(FJ.reg("fav")){return}if(typeof FJFav.page===undefined){page=1}var a=$("#favoritesListContainer");a.addClass("dialogBlackW8");FJ.reg("fav",true);$.ajax({type:"post",data:{nsfw:FJFav.matureOnly},url:"/userbar/favorites/"+FJFav.type+"/"+FJFav.sortBy+"/"+FJFav.page+"/",dataType:"json",complete:function(){FJ.reg("fav",false)},success:function(a){FJFav.makeFavs(a)},error:function(){a.removeClass("dialogBlackW8");dialog.alert("failed")}})},makeFavs:function(a){if(typeof a!=="undefined"){FJFav.cache[FJFav.type]=a}if(FJFav.cache[FJFav.type]!=""){FJFav.pagination=FJFav.cache[FJFav.type].pagination;FJFav.sortFav()}if(typeof FJFav.cache[FJFav.type][0]=="undefined"){a='<div class="pt10 aCenter">Favorites are Empty</div>'}else{a=FJFav.generateFavList()}var e=$("#favoritesListContainer");e.html(a).append(FJFav.pagination);FJFav.initFavs();FJFav.changeGlobalCount();content.setClickHandlers.favorites();e.removeClass("dialogBlackW8")},nsfwFav:function(a){FJFav.matureOnly=!FJFav.matureOnly;$(a).find("input")[0].checked=FJFav.matureOnly;FJFav.getFavs()},generateFavList:function(){var a="";var e=FJFav.type;var t=FJFav.cache[e];var s=0;a+='<div id="favoritesList">';FJFav.hasNSFW=false;for(var r in t){if(r=="data"||r=="pagination")continue;var i=t[r];if(parseInt(i.is_mature)===1)FJFav.hasNSFW=true;a+='<div class="favRow" id="fav-'+r+'">';if(r=="0"){a+="<span"+(e=="comment"?"":' style="display:none;"')+' class="favHeader">Username</span>'+'<span class="favHeader">Title</span>'+'<span class="favHeader">Date</span>'+'<span class="favHeader">Thumbs</span>'+"</div>";a+='<div class="favRow" id="fav-'+r+'">'}if(e=="comment"){a+="<span "+'class="sel">'+'<input name="favc-'+r+'" value="'+i.id+'" type="checkbox">'+"</span>";a+='<span class="favUserContainer"><span class="favThumbnailCell">';if(i.thumbnail_url!=""){a+='<img src="'+i.thumbnail_url+'" class="FavThumbnail" />'}else{}a+="</span>";var n=i.username===null?"anonymous":'<a href="/user/'+i.username+'">'+i.username+"</a>";a+='<span class="favUsername">'+n+"</span></span>";a+='<span class="favTitle"><a href="'+i.url+'">'+(typeof i.img!=="undefined"?i.img:"")+""+'<span class="favTitleText">'+i.title+"</span></a></span>"}else{a+="<span "+'class="sel">'+'<input name="favc-'+r+'" value="'+i.id+'" type="checkbox">'+"</span>";a+='<span class="favThumb"><a href="'+i.url+'"><img src="'+i.thumbnail_url_160+'">'+'<span class="favTitleText">'+i.title+"</span></a></span>"}a+='<span class="favTimeAdded">'+i.time_added+"</span>";a+='<span class="favThumbs">'+i.thumbs+"</span>";var o=$.trim(i.title);o=o.replace(/"/gi,"");o=o.replace(/'/g,"\\'");o=o.replace(/[\n\r\t]/g,"");a+='<span class="favDelete"><img src="'+STATIC_URL+'images/close.gif" onclick="return FJFav.removeFavorite('+i.id+", this, '"+e+"', "+i.cid+');" title="Remove from favorites" /></span>';a+="</div>"}a+='<div id="favSelect" align="left" style="margin-top:20px;">';a+='<strong>Select:</strong> <a href="#" onclick="return FJFav.selectAll();">All</a> | <a href="#" onclick="return FJFav.selectNone();">None</a> ';a+='<a href="#" class="pl20" onclick="FJFav.removeSelectedFav(\''+e+"'); return false;\">Delete selected</a>";a+="</div>";$("#favoritesListContainer").removeClass("dialogBlackW8");return a!=""?a:""},categoryName:function(a){var e="";switch(a){case"1":e="Funny Pictures";break;case"11":e="Animated Gifs";break;case"2":e="Movies";break;case"3":e="YouTube";break;case"4":e="Animations";break;case"5":e="Games";break;case"6":e="Sketches";break;case"15":e="Upictures";break;case"18":e="Text/Links";break}return e},sortFav:function(){if(FJ.reg("sortFav")){return}$("#favoritesListContainer").addClass("dialogBlackW8");FJ.reg("sortFav",true);var a=FJFav.sortBy=="title"?"ASC":"DESC";sortJSON(FJFav.cache[FJFav.type],FJFav.sortBy,a);FJ.reg("sortFav",false);$("#favoritesListContainer").removeClass("dialogBlackW8")},removeCommentFavorite:function(a,e,t){var s=$(a).parent().parent().find("div.t").html();s=$.trim(s);s=s.replace(/"/gi,"");s=s.replace(/[\n\r\t]/g,"");s=s.replace(/<div(.*)>(.*)<\/div>/gm,"");return FJFav.removeFavorite(e,a,"comment",t)},addFavorite:function(a,e,t){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJFav.addFavorite(a,e,t)});users.showLoginForm();return false}if($(e).text()=="Added to favorites"){return false}var s="/userbar/addfavorite/";if(t!==undefined){s+="?type="+t}$.ajax({type:"post",url:s,data:{id:a},success:function(s){var r=s||"Request Error";var i=r.split("|");if(i[0]=="OK"){if(t=="comment"){$(e).replaceWith('<div id="commentFavorite'+a+'" class="removeCommentFavorite" rel="'+i[1]+'">-Fav ('+i[3]+")</div>");$("#commentFavorite"+a).on("click",function(){return FJFav.removeCommentFavorite(this,i[1],a)})}else{$("#sideFavRemove").show();$("#sideFavAdd").hide();$("#bottomFavRemove").show();$("#bottomFavAdd").hide();$("#mobileFavAdd").hide();$("#mobileFavRemove").show()}favData.data.all=parseInt(favData.data.all)+1;favData.data.count=parseInt(favData.data.count)+1;if(FJFav.data.actual!==0){FJFav.data.actual=1}FJFav.changeGlobalCount();f.s("Adding to favorites list completed successfully")}else{dialog.alert(r)}},error:function(){dialog.alert("Requested Failed :(")}});return false},removeFavorite:function(a,e,t,s){var r=$(e).hasClass("removeCommentFavorite");var i="/userbar/removefavorite/";if(t=="comment"||r){i+="?type="+t+"&contentid="+s}$.ajax({type:"post",url:i,data:{favoriteId:a},success:function(i){var n=i||"Request Error";var o=n.split("|");if(o[0]=="OK"){var l='<div id="commentFavorite'+s+'" class="addCommentFavorite" href="#">+Fav ('+o[1]+")</div>";if(r){$(e).replaceWith(l)}if(t=="comment"){$(".removeCommentFavorite[rel="+a+"]").replaceWith(l);$("#commentFavorite"+s).on("click",function(){return FJFav.addFavorite(s,this,"comment")})}favData.data.all=parseInt(favData.data.all)-1;favData.data.count=parseInt(favData.data.count)-1;if(favData.data.all==0){$("#favoritesListContainer").html('<div class="pt10 aCenter">Favorites are Empty</div>')}else{$("#favoritesListContainer").html(FJFav.getFavs())}if(!(t=="comment"||r)){$(".removeCntFromFav").hide();$(".addCntToFav").show()}FJFav.changeGlobalCount();FJFav.generateFavList()}else{dialog.alert("Error: Can't delete this link :(")}},error:function(){dialog.alert("Error: Can't delete this link :(")}});return false},removeFavorite_contentPage:function(a,e,t,s){var r="/userbar/removefavbycid/";if(s!==undefined){r+="?type="+s}$.ajax({type:"post",url:r,data:{id:a},success:function(a){var e=a||"Request Error";var s=e.split("|");if(s[0]=="OK"){$("#sideFavRemove").hide();$("#sideFavAdd").show();$("#bottomFavRemove").hide();$("#bottomFavAdd").show();$("#mobileFavAdd").show();$("#mobileFavRemove").hide();FJFav.reset();favData.data.all=parseInt(favData.data.all)-1;favData.data.count=parseInt(favData.data.count)-1;FJFav.changeGlobalCount();f.s('You have successfully removed <strong class="greenLight">'+t+"</strong> from your favorites")}else{dialog.alert("Error: Can't delete this link :(")}},error:function(){dialog.alert("Error: Can't delete this link :(")}});return false},removeSelectedFav:function(a){var e=0;if(a==undefined)return false;var t=new Array;$("#favoritesListContainer input:checked").each(function(){t.push($(this).val())});if(t.length==0){dialog.alert("Error: Please select at least one item to delete.");return false}var s="/userbar/removeselectedfav/";var r={favIds:t,type:a};$.ajax({type:"post",url:s,data:r,success:function(t){var s=t||"Request Error";var r=s.split("|");if(r[0]=="OK"){if(parseInt(r[1])>0){e=parseInt(r[1])}favData.data.all=parseInt(favData.data.all)-e;favData.data.count=parseInt(favData.data.count)-e;if(favData.data.all==0){$("#favoritesListContainer").html('<div class="pt10 aCenter">Favorites are Empty</div>')}else{$("#favoritesListContainer").html(FJFav.getFavs())}FJFav.changeGlobalCount();FJFav.generateFavList()}else{dialog.alert("Error: Can't delete this Fav "+a+" :(")}},error:function(){dialog.alert("Error: Can't delete this Fav "+a+" :(")}});return false},addNewData:function(a){favData.data.all=parseInt(a);this.changeGlobalCount()},changeGlobalCount:function(){if(parseInt(favData.data.all)>0){$("#userbarFavoritesCount, .userbarFavoritesCount").closest("li").removeClass("hidden")}else{$("#userbarFavoritesCount, .userbarFavoritesCount").closest("li").addClass("hidden")}$("#userbarFavoritesCount, .userbarFavoritesCount").text(favData.data.all)},selectNone:function(){$("#favoritesListContainer input:visible").each(function(){$(this).prop("checked",false);$(this).parents("tr").removeClass("selected")});return false},selectAll:function(){$("#favoritesListContainer input:visible").each(function(){$(this).prop("checked",true);$(this).parents("tr").addClass("selected")});return false},deleteAllFavorites:function(){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJFav.deleteAllFavorites()});loginOpen();return false}if(!dialog.confirm("Confirmation","Delete all favorites?",function(){FJFav.deleteAllFavorites()},true,"Yes","No")){return false}$.ajax({type:"post",url:"/userbar/deleteallfavorites/",success:function(a){if(a=="OK"){FJFav.reset();FJFav.getFavs();dialog.alert("All favorites deleted")}else{dialog.alert("Request failed. Try again later")}},error:function(){dialog.alert("Request failed. Try again later")}});return false}};
var pmData={inbox:{},sent:{},drafts:{},copyright:{},contact:{},abuse:{}};var FJMsg={messagesPerPage:function(){var e=$(window).height();if(e>=650){return 15}else if(e>600){return 11}else if(e>500){return 9}else if(e>400){return 5}else if(e>300){return 3}else{return 2}},data:{inbox:{main:1,page:1,actual:0,unread:0},sent:{page:1,actual:0,unread:0},drafts:{page:1,actual:0,unread:0},contact:{page:1,actual:0,unread:0},copyright:{page:1,actual:0,unread:0},abuse:{page:1,actual:0,unread:0},global:{active:0,folder:"inbox",pmId:0}},folderSum:{pmTabUnread_inbox:0,pmTabAll_inbox:0,pmTabUnread_sent:0,pmTabAll_sent:0,pmTabUnread_copyright:0,pmTabAll_copyright:0,pmTabUnread_contact:0,pmTabAll_contact:0,pmTabUnread_abuse:0,pmTabAll_abuse:0},pagination:false,started:false,opened:false,loadedSound:null,msgSound:"/site/funnyjunk/sounds/message.mp3?rand="+Math.random(),reset:function(){this.data={inbox:{main:1,page:1,actual:0,unread:0},sent:{page:1,actual:0,unread:0},drafts:{page:1,actual:0,unread:0},copyright:{page:1,actual:0,unread:0},contact:{page:1,actual:0,unread:0},abuse:{page:1,actual:0,unread:0},global:{active:0,folder:"inbox",pmId:0}};pmData={inbox:{},sent:{},drafts:{},copyright:{},contact:{},abuse:{}};this.opened=false},start:function(){try{if(!this.started){this.started=true;this.pagination=new Pagination("pmPag","FJMsg.showPage","","message")}}catch(e){alert(e.message)}},openn:function(){this.opened=true;if(false&&this.data.global.pmId>0){return}else{var e=FJUserBar.get("msgFolder");if(e==null||e==""){e=this.data.global.folder!=0?this.data.global.folder:"inbox"}else{this.data.global.folder=e}this.reloadFolder(e);getNewPmData()}},requireCaptchaForPm:function(e){var a={receiverId:e};var t=true;$.ajax({async:false,type:"post",url:"/pm/requireCaptchaForPm/",data:a,success:function(e){var a=e.split("|");if(a[0]=="FALSE"){t=false}},error:function(){}});return t},write:function(e,a,t,s,i,n,r){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJMsg.write(e,a)});loginOpen();return false}var d=r===true?canHaveAccess("mass_message_write"):canHaveAccess("message_write",e);if(!d[0]){dialog.alert(d[1]);return false}$("#fjmsg_writeForm").remove();var o=$("<form>").attr({method:"post",action:"#",id:"fjmsg_writeForm"}).css({margin:"0",padding:"10px"}).submit(function(){FJMsg.send();return false});if(t===undefined){t=""}if(s===undefined){s=""}var l='<input id="fjmsg_userId" type="hidden" value="'+e+'" name="userId"/>';l+='<input id="fjmsg_userName" type="hidden" value="'+a+'" name="userName"/>';if(r!==undefined){l+='<input id="fjmsg_isMassMessage" type="hidden" value="'+r+'" name="isMassMessage"/>'}var p='Subject:<input maxlength="45" name="subject" type="text" class="txt" id="privMsgSubject" value="'+t+'" />';var u='Message:<textarea id="privMsgMessage" name="text" ';var f=5e3;u+='onkeydown="html.limitChars(this, '+f+", '#messageUploadCharsLimit', 'red')\" ";u+='onkeyup="html.limitChars(this, '+f+", '#messageUploadCharsLimit', 'red')\">";u+=s+'</textarea><div id="messageUploadCharsLimit"></div>';var c='<div class="red" id="fjmsg_writeWindowInfo"></div>';if(n!==undefined&&n){n=!FJMsg.requireCaptchaForPm(e)}var m="";var g=380;var h=520;if(n===undefined||!n){m='<br />Captcha:<div id="privMsgCaptcha1"  align="left" >&nbsp;</div>';g=580;h=580}o.html(l+p+u+m+c);o.dialog({width:h,height:g,title:"Send message to "+a,resizable:false,close:function(){$(this).remove()},open:function(){$(this).parent().css("top","60px");if(a.toLowerCase()=="admin"){var e='<div class="red aCenter mt10 mb5">Admin gets 100+ messages per day. Please be concise and to the point. ';e+="<br />Pretend this is twitter. If this is hate mail, please be original and entertaining. ";e+="<br />Admin has seen it all already.</div>";o.parent().append(e)}},buttons:{Send:function(){FJMsg.send()},Cancel:function(){$(this).dialog("close")}}});Recaptcha.create(captcha_public_key,"privMsgCaptcha1",{theme:"blackglass",callback:""});if(i){$("#privMsgMessage").topz().on("mousedown",function(){$(this).topz()})}else{$("#privMsgSubject").topz().on("mousedown",function(){$(this).topz()})}return false},showReplyForm:function(e){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJMsg.showReplyForm(e)});loginOpen();return false}$("#showReplyForm,#replyTip,#messageSent").hide();function a(){var e=$("#fjmsg_writeForm").css({visibility:"hidden",height:"auto"}).height();$("#fjmsg_writeForm").css({height:"0",visibility:"visible"}).animate({height:e},500,function(){$("#fjmsg_writeForm").css("height","auto")});setTimeout(function(){$(window).scrollTop($("#privMsgContainer"));$("#privMsgMessage").topz().on("mousedown",function(){$(this).topz()}).caret(0,0)},50)}if(FJMsg.requireCaptchaForPm(e)){$("#fjmsg_writeForm").append('<div id="privMsgCaptcha1" style="margin:0 0 10px 10px"></div>');Recaptcha.create(captcha_public_key,"privMsgCaptcha1",{theme:"blackglass",callback:function(){a()}})}else a()},hideReplyForm:function(e){$("#privMsgSubject,#privMsgMessage").blur();$("#fjmsg_writeForm").animate({height:"0"},500,function(){$("#showReplyForm").show().topz().on("mousedown",function(){$(this).topz()}).blur();$("#replyTip").show();if(typeof e!="undefined")$("#messageSent").fadeIn().delay(1e3).fadeOut()})},reply:function(e,a){for(i in pmData[e]){if(pmData[e][i].id==a){var t=pmData[e][i];break}}var s=new Date;s.setTime(t.date*1e3);var n=t.subject;if(t.subject.length<=41&&t.subject.indexOf("Re:")!=0){n="Re: "+t.subject}var r=s.getMonth()+1;var d="\n\n  "+s.getFullYear()+"/"+r+"/"+s.getDate()+" "+t.username+"\n"+strip_html_tags(t.text.textareaQuote());this.write(t.author_id,t.username,n,d,true,true)},send:function(){$("#fjmsg_writeWindowInfo").empty().addClass("w8");$("#privMsgMessage").removeClass("invalid");var e=$("#fjmsg_writeForm");var a=FJ.strip_tags(FJ.trim($("#privMsgMessage").val()));if(a==""){$("#privMsgMessage").addClass("invalid");$("#fjmsg_writeWindowInfo").html("Message field is obligatory");$("#fjmsg_writeWindowInfo").removeClass("w8");return false}if(a.length>5e3){$("#privMsgMessage").addClass("invalid");$("#fjmsg_writeWindowInfo").html("Message is too long!(Max 5000 Chars)");$("#fjmsg_writeWindowInfo").removeClass("w8");return false}if($("#privMsgCaptcha1").length>0&&$("#recaptcha_response_field")){if($("#recaptcha_response_field").val()==""){$("#fjmsg_writeWindowInfo").html(message_CaptchaFailed);$("#fjmsg_writeWindowInfo").removeClass("w8");return false}}if(FJ.trim($("#privMsgSubject").val())==""){$("#privMsgSubject").val("(no subject)")}var t=function(){$.ajax({type:"post",url:"/pm/send/",data:$("#fjmsg_writeForm").serialize(true),success:function(a){var t=a||"Request Error";var s=t.split("|");if(s[0]=="OK"){$("#fjmsg_writeWindowInfo").removeClass("w8");$("#fjmsg_writeForm").dialog().dialog("close");FJMsg.hideReplyForm(true);if(!FJ.empty(pmData.sent[0])){if(FJMsg.data.sent.actual!=0){FJMsg.data.sent.actual=1}pmData.sent.data.all=parseInt(pmData.sent.data.all)+1;pmData.sent.data.count=parseInt(pmData.sent.data.count)+1;FJMsg.folderCount("sent");date=new Date;var i={0:{id:s[1],subject:e.subject.value,text:FJ.strip_tags(e.text.value),receiver_id:e.userId.value,username:e.userName.value,date:parseInt(date.getTime()/1e3),unread:0}};mergeJSONData(pmData.sent,i)}}else{$("#fjmsg_writeWindowInfo").html(t);$("#fjmsg_writeWindowInfo").removeClass("w8");if($("#recaptcha_response_field")&&t==message_CaptchaFailed){Recaptcha.destroy();Recaptcha.reload()}}},error:function(){$("#fjmsg_writeWindowInfo").html("Request Failed");$("#fjmsg_writeWindowInfo").removeClass("w8")}})};var s=$("#fjmsg_writeForm").find("#fjmsg_userName").val();if(s.toLowerCase()=="admin"&&a.length>200){dialog.confirmWithCallback('<span class="red">Warning!</span>',"Your message is over 200 characters. <br />"+"Admin gets many e-mails per day and most likely will not read if it is too long. <br />"+"Please reduce to under 200 characters",function(){t()},null,"Send anyway","Return to editing");$("#fjmsg_writeWindowInfo").removeClass("w8");return false}t();return false},showPage:function(e){this.showFolder("",e)},reloadFolder:function(e){this.showFolder(e,"",true)},showFolder:function(e,a,t){if(!isMobile)$("#pmBox").css("position","fixed");if(FJ.reg("msg")){return}FJUserBar.set("msgFolder",e);if(!this.pagination){this.pagination=new Pagination("pmPag","FJMsg.showPage","","message")}$("#inboxContainer").addClass("w8");if(typeof e=="undefined"||e==""){e=this.data.global.folder}$(".showFolder").removeClass("active");$("#showFolder_"+e).addClass("active");$folder=$("#pmCache_"+e);if(!$folder.length)$("#topUserbar").append("<div id=pmCache_"+e+" class=hidden></div>");var s=this.data.global.folder;var i=this.data.global.pmId;this.data.global.folder=e;this.data.global.pmId=0;var n=0;var r=0;if(typeof pmData[e]=="undefined"){pmData[e]={data:{all:0,count:0,first:0,last:0}}}if(typeof this.data[e]=="undefined"){this.data[e]={page:1,actual:0,unread:0}}if(typeof pmData[e].data=="undefined"){var d=2;a=1;var o=FJMsg.messagesPerPage();var l=o;var p=0;var u=(a-1)*o;var f=u+o}else{n=pmData[e].data.last;r=pmData[e].data.first;var c=this.data[e].page;if(typeof a=="undefined"||a==""){if(s==e&&(i>0||typeof t!="undefined")){a=c}else{a=1;this.data[e].page=1}}else{this.data[e].page=a}o=FJMsg.messagesPerPage();l=FJMsg.messagesPerPage();p=0;u=(a-1)*o;if(u>pmData[e].data.all-1){if(a>1){--a}u=(a-1)*o}if(a>1&&pmData[e].data.all-u<FJMsg.messagesPerPage()){o=pmData[e].data.all-u}f=u+o;d=0;if(pmData[e].data.count<o){if(a!=c){l+=o-pmData[e].data.count}else{l=o-pmData[e].data.count}}if(a!=c){if(typeof pmData[e][u]=="undefined"||typeof pmData[e][f]=="undefined"){d=2}else{d=1}}}if(typeof pmData[e].data!="undefined"&&pmData[e].data.count>0&&pmData[e].data.count==pmData[e].data.all){this.data[e].actual=1;d=1}var m=false;if(e.substring(0,4)=="tag_"||e.substring(0,4)=="ctf_"){t=true}if(!t&&(this.data[e].actual==1||d==1)){FJMsg.generateMessageList("pmCache_"+e,e,u,f);$("#inboxContainer").html($("#pmCache_"+e).html()).removeClass("w8");FJMsg.initInbox();this.data[e].actual=2}else if(t||this.data[e].actual==0||d==2){this.pagination.display();var g="/pm/folder/"+e;if(a>1){g+="/0/0/"+u+"/"+l}else{g+="/"+r+"/"+n+"/"+p+"/"+l}m=true;FJ.reg("msg",true);$.ajax({type:"get",url:g,dataType:"json",complete:function(){FJ.reg("msg",false)},success:function(t){try{var s=t;if(s!=""){mergeJSONData(pmData[e],s,u);if(e=="inbox"){sortJSON(pmData.inbox,"importance","ASC")}}FJMsg.data[e].actual=2;FJMsg.pagination.display(a,pmData[e].data.all,FJMsg.messagesPerPage());FJMsg.generateMessageList("pmCache_"+e,e,u,f);FJMsg.folderCount(e);$("#inboxContainer").html($("#pmCache_"+e).html());$("#inboxContainer").removeClass("w8");FJMsg.initInbox()}catch(e){FJ.error("showFolder(): line:"+e.lineNumber+" "+e.message);if(typeof console!="undefined"){console.log(e)}}}})}else{$("#inboxContainer").html($("#pmCache_"+e).html());$("#inboxContainer").removeClass("w8")}if(!m){this.pagination.display(a,pmData[e].data.all,FJMsg.messagesPerPage())}},addNewData:function(e){if(typeof pmData.inbox.data=="undefined"){mergeJSON(pmData.inbox,"");mergeJSON(pmData.sent,"");mergeJSON(pmData.copyright,"");mergeJSON(pmData.abuse,"")}if(typeof e.counts!="undefined"){pmData.inbox.data.all=e.counts.inbox;pmData.sent.data.all=e.counts.sent;if(typeof e.counts.copyright!="undefined"){pmData.copyright.data.all=e.counts.copyright}if(typeof e.counts.abuse!="undefined"){pmData.abuse.data.all=e.counts.abuse}}if(typeof e.unread!="undefined"){this.data.inbox.unread=e.unread}if(typeof e.unread_id!="undefined"){this.data.inbox.unread=e.unread_id.length;var a;for(pm in pmData.inbox){a=false;for(id in e.unread_id){if(pmData.inbox[pm].id==e.unread_id[id]){a=true}}pmData.inbox[pm].unread=a?1:0}}if(typeof e.pm!="undefined"&&typeof e.pm.data!="undefined"){mergeJSONData(pmData.inbox,e.pm);sortJSON(pmData.inbox,"importance","ASC")}if(typeof e.cp_unread!="undefined"){this.data.copyright.unread=e.cp_unread}if(typeof e.cp_unread_id!="undefined"){this.data.copyright.unread=e.cp_unread_id.length;var a;for(pm in pmData.copyright){a=false;for(id in e.cp_unread_id){if(pmData.copyright[pm].id==e.cp_unread_id[id]){a=true}}pmData.copyright[pm].unread=a?1:0}}if(typeof e.cpm!="undefined"&&typeof e.cpm.data!="undefined"){mergeJSONData(pmData.copyright,e.cpm)}if(typeof e.ct_unread!="undefined"){this.data.contact.unread=e.ct_unread}if(typeof e.ab_unread!="undefined"){this.data.abuse.unread=e.ab_unread}if(typeof e.ab_unread_id!="undefined"){this.data.abuse.unread=e.ab_unread_id.length;var a;for(pm in pmData.abuse){a=false;for(id in e.ab_unread_id){if(pmData.abuse[pm].id==e.ab_unread_id[id]){a=true}}pmData.abuse[pm].unread=a?1:0}}if(typeof e.abm!="undefined"&&typeof e.abm.data!="undefined"){mergeJSONData(pmData.abuse,e.abm)}if(typeof e.tags!="undefined"){for(var t=0;t<e.tags.length;t++){var s=e.tags[t];var i="tag_"+s;if(typeof pmData[i]=="undefined"){pmData[i]={data:{all:0,count:0,first:0,last:0}}}if(typeof this.data[i]=="undefined"){this.data[i]={page:1,actual:0,unread:0}}this.data[i].unread=e[i+"_unread"];pmData[i].data.all=e[i+"_all"]}}if(typeof e.ctf!="undefined"){for(var t=0;t<e.ctf.length;t++){var n="ctf_"+e.ctf[t];if(typeof pmData[n]=="undefined"){pmData[n]={data:{all:0,count:0,first:0,last:0}}}if(typeof this.data[n]=="undefined"){this.data[n]={page:1,actual:0,unread:0}}this.data[n].unread=e[n+"_unread"];pmData[n].data.all=e[n+"_all"]}}this.folderCount();if(FJFriends.data.actual!=0)FJFriends.data.actual=1;if(this.data.inbox.actual!=0)this.data.inbox.actual=1;if($("#pmTab").is(":visible"))this.reloadFolder()},generateMessageList:function(e,a,t,s){var i=pmData[a];var n=0;var r;var d="";for(var o=t;o<s;++o){if(!i[o]){continue}++n;var l="";if(i[o].unread==1){l=" unread"}r=" onclick=\"FJMsg.showMessage('"+a+"','"+i[o].id+"')\"";var p="";var u=i[o].username;if(typeof i[o].admin!="undefined"&&i[o].admin==1||i[o].role==2){p=" mass";u='<span class="loginRed">'+i[o].username+"</span>"}else if(i[o].type=="mass_msg"){p=" friend_mass"}else if(i[o].type=="copyright"){p=" copyright_msg"}var f="";if(i[o].unread==1&&(i[o].type=="funnyjunk"||i[o].type=="copyright")){f=' style="display: none;"'}d+='<div class="msgRow'+l+p+'"><div class="'+l+p+'" title="'+i[o].subject+'" id="msg-'+o+'"></div>';d+='<div class="sel"><input  class="msgCheck" data-id="'+o+'" data-msg-id="'+i[o].id+'"'+f+' type="checkbox" /></div>';d+="<div"+r+' class="auth">'+u+"</div>";d+="<div"+r+' class="subj">'+i[o].subject.limitChars(70)+"</div>";d+="<div"+r+' class="cont">'+i[o].text.limitChars(130)+"</div></div>"}var c=$("#"+e);if(d==""){c.html('<div class="aCenter pt10">No messages</div>');c.removeClass("w8");return}var m=$("<div>").attr("id","pmSelect");var g='<strong>Select:</strong> <a href="#" onclick="return FJMsg.selectAll();">All</a> | <a href="#" onclick="return FJMsg.selectNone();">None</a> ';g+='<a href="#" class="pl20" onclick="FJMsg.removeSelected(); return false;">delete selected</a> <a href="#" onclick="FJMsg.markSelectedAsRead(); return false;" class="pl20">mark selected as read</a>';m.html(g);c.html('<div summary="" id="inboxList">'+d+"</div>");c.append(m);c.removeClass("w8")},initInbox:function(){$("#inboxContainer #inboxList").find("input").on("click",function(){if($(this).prop("checked")){$(this).closest(".msgRow").addClass("selected")}else{$(this).closest(".msgRow").removeClass("selected")}});if(alerts.postponedPMId){this.showMessage("inbox",alerts.postponedPMId);alerts.postponedPMId=false}},onPrevNextMessageClick:function(e){var a=$(e).attr("id");var t=new RegExp(/^(\w+?)-(\d+?)$/g).exec(a);if(t!=null){var s=t[1];var i=t[2];return FJMsg.showMessage(s,i)}return false},showMessage:function(e,a){if(!isMobile)$("#pmBox").css("position","absolute");if(this.pagination){this.pagination.display()}this.data.global.pmId=a;for(var t in pmData[e]){if(pmData[e][t].id==a){var s=pmData[e][t];break}}var i=$("#inboxContainer");if(typeof s=="undefined"){i.html('<div class="aCenter pt10 red">Sorry, this message does not exist</div>')}else{if(s.unread==1){this.markAsRead(e,a)}time='<span class="right pt10 mr10">'+this.formatDate(s.date)+"</span>";var n="";var r="";if(typeof s.admin!="undefined"&&s.admin==1){r=" mass"}var d=typeof s.udel!="undefined"&&s.udel==1;var o=s.username;var l="";if(s.role==2){l='<span class="'+s.adminColor+'">'+o+"</span>"}else if(o.toLowerCase()==siteTitle.toLowerCase()||s.type=="system"){l='<span class="greenLight">'+siteTitle+"</span>"}else if(d){l='<span class="greenLight">'+o+"</span>"}else{l='<a href="/user/'+o+'" class="greenLight bold">'+o+"</a>"}if(e=="inbox"){l+=" to me"}else{l="me to "+l}l='<div class="pt10 pl10'+r+'">'+l+"</div>";var p=s.text;n='<button class="hand ui-state-default ui-corner-all" type="button" onclick="FJMsg.remove(\''+e+"', "+a+')">delete</button> ';if(s.type=="inv_new"&&!d){p+='<div class="aCenter pt20"><button class="hand ui-state-default ui-corner-all" type="button" onclick="FJFriends.acceptInvite('+s.author_id+", '"+o+"'); return false;\">Accept Invite</button> "+'<button class="hand ui-state-default ui-corner-all" type="button" onclick="FJFriends.declineInvitation('+s.author_id+'); return false;">Decline Invite</button></div>'}else if(s.type=="inv_accepted"){p+='<div class="pt20 greenLight aCenter">You have answered <strong>yes</strong> to '+o+"'s request.</div>"}else if(s.type=="inv_canceled"){p+='<div class="pt20 greenLight aCenter">You have decided to answer <strong>no</strong> to '+o+"'s request.</div>"}else if(s.type=="msg"&&e=="inbox"&&s.block!=1&&s.imblock!=1&&!d){n+='<button id=showReplyForm class="hand ui-state-default ui-corner-all" type="button" onclick="FJMsg.showReplyForm('+s.author_id+')">reply</button> ';n+="<div id=replyTip style=\"font-size:9px;text-align:center\">Tip: Press 'R' to open the reply form</div>"}if(e=="inbox"&&s.type!="system"&&s.type!="funnyjunk"&&s.type!="copyright"&&!d&&s.adminColor==undefined){if(s.block==1){n+='<span class="pr10 pl10 greenLight bold">'+o+" is blocking you</span> "}if(s.imblock==1){n+='<button class="hand ui-state-default ui-corner-all" type="button" onclick="FJBlock.unBlock('+s.author_id+", '"+o+"')\">Unblock "+o+"</button> "}else{n+='<button class="hand ui-state-default ui-corner-all" type="button" onclick="FJBlock.block('+s.author_id+", '"+o+"')\">Block "+o+"</button> "}}var u="";if(s.type=="mass_msg"){u+='<div class="clearfix pt10 pl10 pr10"><div class="right"><a href="#" onclick="users.editAccount(function() { $(\'#profilePopup_privacy\').trigger(\'click\'); }); return false;">Go to settings to Disable/Enable receiving mass PMs</a></div></div>'}var f='<div class="left bold underline'+r+'">'+s.subject+"</div>";var c='<div class="clearfix pt10 pl10 pr10">';c+=f;c+='<div class="right"><a class="previousMessageLink" href="#" onclick="return FJMsg.onPrevNextMessageClick(this);">&laquo; prev</a> &nbsp; <a class="nextMessageLink" href="#" onclick="return FJMsg.onPrevNextMessageClick(this);">next &raquo;</a></div>';c+="</div>";p='<div class="pmText">'+p.nl2br().quote()+"</div>";n='<div class="pt10 pl10 aCenter">'+n+"</div>";var m;(function(){var e=new Date;e.setTime(s.date*1e3);var a=s.subject;if(s.subject.length<=41&&s.subject.indexOf("Re:")!=0)a="Re: "+s.subject;var t=e.getMonth()+1;var i="\n\n\n> "+s.username+" said: \n"+FJ.strip_tags(s.text.textareaQuote());m='						<div id=messageSent style="display:none;margin:5px;text-align:center;color:#0F0">Message Sent!</div>						<form id=fjmsg_writeForm style="display:block;height:0;width:'+($(window).width()>800?"610px":"90%")+';margin:10px auto;background:#000;overflow:hidden">							<input id="fjmsg_userId" type="hidden" value="'+s.author_id+'" name="userId"/>							<input id="fjmsg_userName" type="hidden" value="'+s.username+'" name="userName"/>							<input id=privMsgSubject name=subject class=txt style="width:580px;padding:5px;margin:10px auto 0" value="'+a+"\" maxlength=45>							<textarea id=privMsgMessage name=text onkeyup=\"html.limitChars(this, 5000, '#messageCharsLimit', 'red')\" onkeydown=\"html.limitChars(this, 5000, '#messageCharsLimit', 'red')\" style=\"width:580px;margin:5px auto;resize:none\">"+i+'</textarea>							<div style="float:left;margin-left:10px">								<div id=messageCharsLimit></div>								<div id=fjmsg_writeWindowInfo class=red></div>							</div>							<div style="float:right;padding:0 10px 5px;text-align:center">								<button type=button style="cursor:pointer" onclick="FJMsg.hideReplyForm()" id=cancelReply>cancel</button>								<button type=button style="cursor:pointer" onclick="FJMsg.send()" id=sendReply>send</button>								<div style="font-size:9px;text-align:center">Tip: Press Ctrl + Enter to send</div>							</div>							<br style="clear:both">							'+($(".responsesTemplate").length?'<div style="width:580px;margin:0 auto 5px;">'+$(".responsesTemplate").html()+"</div>":"")+"						</form>"})();i.empty().append(c).append(u);i.append(time).append(l).append(p).append(n).append(m);FJMsg.setNextMessageLink(e,a);FJMsg.setPreviousMessageLink(e,a);$("#privMsgSubject,#privMsgMessage").keydown(function(e){if(e.which==27){var a=$("#cancelReply");if(a.is(":visible")){FJMsg.hideReplyForm();e.stopPropagation()}}if(e.which==37||e.which==39)e.stopPropagation()})}$(window).scrollTop($("#privMsgContainer"))},loadPage:function(e,a,t,s){var i=FJMsg.messagesPerPage();var n=(a-1)*i;var r="/pm/folder/"+e;r+="/0/0/"+n+"/"+i;downloading=true;FJ.reg("msg",true);$.ajax({type:"get",url:r,dataType:"json",complete:function(){FJ.reg("msg",false)},success:function(a){try{if(a!=""){mergeJSONData(pmData[e],a,n);switch(s){case"next":var i=parseInt(t,10)+1;if(pmData[e][i]!==undefined){$(".nextMessageLink").attr("id",e+"-"+pmData[e][i].id)}break;case"previous":var r=parseInt(t,10)-1;if(pmData[e][r]!==undefined){$(".previousMessageLink").attr("id",e+"-"+pmData[e][r].id)}break}}}catch(e){}}})},getIndexByMessageId:function(e,a){var t=null;for(var s in pmData[e]){if(pmData[e][s].id==a){t=s;break}}return t},bindShortcuts:function(){if(!$("#messageTip").show().length)$(".previousMessageLink").before($('<span id=messageTip style="font-size:9px;margin-right:10px">Tip: Press the arrow keys to cycle messages</span>'));if(typeof this.shortcutsBound!="undefined")return false;else this.shortcutsBound=true;$(document).keydown(function(e){if(e.which==82){var a=$("#showReplyForm");if(a.is(":visible")){a.click();e.stopImmediatePropagation()}}else if(e.which==13&&e.ctrlKey){var a=$("#sendReply");if(e.ctrlKey&&!$("#showReplyForm").is(":visible")){a.click();e.stopImmediatePropagation()}}else if(e.which==37){var a=$(".previousMessageLink");if(a.is(":visible")){a.click();document.disableArrows=true}}else if(e.which==39){var a=$(".nextMessageLink");if(a.is(":visible")){a.click();document.disableArrows=true}}})},setNextMessageLink:function(e,a){this.bindShortcuts();var t=$(".nextMessageLink");var s=FJMsg.getIndexByMessageId(e,a);if(s<pmData[e].data.all-1){var i=parseInt(s,10)+1;if(pmData[e][i]!==undefined){t.attr("id",e+"-"+pmData[e][i].id)}else if(s%FJMsg.messagesPerPage()==FJMsg.messagesPerPage()-1){var n=Math.ceil(s/FJMsg.messagesPerPage());FJMsg.loadPage(e,n+1,s,"next")}else{t.css("visibility","hidden")}}else{t.css("visibility","hidden")}},setPreviousMessageLink:function(e,a){this.bindShortcuts();var t=$(".previousMessageLink");var s=FJMsg.getIndexByMessageId(e,a);if(0<s){var i=parseInt(s,10)-1;if(pmData[e][i]!==undefined){t.attr("id",e+"-"+pmData[e][i].id);t.css("visibility","visible")}else if(s%FJMsg.messagesPerPage()==0){var n=Math.ceil(s/FJMsg.messagesPerPage());FJMsg.loadPage(e,n,s,"previous")}else{t.css("visibility","hidden")}}else{t.css("visibility","hidden")}},changeType:function(e,a){var t="inbox";for(var s in pmData[t]){if(s=="data"){continue}if(pmData[t][s].author_id==e&&pmData[t][s].type=="inv_new"){pmData[t][s].type=a;if($("#pmTab").is(":visible")&&this.data.global.pmId>0){this.showMessage("inbox",this.data.global.pmId)}break}}},changeBlockade:function(e,a){var t="inbox";for(var s in pmData[t]){if(s=="data"){continue}if(pmData[t][s].author_id==e){pmData[t][s].imblock=a}}this.showMessage(this.data.global.folder,this.data.global.pmId)},closeSubTabs:function(e,a){hideElements("pmTab",e);if(typeof a=="undefined"||a!=true){$(".pmButton").each(function(){if(typeof e!="undefined"&&this.id==e){}else{$(this).removeClass("pmButtonCurrent")}})}},showSubTab:function(e,a){this.closeSubTabs("#"+e);if($("#"+e)){$("#"+e).show()}this.markSubTab(e,a)},markSubTab:function(e,a){if($("#"+e)){if(!$("#"+e).is(":hidden")){$("#"+a).addClass("pmButtonCurrent")}else{$("#"+a).addClass("pmButtonCurrent")}}else{$("#"+a).addClass("pmButtonCurrent")}},markAsRead:function(e,a){var t="";for(var s in pmData[e])if(pmData[e][s].id==a){var i=s;if(typeof pmData[e][s].admin!="undefined"&&pmData[e][s].admin==1)t="/1";break}$.ajax({type:"get",url:"/pm/markasread/"+a+t,success:function(a){var t=a.split("|");if(t[0]=="OK"){pmData[e][i].unread=0;FJMsg.data[e].unread=FJMsg.data[e].unread-1;FJMsg.data[e].actual=1;FJMsg.folderCount(e);return true}return false}})},selectNone:function(){$("#inboxContainer input:visible").each(function(){$(this).prop("checked",false);$(this).parents("tr").removeClass("selected")});return false},selectAll:function(){$("#inboxContainer input:visible").each(function(){$(this).prop("checked",true);$(this).parents("tr").addClass("selected")});return false},emptyFolder:function(e){if(!dialog.confirm("Confirmation","Empty "+e.substr(0,1).toUpperCase()+e.substr(1)+" ?",function(){FJMsg.emptyFolder(e)},true,"Yes","No")){return false}$.ajax({type:"post",url:"/pm/emptyfolder/"+e+"/",success:function(a){if(a=="OK"){pmData[e]={data:{all:0,count:0,first:0,last:0}};FJMsg.reloadFolder(e);if(e=="contact"){for(el in pmData){var t=el.substring(0,4);if(t=="tag_"||t=="ctf_"){pmData[el]={data:{all:0,count:0,first:0,last:0}}}}}getNewPmData()}else{dialog.alert("Request error")}},error:function(){f.e("Request failed")}})},markSelectedAsRead:function(e,a){var t={};var s=0;var i;if(e==undefined){e=FJMsg.data.global.folder}$(".msgCheck").each(function(){if($(this).prop("checked")){var a=parseInt($(this).attr("data-id"));console.log(a);i=pmData[e][a];console.log(JSON.stringify(i));if(i.unread!=0){if(typeof i.admin!="undefined"&&i.admin==1){t[s]=i.id+",1"}else{t[s]=i.id}s++}s++}});if(s==0){return false}if(!dialog.confirm("Confirmation","Mark as read?",function(){FJMsg.markSelectedAsRead(e)})){return false}$.ajax({type:"post",url:"/pm/markselectedasread",data:t,success:function(a){if(a=="OK"){for(var i in pmData[e]){for(var n in t){if((pmData[e][i].admin==undefined||pmData[e][i].admin==0)&&pmData[e][i].id==t[n].split(",")[0]){pmData[e][i].unread=0}}}FJMsg.data[e].unread=parseInt(FJMsg.data[e].unread)-s;FJMsg.data[e].actual=1;FJMsg.folderCount(e);FJMsg.reloadFolder()}else{dialog.alert("Request error")}},error:function(){f.e("Request failed")}});return false},removeSelected:function(e,a){var t=[];var s=0;var i=0;var n=[];if(e==undefined)e=this.data.global.folder;if(!dialog.confirm("Confirmation","Really delete these?",function(){FJMsg.removeSelected(e)}))return false;$(".msgCheck").each(function(){if($(this).prop("checked")){t.push($(this).attr("data-msg-id"));s++}});var r={ids:t};if(s==0)return false;$.ajax({type:"post",url:"/pm/removeselected",data:r,success:function(a){if(a=="OK"){t.map(function(a){deleteJSONItem(pmData[e],"id",a)});console.log(JSON.stringify(pmData));console.log(JSON.stringify(FJMsg.data[e]));pmData[e].data.all=parseInt(pmData[e].data.all)-s;pmData[e].data.count=parseInt(pmData[e].data.count)-s;FJMsg.data[e].unread=parseInt(FJMsg.data[e].unread)-i;FJMsg.folderCount(e);FJMsg.data[e].actual=0;FJMsg.reloadFolder()}else{dialog.alert("Request error")}},error:function(){f.e("Request failed")}});return false},remove:function(e,a){var t="";for(var s in pmData[e])if(pmData[e][s].id==a){if(typeof pmData[e][s].admin!="undefined"&&pmData[e][s].admin==1){t="/1"}break}$.ajax({type:"get",url:"/pm/remove/"+a+t,success:function(t){var s=t.split("|");if(s[0]=="OK"){try{pmData[e].data.all=parseInt(pmData[e].data.all)-1;pmData[e].data.count=parseInt(pmData[e].data.count)-1;FJMsg.folderCount(e);deleteJSONItem(pmData[e],"id",a);FJMsg.data[e].actual=1;FJMsg.showFolder()}catch(e){alert(e.message)}return true}else{dialog.alert(s[0])}return false}});return false},checkAccept:function(e,a){var t=pmData.inbox;for(var s in t){if(s=="data")continue;if(t[s].author_id==e)t[s].accept=a}},checkUnread:function(e){var a=0;if(typeof e!="undefined"&&$("#pmButton_"+e).length>0){for(var t in pmData[e]){if(pmData[e][t].unread==1)++a}if(this.data[e].actual!=0)this.data[e].actual=1;this.data[e].unread=a;this.folderCount(e)}else{for(e in pmData){for(t in pmData[e]){if(pmData[e][t].unread==1)++a}if(this.data[e].actual!=0)this.data[e].actual=1;this.data[e].unread=a;this.folderCount(e)}}},folderCount:function(e){var a=$("#userbarPmCount, .userbarPmCount");var t=parseInt(this.data.inbox.unread)+parseInt(this.data.contact.unread)+parseInt(this.data.copyright.unread)+parseInt(this.data.abuse.unread);if(t>0){$("#userbarPmInf").addClass("pmButtonUnread");a.text(t).parent().addClass("bold")}else{a.text("0").parent().removeClass("bold")}if(typeof e!="undefined"){if(pmData[e].data){FJMsg.folderSum["pmTabAll_"+e]=pmData[e].data.all;$("#pmTabAll_"+e).text(pmData[e].data.all);if(parseInt(pmData[e].data.all)>0||parseInt(pmData[e].unread)>0){$("#showFolder_"+e).show();$("#empty_"+e+"_ButtonBlock").show()}}else{FJMsg.folderSum["pmTabAll_"+e]=0;$("#pmTabAll_"+e).text("0")}if(this.data[e].unread>0){$("#pmTabUnread_"+e).html(this.data[e].unread);FJMsg.folderSum["pmTabUnread_"+e]=this.data[e].unread}else{$("#pmTabUnread_"+e).html(0);FJMsg.folderSum["pmTabUnread_"+e]=0}}else{for(e in pmData){if(pmData[e].data){FJMsg.folderSum["pmTabAll_"+e]=pmData[e].data.all;$("#pmTabAll_"+e).text(pmData[e].data.all);if(parseInt(pmData[e].data.all)>0||parseInt(pmData[e].unread)>0){$("#showFolder_"+e).show();$("#empty_"+e+"_ButtonBlock").show()}}else{FJMsg.folderSum["pmTabAll_"+e]=0;$("#pmTabAll_"+e).text("0")}if(this.data[e].unread>0){FJMsg.folderSum["pmTabUnread_"+e]=this.data[e].unread;$("#pmTabUnread_"+e).text(this.data[e].unread)}else{FJMsg.folderSum["pmTabUnread_"+e]=0;$("#pmTabUnread_"+e).text("0")}}}},formatDate:function(e){var a=new Date;a.setTime(e*1e3);var t=new Date;var s=t.getTime()-a.getTime();if(t.getDate()==a.getDate()&&s<864e6){return a.time12()}else if(t.getDate()-1==a.getDate()&&s<1728e6){return"yesterday "+a.time12()}else if(t.getYear()==a.getYear()){return a.getMonthShortName()+" "+a.getDate2()+" "+a.time12()}else{return a.getFullYear()+"/"+a.getMonth()+"/"+a.getDate()}}};
function mergeJSONData(e,t,n){mergeJSON(e,t,n,"id","DESC")}function sortJSON(e,t,n){var a;var f=0;var i=-1;for(_obj in e){if(_obj=="data")continue;if(parseInt(_obj)>i)i=_obj;++f}i=parseInt(i);if(typeof t=="undefined"||t==""){t="id"}if(typeof n!="undefined"&&n.toUpperCase()=="DESC"){for(var o=0;o<=i;++o){if(typeof e[o]=="undefined")continue;for(var r=o+1;r>=0;--r){if(typeof e[r]=="undefined")continue;if(typeof e[r][t]=="undefined")continue;if(typeof e[r-1]=="undefined")continue;if(typeof e[r-1][t]=="undefined")continue;var d=false;if(!FJ.isNumeric(e[r][t])){var s=[e[r][t].toLowerCase(),e[r-1][t].toLowerCase()];s.sort();if(s[0]!=e[r][t].toLowerCase())d=true}else if(parseInt(e[r][t])>parseInt(e[r-1][t]))d=true;if(d){a=FJ.clone(e[r-1]);e[r-1]=FJ.clone(e[r]);e[r]=FJ.clone(a)}}}}else{for(o=0;o<i;++o){if(typeof e[o]=="undefined")continue;for(r=o+1;r>=0;--r){if(typeof e[r]=="undefined"||typeof e[r-1]=="undefined")continue;d=false;if(!FJ.isNumeric(e[r][t])){s=[e[r][t].toLowerCase(),e[r-1][t].toLowerCase()];s.sort();if(s[0]!=e[r-1][t].toLowerCase())d=true}else if(parseInt(e[r][t])<parseInt(e[r-1][t]))d=true;if(d){a=FJ.clone(e[r-1]);e[r-1]=FJ.clone(e[r]);e[r]=FJ.clone(a)}}}}}function mergeJSON(e,t,n,a,f){var i=0;for(_obj in e)++i;if(typeof e.data=="undefined"){e.data={all:0,count:i,last:0,first:0}}else{--i}if(FJ.empty(t)){return}var o=0;for(_obj in t)++o;if(typeof t.data=="undefined"){t.data={all:0,count:o,last:0,first:0}}else{--o}if(typeof n=="undefined"||n=="")n=i;if(parseInt(t.data.all)>0){e.data.all=t.data.all}if(typeof e.data.first!="undefined"){if(parseInt(e.data.first)>parseInt(t.data.first)||parseInt(e.data.first)==0){e.data.first=t.data.first}}if(typeof e.data.last!="undefined"){if(parseInt(e.data.last)<parseInt(t.data.last)){e.data.last=t.data.last}}e.data.count=i+parseInt(t.data.count);for(var r=0;r<o;++r){newItem=r+n;e[newItem]=t[r]}var d=i+o;if(typeof a!="undefined"){sortJSON(e,a,f)}}function deleteJSONItem(e,t,n){try{for(var a in e){if(a=="data")continue;if(e[a][t]==n){delete e[a];var f=parseInt(a);for(item2 in e){if(item2=="data")continue;newItem=parseInt(item2);if(newItem>f){e[newItem-1]=FJ.clone(e[newItem]);delete e[newItem]}}}}if(typeof f=="undefined"){FJ.warn("deleteJSONItem(): item not found")}}catch(e){alert("error "+e.message+" "+e.lineNumber)}}
var subsData={data:{count:0,all:0}};var FJSubs={data:{actual:0},pagination:false,allowedSorts:["date","title","channel_date","channel_title"],sortBy:$.cookie("SubsSortBy")=="date"||$.cookie("SubsSortBy")=="title"||$.cookie("SubsSortBy")=="channel_date"||$.cookie("SubsSortBy")=="channel_title"?$.cookie("SubsSortBy"):"title",page:1,cache:"",opened:false,openn:function(){this.opened=true;this.getSubs()},reset:function(){FJSubs.data={actual:0}},addSubscription:function(e,s){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJSubs.addSubscription(e,s)});loginOpen();return false}var t="/ajax/User_subscribe/"+e;var a={};$.ajax({type:"post",url:t,data:a,success:function(e){if(e=="OK"){document.getElementById("AddSub").style.display="none";document.getElementById("DelSub").style.display="";f.s('You are successfully subscribed to posts of <strong class="greenLight">'+s+"</strong>"+".");subsData.data.all=parseInt(subsData.data.all)+1;subsData.data.count=parseInt(subsData.data.count)+1;if(FJSubs.data.actual!=0)FJSubs.data.actual=1;FJSubs.changeGlobalCount()}else{var t=new String("");t=e;if(t.search("REFERENCEUSER")==-1){dialog.alert(e)}else{var a='<strong class="greenLight">'+s+"</strong>";newResponseStr=t.replace("REFERENCEUSER",a);dialog.alert(newResponseStr);document.getElementById("AddSub").style.display="none";document.getElementById("DelSub").style.display=""}}},error:function(){f.e("Request failed")}})},removeFromSubscription:function(e,s){var t="/ajax/user_Unsubscribe/"+e;var a={};$.ajax({type:"post",url:t,data:a,success:function(e){if(e=="OK"){document.getElementById("AddSub").style.display="";document.getElementById("DelSub").style.display="none";subsData.data.all=parseInt(subsData.data.all)-1;subsData.data.count=parseInt(subsData.data.count)-1;FJSubs.changeGlobalCount();f.s('You are successfully unsubscribed from posts of <strong class="greenLight">'+s+"</strong>"+".")}else{alert("Already Unsubscirbed")}},error:function(){}})},removeSubscriptionFromPopUp:function(e,s,t){subsId=FJSubs.cache[e].id;var a="/userbar/user_UnsubscribeFromPopup/"+subsId+"/"+t;var n={};$.ajax({type:"post",url:a,data:n,success:function(e){if(e=="OK"){try{deleteJSONItem(subsData,"id",subsId)}catch(e){FJ.error(e.message)}subsData.data.all=parseInt(subsData.data.all)-1;subsData.data.count=parseInt(subsData.data.count)-1;FJSubs.changeGlobalCount()}else{dialog.alert(e)}FJSubs.getSubs()},error:function(){}})},getSubs:function(){if(FJ.reg("subs")){return}if(typeof FJSubs.page=="undefined"){page=1}var e=$("#subscribersListContainer");var s=$("<div>").addClass("dialogBlackW8");e.append(s);FJ.reg("subs",true);$.ajax({type:"get",url:"/userbar/listSubscriptions/"+FJSubs.sortBy+"/"+FJSubs.page+"/",dataType:"json",complete:function(){FJ.reg("subs",false)},success:function(s){try{FJSubs.cache=s;if(FJSubs.cache!=""){FJSubs.pagination=FJSubs.cache.pagination;FJSubs.sortSubs()}if(typeof FJSubs.cache[0]=="undefined"){data='<div class="pt10 aCenter">Subscriptions list are empty</div>'}else{data=FJSubs.generateSubsList()}e.html(data).append(FJSubs.pagination);FJSubs.changeGlobalCount()}catch(e){FJ.error(e.message)}e.find("dialogBlackW8").remove()},error:function(){e.find("dialogBlackW8").remove();FJ.error("failed")}})},deleteAllSubscriptions:function(){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){FJSubs.deleteAllSubscriptions()});loginOpen();return false}if(!dialog.confirm("Confirmation","Delete all subscriptions?",function(){FJSubs.deleteAllSubscriptions()},true,"Yes","No")){return false}$.ajax({type:"post",url:"/userbar/deleteallsubscriptions/",success:function(e){if(e=="OK"){FJSubs.reset();FJSubs.getSubs();subsData.data.all=0;subsData.data.count=0;FJSubs.changeGlobalCount()}else{dialog.alert("Request failed. Try again later")}},error:function(){dialog.alert("Request failed. Try again later")}});return false},generateSubsList:function(){var e="";e+="<tr>";e+="<th>Name</th>";e+="<th>Subscribed</th>";e+="<th>Unsubscribe</th>";e+="</tr>";for(var s in FJSubs.cache){if(s=="data"||s=="pagination")continue;e+="<tr>";FJSubs.cache[s].title=escape(FJSubs.cache[s].title.replace('"',""));if(FJSubs.cache[s].reference_type=="user"){e+='<td class="subsTitle">';if(FJSubs.cache[s].avatar!=""&&FJSubs.cache[s].avatar!=null){e+='<img class="subsAvatar" src="'+FJSubs.cache[s].avatar+'" />'}e+='<a href="/user/'+FJSubs.cache[s].title+'">'+FJSubs.cache[s].title+"</a></td>";e+='<td class="subsTimeAdded">'+FJSubs.cache[s].time_added+"</td>";e+='<td class="subsDelete">';e+='<span class="styledBtn magentaBtn" ';e+='onclick="FJSubs.removeSubscriptionFromPopUp('+s+", '"+FJSubs.cache[s].title.replace("'","\\'")+"', '"+FJSubs.cache[s].reference_type.replace("'","\\'")+"'); return false\" ";e+='title="Remove from subscriptions">Unsubscribe</span>';e+="</td>"}else if(FJSubs.cache[s].reference_type=="channel"){e+='<td class="subsTitle">';e+='<a title="'+FJSubs.cache[s].title+'" href="/channel/'+FJSubs.cache[s].name+'">'+FJSubs.cache[s].name+"</a></td>";e+='<td class="subsTimeAdded">'+FJSubs.cache[s].time_added+"</td>";e+='<td class="subsDelete">';e+='<span class="styledBtn magentaBtn" ';e+='onclick="FJSubs.removeSubscriptionFromPopUp('+s+", '"+FJSubs.cache[s].name.replace("'","\\'")+"', '"+FJSubs.cache[s].reference_type.replace("'","\\'")+"'); return false\" ";e+='title="Remove from subscriptions">Unsubscribe</span>';e+="</td>"}e+="</tr>"}$("#subscribersListContainer").removeClass("dialogBlackW8");return e!=""?'<table id="subscribersList">'+e+"</table>":""},changeSorting:function(e){if($.inArray(e,FJSubs.allowedSorts)!=-1){if(e!=FJSubs.sortBy){FJSubs.page=1;FJSubs.sortBy=e;$.cookie("SubsSortBy",e,{path:"/",expires:365});FJSubs.getSubs()}}},sortSubs:function(){if(FJ.reg("sortSubs")){return}FJ.reg("sortSubs",true);$.each(FJSubs.allowedSorts,function(e,s){if(FJSubs.sortBy==s){$("#subs_"+s).addClass("activeSort")}else{$("#subs_"+s).removeClass("activeSort")}});FJ.reg("sortSubs",false)},changePage:function(e){FJSubs.page=parseInt(e)>0?parseInt(e):1;FJSubs.getSubs()},addNewData:function(e){subsData.data.all=parseInt(e);this.changeGlobalCount()},changeGlobalCount:function(){if(parseInt(subsData.data.all)>0){$("#userbarSubscriptionsCount, .userbarSubscriptionsCount").closest("li").removeClass("hidden")}else{$("#userbarSubscriptionsCount, .userbarSubscriptionsCount").closest("li").addClass("hidden")}$("#userbarSubscriptionsCount, .userbarSubscriptionsCount").text(subsData.data.all)}};function subscriptionsTab(){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",subscriptionsTab);loginOpen();return}$("#subscribersContainer").remove();$("#subscribersListContainer").remove();var e=$('<div id="subscribersContainer" name="subscribers">');var s='<div class="p2Tabs">'+"<strong>Users by: </strong>";s+='<span id="subs_title" onclick="FJSubs.changeSorting(\'title\');return false;">Name</span>';s+='<span id="subs_date" onclick="FJSubs.changeSorting(\'date\');return false;">Date you subscribed</span>'+"</div>";if($(window).width()<600){s+="<br />"}s+="<strong>&nbsp;&nbsp;&nbsp;Channels by: </strong>";s+='<span id="subs_channel_title" onclick="FJSubs.changeSorting(\'channel_title\');return false;">Name</span>';s+='<span id="subs_channel_date" onclick="FJSubs.changeSorting(\'channel_date\');return false;">Date you subscribed</span>';var t=$("<div>").attr({id:"subscribersHeader",class:"popTabs"}).html(s);var a=$("<div>").attr({id:"subscribersListContainer"}).css("clear","both");e.html(t).append(a);e.dialog({width:$(window).width()>=600?600:"90%",height:450,minHeight:300,maxHeight:600,title:"Subscriptions",resizable:true,close:function(){$(this).remove()},buttons:{Close:function(){$("#subscribersContainer").remove();$(this).dialog("close")},"Delete all subscriptions":function(){FJSubs.deleteAllSubscriptions()}}});FJSubs.openn(a)}var userSubscriptions={currentPage:1,orderDefault:"desc",sectionDefault:"subscriptioncontent",perPage:20,sortBy:"date",page:1,loadInitialSubsContent:function(e,s,t,a,n){if(s==null&&userSubscriptions.sectionDefault=="subscriptioncontent"){s="subscriptioncontent"}else if(s==null&&userSubscriptions.sectionDefault!="subscriptioncontent"){s=userSubscriptions.sectionDefault}var r=$("<div>").addClass("contetLoadingw8");var i="";if(document.getElementById("hiddenTypeId")&&document.getElementById("hiddenTypeId").value!=""){i=$("#hiddenTypeId").val();t=i}if(i==""&&(t==null||t=="")){t=0}var u=$("#subscription_content_main").html();a="/base_contentsubs/userSubsInitialContent/"+t+"/"+s;$.ajax({type:"get",url:a,success:function(e){if(n!=undefined){n.call()}else{var t=$("#subscription_content_main").html();if(t==""){$("#subscription_content_main").html(e);$(".contetLoadingw8").remove()}$("div.sFilterBy select,#"+s+"_perPage, #"+s+"_picSort, #"+s+"_picOrder").selectbox()}},error:function(){$("#"+s+"_content").text("Request Failed")}});return false},setPicPerPage:function(e,s,t){if(e==userSubscriptions.perPage);userSubscriptions.loadSettings(s);userSubscriptions.currentPage=1;userSubscriptions.sectionDefault=s;userSubscriptions.perPage=e;userSubscriptions.loadSubsContentList(1,s,t)},setSortBy:function(e,s,t){if(e==userSubscriptions.sortBy);userSubscriptions.currentPage=1;userSubscriptions.loadSettings(s);userSubscriptions.sortBy=e;userSubscriptions.sectionDefault=s;userSubscriptions.loadSubsContentList(1,s,t)},setSortOrder:function(e,s,t){if(e==userSubscriptions.orderDefault);userSubscriptions.currentPage=1;userSubscriptions.loadSettings(s);userSubscriptions.sectionDefault=s;userSubscriptions.orderDefault=e;userSubscriptions.loadSubsContentList(1,s,t)},loadSubsContentList:function(e,s,t,a,n){if(s==null&&userSubscriptions.sectionDefault=="subscriptioncontent"){s="subscriptioncontent"}else if(s==null&&userSubscriptions.sectionDefault!="subscriptioncontent"){s=userSubscriptions.sectionDefault}var r=$("<div>").addClass("contetLoadingw8");var i=$("<div>").addClass("contetLoadingw8");$("#"+s+"_content").append(i);var u="";if(document.getElementById("hiddenTypeId")&&document.getElementById("hiddenTypeId").value!=""){u=$("#hiddenTypeId").val();t=u}if(u==""&&(t==null||t=="")){t=0}i.animate({height:"16px"},200);userSubscriptions.perPage=$("#"+s+"_perPage_input").val();userSubscriptions.sortBy=$("#"+s+"_picSort_input").val();userSubscriptions.orderDefault=$("#"+s+"_picOrder_input").val();if(userSubscriptions.sortBy==""){userSubscriptions.sortBy="Select"}a="/base_contentsubs/userSubsContent/"+t+"/"+userSubscriptions.orderDefault+"/"+userSubscriptions.perPage+"/"+userSubscriptions.sortBy+"/"+e+"/"+s;$.ajax({type:"get",url:a,success:function(e){if(n!=undefined){n.call()}else{$("#"+s+"_content").html(e);$(".contetLoadingw8").remove()}},error:function(){}});return false},loadSettings:function(e){userSubscriptions.perPage=$("#"+e+"_perPage_input").val();userSubscriptions.orderDefault=$("#"+e+"_picOrder_input").val();userSubscriptions.sortBy=$("#"+e+"_picSort_input").val()}};
var WindowsPos=Array();var NewMessages=Array();function windows(i,t,e,s,n){if(i==undefined){FJ.log("undefined chat window");return}if(s==undefined||s==""){this.avatar=false}else{this.avatar=$('<img src="'+s+'" />')}this._blockStatus=false;this._id="chat_"+i;this._userId=i;this._userName=t;this._newMessage=false;this._active=false;this._min=false;this._first=true;this._status=e;this._opened=false;this._stack=false;var o=this.startPosition(i);this._height=o.height;this._actions=$('<div class="chat_actions" style="width: '+(o.width-20)+'px;">'+"<div>"+'<span class="cmd"></span>'+'<span class="mute"></span>'+"</span>"+'<span class="chat_clear" onclick="chat.clear('+i+')">clear history</span>'+"</div>"+"</div>");this._form=$('<form action="" method="post" onsubmit="return false;">'+'<input type="hidden" name="receiverId" value="'+i+'"/>'+'<input type="hidden" name="receiverName" value="'+t+'"/>'+'<textarea type="text" name="message" style="width: 100%; height: 16px">'+"</textarea>"+"</form>");this._actions.append($("<div>").append(this._form));this._innerChat=$("<div>").attr({class:"innerChat",id:this._id});var a=this._id;var r=this.getNumberOfLetters(o.width);var h=this.truncate(t,r);var f=this._getTitle(h,e,this.avatar);var l=this;this._innerChat.dialog({autoOpen:false,title:f,position:[o.left,o.top],resizable:!o.min,height:o.height,width:o.width,titleHtml:true,beforeclose:function(){l.close();chat.closeWindow(l._userId);return false},drag:function(i,t){if(t.position.top<0)t.position.top=0;var e=$(window).scrollTop();if(e>0&&t.position.top==t.offset.top){t.position.top=t.position.top-e;if(t.position.top<0)t.position.top=0}if(l._min)var s=$(window).height()-40;else var s=$(window).height()-l._height;if(t.position.top>s){t.position.top=s}},dragStop:function(i,t){if(l._min)var e=$(window).height()-40;else var e=$(window).height()-l._height;if(t.position.top>e){l._stack=true;l._window.css("top",e);l.savePosition(t.position.left,e)}else{l._stack=false;l.savePosition(t.position.left,t.position.top)}l._window.css("height","")},resize:function(i,e){l._actions.width(e.size.width-20);var s=l.getNumberOfLetters(e.size.width);var n=l.truncate(t,s);l._window.find(".title").html("IM with "+n)},resizeStop:function(t,e){l._actions.width(e.size.width-20);var s=l.startPosition(i);l.savePosition(s.left,s.top,e.size.width,e.size.height);l._window.css({height:"",top:s.top});l._height=e.size.height;if(!(BrowserDetect.browser=="IE"&&Number(BrowserDetect.version)==6))l._window.css({position:"fixed"})}});this._window=this._innerChat.parent();this._window.addClass("chatWindow");if(!(BrowserDetect.browser=="IE"&&Number(BrowserDetect.version)==6))this._window.css({position:"fixed"});var d=$('<a href="#"/>').addClass("ui-dialog-titlebar-minimize "+"ui-corner-all").attr("role","button").hover(function(){d.addClass("ui-state-hover")},function(){d.removeClass("ui-state-hover");d.blur()}).mousedown(function(i){i.stopPropagation()}).click(function(i){l.minimize(i);return false}).appendTo(l._window.find(".ui-dialog-titlebar"));uiDialogTitlebarMinimizeText=(uiDialogTitlebarMinimizeText=$("<span/>")).addClass("ui-icon "+"ui-icon-minusthick").text("minimize").appendTo(d);this._uiMinimize=uiDialogTitlebarMinimizeText;if(o.min)this._min=true;this._title=this._window.find(".ui-dialog-title");this._title.css({width:"100%"});this._window.append(this._actions);this.setMute(n);this._textarea=this._form.find(':input[name="message"]');this._textarea.css("width","100%");this._textarea.autoResize({limit:100,extraSpace:0});this._window.bind("click",function(){var i="";if(window.getSelection)i=window.getSelection();else if(document.getSelection)i=document.getSelection();else if(document.selection)i=document.selection.createRange().text;if(i=="")l._textarea.focus();l.active(true)});this._textarea.bind("keypress",function(i){if(!l.onKeyPress(i))return false}).bind("blur",function(){l.active(false)});this._actions.find(".mute").bind("click",function(){l.mute(this)})}windows.prototype={open:function(i){if(!this._opened){this._innerChat.dialog("open");this._opened=true;if(this._min){this._min=false;this.minimize(false)}return}this._window.show();this._innerChat.dialog("moveToTop");if(i!=undefined){this._textarea.focus();this.active(true)}},close:function(){this._window.hide();this._blinkStop();obj=chat.unserialize($.cookie("fjchat"));if(typeof obj.pos=="undefined"||typeof obj.pos[this._userId]=="undefined")return;delete obj.pos[this._userId];$.cookie("fjchat",chat.serialize(obj),cookieOption)},destroy:function(){this.close();this._innerChat.dialog("destroy")},system:function(i){var t="";var e=true;var s=false;if(i==0){t="disconnected"}else if(i==1){t='connecting <img src="'+chatIconDir()+'w8_12.gif" />'}else if(i==2){t="connected";this._blockStatus=false}else if(i==3){t="connection failed";s=true}else if(i==4){t='<div class="system_chat">IM require flash to work <br />'+'<a target="_blank" href="http://get.adobe.com/flashplayer/">Install flash player now!</a></div>';e=false}if(this._blockStatus)return;if(s)this._blockStatus=true;if(e)this._actions.find(".cmd").html(t);else{this._innerChat.find(".system_chat").remove();this._innerChat.append(t)}this.scrollDown()},write:function(i){this._innerChat.append(i);this._first=false;this._actions.find(".cmd").html("");var t=this._innerChat.find(".system_chat");if(t.length>0)t.remove();this.scrollDown()},noDelivered:function(i,t,e){if(e==undefined)e=false;var s=this._innerChat.find(".id_"+i);if(s.length<1){var n=this;setTimeout(function(){n.noDelivered(i,t,e)},1e3);return}s.before(t);if(e){s.addClass("notDelivered").append(' (<a class="sendAsPm" href="#" onclick="chat.pm('+i+");"+' return false;">send as pm</a>)')}this.scrollDown()},deleteMessage:function(i,t){if(t==undefined)t=false;var e=this._innerChat.find(".id_"+i);if(e.length<1){var s=this;setTimeout(function(){s.deleteMessage(i,t)},1e3);return}e.remove();if(t)this.addNotify(t)},addNotify:function(i){this._innerChat.append('<div class="chatNotify"><span>'+i+"</span></div>");this.scrollDown()},clear:function(){var i=this._innerChat.find(".chat_header");this._innerChat.html("");if(i.length>0)this._innerChat.append(i)},scrollDown:function(){this._innerChat.scrollTop(this._innerChat.get(0).scrollHeight)},onKeyPress:function(i){this.entryLimit();var t=i.which;if(t==13){if(i.shiftKey)return true;if(!chat.send(this._form))return false;return false}return true},entryLimit:function(){var i=this._textarea.val().length;if(i>300)this._textarea.val(this._textarea.val().substr(0,300));return true},startPosition:function(i){var t=$(window).width();var e=$(window).width();var s,n,o,a,r=false;obj=chat.unserialize($.cookie("fjchat"));if(obj.hasOwnProperty("pos")&&obj.pos.hasOwnProperty(this._userId)){n=obj.pos[this._userId][0];s=obj.pos[this._userId][1];o=obj.pos[this._userId][2];a=obj.pos[this._userId][3];r=obj.pos[this._userId][4]}if(!o){o=260;a=300;r=false}if(!s){n=(t-260)/2;s=150;for(u in WindowsPos){var h=false;if(WindowsPos[u].left>n-20&&WindowsPos[u].left<n+20){if(n>t-500||h==true)n-=50;else n+=30}if(WindowsPos[u].top>s-20&&WindowsPos[u].top<s+20){s+=40}}}this.savePosition(n,s);return{top:s,left:n,width:o,height:a,min:r}},savePosition:function(i,t,e,s){obj=chat.unserialize($.cookie("fjchat"));WindowsPos[this._id]=Object();if(!obj.hasOwnProperty("pos"))obj.pos={};if(i==undefined){if(obj.pos.hasOwnProperty(this._userId))obj.pos[this._userId][4]=this._min}else{WindowsPos[this._id]={left:i,top:t};if(e==undefined){if(obj.pos.hasOwnProperty(this._userId)&&obj.pos[this._userId].hasOwnProperty(2)){e=obj.pos[this._userId][2];s=obj.pos[this._userId][3]}else{e=260;s=300}}obj.pos[this._userId]=[i,t,e,s,this._min]}$.cookie("fjchat",chat.serialize(obj),cookieOption)},isStack:function(){if(this._stack)return true;var i=$(window).height();var t=this._window.css("top");if(this._min)var e=40;else var e=this._height;if(t.substr(0,t.length-2)==i-e){return true}return false},minimize:function(i){i=i||true;if(this._min){this._min=false;this._innerChat.dialog("option","resizable",true);this._innerChat.show();this._actions.show();this.scrollDown();this._uiMinimize.addClass("ui-icon-minusthick");this._uiMinimize.removeClass("ui-icon-arrow-4-diag");var t=$(window).height();var e=this._window.css("top");if(i&&e.substr(0,e.length-2)>=t-40){this._window.css("top",t-this._height);this.savePosition(this._window.css("left"),t-this._height);this._stack=true}}else{if(i&&this.isStack()){var t=$(window).height()-40;this._window.css("top",t);this.savePosition(this._window.css("left"),t)}this._min=true;this._innerChat.dialog("option","resizable",false);this._innerChat.hide();this._actions.hide();this._uiMinimize.removeClass("ui-icon-minusthick");this._uiMinimize.addClass("ui-icon-arrow-4-diag")}this.savePosition()},resetPosition:function(){var i=this.startPosition();this._innerChat.dialog("option","position",[i.left,i.top])},active:function(i){this._active=i;if(i){if(this._min&&this._newMessage)this.minimize();this.read()}},newMessage:function(){if(this._active)this.read();else if(!this._active&&!this._newMessage){this._newMessage=true;this._blink()}},read:function(){chat.read(this._userId);this._newMessage=false;this._blinkStop()},options:function(){var i;i=this._window.find(".optionsDialog");i.toggle();if(i.length<1){var i=$('<div class="optionsDialog">'+'<form action="#" method="post">'+"<label>mute</label>"+'<input type="checkbox" name="mute" />'+"</form>"+"</div>");this._window.append(i)}},setMute:function(i){var t=this._window.find(".mute");if(parseInt(i))t.removeClass("mute_off");else t.addClass("mute_off")},mute:function(i){var t=$(i);if(t.hasClass("mute_off")){t.removeClass("mute_off");chat.muteSetting(1)}else{t.addClass("mute_off");chat.muteSetting(0)}},setStatus:function(i){if(this._status==i)return;this._status=i;this._statusMsg(i);this._title.find(".icon").html(this._getStatusIcon(i))},_getStatusIcon:function(i){if(i==undefined||i===0)return'<img src="'+chatIconDir()+'uoffline.png" alt="offline">';else if(i==1)return'<img src="'+chatIconDir()+'uonline.png" alt="online">';else if(i==2)return'<img src="'+chatIconDir()+'uidle.png" alt="idle">';else return'<img src="'+chatIconDir()+'uoffline.png" alt="offline">'},_statusMsg:function(i){var t=false;if(i==1)t=this._userName+" is online";else if(i==0)t=this._userName+" is offline";if(t){t='<div><span class="chatStatus">'+t+"</span></div>";this._innerChat.append(t);this.scrollDown()}},_blink:function(){this._title.textBlink({start:1e3,delay:800});var i=this._userName;if(BrowserDetect.browser!="IE")$("title").textBlink({start:1e3,delay:2e3,alt:"FJ - "+i+" says ..."})},_blinkStop:function(){this._title.textBlink("stop");if(BrowserDetect.browser!="IE")$("title").textBlink("stop")},_getTitle:function(i,t,e){var s=this._getStatusIcon(t);e=$("<span>").append(e);return'<span class="chatAvatar">'+e.html()+'</span> <span class="title">IM with '+i+'</span> <span class="icon">'+s+"</span>"},getNumberOfLetters:function(i){var t=26;var e=Math.floor(i/t);return e},truncate:function(i,t,e){if(typeof t=="undefined")var t=9;if(typeof e=="undefined")var e="...";if(i.length<t)return i;return i.substr(0,t)+e}};
var qq=qq||{};qq.extend=function(e,t){for(var n in t){e[n]=t[n]}};qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var i=e.length;if(n<0)n+=i;for(;n<i;n++){if(n in e&&e[n]===t){return n}}return-1};qq.getUniqueId=function(){var e=0;return function(){return e++}}();qq.ie=function(){return navigator.userAgent.indexOf("MSIE")!=-1};qq.safari=function(){return navigator.vendor!=undefined&&navigator.vendor.indexOf("Apple")!=-1};qq.chrome=function(){return navigator.vendor!=undefined&&navigator.vendor.indexOf("Google")!=-1};qq.firefox=function(){return navigator.userAgent.indexOf("Mozilla")!=-1&&navigator.vendor!=undefined&&navigator.vendor==""};qq.windows=function(){return navigator.platform=="Win32"};qq.attach=function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}return function(){qq.detach(e,t,n)}};qq.detach=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}else if(e.attachEvent){e.detachEvent("on"+t,n)}};qq.preventDefault=function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};qq.insertBefore=function(e,t){t.parentNode.insertBefore(e,t)};qq.remove=function(e){e.parentNode.removeChild(e)};qq.contains=function(e,t){if(e==t)return true;if(e.contains){return e.contains(t)}else{return!!(t.compareDocumentPosition(e)&8)}};qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;e.removeChild(n);return n}}();qq.css=function(e,t){if(t.opacity!=null&&typeof t.opacity!="undefined"){if(typeof e.style.opacity!="string"&&typeof e.filters!="undefined"){t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"}}qq.extend(e.style,t)};qq.hasClass=function(e,t){var n=new RegExp("(^| )"+t+"( |$)");return n.test(e.className)};qq.addClass=function(e,t){if(!qq.hasClass(e,t)){e.className+=" "+t}};qq.removeClass=function(e,t){var n=new RegExp("(^| )"+t+"( |$)");e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,"")};qq.setText=function(e,t){e.innerText=t;e.textContent=t};qq.children=function(e){var t=[],n=e.firstChild;while(n){if(n.nodeType==1){t.push(n)}n=n.nextSibling}return t};qq.getByClass=function(e,t){if(e.querySelectorAll){return e.querySelectorAll("."+t)}var n=[];var i=e.getElementsByTagName("*");var o=i.length;for(var s=0;s<o;s++){if(qq.hasClass(i[s],t)){n.push(i[s])}}return n};qq.obj2url=function(e,t,n){var i=[],o="&",s=function(e,n){var o=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;if(o!="undefined"&&n!="undefined"){i.push(typeof e==="object"?qq.obj2url(e,o,true):Object.prototype.toString.call(e)==="[object Function]"?encodeURIComponent(o)+"="+encodeURIComponent(e()):encodeURIComponent(o)+"="+encodeURIComponent(e))}};if(!n&&t){o=/\?/.test(t)?/\?$/.test(t)?"":"&":"?";i.push(t);i.push(qq.obj2url(e))}else if(Object.prototype.toString.call(e)==="[object Array]"&&typeof e!="undefined"){for(var a=0,r=e.length;a<r;++a){s(e[a],a)}}else if(typeof e!="undefined"&&e!==null&&typeof e==="object"){for(var a in e){s(e[a],a)}}else{i.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}return i.join(o).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};qq.FileUploaderBasic=function(e){this._options={debug:false,action:"/server/upload",params:{},customHeaders:{},button:null,noInputCss:false,multiple:true,maxConnections:3,allowedExtensions:[],acceptFiles:null,sizeLimit:0,minSizeLimit:0,abortOnFailure:true,onSubmit:function(e,t){},onProgress:function(e,t,n,i){},onComplete:function(e,t,n){},onCancel:function(e,t){},onInit:function(){},onUpload:function(e,t,n){},onError:function(e,t,n){},messages:{typeError:"Unfortunately the file(s) you selected weren't the type we were expecting. Only {extensions} files are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(e){alert(e)},inputName:"qqfile",extraDropzones:[]};qq.extend(this._options,e);qq.extend(this,qq.DisposeSupport);this._filesInProgress=0;this._handler=this._createUploadHandler();if(this._options.button){this._button=this._createUploadButton(this._options.button)}this._preventLeaveInProgress()};qq.FileUploaderBasic.prototype={setParams:function(e){this._options.params=e},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(e){var t=this;var n=new qq.UploadButton({element:e,noInputCss:this._options.noInputCss,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),acceptFiles:this._options.acceptFiles,onChange:function(e){t._onInputChange(e)}});this.addDisposer(function(){n.dispose()});return n},_createUploadHandler:function(){var e=this,t;if(qq.UploadHandlerXhr.isSupported()){t="UploadHandlerXhr"}else{t="UploadHandlerForm"}var n=new qq[t]({debug:this._options.debug,action:this._options.action,encoding:this._options.encoding,maxConnections:this._options.maxConnections,customHeaders:this._options.customHeaders,inputName:this._options.inputName,extraDropzones:this._options.extraDropzones,onProgress:function(t,n,i,o){e._onProgress(t,n,i,o);e._options.onProgress(t,n,i,o)},onComplete:function(t,n,i){e._onComplete(t,n,i);e._options.onComplete(t,n,i)},onCancel:function(t,n){e._onCancel(t,n);e._options.onCancel(t,n)},onError:e._options.onError,onUpload:function(t,n,i){e._onUpload(t,n,i);e._options.onUpload(t,n,i)}});return n},_preventLeaveInProgress:function(){var e=this;this._attach(window,"beforeunload",function(t){if(!e._filesInProgress){return}var t=t||window.event;t.returnValue=e._options.messages.onLeave;return e._options.messages.onLeave})},_onSubmit:function(e,t){this._filesInProgress++},_onProgress:function(e,t,n,i){},_onComplete:function(e,t,n){this._filesInProgress--;if(n.error){this._options.showMessage(n.error)}},_onCancel:function(e,t){this._filesInProgress--},_onUpload:function(e,t,n){},_onInputChange:function(e){if(this._handler instanceof qq.UploadHandlerXhr){this._uploadFileList(e.files)}else{if(this._validateFile(e)){this._uploadFile(e)}}this._button.reset()},_uploadFileList:function(e){var t=[];for(var n=0;n<e.length;n++){if(this._validateFile(e[n])){t.push(e[n])}else{if(this._options.abortOnFailure)return}}for(var n=0;n<t.length;n++){this._uploadFile(t[n])}},_uploadFile:function(e){var t=this._handler.add(e);var n=this._handler.getName(t);if(this._options.onSubmit(t,n)!==false){this._onSubmit(t,n);this._handler.upload(t,this._options.params)}},_validateFile:function(e){var t,n;if(e.value){t=e.value.replace(/.*(\/|\\)/,"")}else{t=e.fileName!==null&&e.fileName!==undefined?e.fileName:e.name;n=e.fileSize!==null&&e.fileSize!==undefined?e.fileSize:e.size}if(!this._isAllowedExtension(t)){this._error("typeError",t);return false}else if(n===0){this._error("emptyError",t);return false}else if(n&&typeof this._options.sizeLimit=="function"&&n>this._options.sizeLimit(e)){this._error("sizeError",t,e);return false}else if(n&&this._options.sizeLimit&&n>this._options.sizeLimit){this._error("sizeError",t);return false}else if(n&&n<this._options.minSizeLimit){this._error("minSizeError",t);return false}return true},_error:function(e,t,n){var i=this._options.messages[e];function o(e,t){i=i.replace(e,t)}o("{file}",this._formatFileName(t));o("{extensions}",this._options.allowedExtensions.join(", "));if(typeof this._options.sizeLimit=="function"){o("{sizeLimit}",this._formatSize(this._options.sizeLimit(n)))}else{o("{sizeLimit}",this._formatSize(this._options.sizeLimit))}o("{minSizeLimit}",this._formatSize(this._options.minSizeLimit));this._options.showMessage(i)},_formatFileName:function(e){if(e.length>33){e=e.slice(0,19)+"..."+e.slice(-13)}return e},_isAllowedExtension:function(e){var t=-1!==e.indexOf(".")?e.replace(/.*[.]/,"").toLowerCase():"";var n=this._options.allowedExtensions;if(!n.length){return true}for(var i=0;i<n.length;i++){var o=n[i].substr(0,1)=="."?n[i].substr(1):n[i];if(o.toLowerCase()==t){return true}}return false},_formatSize:function(e){var t=-1;do{e=e/1024;t++}while(e>99);return Math.max(e,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][t]}};qq.FileUploader=function(e){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,doNotReplaceTemplate:false,dragText:"Drop files here to upload",useBodyAsDropArea:false,uploadButtonText:"Upload a file",cancelButtonText:"Cancel",failUploadText:"Upload failed",hideShowDropArea:true,template:'<div class="qq-uploader">'+'<div class="qq-upload-drop-area"><span>{dragText}</span></div>'+'<div class="qq-upload-button">{uploadButtonText}</div>'+'<ul class="qq-upload-list"></ul>'+"</div>",fileTemplate:"<li>"+'<span class="qq-progress-bar"></span>'+'<span class="qq-upload-file"></span>'+'<span class="qq-upload-spinner"></span>'+'<span class="qq-upload-size"></span>'+'<a class="qq-upload-cancel" href="#">{cancelButtonText}</a>'+'<span class="qq-upload-failed-text">{failUploadtext}</span>'+"</li>",classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",dropDisabled:"qq-upload-drop-area-disabled",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}});qq.extend(this._options,e);this._options.template=this._options.template.replace(/\{dragText\}/g,this._options.dragText);this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.uploadButtonText);this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.cancelButtonText);this._options.fileTemplate=this._options.fileTemplate.replace(/\{failUploadtext\}/g,this._options.failUploadText);this._element=this._options.element;if(this._options.doNotReplaceTemplate){this._element.innerHTML=this._element.innerHTML+this._options.template}else{this._element.innerHTML=this._options.template}this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._button=this._createUploadButton(this._find(this._element,"button"));this._bindCancelEvent();this._setupDragDrop();this._options.onInit()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);qq.extend(qq.FileUploader.prototype,{addExtraDropzone:function(e){this._setupExtraDropzone(e)},removeExtraDropzone:function(e){var t=this._options.extraDropzones;for(var n in t)if(t[n]===e)return this._options.extraDropzones.splice(n,1)},_leaving_document_out:function(e){return(qq.chrome()||qq.safari()&&qq.windows())&&e.clientX==0&&e.clientY==0||qq.firefox()&&!e.relatedTarget},_find:function(e,t){var n=qq.getByClass(e,this._options.classes[t])[0];if(!n){console.log(this._options.classes[t]);throw new Error("element not found "+t)}return n},_setupExtraDropzone:function(e){this._options.extraDropzones.push(e);this._setupDropzone(e)},_setupDropzone:function(e){var t=this;var n=false;var i=new qq.UploadDropZone({element:e,onEnter:function(n){qq.addClass(e,t._classes.dropActive);n.stopPropagation();clearTimeout(window.glowRemove);window.glowRemove=setTimeout(function(){qq.removeClass(e,t._classes.dropActive)}.bind(t),3e3)},onLeave:function(e){},onLeaveNotDescendants:function(n){qq.removeClass(e,t._classes.dropActive)},onDrop:function(n){if(t._options.hideShowDropArea){e.style.display="none"}qq.removeClass(e,t._classes.dropActive);var i=n.dataTransfer.getData("text/html");if($(i).children().length>0){var o=$(i).find("img").attr("src")}else{var o=$(i).attr("src")}if(o&&typeof t._options!="undefined"&&typeof t._options.onUploadUrl!="undefined"){if(typeof t._options.saveRecentlyAddedFile!="undefined"){t._options.saveRecentlyAddedFile(o)}t._options.onUploadUrl(o)}else{if(n.dataTransfer.files&&n.dataTransfer.files.length>1){dialog.alert("Only 1 file allowed");return}t._uploadFileList(n.dataTransfer.files)}}});this._dropZone=i;this.addDisposer(function(){i.dispose()});if(this._options.hideShowDropArea){e.style.display="none"}},_setupDragDrop:function(){if(!this._options.useBodyAsDropArea){var e=this._find(this._element,"drop")}else{var e=document.getElementsByTagName("body")[0]}var t=this;this._options.extraDropzones.push(e);var n=this._options.extraDropzones;var i;for(i=0;i<n.length;i++){this._setupDropzone(n[i])}if(!qq.ie()){this._attach(document,"dragenter",function(o){if(!t._dropZone._isValidFileDrag(o))return;if(qq.hasClass(e,t._classes.dropDisabled))return;e.style.display="block";for(i=0;i<n.length;i++){n[i].style.display="block"}})}this._attach(document,"dragleave",function(e){var o=document.elementFromPoint(e.clientX,e.clientY);if(t._options.hideShowDropArea&&qq.FileUploader.prototype._leaving_document_out(e)){for(i=0;i<n.length;i++){n[i].style.display="none"}}});qq.attach(document,"drop",function(e){if(t._options.hideShowDropArea){for(i=0;i<n.length;i++){n[i].style.display="none"}}e.preventDefault()})},_onSubmit:function(e,t){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(e,t)},_onProgress:function(e,t,n,i){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var o=this._getItemByFileId(e);var s=this._find(o,"size");s.style.display="inline";var a;var r=Math.round(n/i*100);if(n!=i){a=r+"% from "+this._formatSize(i)}else{a=this._formatSize(i)}this._find(o,"progressBar").style.width=r+"%";qq.setText(s,a)},_onComplete:function(e,t,n){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var i=this._getItemByFileId(e);qq.remove(this._find(i,"cancel"));qq.remove(this._find(i,"spinner"));if(n.success){qq.addClass(i,this._classes.success)}else{qq.addClass(i,this._classes.fail)}},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);n.qqFileId=e;$(n).attr("id","upload-file-"+e);var i=this._find(n,"file");qq.setText(i,this._formatFileName(t));this._find(n,"size").style.display="none";if(!this._options.multiple)this._clearList();this._listElement.appendChild(n)},_clearList:function(){this._listElement.innerHTML=""},_getItemByFileId:function(e){var t=this._listElement.firstChild;while(t){if(t.qqFileId==e)return t;t=t.nextSibling}},_bindCancelEvent:function(){var e=this,t=this._listElement;this._attach(t,"click",function(t){t=t||window.event;var n=t.target||t.srcElement;if(qq.hasClass(n,e._classes.cancel)){qq.preventDefault(t);var i=n.parentNode;e._handler.cancel(i.qqFileId);qq.remove(i)}})}});qq.UploadDropZone=function(e){this._options={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}};qq.extend(this._options,e);qq.extend(this,qq.DisposeSupport);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};qq.UploadDropZone.prototype={_dragover_should_be_canceled:function(){return qq.safari()||qq.firefox()&&qq.windows()},_disableDropOutside:function(e){if(!qq.UploadDropZone.dropOutsideDisabled){if(this._dragover_should_be_canceled){qq.attach(document,"dragover",function(e){e.preventDefault()})}else{qq.attach(document,"dragover",function(e){if(e.dataTransfer){e.dataTransfer.dropEffect="none";e.preventDefault()}})}qq.UploadDropZone.dropOutsideDisabled=true}},_attachEvents:function(){var e=this;e._attach(e._element,"dragover",function(t){if(!e._isValidFileDrag(t))return;var n=qq.ie()?null:t.dataTransfer.effectAllowed;if(n=="move"||n=="linkMove"){t.dataTransfer.dropEffect="move"}else{t.dataTransfer.dropEffect="copy"}t.stopPropagation();t.preventDefault()});e._attach(e._element,"dragenter",function(t){if(!e._isValidFileDrag(t))return;e._options.onEnter(t)});e._attach(e._element,"dragleave",function(t){if(!e._isValidFileDrag(t))return;e._options.onLeave(t);var n=document.elementFromPoint(t.clientX,t.clientY);if(qq.contains(this,n))return;e._options.onLeaveNotDescendants(t)});e._attach(e._element,"drop",function(t){if(!e._isValidFileDrag(t))return;t.preventDefault();e._options.onDrop(t)})},_isValidFileDrag:function(e){if(qq.ie())return false;var t=e.dataTransfer,n=qq.safari();return t&&t.effectAllowed!="none"&&(t.files||!n&&t.types.contains&&t.types.contains("Files"))}};qq.UploadButton=function(e){this._options={element:null,multiple:false,acceptFiles:null,name:"file",onChange:function(e){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,e);qq.extend(this,qq.DisposeSupport);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){if(this._input.parentNode){qq.remove(this._input)}qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var e=document.createElement("input");if(this._options.multiple){e.setAttribute("multiple","multiple")}if(this._options.acceptFiles)e.setAttribute("accept",this._options.acceptFiles);e.setAttribute("type","file");e.setAttribute("name",this._options.name);if(!this._options.noInputCss){qq.css(e,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0})}this._element.appendChild(e);var t=this;this._attach(e,"change",function(){t._options.onChange(e)});this._attach(e,"mouseover",function(){qq.addClass(t._element,t._options.hoverClass)});this._attach(e,"mouseout",function(){qq.removeClass(t._element,t._options.hoverClass)});this._attach(e,"focus",function(){qq.addClass(t._element,t._options.focusClass)});this._attach(e,"blur",function(){qq.removeClass(t._element,t._options.focusClass)});if(window.attachEvent){e.setAttribute("tabIndex","-1")}return e}};qq.UploadHandlerAbstract=function(e){this._options={debug:false,action:"/upload.php",maxConnections:999,onProgress:function(e,t,n,i){},onComplete:function(e,t,n){},onCancel:function(e,t){},onUpload:function(e,t,n){}};qq.extend(this._options,e);this._queue=[];this._params=[]};qq.UploadHandlerAbstract.prototype={log:function(e){if(this._options.debug&&window.console)console.log("[uploader] "+e)},add:function(e){},upload:function(e,t){var n=this._queue.push(e);var i={};qq.extend(i,t);this._params[e]=i;if(n<=this._options.maxConnections){this._upload(e,this._params[e])}},cancel:function(e){this._cancel(e);this._dequeue(e)},cancelAll:function(){for(var e=0;e<this._queue.length;e++){this._cancel(this._queue[e])}this._queue=[]},getName:function(e){},getSize:function(e){},getQueue:function(){return this._queue},_upload:function(e){},_cancel:function(e){},_dequeue:function(e){var t=qq.indexOf(this._queue,e);this._queue.splice(t,1);var n=this._options.maxConnections;if(this._queue.length>=n&&t<n){var i=this._queue[n-1];this._upload(i,this._params[i])}}};qq.UploadHandlerForm=function(e){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerForm.prototype,{_detach_event:new Object,add:function(e){e.setAttribute("name",this._options.inputName);var t="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[t]=e;if(e.parentNode){qq.remove(e)}return t},getName:function(e){return this._inputs[e].value.replace(/.*(\/|\\)/,"")},_cancel:function(e){this._options.onCancel(e,this.getName(e));delete this._inputs[e];var t=document.getElementById(e);if(t){t.setAttribute("src","javascript:false;");qq.remove(t)}},_upload:function(e,t){this._options.onUpload(e,this.getName(e),false);var n=this._inputs[e];if(!n){throw new Error("file with passed id was not added, or already uploaded or cancelled")}var i=this.getName(e);var o=this._createIframe(e);var s=this._createForm(o,t);s.appendChild(n);var a=this;this._attachLoadEvent(o,function(){a.log("iframe loaded");var t=a._getIframeContentJSON(o);a._options.onComplete(e,i,t);a._dequeue(e);delete a._inputs[e];setTimeout(function(){a._detach_event[o.id]();delete a._detach_event[o.id];qq.remove(o)},1)});s.submit();qq.remove(s);return e},_attachLoadEvent:function(e,t){this._detach_event[e.id]=qq.attach(e,"load",function(){if(!e.parentNode){return}if(e.contentDocument&&e.contentDocument.body&&e.contentDocument.body.innerHTML=="false"){return}t()})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;var innerHTML=doc.body.innerHTML;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+innerHTML);if(innerHTML.slice(0,5).toLowerCase()=="<pre>"&&innerHTML.slice(-6).toLowerCase()=="</pre>"){innerHTML=doc.body.firstChild.firstChild.nodeValue}try{response=eval("("+innerHTML+")")}catch(e){response={}}return response},_createIframe:function(e){var t=qq.toElement('<iframe src="javascript:false;" name="'+e+'" />');t.setAttribute("id",e);t.style.display="none";document.body.appendChild(t);return t},_createForm:function(e,t){var n=qq.toElement('<form method="post" enctype="multipart/form-data"></form>');var i=qq.obj2url(t,this._options.action);n.setAttribute("action",i);n.setAttribute("target",e.name);n.style.display="none";document.body.appendChild(n);return n}});qq.UploadHandlerXhr=function(e){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var e=document.createElement("input");e.type="file";return"multiple"in e&&typeof File!="undefined"&&typeof FormData!="undefined"&&typeof(new XMLHttpRequest).upload!="undefined"};qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerXhr.prototype,{add:function(e){if(!(e instanceof File)){throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)")}return this._files.push(e)-1},getName:function(e){var t=this._files[e];return t.fileName!==null&&t.fileName!==undefined?t.fileName:t.name},getSize:function(e){var t=this._files[e];return t.fileSize!=null?t.fileSize:t.size},getLoaded:function(e){return this._loaded[e]||0},_upload:function(e,t){this._options.onUpload(e,this.getName(e),true);var n=this._files[e],i=this.getName(e),o=this.getSize(e);this._loaded[e]=0;var s=this._xhrs[e]=new XMLHttpRequest;var a=this;s.upload.onprogress=function(t){if(t.lengthComputable){a._loaded[e]=t.loaded;a._options.onProgress(e,i,t.loaded,t.total)}};s.onreadystatechange=function(){if(s.readyState==4){a._onComplete(e,s)}};t=t||{};var r=qq.obj2url(t,this._options.action);s.open("POST",r,true);s.setRequestHeader("X-Requested-With","XMLHttpRequest");s.setRequestHeader("X-File-Name",encodeURIComponent(i));if(this._options.encoding=="multipart"){var l=new FormData;l.append(this._options.inputName,n);n=l}else{s.setRequestHeader("Content-Type","application/octet-stream");s.setRequestHeader("X-Mime-Type",n.type)}for(key in this._options.customHeaders){s.setRequestHeader(key,this._options.customHeaders[key])}s.send(n)},_onComplete:function(id,xhr){if(!this._files[id])return;var name=this.getName(id);var size=this.getSize(id);this._options.onProgress(id,name,size,size);if(xhr.status==200){this.log("xhr - server response received");this.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+")")}catch(e){response={}}this._options.onComplete(id,name,response)}else{this._options.onError(id,name,xhr);this._options.onComplete(id,name,{})}this._files[id]=null;this._xhrs[id]=null;this._dequeue(id)},_cancel:function(e){this._options.onCancel(e,this.getName(e));this._files[e]=null;if(this._xhrs[e]){this._xhrs[e].abort();this._xhrs[e]=null}}});qq.DisposeSupport={_disposers:[],dispose:function(){var e;while(e=this._disposers.shift()){e()}},addDisposer:function(e){this._disposers.push(e)},_attach:function(){this.addDisposer(qq.attach.apply(this,arguments))}};
var unique_qq_uploader_pixlr_id=0;var qqinput_name,parentElemU,enableSubmitButtonU,gMovePreview;function init_qq_uploader(e,i,t,a,l,n){qqinput_name=i,parentElemU=e;var d="";var o=SCRIPT_URL+"site/funnyjunk/images/transparent_pixel.gif";if(a==1||a==11||a==0||a==18||a==-19){d+='<div class="image_preview hidden" ><center>';d+="<br />"+'<span style="position: absolute; right: 10px; width: 130px;font: 700 12px sans-serif;">Cancel Upload: <div href="#" style="cursor:pointer;float:right;" onclick="comments.hideImage();return false;" '+'id="alertClose2" title="Click to close"></div></span>';d+='   <a href="'+o+'" rel="lightbox">(Enlarge)</a><br />'+'   <a href="'+o+'"'+'      rel="lightbox">'+"           <img"+'               src="'+o+'"'+'               alt="Funny Pictures"'+"           />"+"   </a>"+"</center></div>"}d+='<div class="qq-uploader">'+(a!=0?'<div class="qq-upload-drop-area"><span>Drag and drop file anywhere to upload.</span></div>':"")+'<div class="qq-button qq-upload-button'+(a==1?" qq-button-w180":"")+'">Click to select file</div>';if(a==0){d+='<div class="qq-button qq-upload-url-button">Upload via URL</div>';d+=FJUserName!==null?'<div class="qq-button qq-recently-uploaded-button marginL-10"><span>Thicc and jucci!</span>Use recent pictures</div>':""}else if(a==1||a==11||a==15){d+='<div class="qq-button qq-upload-url-button marginL-10 '+(a==1?"qq-last-button":"")+'">Upload via URL</div>'}d+=(a==0?"":"<br /><br />")+'<ul class="qq-upload-list"></ul>'+(a==0?'<div class="qq-upload-drop-area"><span>Drag and drop file anywhere to upload.</span></div>':"")+"</div>";var s=function(){if($("div#submitButton").length>0){$('div#submitButton input[type="submit"]').attr("disabled","disabled")}if($(".ui-dialog-buttonpane").length>0){$(".ui-dialog-buttonpane button[rel='sbutton']").attr("disabled",true).addClass("ui-state-disabled")}};var r=function(){if($("div#submitButton").length>0){$('div#submitButton input[type="submit"]').removeAttr("disabled")}if($(".ui-dialog-buttonpane").length>0){$(".ui-dialog-buttonpane button[rel='sbutton']").attr("disabled",false).removeClass("ui-state-disabled")}};enableSubmitButtonU=r;var u=new qq.FileUploader({encoding:"multipart",element:e[0],action:"/ajax/upload",sizeLimit:typeof t=="function"?t:t*1024*1024,allowedExtensions:l,params:{typeId:a},extra_params:{inputName:i,enableSubmitButton:r},multiple:false,template:d,hideShowDropArea:false,useBodyAsDropArea:a==0?true:false,movePreview:function(){var e=$("#commentReplyForm");var i=e.find("#uploader3 .image_preview");if(i.length>0){e.find(".ui-dialog-buttonpane").css("border","0").after(e.find(".image_preview").css("margin","0 0 10px 0").clone());i.remove()}var t=e.find(".image_preview");t.removeClass("hidden");$("form.commentsReply").find(".extraInfo,#voiceR,#voiceStart").remove();return t},onSubmit:function(i,t){e.find("ul.qq-upload-list").children().remove();s()},onComplete:function(t,l,d){window.responseJSON=d;if(d.tempFile!=undefined){var o=$("<input>").attr({type:"hidden",name:i,value:d.tempFile});if(typeof d.typeId!="undefined"&&d.typeId){this.appendRealTypeId(d.typeId)}if(typeof d.ihash!="undefined"&&d.ihash){this.appendInitialHash(d.ihash)}if(typeof d.additionalGif_file_name!="undefined"&&d.additionalGif_file_name){this.appendAdditionalGif(d.additionalGif_file_name)}e.find('input[name="'+i+'"]').remove();e.append(o);r();if(a==1||a==11||a==0||a==18||a==-19){div=this.movePreview();var s=d.fileUrl;if(a==0&&typeof d.mime!="undefined"&&(d.mime=="video/mp4"||d.mime=="video/webm")){div.find("video").remove().end().append('<video width="320" height="240" '+(d.typeId==20?'autoplay="" muted="" loop=""':"controls")+">"+'<source src="'+s+'" type="'+d.mime+'">'+"Your browser does not support the video tag."+"</video>").find("a").hide()}else{div.find("a").show().attr("href",s);div.find("img").attr("src",s)}$("#commentReplyForm").find(".image_preview").show();$("#commentReplyForm").find("a[rel^='lightbox']").lightBox()}if(typeof n!="undefined"&&n!=null){n()}}},onCancel:function(e,i){r()},onInit:function(){gMovePreview=this.movePreview;if(a==1||a==11||a==0||a==18){var t=e.find(".image_preview");t.find("a[rel^='lightbox']").lightBox();e.find(".image_preview").find("img").on("ready",function(){if($(this).attr("src")!=o&&$(this).offset().top>$(window).height()+$(window).scrollTop()){$(window).scrollTop($(window).scrollTop()+$(this).height())}})}var l="/site/js/lb/loading.gif";var n='<img id="uploadUrlLoading" style="margin:6px 0 0 1em;" src="'+l+'" />';if(a==1||a==0){var d=unique_qq_uploader_pixlr_id++;d="pixlr_submit_receiver_"+d;e.addClass(d);e.bind("pixlr_image_uploaded",function(t,a,l){e.find("ul.qq-upload-list").children().remove();var n=$("<input>").attr({type:"hidden",name:i,value:l});e.find('input[name="'+i+'"]').remove();e.append(n);var d=e.find(".image_preview");d.removeClass("hidden");d.find("a").attr("href",a);d.find("img").attr("src",a)});e.find(".qq-edit-button,.qq-edit-link").click(function(){var i=e.find(".qq-edit-link").attr("href");if(i==o){i=""}var t=$("#contentTitle").val();if(typeof t=="undefined"&&a==0){t="Comment"}FJPixlr.show_overlay(i,t,"callback/"+d);return false})}e.find(".qq-upload-url-button").click(function(e){var i='<div id="uploadViaUrlForm">'+'<input type="text" id="picture_url" value="" class="txt" style="width:98%" />'+"</div>";$(i).dialog({autoOpen:true,width:400,height:140,title:"Upload via URL",closeOnEscape:true,resizable:false,close:function(){$(this).remove()},open:function(){if(BrowserDetect.browser=="IE"){if(typeof window.clipboardData!="undefined"&&window.clipboardData.getData("Text")){$("#uploadViaUrlForm").find("input").val(window.clipboardData.getData("Text"))}}},buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Upload",text:"Upload",click:function(){var e=$("#uploadViaUrlForm").next("div").find(".ui-dialog-buttonset button:first");$(n).insertBefore(e);var i=$("#picture_url").val();if(!i){f.e("Please enter picture URL");return false}this.onUploadUrl(i)}.bind(this)}]});return false}.bind(this));e.find(".qq-recently-uploaded-button").click(function(e){if($("#recentPics").length>0){$("#recentPics").removeClass("peaceOut").css("top",$(window).scrollTop()+45+"px").topz();return false}$("body").append('<div id="selectRecentlyUploadedForm"><div id="selectRecentlyUploadedContainer"></div></div>');$("#selectRecentlyUploadedForm").dialog({autoOpen:true,width:650,title:"Select recently uploaded pictures",closeOnEscape:true,resizable:false,goTop:true,close:function(){$("#recentPics").addClass("peaceOut");return false},open:function(){$.ajax({type:"post",url:"/ajax/userGallery",dataType:"html",success:function(e){$("#recentPics").find(".ui-icon-closethick").bind("click",function(){$("#recentPics").addClass("peaceOut");return false});console.log(e.length);var i=$("#recentPics");$("#selectRecentlyUploadedContainer").html(e);$("#selectRecentlyUploadedContainer").css({maxHeight:"450px",overflow:"auto"});i.css("left","calc(50% - "+i.width()/2+"px)");$("#selectRecentlyUploadedContainer").on("click",".bottomClose2",closeRecentPic);$("#selectRecentlyUploadedContainer").on("click","img",recentPicAdd)}.bind(this),error:function(){f.e("Request failed")}})},buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$("#recentPics").addClass("peaceOut");return false}}]}).parent().attr("id","recentPics")}.bind(this))},showMessage:function(t){if(a==1||a==11||a==0||a==18||a==-19){var l=e.find(".image_preview");l.addClass("hidden");l.find("a").attr("href",o);l.find("img").attr("src",o);e.find(".qq-edit-button").html("Create or upload image via Editor")}e.find('input[name="'+i+'"]').remove();dialog.alert(t)},appendRealTypeId:function(i){e.find('input[name="real_type_id"]').remove();e.append($("<input>").attr({type:"hidden",name:"real_type_id",value:i}))},appendInitialHash:function(i){e.find('input[name="ihash"]').remove();e.append($("<input>").attr({type:"hidden",name:"ihash",value:i}))},appendAdditionalGif:function(i){e.find('input[name="additionalGif_file_name"]').remove();e.append($("<input>").attr({type:"hidden",name:"additionalGif_file_name",value:i}))},onUploadUrl:function(e){var i=this.params.typeId;var t=this.extra_params.inputName;var a=$(this.element);var l=this.extra_params.enableSubmitButton;$.ajax({type:"post",url:"/ajax/uploadUrl",dataType:"json",data:{url:e,typeId:i},success:function(e){if(e.type=="success"){var n=parseInt($("#filesYouUploaded").text());n++;$("#filesYouUploaded").text(n);f.s(e.msg);$("#uploadViaUrlForm").dialog("close");if(typeof e.typeId!="undefined"&&e.typeId){this.appendRealTypeId(e.typeId)}if(typeof e.ihash!="undefined"&&e.ihash){this.appendInitialHash(e.ihash)}if(typeof e.additionalGif_file_name!="undefined"&&e.additionalGif_file_name){this.appendAdditionalGif(e.additionalGif_file_name)}var d=$("<input>").attr({type:"hidden",name:t,value:e.tempFile});a.find('input[name="'+t+'"]').remove();a.append(d);l();var o=a.find(".image_preview");o.removeClass("hidden");$("form.commentsReply").find(".extraInfo,#voiceR,#voiceStart").remove();var s=e.fileUrl;if(i==0&&typeof e.mime!="undefined"&&(e.mime=="video/mp4"||e.mime=="video/webm")){o.html('<video width="320" height="240" '+(e.typeId==20?'autoplay="" loop="" muted=""':"controls")+">"+'<source src="'+s+'" type="'+e.mime+'">'+"Your browser does not support the video tag."+"</video>")}else{o.find("a").attr("href",s);o.find("img").attr("src",s);a.find(".qq-edit-button").html("Edit image")}}else{dialog.alert(e.msg)}$("#uploadUrlLoading").remove()}.bind(this),error:function(){$("#uploadUrlLoading").remove();f.e("Request failed")}})}});return u}var lastMultiQQUploader=null;var lastMultiQQUploaderFileID=-1;function init_multi_qq_uploader(e,i,t,a,l,n,d){var o="";var s=SCRIPT_URL+"site/funnyjunk/images/transparent_pixel.gif";if(a==1||a==11||a==0||a==18||a==-19||a==19){o+='<div class="video_preview hidden"></div><div class="image_preview hidden"><center>';o+="<br />";if(a==0){o+='   <a href="'+s+'" class="qq-edit-link">(Edit)</a>&nbsp;&nbsp;&nbsp;'}o+='   <a href="'+s+'" rel="lightbox">(Enlarge)</a><br />'+'   <a href="'+s+'"'+'      rel="lightbox">'+"           <img"+'               src="'+s+'"'+'               alt="Funny Pictures"'+"           />"+"   </a>"+"</center></div>"}o+='<div class="qq-uploader">'+'<div class="qq-upload-drop-area"><span>Drag and drop file anywhere to upload.</span></div>'+'<div class="qq-button qq-upload-button">'+"Select a file"+"</div>";if(a==0){o+='<div class="qq-button qq-edit-button marginL-10">'+"Create or upload image via Editor"+"</div>"}if(a==0){o+='<div class="qq-button qq-upload-url-button">Upload via URL</div>';o+='<div class="qq-button qq-recently-uploaded-button marginL-10">Select from my recent pictures</div>'}else if(a==1||a==11||a==15||a==19){o+='<div class="qq-button qq-upload-url-button marginL-10">Upload via URL</div>';if(a==19){o+='<div class="qq-button qq-add-youtube-button">Add Youtube Video</div>';o+='<div class="qq-button qq-add-text-button marginL-10">Add Text</div>'}}o+='<ul class="qq-multi-upload-list"></ul>'+"</div>";var r=function(){if($("#submitButton2").length>0){$("#submitButton2").attr("disabled","disabled")}if($("#submitButton2").length>0){$("#submitButton2").attr("disabled",true).addClass("ui-state-disabled")}};var u=function(){if($("#submitButton2").length>0){$("#submitButton2").removeAttr("disabled")}if($("#submitButton2").length>0){$("#submitButton2").attr("disabled",false).removeClass("ui-state-disabled")}};var p=new qq.FileUploader({encoding:"multipart",element:e[0],action:"/ajax/upload",sizeLimit:typeof t=="function"?t:t*1024*1024,allowedExtensions:l,params:{typeId:a},extra_params:{inputName:i,enableSubmitButton:u,successCallback:n},multiple:true,template:o,fileTemplate:"<li>"+'<span title="Remove" class="qq-multi-upload-action-delete"></span>'+'<span title="Description" class="qq-multi-upload-action-description"></span>'+'<span class="qq-multi-upload-preview"></span>'+'<span class="qq-multi-upload-file"></span>'+'<span class="qq-multi-upload-spinner"></span>'+'<span class="qq-multi-upload-size"></span>'+'<a class="qq-multi-upload-cancel" href="#">Cancel</a>'+'<span class="qq-multi-upload-result"></span>'+'<div class="qq-multi-progress-bar"><span>&nbsp;</span></div>'+"</li>",useBodyAsDropArea:true,classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",dropDisabled:"qq-upload-drop-area-disabled",list:"qq-multi-upload-list",progressBar:"qq-multi-progress-bar",file:"qq-multi-upload-file",spinner:"qq-multi-upload-spinner",size:"qq-multi-upload-size",cancel:"qq-multi-upload-cancel",success:"qq-multi-upload-success",fail:"qq-multi-upload-fail"},onProgress:function(i,t,a,l){e.find("ul.qq-multi-upload-list>li#upload-file-"+i).find(".qq-multi-progress-bar span").css("width",parseInt(a/l*300)+"px")},hideShowDropArea:false,onSubmit:function(e,i){if(e>lastMultiQQUploaderFileID){lastMultiQQUploaderFileID=e}this.saveRecentlyAddedFile(i);this.initDeleteBtn(e);r();var t=parseInt($("#filesYouUploaded").text());t++;$("#filesYouUploaded").text(t)},onComplete:function(i,t,l){if(i>lastMultiQQUploaderFileID){lastMultiQQUploaderFileID=i}if(l.tempFile!=undefined){this.preCheck();if(typeof l.typeId!="undefined"){this.appendRealTypeId(i,l.typeId)}if(typeof l.ihash!="undefined"){this.appendInitialHash(i,l.ihash)}if(typeof l.additionalGif_file_name!="undefined"){this.appendAdditionalGif(i,l.additionalGif_file_name)}this.appendFileName(i,l.tempFile);u();if(a==1||a==11||a==0||a==18||a==-19||a==19){var n=l.fileUrl;if((a==0||a==19)&&typeof l.mime!="undefined"&&(l.mime=="video/mp4"||l.mime=="video/webm")){e.find(".image_preview").addClass("hidden");var d=e.find(".video_preview");d.removeClass("hidden").attr("data-uploadId",i);d.html('<video width="320" height="240" '+(l.typeId==20?'autoplay="" muted="" loop=""':"controls")+">"+'<source src="'+n+'" type="'+l.mime+'">'+"Your browser does not support the video tag."+"</video>");this.processVideoThumbPreview(i,n,l.mime)}else{e.find(".video_preview").addClass("hidden").html("");var d=e.find(".image_preview");d.removeClass("hidden").attr("data-uploadId",i);d.find("a").attr("href",n);d.find("img").attr("src",n);e.find(".qq-edit-button").html("Edit image");this.processImageThumbPreview(i,n)}}this.initAdditionalBtn();this.runSuccess(i)}this.checkFilesLimit()},processVideoThumbPreview:function(i,t,a){e.find("ul.qq-multi-upload-list>li#upload-file-"+i).attr("data-fileurl",t).find(".qq-multi-upload-preview").html('<video style="max-width:35px;max-height:35px;" autoplay="" muted="" loop=""><source src="'+t+'" type="'+a+'" /></video>')},appendFileName:function(t,a){var l=$("<input>").attr({type:"hidden",name:i+"["+t+"]",value:a});e.append(l)},appendTime:function(i,t){var a=$("<input>").attr({type:"hidden",name:"startTime["+i+"]",value:t});e.append(a)},appendRealTypeId:function(i,t){if(i==0&&$('input[name="real_type_id"]').length!=0){$('input[name="real_type_id"]').remove()}if($('input[name="real_type_id"]').length==0){var a=$("<input>").attr({type:"hidden",name:"real_type_id",value:t});e.append(a)}var a=$("<input>").attr({type:"hidden",name:"additional_type_id["+i+"]",value:t});e.append(a)},appendInitialHash:function(i,t){e.append($("<input>").attr({type:"hidden",name:"additional_ihash["+i+"]",value:t}))},appendAdditionalGif:function(i,t){e.append($("<input>").attr({type:"hidden",name:"additionalGif_file_name["+i+"]",value:t}))},processImageThumbPreview:function(i,t){e.find("ul.qq-multi-upload-list>li#upload-file-"+i).attr("data-fileurl",t).find(".qq-multi-upload-preview").html('<a href="'+t+'" rel="lightbox"></a>').find("a[rel^='lightbox']").lightBox();var a=$('<img src="'+t+'" />');a.on("load",function(){var e=35;var i=this.width();var t=this.height();if(i/t>1){this.height(e);var a=e*i/t;if(parseInt((a-e)*50)/100>2){this.css({marginLeft:-parseInt((a-e)*50)/100})}}else{this.width(e);var l=e*t/i;if(parseInt((l-e)*50)/100>2){this.css({marginLeft:-parseInt((l-e)*50)/100})}}}.bind(a));e.find("ul.qq-multi-upload-list>li#upload-file-"+i).find(".qq-multi-upload-preview a").append(a)},initAdditionalBtn:function(){var t=$("#uploaderContainer").length;if(e.find('input[name^="'+i+'"]').length>0){if($(".upload-more").length==0){var a="";if(t){a="margin-left:570px !important;top:40px;position:fixed;"}var l='<div class="more-btns-container" style="'+a+'"><div class="upload-more qq-button">Add more content</div>'+'<div class="qq-button act-btn act-manually hidden">Select file manually</div>'+'<div class="qq-button act-btn act-via-url hidden">Upload via URL</div>'+'<div class="qq-button act-btn act-youtube hidden">Add Youtube Video</div>'+'<div class="qq-button act-btn act-text hidden" style="width:97px">Add Text</div>'+'<div class="qq-button act-btn act-link hidden" style="width:97px">Add Link</div>'+"</div>";if(t){$("#uploaderContainer").closest(".ui-dialog").append($(l));var n=$("#uploaderContainer").closest(".ui-dialog").find(".more-btns-container")}else{e.find(".qq-uploader").append($(l));var n=e.find(".more-btns-container")}n.on("mouseenter",function(){$(this).find(".act-btn").removeClass("hidden");$(this).find(".upload-more").addClass("hidden")}).on("mouseleave",function(){$(this).find(".act-btn").addClass("hidden");$(this).find(".upload-more").removeClass("hidden")});e.find(".act-manually").on("click",function(){e.find(".qq-upload-button input").click()});e.find(".act-via-url").on("click",function(){e.find(".qq-upload-url-button").click()});e.find(".act-youtube").on("click",function(){e.find(".qq-add-youtube-button").click()});e.find(".act-text").on("click",function(){e.find(".qq-add-text-button").click()})}}},initDeleteBtn:function(t){e.on("click","ul.qq-multi-upload-list>li#upload-file-"+t+" .qq-multi-upload-action-delete",function(){var a=e.find("ul.qq-multi-upload-list>li#upload-file-"+t);a.fadeOut("slow",function(){var a=parseInt($("#filesYouUploaded").text());a--;$("#filesYouUploaded").text(a);this.checkFilesLimit();var l=$("#upload-file-"+t+"").parent().find(".qq-multi-upload-success:visible").last();if(l.length){var n=l.attr("id");var d=l.attr("data-fileurl");n=parseInt(n.replace(/upload-file-/,""));if(n==0){var o=parseInt($("input[name=real_type_id]").attr("value"))}else{var o=parseInt($('input[name="additional_type_id['+n+']"]').attr("value"))}if(o==2){e.find(".image_preview").addClass("hidden");var s=e.find(".video_preview");s.removeClass("hidden").attr("data-uploadId",n);s.html('<video width="320" height="240" '+'autoplay="" muted="" loop="" controls'+">"+'<source src="'+d+'" type="video/mp4">'+"Your browser does not support the video tag."+"</video>")}else if(o==1){e.find(".video_preview").addClass("hidden").html("");var s=e.find(".image_preview");s.removeClass("hidden").attr("data-uploadId",n);s.find("a").attr("href",d);s.find("img").attr("src",d)}else{e.find(".video_preview").addClass("hidden").html("");e.find(".image_preview").addClass("hidden")}}else{e.find(".video_preview").addClass("hidden").html("");e.find(".image_preview").addClass("hidden")}$('input[name="additional_ihash['+t+']"]').remove();$('input[name="'+i+"["+t+']"]').remove();$('input[name="startTime['+t+']"]').remove();$('input[name="youtube['+t+']"]').remove();$('input[name="additional_type_id['+t+']"]').remove();$('textarea[id="contentDescription_'+t+'"]').remove();var r=$("#upload-file-"+t+"").parent().find(".qq-multi-upload-success:visible").first();if(r.length){var u=r.attr("id");u=parseInt(u.replace(/upload-file-/,""));if(u==0){var p=parseInt($("input[name=real_type_id]").attr("value"))}else{var p=parseInt($('input[name="additional_type_id['+u+']"]').attr("value"))}$('input[name="real_type_id"]').val(p)}else{$('input[name="real_type_id"]').remove()}}.bind(this))}.bind(this))},preCheck:function(){if(!this.multiple){$('input[name^="'+i+'"]').remove();$('input[name="real_type_id"]').remove()}},checkFilesLimit:function(){if(e.find("ul.qq-multi-upload-list>li:visible").length>d){this.disableUploader()}else{this.enableUploader()}},disableUploader:function(){e.find(".qq-button,.qq-upload-drop-area,.image_preview").fadeOut("slow")},enableUploader:function(){e.find(".qq-button,.qq-upload-drop-area,.image_preview").fadeIn("slow")},onCancel:function(e,i){u()},onInit:function(){if(a==1||a==11||a==0||a==18||a==19){var i=e.find(".image_preview");i.find("a[rel^='lightbox']").lightBox()}var t="/site/js/lb/loading.gif";var l='<img id="uploadUrlLoading" style="margin:6px 0 0 1em;" src="'+t+'" />';e.find(".qq-upload-url-button").click(function(e){var i='<div id="uploadViaUrlForm">'+'<input type="text" id="picture_url" value="" class="txt" style="width:98%" />'+"</div>";$(i).dialog({autoOpen:true,width:350,height:140,title:"Upload via URL",closeOnEscape:true,resizable:false,close:function(){$(this).remove()},open:function(){if(BrowserDetect.browser=="IE"){if(typeof window.clipboardData!="undefined"&&window.clipboardData.getData("Text")){$("#uploadViaUrlForm").find("input").val(window.clipboardData.getData("Text"))}}},buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Upload",text:"Upload",click:function(){var e=$("#uploadViaUrlForm").next("div").find(".ui-dialog-buttonset button:first");$(l).insertBefore(e);var i=$("#picture_url").val();if(!i){f.e("Please enter picture URL");return false}else{this.saveRecentlyAddedFile(i)}this.onUploadUrl(i)}.bind(this)}]});return false}.bind(this));e.find(".qq-add-youtube-button").click(this.initAddYoutube.bind(this));e.find(".qq-add-text-button").click(this.onAddText.bind(this))},preAddFile:function(e,i){lastMultiQQUploader._addToList(e,i);this.initDeleteBtn(e);var t=lastMultiQQUploader._getItemByFileId(e);qq.remove(lastMultiQQUploader._find(t,"cancel"));qq.remove(lastMultiQQUploader._find(t,"spinner"));qq.addClass(t,lastMultiQQUploader._classes.success)},recentlyAddedFiles:[],saveRecentlyAddedFile:function(e,i){if(this.recentlyAddedFiles.indexOf(e)>=0){this.recentlyAddedFiles.push(e)}else{this.recentlyAddedFiles.push(e)}return true},pushNewFile:function(e,i){lastMultiQQUploader._handler._files.push({lastModifiedDate:new Date,name:e,type:i,size:1})},runSuccess:function(e){if(typeof n!="undefined"&&n!=null){n(e)}},initAddLink:function(e){var i='<div id="addLinkForm" class="additional-info">'+'<label for="url">URL:</label>'+'<input type="text" id="url" value="" class="txt" style="width:98%" />'+'<span id="urlError"></span>'+"</div>";$("#addLinkForm").remove();var t=$(i).dialog({autoOpen:true,width:350,height:"auto",title:"Add Link",closeOnEscape:true,resizable:false,close:function(){$(this).remove();t=null},open:function(){$(this).closest(".ui-dialog").keydown(function(e){var i=$("#addLinkForm").find("#url").val();if(e.keyCode==$.ui.keyCode.ENTER&&i.length>10){e.preventDefault();e.stopPropagation();var a=t.dialog("option","buttons");a[1].click.apply(t)}})},buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Add Link",text:"Add",click:function(){var e=$("#addLinkForm").find("#url").val();if(!e){f.e("Please enter picture URL");return false}var i=this;funnyLinks.info(null,e,function(){i.onAddLink(e)})}.bind(this)}]});return false},onAddLink:function(i){lastMultiQQUploaderFileID++;this.preAddFile(lastMultiQQUploaderFileID,i);$("#addLinkForm").dialog("close");this.preCheck();this.appendRealTypeId(lastMultiQQUploaderFileID,18);this.appendFileName(lastMultiQQUploaderFileID,i);u();var t=e.find(".image_preview");t.addClass("hidden");t.find("a").attr("href","");t.find("img").attr("src","");e.find(".qq-edit-button").html("");e.find("ul.qq-multi-upload-list>li#upload-file-"+lastMultiQQUploaderFileID).find(".qq-multi-upload-preview").addClass("text-thumb").html("<span></span>");this.pushNewFile("link","text/html");this.initAdditionalBtn();this.runSuccess(lastMultiQQUploaderFileID);var a=parseInt($("#filesYouUploaded").text());a++;$("#filesYouUploaded").text(a);this.checkFilesLimit()},onAddText:function(i){lastMultiQQUploaderFileID++;this.preAddFile(lastMultiQQUploaderFileID,"text");this.preCheck();this.appendRealTypeId(lastMultiQQUploaderFileID,18);this.appendFileName(lastMultiQQUploaderFileID,"");u();var t=e.find(".image_preview");t.addClass("hidden");t.find("a").attr("href","");t.find("img").attr("src","");e.find(".qq-edit-button").html("");e.find("ul.qq-multi-upload-list>li#upload-file-"+lastMultiQQUploaderFileID).find(".qq-multi-upload-preview").addClass("text-thumb").html("<span></span>");this.pushNewFile("text","text/html");this.initAdditionalBtn();this.runSuccess(lastMultiQQUploaderFileID);this.checkFilesLimit();var a=parseInt($("#filesYouUploaded").text());a++;$("#filesYouUploaded").text(a);return false},initAddYoutube:function(e){var i='<div id="addYoutubeForm" class="additional-info">'+'<label for="url">YouTube URL:</label>'+'<input type="text" id="url" value="" class="txt" style="width:92%" />'+'<textarea id="contentDescription" class="hidden"></textarea>'+""+'<div><div style="vertical-align: text-top;display:inline-block;height: 27px;line-height:.6em;">Start time in seconds:</div>'+'<input type="text" id="youtubeStart" value="" class="txt" style="width:4em;display:inline-block;margin: 4px 0 0 4px;" />'+"</div></div>";$("#addYoutubeForm").remove();var t=$(i).dialog({autoOpen:true,width:350,height:150,title:"Add YouTube Video",closeOnEscape:true,resizable:false,close:function(){$(this).remove();t=null},open:function(){$("#addYoutubeForm #url").on("keyup",function(){var e=$("#addYoutubeForm #url").val();var i=new RegExp(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)(?:(\?t|&start)=(\d+))?.*/);var t=e.match(i);if(t!==null&&typeof t[4]!=="undefined"){$("#youtubeStart").val(t[4])}else{$("#youtubeStart").val("")}});$("#addYoutubeForm select").selectbox();$(this).closest(".ui-dialog").keydown(function(e){var i=$("#addYoutubeForm").find("#url").val();if(e.keyCode==$.ui.keyCode.ENTER&&i.length>10){e.preventDefault();e.stopPropagation();var a=t.dialog("option","buttons");a[1].click.apply(t)}})},buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Add Youtube video",text:"Add",click:function(){var e=$("#addYoutubeForm").find("#url").val();var i=$("#addYoutubeForm").find("#ytDimension").val();if(!e){f.e("Please enter youtube URL");return false}var t=this;youtubeVideoInfo(null,$("#addYoutubeForm").find("#url").val(),function(){var a=$("#addYoutubeForm").find("#contentDescription").val();var l=$("#youtubeStart").val();t.onAddYoutube(e,i,a,l)})}.bind(this)}]});return false},onAddYoutube:function(i,t,a,l){var n=this.getYouTubeThumbnail(i);function d(e,i,t,a){var l=new Image;l.onload=i;l.onerror=t;l.src=e}d(n,function(){lastMultiQQUploaderFileID++;this.preAddFile(lastMultiQQUploaderFileID,i);var t=parseInt($("#filesYouUploaded").text());t++;$("#filesYouUploaded").text(t);$("#addYoutubeForm").dialog("close");this.preCheck();this.appendRealTypeId(lastMultiQQUploaderFileID,3);this.appendFileName(lastMultiQQUploaderFileID,i);if(typeof l!=="undefined")this.appendTime(lastMultiQQUploaderFileID,l);var d=$("<input>").attr({type:"hidden",name:"youtube["+lastMultiQQUploaderFileID+"]",value:1});e.append(d);u();var o=e.find(".image_preview");o.removeClass("hidden");var s=n;o.find("a").attr("href",s);o.find("img").attr("src",s);e.find(".qq-edit-button").html("");this.processImageThumbPreview(lastMultiQQUploaderFileID,s);this.pushNewFile(s,"image/jpg");this.initAdditionalBtn();this.runSuccess(lastMultiQQUploaderFileID);e.find("ul.qq-multi-upload-list>li#upload-file-"+lastMultiQQUploaderFileID).find('textarea[name^="description"]').val(a);this.checkFilesLimit()}.bind(this),function(){f.e("Enter valid youtube link.");return false})},getYouTubeThumbnail:function(e){if(e===null){return""}var i,t;e=e.replace(/\s/g,"");var a=new RegExp(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)(?:(\?t|&start)=(\d+))?.*/);t=e.match(a);if(t===null||typeof t[1]==="undefined"){return false}i=t[2];return"http://img.youtube.com/vi/"+i+"/2.jpg"},showMessage:function(t){if(a==1||a==11||a==0||a==18||a==-19){var l=e.find(".image_preview");l.addClass("hidden");l.find("a").attr("href",s);l.find("img").attr("src",s);e.find(".qq-edit-button").html("Create or upload image via Editor")}e.find('input[name="'+i+'"]').remove();f.s(t)},plusFile:function(){var e=parseInt($("#filesYouUploaded").text());e++;$("#filesYouUploaded").text(e)},onUploadUrl:function(e){var i=parseInt($("#filesYouUploaded").text());if(i>d)return false;var t=this.params.typeId;var a=this.extra_params.inputName;var l=$(this.element);var n=this.extra_params.enableSubmitButton;var o=this.extra_params.successCallback;lastMultiQQUploaderFileID++;lastMultiQQUploader._addToList(lastMultiQQUploaderFileID,"from URL");this.initDeleteBtn(lastMultiQQUploaderFileID);$("#uploadViaUrlForm").dialog("close");$.ajax({type:"post",url:"/ajax/uploadUrl",dataType:"json",data:{url:e,typeId:t,queueId:lastMultiQQUploaderFileID},success:function(e){if(e.type=="success"){this.plusFile();var i=lastMultiQQUploader._getItemByFileId(e.queueId);qq.remove(lastMultiQQUploader._find(i,"cancel"));qq.remove(lastMultiQQUploader._find(i,"spinner"));qq.addClass(i,lastMultiQQUploader._classes.success);f.s(e.msg);this.preCheck();if((t==1||t==19)&&typeof e.typeId!="undefined"&&e.typeId){this.appendRealTypeId(e.queueId,e.typeId)}if(typeof e.ihash!="undefined"){this.appendInitialHash(e.queueId,e.ihash)}if(typeof e.additionalGif_file_name!="undefined"){this.appendAdditionalGif(e.queueId,e.additionalGif_file_name)}this.appendFileName(e.queueId,e.tempFile);n();var a=l.find(".image_preview");a.removeClass("hidden");var d=e.fileUrl;if((t==0||t==19)&&typeof e.mime!="undefined"&&(e.mime=="video/mp4"||e.mime=="video/webm")){l.find(".image_preview").addClass("hidden");var a=l.find(".video_preview");a.removeClass("hidden");a.html('<video width="320" height="240" '+(e.typeId==20?'autoplay="" loop="" muted=""':"controls")+">"+'<source src="'+d+'" type="'+e.mime+'">'+"Your browser does not support the video tag."+"</video>");this.processVideoThumbPreview(e.queueId,d,e.mime)}else{a.find("a").attr("href",d);a.find("img").attr("src",d);l.find(".qq-edit-button").html("Edit image");this.processImageThumbPreview(e.queueId,d)}l.find("ul.qq-multi-upload-list>li#upload-file-"+e.queueId).find(".qq-multi-upload-file").text(e.tempFile);this.pushNewFile(e.tempFile,e.mime);this.initAdditionalBtn();this.runSuccess(e.queueId);this.checkFilesLimit()}else{this.plusFile();$(".qq-multi-upload-spinner").parent().find(".qq-multi-upload-action-delete").trigger("click");f.e(e.msg)}$("#uploadUrlLoading").remove()}.bind(this),error:function(){this.plusFile();$(".qq-multi-upload-spinner").parent().find(".qq-multi-upload-action-delete").trigger("click");$("#uploadUrlLoading").remove();f.e("Request failed. Please try again.")}})}});lastMultiQQUploader=p;e.find("div.qq-upload-drop-area").show();return p}var FJUploader={form:null,show:function(e,i,t,a){if(typeof editLock!=="undefined"){f.e("Don't use the upload form while edit page is open.");return false}if(!loggedIn()){users.showLoginForm();return false}lastMultiQQUploader=null;lastMultiQQUploaderFileID=-1;IS_UPLOAD_POPUP=true;var l=$('<div id="uploaderContainer" style="padding:0 20px;"><br /><center><img src="/site/js/lb/loading.gif"></center></div>');$("#uploaderContainer").remove();l.dialog({autoOpen:true,width:500,minHeight:500,title:"Upload your content",closeOnEscape:true,resizable:false,close:function(){$(this).remove();lastMultiQQUploader.dispose()},open:this.loadForm(e,i,t,a),buttons:[{title:"Cancel (Esc)",text:"Cancel",click:function(){$(this).dialog("close")}},{title:"Submit Content",text:"Submit Content",id:"submitButton2",click:FJUploader.submitForm}]});l.parent().attr("id","uploadF");return false},loadForm:function(e,i,t,a){$.ajax({type:"post",url:"/member/submit/19/"+(e?"?nsfw=1":""),data:{"form-type":"popup"},dataType:"html",success:function(l){var n=$("#uploaderContainer");n.html(l);if(e){n.addClass("nsfwBackground");$("#nsfwWarning").show();

}if(typeof noSelectBox==="undefined"||noSelectBox!==false){n.find("select").selectbox()}n.find("input[name='nsfw']").change(function(){if(n.find("input[name='nsfw']").is(":checked")){n.find("input[name='sfw']").prop("checked",false);n.addClass("nsfwBackground");$("#nsfwWarning").show()}popChannelsList()});n.find("input[name='sfw']").change(function(){if(n.find("input[name='sfw']").is(":checked")){n.find("input[name='nsfw']").prop("checked",false);n.removeClass("nsfwBackground");$("#nsfwWarning").hide()}popChannelsList()});$(".qq-multi-upload-list").before($("#channelsStuff"));if(i)chs.changeChannel(i,t,a);$("#nsfwWarning").appendTo("#uploadF")},error:function(){f.e("Request failed")}})},submitForm:function(){var e=$("#uploaderContainer").find("form"),i=$("#uploader"),t=parseInt($("#filesYouUploaded").text());if(t>5){$("#uploaderContainer").find(".main").append("<strong>Uploading many files at once can take a while to submit. Please wait a few minutes for the upload to complete.")}else if(t===0){FJUploader.uploadFail();f.e("You didn't upload anything yet.");return false}var a=i.find("#randSub");if(a.length===0){var l=Math.floor(Math.random()*9999999999+1);i.append('<input id="randSub" type="hidden" name="formRand" value="'+l+'">')}var n="/site/js/lb/loading.gif",d='<img id="uploadLoading" style="margin:6px 0 0 1em;" src="'+n+'" />',o=$("#uploaderContainer").next("div").find(".ui-dialog-buttonset button:first"),s=$("#uploaderContainer").next("div").find(".ui-dialog-buttonset button:last");$(d).insertBefore(o);s.addClass("hidden");$('#uploaderContainer input[name="upload"]').val(1);IS_UPLOAD_VALIDATED=false;if(e.find('select[name="status"]').val()=="main_on_date"){var r=e.find('input[name="releaseDate"]').val();if(r==""){f.e("You must enter realese date");return false}else if(!/\d{4}-\d{2}-\d{2}/.test(r)){f.e("Wrong date formar date, correct is (YYYY-MM-DD)");return false}}var s=e.find(":submit");s.attr("disabled","disabled");$.ajax({type:"post",url:"/member/submit2",data:e.serialize(),success:function(i){var t=i.split("|");if(t[0]=="OK"){if(typeof IS_UPLOAD_POPUP!="undefined"&&IS_UPLOAD_POPUP){IS_UPLOAD_VALIDATED=true;FJUploader.formSent(true,e);return false}}else if(t[0]=="alert"){s.removeAttr("disabled");uploaded=false;dialog.alert("Content already uploaded",t[1])}else if(t[0]=="uploadalert"){dialog.uploadalert("Content already uploaded",t[1])}else if(/^This youtube video has already been posted/.test(t[0])){var a=$("#urlError").text("").hide();a.html(t[0]).show();$("#submit_url1").addClass("invalid");$(".ajaxResponse").html(t[0]);s.removeAttr("disabled");f.e(t[0])}else{e.find(".invalid").removeClass("invalid");var l=e.find(".upfile").text("").hide();var n=$("#contentTitleError").text("").hide();var d=$("#tagError").text("").hide();var o=$("#captchaError").text("").hide();var a=$("#urlError").text("").hide();var r=$("#contentTitle"),u=$("#submit_url1");r.removeClass("invalid");switch(t[0]){case"You must upload your file first":case"upload file":l.text(t[0]).show();$("#fileName").addClass("invalid");break;case"You must specify a title":case"title":n.text(t[0]).show();r.addClass("invalid");break;case"Field cannot be empty.":n.text(t[0]).show();r.addClass("invalid");break;case"You must specify url":case"url":a.text(t[0]).show();u.addClass("invalid");break;case"You can use only letters, numbers and spaces in your tags":case"You must enter 1 tag minimum to help your content be more visible to searches.":case"tag_error":d.text(t[0]).show();$("#tagform").addClass("invalid");break;case"This content has already been uploaded.":uploaded=false;a.html(t[1]).show();l.html(t[1]).show();u.addClass("invalid");break;case"Invalid YouTube url":a.text("Invalid YouTube url").show();u.addClass("invalid");break;case message_CaptchaFailed:o.text(t[0]).show();Recaptcha.reload();break;default:o.text(t[0]).show();break}s.removeAttr("disabled");f.e(t[0])}FJUploader.uploadFail();return false},error:function(){resp.html("Request Failed");f.e("Request Failed");s.removeAttr("disabled");FJUploader.uploadFail();return false}})},formSent:function(e,i){uploaded=false;var t=$("#no_delay").prop("checked"),a=$("#no_index").prop("checked"),l=$("#show_flags").prop("checked"),n="/site/js/lb/loading.gif",d='<img id="uploadLoading" style="margin:6px 0 0 1em;" src="'+n+'" />',o=$("#uploaderContainer"),s=o.next("div").find(".ui-dialog-buttonset button:first"),r=o.next("div").find(".ui-dialog-buttonset button:last");if(e){$.ajax({type:"post",url:"/member/submit2",data:i.serialize()+"&form-type=popup",dataType:"json",success:function(e){if(t)return false;var i=$("#captchaError").text("").hide();if(e.type=="success"){f.s(e.msg);window.onbeforeunload=null;$("#uploadF").remove();$("#uploaderContainer").remove();lastMultiQQUploader.dispose();if(enableAjaxLoading===true){content.loadContent('<a href="'+e.path+'"></a>')}else{document.location.href=e.path}}else{f.e(e.msg);r.removeClass("hidden");i.text(e.msg).show()}$("#uploadLoading").remove()}.bind(this),error:function(){f.e("Request failed");$("#uploadLoading").remove();r.removeClass("hidden")}});if(t){$("#uploadF").remove();$("#uploaderContainer").remove();lastMultiQQUploader.dispose();f.s("Upload submitted. Check your profile in a few minutes to see it successfully submitted.")}}},uploadFail:function(){setTimeout(function(){$("#uploaderContainer .red").html("")},7e3);$("#uploadLoading").remove();$("#submitButton2").removeClass("hidden")}};
var message_CaptchaFailed="Captcha failed.";if(!mainCaptchaRecaptcha||!itemsCaptchaRecaptcha){var captchaObjTemplate={vertical_html:'                                                                                                  	            <table id="captcha_table" class="inner" style="padding:2px 2px 2px 0">                                          	                <tr>                                                                                                	                <td align="center">                                                                     	                <img title="Click to get a new captcha image. Add or subtract the numbers and type the result in the box below."  	                    class="captcha_reload captcha_img" style="cursor:pointer" src="" width="'+CAPTCHA_IMG_WIDTH+'" height="'+CAPTCHA_IMG_HEIGHT+'" />                                                   	                </td>                                                                                               	                </tr>                                                                                                	                <tr>                                                                                                	                <td class="bold" align="center" valign="top"                                                            	                    title="Add or subtract the numbers and type the result in the box below.">                      	                <table class="inner" style="padding:0px">                                           	                <tr>                                                                                                	                <td>                                                                                                	                Add or subtract the numbers <br />and type the result.                                                  	                    <div class="sbtBzttn">                                                                          	                        <input title="Get a new captcha image" class="captcha_reload" type="button" value="&nbsp;Reload" style="cursor:pointer">    	                    </div>                                                                                          	                </td>                                                                                               	                </tr>                                                                                               	                <tr>                                                                                                	                <td>                                                                                                	                    <div class="sbtBzttn">                                                                          	                        <input title="1" type="button" value="1" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                    <div class="sbtBzttn">                                                                          	                        <input title="2" type="button" value="2" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                    <div class="sbtBzttn">                                                                          	                        <input title="3" type="button" value="3" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                    <div class="sbtBzttn">                                                                          	                        <input title="4" type="button" value="4" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                    <div class="sbtBzttn">                                                                          	                        <input title="5" type="button" value="5" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                </td>                                                                                               	                </tr>                                                                                               	                <tr>                                                                                                	                <td>                                                                                                	                    <div class="sbtBzttn">                                                                          	                        <input title="6" type="button" value="6" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                    <div class="sbtBzttn">                                                                          	                        <input title="7" type="button" value="7" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                    <div class="sbtBzttn">                                                                          	                        <input title="8" type="button" value="8" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                    <div class="sbtBzttn">                                                                          	                        <input title="9" type="button" value="9" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                    <div class="sbtBzttn">                                                                          	                        <input title="0" type="button" value="0" style="cursor:pointer" class="numpad">                                                 	                    </div>                                                                                          	                </td>                                                                                               	                </tr>                                                                                               	                <tr>                                                                                                	                <td>                                                                                                	                <input type="hidden" id="recaptcha_challenge_field" name="recaptcha_challenge_field">               	                <input type="tel" style="text-transform: lowercase; width:96%" title="Add or subtract the numbers and type the result in the box below." class="txt" type="text"           	                    autocapitalize="off" autocorrect="off"                                                          	                    id="recaptcha_response_field" name="recaptcha_response_field" autocomplete="off">               	                '+'<div title="Pick-up this item" '+'style="text-align: center; font: 700 16px sans-serif; color: white; cursor: pointer; display: block; line-height: 1.5em; margin: 6px; width: 200px; height: 25px; background: #330a5f; border: 2px solid #56158c;" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" '+'onclick="$(\'#frmPickUp\').submit();" aria-disabled="false">Submit</div>'+"</td>                                                                                               	                </tr>                                                                                               	                <tr>                                                                                                	                <td>                                                                                                	                </td>                                                                                               	                </tr>                                                                                               	                </table>                                                                                                	                </td>                                                                                               	                </tr>                                                                                               	            </table>                                                                                                	            ",horizontal_html:'																												<table id="captcha_table" class="inner" style="padding:2px 2px 2px 0"> 															<tr>																												<td align="center">																						<img title="Click to get a new captcha image. Add or subtract the numbers and type the result in the box below."  					class="captcha_reload captcha_img" style="cursor:pointer" src="" width="'+CAPTCHA_IMG_WIDTH+'" height="'+CAPTCHA_IMG_HEIGHT+'" />																	</td>																												<td class="bold" align="center" valign="top"																				title="Add or subtract the numbers and type the result in the box below.">										<table class="inner" style="padding:0px"> 															<tr>																												<td>																												Add or subtract the numbers <br />and type the result. 																		<div class="sbtBzttn">																									<input title="Get a new captcha image" class="captcha_reload" type="button" value="&nbsp;Reload" style="cursor:pointer">						</div>																											</td>																												</tr>																												<tr>																												<td>																													<div class="sbtBzttn">																									<input title="1" type="button" value="1" style="cursor:pointer" class="numpad">																		</div>																												<div class="sbtBzttn">																									<input title="2" type="button" value="2" style="cursor:pointer" class="numpad">																		</div>																												<div class="sbtBzttn">																									<input title="3" type="button" value="3" style="cursor:pointer" class="numpad">																		</div>																												<div class="sbtBzttn">																									<input title="4" type="button" value="4" style="cursor:pointer" class="numpad">																		</div>																												<div class="sbtBzttn">																									<input title="5" type="button" value="5" style="cursor:pointer" class="numpad">																		</div>																											</td>																												</tr>																												<tr>																												<td>																													<div class="sbtBzttn">																									<input title="6" type="button" value="6" style="cursor:pointer" class="numpad">																		</div>																												<div class="sbtBzttn">																									<input title="7" type="button" value="7" style="cursor:pointer" class="numpad">																		</div>																												<div class="sbtBzttn">																									<input title="8" type="button" value="8" style="cursor:pointer" class="numpad">																		</div>																												<div class="sbtBzttn">																									<input title="9" type="button" value="9" style="cursor:pointer" class="numpad">																		</div>																												<div class="sbtBzttn">																									<input title="0" type="button" value="0" style="cursor:pointer" class="numpad">																		</div>																											</td>																												</tr>																												<tr>																												<td>																												<input type="hidden" id="recaptcha_challenge_field" name="recaptcha_challenge_field">								<input style="text-transform: lowercase; width:96%" title="Add or subtract the numbers and type the result in the box below." class="txt" type="tel"								autocapitalize="off" autocorrect="off" 																				id="recaptcha_response_field" name="recaptcha_response_field" autocomplete="off">									'+'<div title="Pick-up this item" '+'style="text-align: center; font: 700 16px sans-serif; color: white; cursor: pointer; display: block; line-height: 1.5em; margin: 6px; width: 200px; height: 25px; background: #330a5f; border: 2px solid #56158c;" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" '+"onclick=\"$('#pickButton').trigger('click');\" aria-disabled=\"false\">Pick-up item</div>"+"				</td>																												</tr>																												<tr>																												<td>																												</td>																												</tr>																												</table>																												</td>																												</tr>																											</table> 																											",owner:null,image_src:null,captchaJS:false,called:false,useGRecaptcha:false,public_key:null,parent_name:null,params:null,verifyCallback:function(t){this.owner.append($('<input type="hidden" id="recaptcha_response_field" name="recaptcha_response_field" value="" />'));this.owner.find("#recaptcha_response_field").val(t)},widgetId:null,create:function(t,e,a){this.called=true;if(typeof t!=="undefined")Recaptcha.public_key=t;if(typeof e!=="undefined")Recaptcha.parent_name=e;if(typeof a!=="undefined")Recaptcha.params=a;if(captchaLoaded===false&&this.useGRecaptcha){$.cachedScript("https://www.google.com/recaptcha/api.js?onload=recaptchaDoneLoading&render=explicit").done(function(t,e){});return false}this.destroy();this.owner=$("#"+e);if(this.useGRecaptcha){return this.widgetId=grecaptcha.render(e,{sitekey:t,callback:this.verifyCallback.bind(this),theme:"dark"})}var i=this.horizontal_html;if(typeof a.type!="undefined"&&a.type=="vertical"){i=this.vertical_html}this.owner.html(i);this.image_src="/captcha/display";if(typeof a.src!="undefined"){this.image_src=a.src}this.reload();this.owner.find(".captcha_reload").click(this.click_reload.bind(this));this.assign_validator();if(typeof a.callback=="function"){a.callback()}this.assign_numpad()},is_loaded:function(t){return this.owner!=null&&this.owner.attr("id")==t&&this.owner.children().length!=0},destroy:function(){if(this.owner){try{this.owner.children().remove()}catch(t){}}this.owner=null},click_reload:function(t){this.reload();t.preventDefault()},reload:function(){if(this.useGRecaptcha){return grecaptcha.reset(this.widgetId)}var t=this.owner.find(".captcha_img");t.attr("src",this.image_src+"?"+(new Date).getTime());this.owner.find("#recaptcha_response_field").val("")},focus_response_field:function(){this.owner.find("#recaptcha_response_field").focus()},assign_numpad:function(){this.owner.find(".numpad").on("click",function(t){this.owner.find("#recaptcha_response_field").val(this.owner.find("#recaptcha_response_field").val()+""+$(t.target).val())}.bind(this))},assign_validator:function(){this.owner.find("#recaptcha_response_field").keydown(function(t){if(t.ctrlKey===true||t.shiftKey===true||t.altKey===true){return}if(t.keyCode==46||t.keyCode==8||t.keyCode==9||t.keyCode==27||t.keyCode==17||t.keyCode==13||t.keyCode==16||t.keyCode==18||t.keyCode>=35&&t.keyCode<=39){return}else{if((t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)){t.preventDefault();f.e("Captcha error. Please enter result (as number) of addition or subtraction operation")}}})}}}if(!itemsCaptchaRecaptcha){RecaptchaItems=jQuery.extend(true,{},captchaObjTemplate);RecaptchaItems.useGRecaptcha=itemsCaptchaGRecaptcha}else{RecaptchaItems=Recaptcha}if(!mainCaptchaRecaptcha){Recaptcha=jQuery.extend(true,{},captchaObjTemplate);Recaptcha.useGRecaptcha=mainCaptchaGRecaptcha}if(itemsCaptchaRecaptcha&&!mainCaptchaRecaptcha){Recaptcha.challenge_callback=RecaptchaItems.challenge_callback;Recaptcha.finish_reload=RecaptchaItems.finish_reload}captchaObjTemplate=null;
var channel={currentPage:1,orderDefault:"asc",sectionDefault:"picturelatest",perPage:20,sortBy:"",page:1,search:"",descButton:false,channelInit:function(){channel.overflownCheck();$(window).on("resize",function(e){clearInterval(window.chanDescCheck);window.chanDescCheck=setTimeout(function(){channel.overflownCheck()},100)})},overflownCheck:function(){var e=typeof $("#channelDesc").height()!=="undefined"?$("#channelDesc").height():0;var n=typeof $("#chanTextTitle").height()!=="undefined"?$("#chanTextTitle").height():0;var a=typeof $(".channelBackground img").height()!=="undefined"?$(".channelBackground img").height():0;var t=typeof $(".channelBackground").height()!=="undefined"?$(".channelBackground").height():0;if(e+n+a>=t&&$("#channelDesc").length>0){if($("#showDesc").css("display")!="none")return false;$("#showDesc").show();$("#showDesc").find("span").off().on("click",function(){channel.chanDesc()})}else{$("#showDesc").hide()}},chanDesc:function(){$("#showDesc").find("span").text("Hide full description").off().on("click",function(){channel.chanDescHide();setTimeout(function(){channel.overflownCheck()},100)});$("#channelDesc").css("max-height","100%");$(".channelBackground").css({"max-height":"none",height:"auto"});$(".imageBackground").css({"max-height":"none",height:"100%"})},chanDescHide:function(){$("#showDesc").find("span").text("Show full description").off().on("click",function(){channel.chanDesc()});$("#channelDesc").css("max-height","");$(".channelBackground img").show();$(".channelBackground").css({"max-height":"",height:""});$(".imageBackground").css({"max-height":"",height:"%"})},detectCutoffDesc:function(){},setPicPerPage:function(e,n,a){channel.loadSettings(n);channel.currentPage=1;channel.sectionDefault=n;channel.perPage=e;channel.loadContentList(1,n,a)},setSortBy:function(e,n,a){channel.currentPage=1;channel.loadSettings(n);channel.sortBy=e;channel.sectionDefault=n;channel.loadContentList(1,n,a)},setSortOrder:function(e,n,a){channel.currentPage=1;channel.loadSettings(n);channel.sectionDefault=n;channel.orderDefault=e;channel.loadContentList(1,n,a)},loadSettings:function(e){channel.perPage=$("#"+e+"_perPage").val();channel.sortBy=$("#"+e+"_picSort").val();channel.orderDefault=$("#"+e+"_picOrder").val()},loadContentList:function(e,n,a,t,c){if(n==null){n=channel.sectionDefault}var s=new RegExp("^nsfw","i");var l=n.match(s);pathArray=window.location.pathname.split("/");if(l){var o="nsfw/channel";var i=pathArray[3]}else{var o="channel";var i=pathArray[2]}var h=$("<div>").addClass("contetLoadingw8");var u=$("<div>").addClass("contetLoadingw8");$("#"+n+"_content").append(u);var r="";if(document.getElementById("hiddenTypeId")&&document.getElementById("hiddenTypeId").value!=""){r=$("#hiddenTypeId").val();a=r}if(r==""&&(a==null||a=="")){a=0}u.animate({height:"16px"},200);channel.loadSettings(n);if(channel.sortBy==""){channel.sortBy="Select"}t="/"+o+"/"+i+"/"+n+"/"+channel.orderDefault+"/"+channel.perPage+"/"+channel.sortBy+"/"+e;$.ajax({type:"get",url:t,success:function(e){if(c!=undefined){c.call()}else{$("#"+n+"_content").html(e).parent().find(".pag1").html($("#"+n+"_content").find(".centerCom").html());$(".contetLoadingw8").remove()}content.setClickHandlers.thumbs()},error:function(){}});return false},subscribe:function(e){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){channel.subscribe(e)});loginOpen();return false}var n="/member/channel/subscribe/"+e;$.ajax({type:"post",url:n,success:function(n){if(n=="OK"){$("#ChannelSubscribe").hide();$("#ChannelUnsubscribe").show();subsData.data.all=parseInt(subsData.data.all)+1;subsData.data.count=parseInt(subsData.data.count)+1;if(FJSubs.data.actual!=0){FJSubs.data.actual=1}FJSubs.changeGlobalCount();f.s("You are successfully subscribed to updates of channel "+e)}else{f.e(n)}},error:function(){f.e("Request failed")}});return false},unsubscribe:function(e){if(!loggedIn()){FJ.changeCallback("onLoginSuccess",function(){channel.unsubscribe(e)});loginOpen();return false}var n="/member/channel/unsubscribe/"+e;$.ajax({type:"post",url:n,success:function(n){if(n=="OK"){$("#ChannelSubscribe").show();$("#ChannelUnsubscribe").hide();subsData.data.all=parseInt(subsData.data.all)-1;subsData.data.count=parseInt(subsData.data.count)-1;FJSubs.changeGlobalCount();f.s("You are successfully unsubscried from updates of channel "+e)}else{f.e(n)}},error:function(){f.e("Request failed")}});return false}};
var f={s:function(e){flashMessage.showSuccess(e)},e:function(e){flashMessage.showError(e)}};var flashMessage={show:function(e,s,o){this.removeMessage();var a='<div id="flashM" class="aCenter flashMessage ';if(s){a+="flashErrorMessage"}else{a+="flashSuccessMessage"}if(!loggedIn()){a+=" non-logged"}a+='">';a+=e;a+='<span style="top: 50%;transform: translateY(-50%);position: absolute;right: 10px;margin: 0;" '+'onclick="$(\'.flashMessage\').remove()" class="bottomClose2" title="Click to close"></span></div>';$("#contentBeforeBody").after(a);if(o){var n=$(o).css("z-index");$("#flashM").css("z-index",n-1)}this.removeMessageDelayed()},showSuccess:function(e,s){this.show(e,false,s)},showError:function(e){this.show(e,true)},removeMessage:function(){var e=$(".flashMessage");e.remove()},removeMessageDelayed:function(e){if(typeof e==="undefined"){e=7e3}var s=$(".flashMessage");s.hover(function(){s.fadeOut("slow",function(){s.remove()})});setTimeout(function(){s.fadeOut("slow",function(){s.remove()})},7e3)}};
var funnyLinks={info:function(t,e,a){if(e==undefined)return false;if(e!=""&&e.search(/http/i)==-1){e="http://"+e;$("#submit_url1").val(e)}$(".ajaxResponse").empty().addClass("submitContentW8");var n={url:e};var i=SCRIPT_URL+"site/funnyjunk/images/transparent_pixel.gif";var l="ajaxFile";$.ajax({url:"/link/info/",type:"POST",data:n,dataType:"json",async:false,success:function(t){$(".ajaxResponse").removeClass("submitContentW8");var n=$("#urlError").text("").hide();$("#submit_url1").removeClass("invalid");if(/^OK/.test(t.result)){if(typeof t.description!="undefined"&&($("#contentDescription").val()==""||$("#contentDescription").val()==$("#contentDescription").attr("auto_val"))){$("#contentDescription").val(t.description).attr("auto_val",t.description)}if(typeof t.title!="undefined"&&($("#contentTitle").val()==""||$("#contentTitle").val()==$("#contentTitle").attr("auto_val"))){$("#contentTitle").val(t.title).attr("auto_val",t.title)}if(typeof t.tags!="undefined"&&($("#tagform").val()==""||$("#tagform").val()==$("#tagform").attr("auto_val"))){$("#tagform").val(t.tags).attr("auto_val",t.tags)}if(typeof t.thumbnail_url!="undefined"){var l=$(".link_image_preview");l.removeClass("hidden");var r=t.thumbnail_url;l.find("img").attr("src",r)}if(e!=""){if($("input[name='link_thumbnail']:checked").val()==2){$("input[name='link_thumbnail'][value='1']").attr("checked",true)}}else{if($("input[name='link_thumbnail']:checked").val()==1){$("input[name='link_thumbnail'][value='2']").attr("checked",true)}}if(typeof a!="undefined"){a()}}else{n.text(t.result).show();$("#submit_url1").addClass("invalid");f.e(t.result);var l=$(".link_image_preview");l.addClass("hidden");l.find("img").attr("src",i);if($("input[name='link_thumbnail']:checked").val()==1){$("input[name='link_thumbnail'][value='2']").attr("checked",true)}}},error:function(){$(".ajaxResponse").removeClass("submitContentW8");var t=$(".link_image_preview");t.addClass("hidden");t.find("img").attr("src",i);if($("input[name='link_thumbnail']:checked").val()==1){$("input[name='link_thumbnail'][value='2']").attr("checked",true)}}});return false}};
myMarkdownSettingsContent={nameSpace:"markdown",previewParserPath:"/ajax/markitup_render",onShiftEnter:{keepDefault:false,openWith:"\n\n"},markupSet:[{name:"Bold",key:"B",openWith:"**",closeWith:"**",className:"boldButton"},{name:"Italic",key:"I",openWith:"_",closeWith:"_",className:"italicButton"},{name:"Underline",key:"U",openWith:"!!",closeWith:"!!",className:"underlineButton"},{name:"Stroke-thought",key:"=",openWith:"==",closeWith:"==",className:"strokeButton"},{name:"Sizes",className:"fontButton1",dropMenu:[{name:"Small",key:"1",openWith:"[small]",closeWith:"[small]",className:"fontButton1"},{name:"Normal",key:"2",openWith:"[normal]",closeWith:"[normal]",className:"fontButton2"},{name:"Big",key:"3",openWith:"[big]",closeWith:"[big]",className:"fontButton3"},{name:"Big 1",key:"4",openWith:"[big1]",closeWith:"[big1]",className:"fontButton4"},{name:"Big 2",key:"5",openWith:"[big2]",closeWith:"[big2]",className:"fontButton5"},{name:"Big 3",key:"6",openWith:"[big3]",closeWith:"[big3]",className:"fontButton6"},{name:"Big 4",key:"7",openWith:"[big4]",closeWith:"[big4]",className:"fontButton6"},{name:"Big 5",key:"8",openWith:"[big5]",closeWith:"[big5]",className:"fontButton6"},{name:"Big 6",key:"9",openWith:"[big6]",closeWith:"[big6]",className:"fontButton6"}]},{name:"Alignments",className:"alignments",dropMenu:[{name:"Left",openWith:"[left]",closeWith:"[left]",className:"left"},{name:"Center",openWith:"[center]",closeWith:"[center]",className:"center"},{name:"Right",openWith:"[right]",closeWith:"[right]",className:"right"}]},{separator:"---------------"},{name:"Effects",className:"effects",dropMenu:[{name:"Rainbow",openWith:"[sweden]",closeWith:"[sweden]",className:"sweden"},{name:"Shake",openWith:"[michaeljfox]",closeWith:"[michaeljfox]",className:"michaeljfox"},{name:"Flip",openWith:"[flip]",closeWith:"[flip]",className:"flip"},{name:"Pulse",openWith:"[pulse]",closeWith:"[pulse]",className:"pulse"}]},{separator:"---------------"},{name:"Colors",className:"colors",dropMenu:[{name:"Brilliant Yellow",openWith:"[bril-yellow]",closeWith:"[bril-yellow]",className:"col1-1"},{name:"Vivid Yellow",openWith:"[yellow]",closeWith:"[yellow]",className:"col1-2"},{name:"Strong Yellow",openWith:"[strong-yellow]",closeWith:"[strong-yellow]",className:"col1-3"},{name:"Brilliant Orange",openWith:"[bril-orange]",closeWith:"[bril-orange]",className:"col2-1"},{name:"Vivid Orange",openWith:"[orange]",closeWith:"[orange]",className:"col2-2"},{name:"Strong Orange",openWith:"[strong-orange]",closeWith:"[strong-orange]",className:"col2-3"},{name:"Light Brown",openWith:"[light-brown]",closeWith:"[light-brown]",className:"col3-1"},{name:"Brown",openWith:"[brown]",closeWith:"[brown]",className:"col3-2"},{name:"Moderate Brown",openWith:"[mod-brown]",closeWith:"[mod-brown]",className:"col3-3"},{name:"Brilliant Green",openWith:"[bril-green]",closeWith:"[bril-green]",className:"col4-1"},{name:"Green",openWith:"[green]",closeWith:"[green]",className:"col4-2"},{name:"Moderate Green",openWith:"[mod-green]",closeWith:"[mod-green]",className:"col4-3"},{name:"Grayish Azure",openWith:"[gray-azure]",closeWith:"[gray-azure]",className:"col5-1"},{name:"Azure",openWith:"[azure]",closeWith:"[azure]",className:"col5-2"},{name:"Moderate Blue",openWith:"[mod-blue]",closeWith:"[mod-blue]",className:"col5-3"},{name:"Grayish Purple",openWith:"[gray-purple]",closeWith:"[gray-purple]",className:"col6-1"},{name:"Purple",openWith:"[purple]",closeWith:"[purple]",className:"col6-2"},{name:"Dark Purple",openWith:"[dark-purple]",closeWith:"[dark-purple]",className:"col6-3"},{name:"Brilliant Red",openWith:"[bril-red]",closeWith:"[bril-red]",className:"col7-1"},{name:"Moderate Red",openWith:"[mod-red]",closeWith:"[mod-red]",className:"col7-2"},{name:"Strong Red",openWith:"[strong-red]",closeWith:"[strong-red]",className:"col7-3"},{name:"White",openWith:"[white]",closeWith:"[white]",className:"col8-1"},{name:"Light Gray",openWith:"[light-gray]",closeWith:"[light-gray]",className:"col8-2"},{name:"Greenish Gray",openWith:"[greenish-gray]",closeWith:"[greenish-gray]",className:"col8-3"},{name:"Spring budish gray",openWith:"[spring-gray]",closeWith:"[spring-gray]",className:"col9-1"},{name:"Dark Gray",openWith:"[dark-gray]",closeWith:"[dark-gray]",className:"col9-2"},{name:"Black",openWith:"[black]",closeWith:"[black]",className:"col9-3"}]},{name:"text-border",className:"colors borderIcon",dropMenu:[{name:"Black",openWith:"[text-border-black]",closeWith:"[text-border-black]",className:"col9-3"},{name:"White",openWith:"[text-border-white]",closeWith:"[text-border-white]",className:"col8-1"},{name:"Yellow",openWith:"[text-border-yellow]",closeWith:"[text-border-yellow]",className:"col1-2"},{name:"Red",openWith:"[text-border-red]",closeWith:"[text-border-red]",className:"col7-1"},{name:"Grey",openWith:"[text-border-grey]",closeWith:"[text-border-grey]",className:"col9-2"},{name:"Orange",openWith:"[text-border-orange]",closeWith:"[text-border-orange]",className:"col2-1"},{name:"Brown",openWith:"[text-border-brown]",closeWith:"[text-border-brown]",className:"col3-1"}]},{name:"Preview",call:"preview",className:"preview"},{separator:"---------------"},{name:"Smiles",className:"smiles",dropMenu:[{name:"Smile",replaceWith:":)",className:"smile-smile"},{name:"Big grin",replaceWith:":D",className:"smile-big_grin"},{name:"Clap",replaceWith:":clap:",className:"smile-clap"},{name:"Blushing",replaceWith:":,')",className:"smile-blushing"},{name:"Disappointed",replaceWith:":disappointed:",className:"smile-disappointed"},{name:"Tongue",replaceWith:":-P",className:"smile-tongue"},{name:"Sad",replaceWith:":(",className:"smile-sad"},{name:"Curse",replaceWith:":curse:",className:"smile-curse"},{name:"Angry",replaceWith:":angry:",className:"smile-angry"},{name:"Freaked out",replaceWith:":freaked-out:",className:"smile-freaked-out"},{name:"Arrogant",replaceWith:":arrogant:",className:"smile-arrogant"},{name:"Surprise",replaceWith:":-O",className:"smile-surprise"},{name:"Bulgy eyes",replaceWith:":bulgy-eyes:",className:"smile-bulgy-eyes"},{name:"Pissed off",replaceWith:":pissed-off:",className:"smile-pissed-off"},{name:"At wits end",replaceWith:":at-wits-end:",className:"smile-at-wits-end"},{name:"Confused",replaceWith:":confused:",className:"smile-confused"},{name:"Question",replaceWith:":?",className:"smile-question"},{name:"Kiss",replaceWith:":-*",className:"smile-kiss"},{name:"Love",replaceWith:":-X",className:"smile-love"},{name:"Broken heart",replaceWith:"=((",className:"smile-broken_heart"},{name:"Pant",replaceWith:":pant:",className:"smile-pant"},{name:"India",replaceWith:":india:",className:"smile-poop"},{name:"Harambe",replaceWith:":harambe:",className:"smile-harambe"},{name:"s100",replaceWith:":s100:",className:"smiles2 s100"},{name:"afro",replaceWith:":afro:",className:"smiles2 afro"},{name:"alien",replaceWith:":alien:",className:"smiles2 alien"},{name:"american-flag",replaceWith:":american-flag:",className:"smiles2 american-flag"},{name:"arrogant2",replaceWith:":arrogant2:",className:"smiles2 arrogant2"},{name:"black-eye",replaceWith:":black-eye:",className:"smiles2 black-eye"},{name:"black-santa",replaceWith:":black-santa:",className:"smiles2 black-santa"},{name:"bomb",replaceWith:":bomb:",className:"smiles2 bomb"},{name:"brown-poop",replaceWith:":brown-poop:",className:"smiles2 brown-poop"},{name:"butt",replaceWith:":butt:",className:"smiles2 butt"},{name:"clapping",replaceWith:":clapping:",className:"smiles2 clapping"},{name:"crying-hard",replaceWith:":crying-hard:",className:"smiles2 crying-hard"},{name:"derp",replaceWith:":derp:",className:"smiles2 derp"},{name:"dickbutt",replaceWith:":dickbutt:",className:"smiles2 dickbutt"},{name:"dog",replaceWith:":dog:",className:"smiles2 dog"},{name:"donkey",replaceWith:":donkey:",className:"smiles2 donkey"},{name:"drooling",replaceWith:":drooling:",className:"smiles2 drooling"},{name:"egghead",replaceWith:":egghead:",className:"smiles2 egghead"},{name:"fire",replaceWith:":fire:",className:"smiles2 fire"},{name:"fireball",replaceWith:":fireball:",className:"smiles2 fireball"},{name:"game-robot",replaceWith:":game-robot:",className:"smiles2 game-robot"},{name:"gay-couple",replaceWith:":gay-couple:",className:"smiles2 gay-couple"},{name:"gay-flag",replaceWith:":gay-flag:",className:"smiles2 gay-flag"},{name:"ghost",replaceWith:":ghost:",className:"smiles2 ghost"},{name:"green-barf",replaceWith:":green-barf:",className:"smiles2 green-barf"},{name:"green-heart",replaceWith:":green-heart:",className:"smiles2 green-heart"},{name:"gun",replaceWith:":gun:",className:"smiles2 gun"},{name:"happy-pepe",replaceWith:":happy-pepe:",className:"smiles2 happy-pepe"},{name:"haramba",replaceWith:":haramba:",className:"smiles2 haramba"},{name:"heart-eyes",replaceWith:":heart-eyes:",className:"smiles2 heart-eyes"},{name:"hearts",replaceWith:":hearts:",className:"smiles2 hearts"},{name:"hehe",replaceWith:":hehe:",className:"smiles2 hehe"},{name:"hillary",replaceWith:":hillary:",className:"smiles2 hillary"},{name:"hoff",replaceWith:":hoff:",className:"smiles2 hoff"},{name:"horse",replaceWith:":horse:",className:"smiles2 horse"},{name:"hubba",replaceWith:":hubba:",className:"smiles2 hubba"},{name:"josh",replaceWith:":josh:",className:"smiles2 josh"},{name:"kissy-heart",replaceWith:":kissy-heart:",className:"smiles2 kissy-heart"},{name:"knife",replaceWith:":knife:",className:"smiles2 knife"},{name:"laughing-tears",replaceWith:":laughing-tears:",className:"smiles2 laughing-tears"},{name:"leftarm",replaceWith:":leftarm:",className:"smiles2 leftarm"},{name:"mad",replaceWith:":mad:",className:"smiles2 mad"},{name:"mad-pepe",replaceWith:":mad-pepe:",className:"smiles2 mad-pepe"},{name:"mario",replaceWith:":mario:",className:"smiles2 mario"},{name:"middle-finger",replaceWith:":middle-finger:",className:"smiles2 middle-finger"},{name:"nerd",replaceWith:":nerd:",className:"smiles2 nerd"},{name:"panda",replaceWith:":panda:",className:"smiles2 panda"},{name:"peeing",replaceWith:":peeing:",className:"smiles2 peeing"},{name:"perfect",replaceWith:":perfect:",className:"smiles2 perfect"},{name:"pokerface",replaceWith:":pokerface:",className:"smiles2 pokerface"},{name:"postpoo",replaceWith:":postpoo:",className:"smiles2 postpoo"},{name:"praising",replaceWith:":praising:",className:"smiles2 praising"},{name:"praying",replaceWith:":praying:",className:"smiles2 praying"},{name:"purple-devil",replaceWith:":purple-devil:",className:"smiles2 purple-devil"},{name:"purple-heart",replaceWith:":purple-heart:",className:"smiles2 purple-heart"},{name:"rainbow-poop",replaceWith:":rainbow-poop:",className:"smiles2 rainbow-poop"},{name:"red-heart",replaceWith:":red-heart:",className:"smiles2 red-heart"},{name:"rightarm",replaceWith:":rightarm:",className:"smiles2 rightarm"},{name:"robot",replaceWith:":robot:",className:"smiles2 robot"},{name:"sad-pepe",replaceWith:":sad-pepe:",className:"smiles2 sad-pepe"},{name:"scared",replaceWith:":scared:",className:"smiles2 scared"},{name:"secret",replaceWith:":secret:",className:"smiles2 secret"},{name:"skull",replaceWith:":skull:",className:"smiles2 skull"},{name:"smile",replaceWith:":smile:",className:"smiles2 smile"},{name:"spongebob",replaceWith:":spongebob:",className:"smiles2 spongebob"},{name:"spurdo",replaceWith:":spurdo:",className:"smiles2 spurdo"},{name:"spy",replaceWith:":spy:",className:"smiles2 spy"},{name:"stars",replaceWith:":stars:",className:"smiles2 stars"},{name:"stoned",replaceWith:":stoned:",className:"smiles2 stoned"},{name:"sulk",replaceWith:":sulk:",className:"smiles2 sulk"},{name:"surfing",replaceWith:":surfing:",className:"smiles2 surfing"},{name:"surrender",replaceWith:":surrender:",className:"smiles2 surrender"},{name:"thinking",replaceWith:":thinking:",className:"smiles2 thinking"},{name:"throw-up",replaceWith:":throw-up:",className:"smiles2 throw-up"},{name:"thumb-down",replaceWith:":thumb-down:",className:"smiles2 thumb-down"},{name:"thumb-up",replaceWith:":thumb-up:",className:"smiles2 thumb-up"},{name:"tip-fedora",replaceWith:":tip-fedora:",className:"smiles2 tip-fedora"},{name:"trans",replaceWith:":trans:",className:"smiles2 trans"},{name:"trump",replaceWith:":trump:",className:"smiles2 trump"},{name:"wave",replaceWith:":wave:",className:"smiles2 wave"},{name:"yelling-bird",replaceWith:":yelling-bird:",className:"smiles2 yelling-bird"},{name:"zukeene",replaceWith:":zukeene:",className:"smiles2 zukeene"}]}]};channelMarkdown={nameSpace:"markdown",previewParserPath:"/ajax/markitup_render",onShiftEnter:{keepDefault:false,openWith:"\n\n"},markupSet:[{name:"Bold",key:"B",openWith:"**",closeWith:"**",className:"boldButton"},{name:"Italic",key:"I",openWith:"_",closeWith:"_",className:"italicButton"},{name:"Underline",key:"U",openWith:"!!",closeWith:"!!",className:"underlineButton"},{name:"Stroke-thought",key:"=",openWith:"==",closeWith:"==",className:"strokeButton"},{separator:"---------------"},{name:"Sizes",className:"fontButton1",dropMenu:[{name:"Small",key:"1",openWith:"[small]",closeWith:"[small]",className:"fontButton1"},{name:"Normal",key:"2",openWith:"[normal]",closeWith:"[normal]",className:"fontButton2"},{name:"Big",key:"3",openWith:"[big]",closeWith:"[big]",className:"fontButton3"},{name:"Big 1",key:"4",openWith:"[big1]",closeWith:"[big1]",className:"fontButton4"},{name:"Big 2",key:"5",openWith:"[big2]",closeWith:"[big2]",className:"fontButton5"},{name:"Big 3",key:"6",openWith:"[big3]",closeWith:"[big3]",className:"fontButton6"},{name:"Big 4",key:"7",openWith:"[big4]",closeWith:"[big4]",className:"fontButton6"},{name:"Big 5",key:"8",openWith:"[big5]",closeWith:"[big5]",className:"fontButton6"},{name:"Big 6",key:"9",openWith:"[big6]",closeWith:"[big6]",className:"fontButton6"}]},{separator:"---------------"},{name:"Alignments",className:"alignments",dropMenu:[{name:"Left",openWith:"[left]",closeWith:"[left]",className:"left"},{name:"Center",openWith:"[center]",closeWith:"[center]",className:"center"},{name:"Right",openWith:"[right]",closeWith:"[right]",className:"right"}]},{separator:"---------------"},{name:"Effects",className:"effects",dropMenu:[{name:"Rainbow",openWith:"[sweden]",closeWith:"[sweden]",className:"sweden"},{name:"Shake",openWith:"[michaeljfox]",closeWith:"[michaeljfox]",className:"michaeljfox"},{name:"Flip",openWith:"[flip]",closeWith:"[flip]",className:"flip"},{name:"Pulse",openWith:"[pulse]",closeWith:"[pulse]",className:"pulse"}]},{separator:"---------------"},{name:"Colors",className:"colors",dropMenu:[{name:"Brilliant Yellow",openWith:"[bril-yellow]",closeWith:"[bril-yellow]",className:"col1-1"},{name:"Vivid Yellow",openWith:"[yellow]",closeWith:"[yellow]",className:"col1-2"},{name:"Strong Yellow",openWith:"[strong-yellow]",closeWith:"[strong-yellow]",className:"col1-3"},{name:"Brilliant Orange",openWith:"[bril-orange]",closeWith:"[bril-orange]",className:"col2-1"},{name:"Vivid Orange",openWith:"[orange]",closeWith:"[orange]",className:"col2-2"},{name:"Strong Orange",openWith:"[strong-orange]",closeWith:"[strong-orange]",className:"col2-3"},{name:"Light Brown",openWith:"[light-brown]",closeWith:"[light-brown]",className:"col3-1"},{name:"Brown",openWith:"[brown]",closeWith:"[brown]",className:"col3-2"},{name:"Moderate Brown",openWith:"[mod-brown]",closeWith:"[mod-brown]",className:"col3-3"},{name:"Brilliant Green",openWith:"[bril-green]",closeWith:"[bril-green]",className:"col4-1"},{name:"Green",openWith:"[green]",closeWith:"[green]",className:"col4-2"},{name:"Moderate Green",openWith:"[mod-green]",closeWith:"[mod-green]",className:"col4-3"},{name:"Grayish Azure",openWith:"[gray-azure]",closeWith:"[gray-azure]",className:"col5-1"},{name:"Azure",openWith:"[azure]",closeWith:"[azure]",className:"col5-2"},{name:"Moderate Blue",openWith:"[mod-blue]",closeWith:"[mod-blue]",className:"col5-3"},{name:"Grayish Purple",openWith:"[gray-purple]",closeWith:"[gray-purple]",className:"col6-1"},{name:"Purple",openWith:"[purple]",closeWith:"[purple]",className:"col6-2"},{name:"Dark Purple",openWith:"[dark-purple]",closeWith:"[dark-purple]",className:"col6-3"},{name:"Brilliant Red",openWith:"[bril-red]",closeWith:"[bril-red]",className:"col7-1"},{name:"Moderate Red",openWith:"[mod-red]",closeWith:"[mod-red]",className:"col7-2"},{name:"Strong Red",openWith:"[strong-red]",closeWith:"[strong-red]",className:"col7-3"},{name:"White",openWith:"[white]",closeWith:"[white]",className:"col8-1"},{name:"Light Gray",openWith:"[light-gray]",closeWith:"[light-gray]",className:"col8-2"},{name:"Greenish Gray",openWith:"[greenish-gray]",closeWith:"[greenish-gray]",className:"col8-3"},{name:"Spring budish gray",openWith:"[spring-gray]",closeWith:"[spring-gray]",className:"col9-1"},{name:"Dark Gray",openWith:"[dark-gray]",closeWith:"[dark-gray]",className:"col9-2"},{name:"Black",openWith:"[black]",closeWith:"[black]",className:"col9-3"}]},{name:"text-border",className:"colors borderIcon",dropMenu:[{name:"Black",openWith:"[text-border-black]",closeWith:"[text-border-black]",className:"col9-3"},{name:"White",openWith:"[text-border-white]",closeWith:"[text-border-white]",className:"col8-1"},{name:"Yellow",openWith:"[text-border-yellow]",closeWith:"[text-border-yellow]",className:"col1-2"},{name:"Red",openWith:"[text-border-red]",closeWith:"[text-border-red]",className:"col7-1"},{name:"Grey",openWith:"[text-border-grey]",closeWith:"[text-border-grey]",className:"col9-2"},{name:"Orange",openWith:"[text-border-orange]",closeWith:"[text-border-orange]",className:"col2-1"},{name:"Brown",openWith:"[text-border-brown]",closeWith:"[text-border-brown]",className:"col3-1"}]}]};myMarkdownSettingsComment={nameSpace:"markdown",previewParserPath:"/ajax/markitup_render",onShiftEnter:{keepDefault:false,openWith:"\n\n"},focusThis:true,markupSet:[{name:"Bold",key:"B",openWith:"[bold]",closeWith:"[bold]",className:"boldButton"},{name:"Italic",key:"I",openWith:"[italic]",closeWith:"[italic]",className:"italicButton"},{separator:"---------------"},{name:"Small",key:"1",openWith:"[small]",closeWith:"[small]",className:"fontButton1"},{name:"Normal",key:"2",openWith:"[normal]",closeWith:"[normal]",className:"fontButton2"},{name:"Big",key:"3",openWith:"[big]",closeWith:"[big]",className:"fontButton3"},{separator:"---------------"},{name:"Colors",className:"colors",dropMenu:[{name:"White",openWith:"[white]",closeWith:"[white]",className:"col8-1"},{name:"Light Gray",openWith:"[light-gray]",closeWith:"[light-gray]",className:"col8-2"},{name:"Greenish Gray",openWith:"[greenish-gray]",closeWith:"[greenish-gray]",className:"col8-3"}]},{separator:"---------------"},{name:"Preview",call:"preview",className:"preview"},{separator:"---------------"},{name:"Smiles",className:"smiles",dropMenu:[{name:"Smile",replaceWith:":)",className:"smile-smile"},{name:"Big grin",replaceWith:":D",className:"smile-big_grin"},{name:"Clap",replaceWith:":clap:",className:"smile-clap"},{name:"Blushing",replaceWith:":,')",className:"smile-blushing"},{name:"Disappointed",replaceWith:":disappointed:",className:"smile-disappointed"},{name:"Tongue",replaceWith:":-P",className:"smile-tongue"},{name:"Sad",replaceWith:":(",className:"smile-sad"},{name:"Curse",replaceWith:":curse:",className:"smile-curse"},{name:"Angry",replaceWith:":angry:",className:"smile-angry"},{name:"Freaked out",replaceWith:":freaked-out:",className:"smile-freaked-out"},{name:"Arrogant",replaceWith:":arrogant:",className:"smile-arrogant"},{name:"Surprise",replaceWith:":-O",className:"smile-surprise"},{name:"Bulgy eyes",replaceWith:":bulgy-eyes:",className:"smile-bulgy-eyes"},{name:"Pissed off",replaceWith:":pissed-off:",className:"smile-pissed-off"},{name:"At wits end",replaceWith:":at-wits-end:",className:"smile-at-wits-end"},{name:"Confused",replaceWith:":confused:",className:"smile-confused"},{name:"Question",replaceWith:":?",className:"smile-question"},{name:"Kiss",replaceWith:":-*",className:"smile-kiss"},{name:"Love",replaceWith:":-X",className:"smile-love"},{name:"Broken heart",replaceWith:"=((",className:"smile-broken_heart"},{name:"Pant",replaceWith:":pant:",className:"smile-pant"},{name:"India",replaceWith:":india:",className:"smile-poop"},{name:"Harambe",replaceWith:":harambe:",className:"smile-harambe"},{name:"s100",replaceWith:":s100:",className:"smiles2 s100"},{name:"afro",replaceWith:":afro:",className:"smiles2 afro"},{name:"alien",replaceWith:":alien:",className:"smiles2 alien"},{name:"american-flag",replaceWith:":american-flag:",className:"smiles2 american-flag"},{name:"arrogant2",replaceWith:":arrogant2:",className:"smiles2 arrogant2"},{name:"black-eye",replaceWith:":black-eye:",className:"smiles2 black-eye"},{name:"black-santa",replaceWith:":black-santa:",className:"smiles2 black-santa"},{name:"bomb",replaceWith:":bomb:",className:"smiles2 bomb"},{name:"brown-poop",replaceWith:":brown-poop:",className:"smiles2 brown-poop"},{name:"butt",replaceWith:":butt:",className:"smiles2 butt"},{name:"clapping",replaceWith:":clapping:",className:"smiles2 clapping"},{name:"crying-hard",replaceWith:":crying-hard:",className:"smiles2 crying-hard"},{name:"derp",replaceWith:":derp:",className:"smiles2 derp"},{name:"dickbutt",replaceWith:":dickbutt:",className:"smiles2 dickbutt"},{name:"dog",replaceWith:":dog:",className:"smiles2 dog"},{name:"donkey",replaceWith:":donkey:",className:"smiles2 donkey"},{name:"drooling",replaceWith:":drooling:",className:"smiles2 drooling"},{name:"egghead",replaceWith:":egghead:",className:"smiles2 egghead"},{name:"fire",replaceWith:":fire:",className:"smiles2 fire"},{name:"fireball",replaceWith:":fireball:",className:"smiles2 fireball"},{name:"game-robot",replaceWith:":game-robot:",className:"smiles2 game-robot"},{name:"gay-couple",replaceWith:":gay-couple:",className:"smiles2 gay-couple"},{name:"gay-flag",replaceWith:":gay-flag:",className:"smiles2 gay-flag"},{name:"ghost",replaceWith:":ghost:",className:"smiles2 ghost"},{name:"green-barf",replaceWith:":green-barf:",className:"smiles2 green-barf"},{name:"green-heart",replaceWith:":green-heart:",className:"smiles2 green-heart"},{name:"gun",replaceWith:":gun:",className:"smiles2 gun"},{name:"happy-pepe",replaceWith:":happy-pepe:",className:"smiles2 happy-pepe"},{name:"haramba",replaceWith:":haramba:",className:"smiles2 haramba"},{name:"heart-eyes",replaceWith:":heart-eyes:",className:"smiles2 heart-eyes"},{name:"hearts",replaceWith:":hearts:",className:"smiles2 hearts"},{name:"hehe",replaceWith:":hehe:",className:"smiles2 hehe"},{name:"hillary",replaceWith:":hillary:",className:"smiles2 hillary"},{name:"hoff",replaceWith:":hoff:",className:"smiles2 hoff"},{name:"horse",replaceWith:":horse:",className:"smiles2 horse"},{name:"hubba",replaceWith:":hubba:",className:"smiles2 hubba"},{name:"josh",replaceWith:":josh:",className:"smiles2 josh"},{name:"kissy-heart",replaceWith:":kissy-heart:",className:"smiles2 kissy-heart"},{name:"knife",replaceWith:":knife:",className:"smiles2 knife"},{name:"laughing-tears",replaceWith:":laughing-tears:",className:"smiles2 laughing-tears"},{name:"leftarm",replaceWith:":leftarm:",className:"smiles2 leftarm"},{name:"mad",replaceWith:":mad:",className:"smiles2 mad"},{name:"mad-pepe",replaceWith:":mad-pepe:",className:"smiles2 mad-pepe"},{name:"mario",replaceWith:":mario:",className:"smiles2 mario"},{name:"middle-finger",replaceWith:":middle-finger:",className:"smiles2 middle-finger"},{name:"nerd",replaceWith:":nerd:",className:"smiles2 nerd"},{name:"panda",replaceWith:":panda:",className:"smiles2 panda"},{name:"peeing",replaceWith:":peeing:",className:"smiles2 peeing"},{name:"perfect",replaceWith:":perfect:",className:"smiles2 perfect"},{name:"pokerface",replaceWith:":pokerface:",className:"smiles2 pokerface"},{name:"postpoo",replaceWith:":postpoo:",className:"smiles2 postpoo"},{name:"praising",replaceWith:":praising:",className:"smiles2 praising"},{name:"praying",replaceWith:":praying:",className:"smiles2 praying"},{name:"purple-devil",replaceWith:":purple-devil:",className:"smiles2 purple-devil"},{name:"purple-heart",replaceWith:":purple-heart:",className:"smiles2 purple-heart"},{name:"rainbow-poop",replaceWith:":rainbow-poop:",className:"smiles2 rainbow-poop"},{name:"red-heart",replaceWith:":red-heart:",className:"smiles2 red-heart"},{name:"rightarm",replaceWith:":rightarm:",className:"smiles2 rightarm"},{name:"robot",replaceWith:":robot:",className:"smiles2 robot"},{name:"sad-pepe",replaceWith:":sad-pepe:",className:"smiles2 sad-pepe"},{name:"scared",replaceWith:":scared:",className:"smiles2 scared"},{name:"secret",replaceWith:":secret:",className:"smiles2 secret"},{name:"skull",replaceWith:":skull:",className:"smiles2 skull"},{name:"smile",replaceWith:":smile:",className:"smiles2 smile"},{name:"spongebob",replaceWith:":spongebob:",className:"smiles2 spongebob"},{name:"spurdo",replaceWith:":spurdo:",className:"smiles2 spurdo"},{name:"spy",replaceWith:":spy:",className:"smiles2 spy"},{name:"stars",replaceWith:":stars:",className:"smiles2 stars"},{name:"stoned",replaceWith:":stoned:",className:"smiles2 stoned"},{name:"sulk",replaceWith:":sulk:",className:"smiles2 sulk"},{name:"surfing",replaceWith:":surfing:",className:"smiles2 surfing"},{name:"surrender",replaceWith:":surrender:",className:"smiles2 surrender"},{name:"thinking",replaceWith:":thinking:",className:"smiles2 thinking"},{name:"throw-up",replaceWith:":throw-up:",className:"smiles2 throw-up"},{name:"thumb-down",replaceWith:":thumb-down:",className:"smiles2 thumb-down"},{name:"thumb-up",replaceWith:":thumb-up:",className:"smiles2 thumb-up"},{name:"tip-fedora",replaceWith:":tip-fedora:",className:"smiles2 tip-fedora"},{name:"trans",replaceWith:":trans:",className:"smiles2 trans"},{name:"trump",replaceWith:":trump:",className:"smiles2 trump"},{name:"wave",replaceWith:":wave:",className:"smiles2 wave"},{name:"yelling-bird",replaceWith:":yelling-bird:",className:"smiles2 yelling-bird"},{name:"zukeene",replaceWith:":zukeene:",className:"smiles2 zukeene"}]},{separator:"---------------"},{name:"Insert YouTube Video",className:"youtube",replaceWith:function(e){var a=prompt("Enter YouTube URL","http://");if(a.indexOf("watch?")==-1&&a.indexOf("watch#")!=-1){a=a.replace("watch#","watch?")}var s=document.createElement("a");s.href=a;var l="";switch(s.hostname){case"youtu.be":{l=s.pathname.replace("/","");break}case"youtube.com":case"www.youtube.com":{var i=s.search.replace("?","").split("&");for(var m=0;m<i.length;m++){if(i[m].substr(0,2)=="v="){l=i[m].substr(2)}}break}}if(l!=""){$.markItUp({replaceWith:'[youtube movie="'+l+'"]'})}return false}},{separator:"---------------"},{name:"Make a *roll*",className:"rolls",dropMenu:rollDataTypes},{separator:"---------------"},{name:"Hide selected text",className:"spoiler",openWith:"[spoiler] ",closeWith:" [/spoiler]"},{name:"Code / Formatted Text",className:"code",openWith:"[code]",closeWith:" [code]"}]};
var copyright={redirectToCopyrightForm:function(){var e=encodeURIComponent("Content link:\n"+document.location.href);var n=encodeURIComponent(document.location.href);document.location.href="/copyright?message="+e+"&link="+n+"&link_fixed=1"},init:function(){$(document).ready(function(){$('a[href$="/copyright/"]').click(function(e){copyright.redirectToCopyrightForm();e.preventDefault();e.stopPropagation();return false})})}};var abuse={redirectToAbuseForm:function(){var e=encodeURIComponent("Content link:\n"+document.location.href);var n=encodeURIComponent(document.location.href);document.location.href="/abuse?message="+e+"&link="+n+"&link_fixed=1"},init:function(){$(document).ready(function(){$('a[href$="/abuse/"]').click(function(e){abuse.redirectToAbuseForm();e.preventDefault();e.stopPropagation();return false})})}};
var thumbs={};var thumbsHistory={page:1,sortBy:"time",sortDirection:"asc",where:"",id:"",show:function(t,i,s){if(i==undefined){return}this.where=t;this.id=i;if(!s){s=1}this.page=1;this.tmbhistoryContainer()},tmbhistoryContainer:function(t,i,s){$("#tmbhistoryContainer").remove();var o="tmbhistoryContainer";var r=$('<div id="'+o+'">');r.append('<div id="pCnt"></div>');var e=null;if(IS_ADMIN){e={Close:function(){$(this).dialog("close")},"Ban all voters":function(){admintools.banAllVoters(thumbsHistory.where,thumbsHistory.id);$(this).dialog("close")}}}else{e={Close:function(){$(this).dialog("close")}}}r.dialog({width:785,maxWidth:785,minWidth:785,height:400,minHeight:400,maxHeight:800,title:"Who Voted?",resizable:true,close:function(){$(this).remove()},buttons:e});this.historyLoadInternal()},historyLoadInternal:function(){var t="/base_thumb/showThumbHistory/"+this.where+"/"+this.id+"/"+this.page+"/"+this.sortBy+"/"+this.sortDirection;$.ajax({type:"get",url:t,success:function(t){$("#tmbhistoryContainer").removeClass("newPopW8");$("#tmbhistoryContainer").html(t);$("#thumbHistoryHeader a").removeClass("activeSort");$("#thumbHistoryHeader a .dirSpan").remove();var i=$("#thumbhistory_"+thumbsHistory.sortBy);i.addClass("activeSort");var s='<span class="dirSpan"> ( ';if(thumbsHistory.sortDirection=="asc"){s+="&darr;"}else{s+="&uarr;"}s+=" )</span>";i.append(s)},error:function(){f.e("Request failed")}})},historyLoad:function(t){if(!t){t=1}this.page=t;$("#tmbhistoryContainer").addClass("newPopW8");this.historyLoadInternal()},changeSorting:function(t){var i=$("#thumbhistory_"+t);if(i.length==0){return}if(t!=this.sortBy){this.sortBy=t;this.sortDirection="asc"}else{this.sortDirection=this.sortDirection=="asc"?"desc":"asc"}this.page=1;this.historyLoadInternal()}};
var cl={locked:false,openLists:[],updateSortable:function(e){cl.openLists.forEach(function(t){cl.sortNum(e,t)})},searchAndAdd:function(){cl.searchAndAddname=$("#searchAndAdd").val();cl.searchAndAddlistId=$("#searchAndAdd").attr("data-id");if(cl.searchAndAddname==""||cl.searchAndAddlistId=="")return false;var e=$("#clTextInsert").prop("checked");if(e===true){getText=mentionLists.insertInCommentReply(parseInt(cl.searchAndAddlistId),false,2,true)}else{cl.searchAndAddPost("")}},searchAndAddPost:function(e){$.ajax({url:"/collections/searchAndAdd",type:"POST",dataType:"json",data:{data:{search:cl.searchAndAddname,user_id:FJUserId,text:e,list_id:parseInt(cl.searchAndAddlistId)}},success:function(e){if(typeof e.successmessage!="undefined"){f.s(e.successmessage);cl.remove(listId)}else{f.s(e.errormessage)}}})},makeSortable:function(e,t){$(".clSort").sortable({update:function(){cl.updateSortable(e)},connectWith:".clSort",helper:"clone",appendTo:"body",zIndex:1e4,delay:100}).disableSelection().show()},remove:function(e){var t=cl.openLists.indexOf(e);if(t!==-1)cl.openLists.splice(t,1)},manageList:function(e,t,n,s){cl["rebuildStart"+t]=true;cl.commentBoxIsOpen=$("#commentReplyForm").length>0;if(s===true){cl.contentBoxIsOpen=true}else{cl.contentBoxIsOpen=false}var a={data:{user_id:e,listId:t,owner:n}};if(n===true){var l="/collections/manageList"}else{var l="/collections/viewList"}$.ajax({url:l,type:"POST",dataType:"json",data:a,success:function(s){if(typeof s.html!=="undefined"){cl.remove(t);cl.openLists.push(t);cl.openList(e,t,1,s,n)}}})},buildlists:function(e,t,n,s,a){perpage=cl.getPerPage();cl["page"+s]=t;$("#clManage"+s+" .clSort a").remove();var l=e,c=0,o=0,r=0,i="",d=false,u=false;cl["clnextarray"+s]=[];cl["clprevarray"+s]=[];l.forEach(function(e){o++;if(o<=t*perpage&&o>(t-1)*perpage){e.show=1;e.prev=0;e.next=0;i+=cl.makeHtml(e,n,s,a)}if(o>t*perpage){e.show=0;e.prev=0;e.next=1;r++;u=true;cl["clnextarray"+s].push(e)}if(o<=(t-1)*perpage){e.show=0;e.prev=1;e.next=0;c++;d=true;cl["clprevarray"+s].push(e)}});cl["allLists"+s]=l;$("#clManage"+s+" #clPrev").off().empty();$("#clManage"+s+" #clNext").off().empty();$("#clManage"+s+" #clCount").text("Total Links("+o+")");cl.clistId=s;$("#clManage"+s+" .clSort").append(i).promise().done(function(){$(".clSort").on("click","a",function(){if(!enableAjaxLoading||document.middleClick===true)return true;$.cookie("section","_list__"+cl.clistId+"__list_",{expires:1,path:"/"})});content.setClickHandlers.collections()});if(a===true){cl.makeSortable(n,s)}else{$("#clManage"+s+" .clSort").show()}if(u){$("#clManage"+s+" #clNext").html('<span style="text-decoration: underline;">Next</span> (<span style="font-weight: 400">'+r+"</span>)").on("click",function(){cl.buildlists(cl["allLists"+s],t+1,n,s,a)})}if(d){$("#clManage"+s+" #clPrev").html('<span style="text-decoration: underline;">Prev</span> (<span style="font-weight: 400">'+c+"</span>)").on("click",function(){cl.buildlists(cl["allLists"+s],t-1,n,s,a)})}cl["rebuild"+s]=function(){if($("#clManage"+s).length>0)cl.buildlists(cl["allLists"+s],t,n,s,a)};if(cl["rebuildStart"+s]){$(window).on("resize",function(e){clearInterval(window["clrebuild"+s]);window["clrebuild"+s]=setTimeout(function(){cl["rebuild"+s]();cl["rebuildStart"+s]=false},100)})}},openList:function(e,t,n,s,a){$("body").append(s.html);cl.buildlists(s.lists,n,e,t,a);var l=$("#clManage"+t+"");var c=l.css("background-color");var o=(cl.openLists.length-1)*.5;l.css("background-color",cl.lum(c,o));var r=$("#clManage"+t+" .cLLinkDrag");setTimeout(function(){l.css("opacity","1");l.draggable({handle:".mentionCSS5",delay:100})},50);var i=$(window).scrollTop()+75;l.css({top:i+"px"}).topz().on("mousedown",function(){$(this).topz()});setTimeout(function(){l.find("input").eq(0).focus()}.bind(l),200);l.find("input[name=listName]").bind("keypress",function(e){var n=e.keyCode?e.keyCode:e.which;if(n==13){e.preventDefault();$("#clManage"+t+"").find("#mlSButton").click()}});function d(e){var t=e.keyCode?e.keyCode:e.which;if(t==13){e.preventDefault();$("yourFormId").submit()}}if(a===true){r.on("ondragenter",function(e){e.preventDefault();e.stopPropagation()}).on("dragover",function(e){e.preventDefault();e.stopPropagation()}).on("dragleave",function(e){r.css("cursor","");e.preventDefault();e.stopPropagation()}).on("drop",function(e){e.preventDefault();e.stopPropagation();var n=e.originalEvent.dataTransfer.getData("text");cl.pasteLink(t,n)})}},addListLink:function(e,t,n){if(cl.locked)return false;cl.locked=true;var s={data:{user_id:e,listId:t,url:n}};$.ajax({url:"/collections/addLink",type:"POST",dataType:"json",data:s,success:function(n){if(typeof n.successmessage!=="undefined"){var s=n.newitem;var a=false;cl["allLists"+t].some(function(e){if(parseInt(e.content_id)===parseInt(s.content_id)){a=true}});if(a){f.e("You cannot add duplicate links to collections.");cl.locked=false;return false}var l=cl.makeHtml(s,e,t,true);$("#clManage"+t+" .clSort").prepend(l);cl.makeSortable();cl.sortNum(e,t);f.s(n.successmessage);cl.locked=false}else{f.e(n.errormessage);cl.locked=false}}})},getCollections:function(e,t,n){cl.commentBoxIsOpen=$("#commentReplyForm").length>0;var s={data:{user_id:e,contentTextAreaID:n,type:t}};$.ajax({url:"/collections/listAll",type:"POST",dataType:"json",data:s,success:function(e){$("#clPop").remove();a(e);cl.colorThingy("#clPop")}});function a(e){window.collectionsListOpen=true;$("body").append(e.html);var t=$("#clPop");setTimeout(function(){t.css("opacity","1");t.draggable({handle:".mentionCSS5",delay:100})},50);var n=$(window).scrollTop()+75;t.css({top:n+"px"}).topz().on("mousedown",function(){$(this).topz()})}},submitNewList:function(e,t,n){if($("#clPop  input[name=listName]").val().length<1){$("#clPop  .mentionListStatus").show();$("#clPop  #mlStatus").text("Enter a name first!");f.e("Enter a name first!");return false}var s=$("#clPop  input[name=listName]").val(),a=$("#clPop  #mentionColorField").val(),l=$("#clPop  #mentionColorField2").val(),c=parseInt($("#clPop input[name='sfw']").prop("checked")?0:1);var o={data:{listName:s,user_id:e,color:a,text_color:l,isMatureList:c}};var r=$("#clPop #mlSButton");var i=r.attr("onclick");r.attr("onclick",null);r.css({background:"#000000"});this.contentTextareaID=n;$.ajax({url:"/collections/createList",type:"POST",dataType:"json",data:o,context:this,success:function(n){if(typeof n.successmessage!=="undefined"){n.insertId=n.id;if(typeof collections==="undefined"){collections={}}collections[n.insertId]=1;if(c===1){var a=" nsfwBg"}else{var a=""}var l='<span class="clLL '+a+'" onclick="cl.manageList(FJUserId, '+n.insertId+', true);">'+s+"</span> - ";if(t===2){var o='<span class="insertCl" onclick="mentionLists.insertInCommentReply('+n.insertId+", '"+this.contentTextareaID+"', 2); return false;\">Insert</span>"}else if(t===1){var o='<span class="insertCl" '+'onclick="mentionLists.insertInCommentReply('+n.insertId+', false, 2); return false;">'+"Insert</span>"}else{var o=""}var d='<span id="clItem'+n.insertId+'" data-name="'+s+'" class="clListitem">'+l+"<strong "+'class="mlDel" '+'onclick="cl.deleteList('+e+","+n.insertId+", '"+s+"'); return false;\" "+'style="cursor: pointer">Delete</strong> '+'<span class="clHard">(<a href="/collection/'+s+'">share link</a>)</span>'+o+'<span class="mlInfo">Subs: (0) Created: (just now)</span></span>';var u=$("#clPop");u.show();$(d).insertAfter("#clPop #mListings");$("#clPop .mentionListStatus").show();$("#clPop #mlStatus").text(n.successmessage);f.s(n.successmessage);$("#clPop input[name=listName]").val("");r.attr("onclick",i);r.css({background:""})}else if(typeof n.errormessage!=="undefined"){$("#clPop  .mentionListStatus").show();$("#clPop  #mlStatus").text(n.errormessage);f.e(n.errormessage);r.attr("onclick",i);r.css({background:""})}}})},isURL:function(e){var t=new RegExp("(?:[a-zA-Z]+.com/[0-9a-zA-Z+]+/[a-zA-Z-]+/([0-9]+)/?"+"|[a-zA-Z]+.com/(nsfw/channel|channel)/[a-zA-Z0-9+-]+/[a-zA-Z0-9+-]+/([a-zA-Z]+)/?"+"|[a-zA-Z]+.com/nsfw/([a-zA-Z]{1,10})/([0-9a-zA-Z+]+)/?)","i");return t.test(e)},sortNum:function(e,t){perpage=cl.getPerPage();var n=[];var s=cl.page>1?(cl.page-1)*perpage:0;$("#clManage"+t+" .clSort a").each(function(){s++;$(this).find(".mlNum").text("#"+s);var e=$(this).attr("data-contentid");var t=$(this).attr("href");var a=$(this).find("img").attr("src");var l=$(this).find(".mlItemTitle").text();var c=s;var o={content_id:e,url:t,smallThumb:a,ordering:c,title:l,show:1,prev:0,next:0};n.push(o)});var a=$("#clManage"+t+" #subLinks");a.text("Submit & Save");cl["allLists"+t]=cl["clprevarray"+t].concat(n,cl["clnextarray"+t]);cl.buildlists(cl["allLists"+t],cl["page"+t],e,t,true)},submitAll:function(e,t){var n=$("#clManage"+t+" #subLinks");n.text("Submitting...");var s=n.attr("onclick");n.attr("onclick","");var a=cl["allLists"+t];var l=[];a.forEach(function(e){l.push(e.content_id)});var c={data:{user_id:e,listId:t,fullList:l}};$.ajax({url:"/collections/submitAll",type:"POST",dataType:"json",data:c,success:function(e){if(typeof e.successmessage!=="undefined"){n.attr("onclick",s);n.text("Saved!");f.s(e.successmessage);$("#clItem"+t+" .urlCount").text(cl["allLists"+t].length);$(".clCom[data-clid="+t+"] .urlCount").text(cl["allLists"+t].length)}}})},lum:function(e,t){function n(e){e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}return"#"+t(e[1])+t(e[2])+t(e[3])}e=n(e);e=String(e).replace(/[^0-9a-f]/gi,"");if(e.length<6){e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}t=t||0;var s="#",a,l;for(l=0;l<3;l++){a=parseInt(e.substr(l*2,2),16);a=Math.round(Math.min(Math.max(0,a+a*t),255)).toString(16);s+=("00"+a).substr(a.length)}return s},deleteList:function(e,t,n){dialog.confirmed=null;var s=dialog.confirm("ARE YOU KIDDING ME!?",'Delete this list forever?<BR><BR><span style="color:#eb0000">'+"(Note: Can't be undone!)</span>",function(){a(e,t,n)},true,"Yes","No");return false;function a(e,t,n){if(dialog.confirmed===false)return false;var s={data:{id:t,user_id:e,name:n}};$.ajax({url:"/collections/deleteList",type:"POST",dataType:"json",data:s,success:function(e){console.log("1cl");if(typeof e.successmessage!=="undefined"){console.log("2cl");if(typeof owned!=="undefined"&&typeof owned[t]!=="undefined"){delete owned[t];console.log("3cl")}$("#clPop #mlStatus").text(e.successmessage);console.log("4cl");f.s(e.successmessage);$("#clItem"+t+"").remove();console.log("5cl")}else if(typeof e.errormessage!==undefined){$("#clPop #mlStatus").text(e.errormessage);f.e(e.errormessage)}}})}},makeHtml:function(e,t,n,s){ownerDelete=s===true?'<div class="deleteClItem" '+'onclick="cl.deleteLinkItem'+"(this, "+t+", "+n+'); return false;">X</div>':"";return'<a class="clSortA" data-contentid="'+e.content_id+'" href="'+e.url+'">'+'<div class="dragClThingy" style="display:inline-block">'+'<img src="'+e.smallThumb+'">'+'<div class="mlNum">#'+e.ordering+"</div>"+'<div class="mlItemTitle">'+e.title.substring(0,50)+"</div></div>"+ownerDelete+"</a>"},deleteLinkItem:function(e,t,n){$(e).closest(".clSortA").remove();cl.sortNum(t,n);return false},colorThingy:function(e){$(".colorpicker").remove();$.cachedScript(CACHED_MEDIA_URL+"site/js/0900-colorpicker.js").done(function(t,n){function s(e,t){$(t).ColorPicker({color:$(e).val().replace("#",""),onShow:function(e){var t=$(e);$(e).fadeIn(500);return false},onSubmit:function(e,t,n,s){$(s).prev("input").val(("#"+t).toUpperCase());$(s).ColorPickerHide()},onChange:function(t,n,s){$(e).val(("#"+n).toUpperCase()).css({backgroundColor:"#"+n})}})}var a=$(e+" #mentionColorField");a.css({backgroundColor:a.attr("value")});var l=$(e+" #mentionColorField2");l.css({backgroundColor:l.attr("value")});s(a,$(e+" #mentionColorButton"));s(l,$(e+" #mentionColorButton2"))})},pasteLink:function(e,t){if(!t)var t=$("#clManage"+e+" input[name=listName]").val();if(cl.isURL(t)===true){cl.addListLink(FJUserId,e,t)}else{f.e("This is not a valid content link.")}},getPerPage:function(){var e=parseInt($(window).height());var t=parseInt($(window).width());var n=0;if(isMobile||t<=800){switch(true){case e>1200:n=15;break;case e>1e3:n=12;break;case e>800:n=8;break;case e>500:n=5;break;default:n=3;break}}else{switch(true){case e>1200:n=25;break;case e>1e3:n=20;break;case e>800:n=15;break;case e>500:n=10;break;default:n=3;break}}return n;return 10}};
var ocr={showFullText:function(){$(".contentOcrWrapper").removeClass("contentOcrWrapperHover").css("cursor","auto").attr("title","");$(".contentOcrDesc").css("height","auto");$(".contentOcrDescDots").hide()},showRecognizedText:function(e,t){dialog.confirmWithCallback(siteTitle,t?"Are you sure to show extracted text to all users ?":"Are you sure to hide extracted text from all users ?",function(){$.ajax({type:"POST",url:"/ajax/showRecognizedText/"+e+"/"+t,success:function(e){var t=e.split("|");if(t[0]=="OK"){document.location.reload()}else{dialog.alert(e)}},error:function(){dialog.alert("Could not change visibility of extracted text")}})});return false}};
var leftCol={separator:null,separatorprev_height:-null,cntLeft:null,separatorcnt:null,separatorwindowWidth:null,separatorPosition:null,separatorBtn:null,separatortopHeaderHasClass:null,separatoradditionalHeight:null,separatormobHeight:null,separatorBtn:null,count:0,init:function(){this.separatorBtn=$("#columnLeftSeparator .m-inner");this.separator=$("#columnLeftSeparator");this.separatorprev_height=-1,this.cntLeft=$("#contentLeft"),this.separatorcnt=$("#content"),this.separatorwindowWidth=$(window).width(),this.separatorPosition=this.separator.position(),this.separatorBtn=$("#columnLeftSeparator .m-inner"),this.separatortopHeaderHasClass=$("#topUserbar").hasClass("non-logged"),this.separatoradditionalHeight=!this.separatortopHeaderHasClass?$("#topUserbar").height():0,this.separatormobHeight=null},scrollCheck:function(){$(window).on("scroll",function(){clearTimeout(window.mInnerCheck);window.mInnerCheck=setTimeout(leftCol.scrollCheck2.bind(this),100)}.bind(this))},scrollCheck2:function(){leftCol.count++;if(leftCol.count>1){leftCol.count=0;leftCol.init()}mInnerLeft=this.cntLeft.is(":visible")?this.cntLeft.width():0;mInnerLeft+=this.separator.css("width")!="0px"?this.separator.width()-1:this.cntLeft.is(":visible")?8:0;if(!this.separatorBtn.length)return false;mobHeight=isMobile?$(window).height()*.25:0;var t=$(window).scrollTop();var e=this.cntLeft.height();var o=this.cntLeft.offset().top;if(t>=this.separator.offset().top&&!isMobile){if(userLogged===false){this.separatorBtn.addClass("fixed").css("top",2)}else{this.separatorBtn.addClass("fixed").css("top",$("#topUserbar").height()+2)}}else if(!isMobile){this.separatorBtn.removeClass("fixed")}if(t+mobHeight>=e+o){this.separatorBtn.css("left",0)}else if(t+mobHeight<=e+o){this.separatorBtn.css("left",mInnerLeft)}}};leftCol.init();setTimeout(leftCol.scrollCheck(),1e3);var hideLeftColAction=function(){separator=$("#columnLeftSeparator");if(!separator.hasClass("collapsed")){separator.attr("class","collapsed").attr("title","Click to expand").find(".inner").text("Click to expand");$("#contentLeft").attr("class","collapsed");$("#contentRight").attr("class","collapsed");$("#content").attr("class","collapsed");leftCol.separatorBtn.css("left",0);$.cookie("lcc",1,{path:"/",expires:365})}else{separator.attr("class","expanded").attr("title","Click to minimize").find(".inner").text("");$("#contentLeft").attr("class","expanded").addClass("expanded");$("#content").attr("class","expanded").addClass("expanded");$("#contentRight").attr("class","expanded").addClass("expanded");$.cookie("lcc",2,{path:"/"});leftCol.separatorBtn.css("left",leftCol.cntLeft.width());window.scrollTo(500,separator.offset().top);$("#bottomNav").hide()}setTimeout(function(){mFB.colCheck()},100)};function showMobileLeftColImages(){if(isMobile&&!window.mobileLeftCol){$("#contentLeft img").each(function(){$(this).attr("src",$(this).attr("data-src"));window.mobileLeftCol=true})}}function doLeftCol(){showMobileLeftColImages();sBar.barShown=false;if(!$("#contentLeft").is(":visible")){if(!$("#contentLeft").hasClass("collapsed")){hideLeftColAction()}}hideLeftColAction()}function isScrolledIntoView(t){var e=$(t);var o=$(window);var s=o.scrollTop();var a=s+o.height();var i=e.offset().top;var r=i+e.height();return r<=a&&i>=s}

function inner_cdn_switch_img(n){if(n.which==1){return}var e=$(this);var i=e.attr("data-noncachedsrc");if(i){e.attr("src",i)}e.off(n)}function inner_cdn_switch_video(n){if(n.which==1){return}var e=$(this);var i=e.attr("data-noncachedsrc");if(i){var t=e.find("source");t.attr("src",i);var a=e[0].paused;if(!a){e[0].pause()}var d=e[0].currentTime;if(!a){e.attr("preload","auto")}e.one("loadedmetadata",function(){e[0].currentTime=d;if(!a){e[0].play()}e.data("switched",true)});e.trigger("load")}e.off(n)}function inner_cdn_disable_context_menu(n){var e=$(this);if(!e.data("switched")){n.preventDefault()}e.off(n)}function comments_initCdnSwitch(n){if(showCommentImages===false)return false;if(typeof n==="undefined"){setTimeout(function(){$("#ajax_comm .cdn_switchable_img:not(.boxed2)").addClass("boxed2").mousedown(inner_cdn_switch_img);$("#ajax_comm .cdn_switchable_video:not(.boxed2)").addClass("boxed2").mousedown(inner_cdn_switch_video)},500)}else{setTimeout(function(){$(n).find(".cdn_switchable_img").mousedown(inner_cdn_switch_img);$(n).find(".cdn_switchable_video").mousedown(inner_cdn_switch_video)},500)}}
var getSound={leftchannel:[],rightchannel:[],recorder:null,recording:null,recordingStarted:false,recordingLength:0,micInit:false,volume:null,audioInput:null,sampleRate:null,audioContext:null,context:null,outputElement:{},outputString:"",hi:"working",start:function(){this.recording=false;if(this.recordingStarted){return}this.recordingStarted=true;if(this.recorder!=null)this.recorder.onaudioprocess=null;this.leftchannel.length=this.rightchannel.length=0;this.recordingLength=0;navigator.getUserMedia=null;if(!navigator.getUserMedia)navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(navigator.getUserMedia){navigator.getUserMedia({audio:true},this.success.bind(this),function(e){alert("Error capturing audio.")})}else alert("getUserMedia not supported in this browser.")},stop:function(callBack){if(typeof localstream!=="undefined"){if(typeof localstream.stop!=="undefined"){if(typeof localstream.stop=="function")localstream.stop()}}this.sampleRate=this.context.sampleRate;$(".commentsReply #soundStatus").replaceWith(""+'<div id="soundStatus" style="display: inline-block;">Uploading recording...</A>');this.recording=false;this.recordingStarted=false;this.recorder.onaudioprocess=null;var leftBuffer=this.mergeBuffers(this.leftchannel,this.recordingLength);var rightBuffer=this.mergeBuffers(this.rightchannel,this.recordingLength);var interleaved=this.interleave(leftBuffer,rightBuffer);var buffer=new ArrayBuffer(44+interleaved.length*2);var view=new DataView(buffer);this.writeUTFBytes(view,0,"RIFF");view.setUint32(4,44+interleaved.length*2,true);this.writeUTFBytes(view,8,"WAVE");this.writeUTFBytes(view,12,"fmt ");view.setUint32(16,16,true);view.setUint16(20,1,true);view.setUint16(22,2,true);view.setUint32(24,this.sampleRate,true);view.setUint32(28,this.sampleRate*4,true);view.setUint16(32,4,true);view.setUint16(34,16,true);this.writeUTFBytes(view,36,"data");view.setUint32(40,interleaved.length*2,true);var lng=interleaved.length;var index=44;this.volume=1;for(var i=0;i<lng;i++){view.setInt16(index,interleaved[i]*(32767*this.volume),true);index+=2}var blob=new Blob([view],{type:"audio/wav"},{name:"blahblah.wav"},{filename:"blahblah.wav"});var xhr=new XMLHttpRequest;xhr.open("POST",document.location.protocol+"//"+SITE_UPLOAD_URL+"/ajax/upload?typeId=0",true);xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.setRequestHeader("X-File-Name",encodeURIComponent("stupidaudio.wav"));var formData=new FormData;formData.append("qqfile",blob,"voice.wav");file=formData;xhr.send(file);xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status==200&&xhr.status<300)response=eval("("+xhr.responseText+")");if(response.error){$(".commentsReply #soundStatus").replaceWith(""+'<span id="soundStatus">Error: '+response.error+"</span>");$(".commentsReply #soundTime").remove();return false}if(response.success===true){this.recordingStarted=false;navigator.getUserMedia=null;$(".commentsReply #soundStatus").replaceWith(""+'<a href="#!" id="soundStatus" onclick="getSound.start();">Recording successfully uploaded. Click to record again!</span>');$(".commentsReply #soundStatus2").html("Good job! Soon we can all hear your beautiful voice!");$(".commentsReply #soundTime").remove();var fields='<input type="hidden" name="real_type_id" value="'+response.real_type_id+'">'+'<input type="hidden" name="ihash" value="'+response.ihash+'">'+'<input type="hidden" name="screen_name" value="'+response.tempFile+'">';var preview='<div class="image_preview"><video width="320" height="240" controls preload="auto" '+'><source src="'+response.fileUrl+'"'+'type="video/mp4">Your browser does not support the video tag.</video></div>';$(".qq-uploader").after(fields);$(".image_preview ").replaceWith(preview);this.leftchannel=[],this.rightchannel=[],this.recorder=null,this.recording=!1,this.recordingLength=0,this.volume=null,this.audioInput=null,this.sampleRate=44100,this.audioContext=null,this.context=null,this.outputElement={},this.outputString=""}}}.bind(this)},interleave:function(e,t){var r=e.length+t.length;var i=new Float32Array(r);var n=0;for(var a=0;a<r;){i[a++]=e[n];i[a++]=t[n];n++}return i},mergeBuffers:function(e,t){var r=new Float32Array(t);var i=0;var n=e.length;for(var a=0;a<n;a++){var o=e[a];r.set(o,i);i+=o.length}return r},writeUTFBytes:function(e,t,r){var i=r.length;for(var n=0;n<i;n++){e.setUint8(t+n,r.charCodeAt(n))}},success:function(e){localstream=e;this.recording=true;this.audioContext=null;$(".commentsReply #soundStatus2").remove();$(".commentsReply #soundStatus").replaceWith(""+'<a href="#!" id="soundStatus" onclick="setTimeout(function(){getSound.stop();}, 1000);">Stop recording and upload.</a>'+'<span id="soundStatus2">Max voice record duration 90 seconds.</span>');this.audioContext=AudioContext||webkitAudioContext;this.context=new this.audioContext;this.volume=this.context.createGain();this.audioInput=this.context.createMediaStreamSource(e);this.audioInput.connect(this.volume);var t=16384;this.recorder=this.context.createScriptProcessor(t,2,2);var r=new Date;var i=0;this.recorder.onaudioprocess=null;var n=this;this.recorder.onaudioprocess=function(e){if(!n.recording)return;var a=new Date;var o=a-r;var s=e.inputBuffer.getChannelData(1);n.rightchannel.push(new Float32Array(s));n.leftchannel=n.rightchannel;n.recordingLength+=t;if(a-i>1e3){i=new Date;$(".commentsReply #soundTime").html(n.timecode(o))}if(o>9e4){$(".commentsReply #soundTime").html(n.timecode(o));$(".commentsReply #soundStatus2").html("Max duration hit. Uploading recording.");n.stop()}};this.volume.connect(this.recorder);this.recorder.connect(this.context.destination)},timecode:function(e){var t={h:Math.floor(e/(60*60*1e3)),m:Math.floor(e/6e4%60),s:Math.floor(e/1e3%60)};var r=[];if(t.h>0){r.push(t.h)}r.push(t.m<10&&t.h>0?"0"+t.m:t.m);r.push(t.s<10?"0"+t.s:t.s);return r.join(":")}};
listsInit={clInitLists:function(){$(".clCom").each(function(){var n=parseInt($(this).attr("data-clid"));var t=parseInt($(this).attr("data-uid"));var e=$(this).attr("data-name");if(typeof n!=="undefined"&&n!==null&&typeof t!=="undefined"&&t!==null&&typeof e!=="undefined"&&e!==null){if(parseInt(FJUserId)===t&&typeof clOwned!=="undefined"&&typeof clOwned[n]!=="undefined"&&clOwned[n]!==null){$(this).find(".clN, .clC").off("click").on("click",function(){cl.manageList(FJUserId,n,true);return false}).parent().find(".clC").html("Manage List"+' (<span class="urlCount">'+clOwned[n].total_urls+"</span> urls)").css({cursor:"pointer"})}else{listsInit.clNotOwner(this)}}})},clNotOwner:function(n){$(n).find(".clN, .clC").off("click").on("click",function(){var t=parseInt($(n).attr("data-clid"));var e=$(n).attr("data-name");if(isMobile){content.loadContent('<a href="/collection/'+e+'"></a>');return false}cl.manageList(null,t,false);return false});return true},mlInitLists:function(){if(userLogged===false){$(".mlCom").each(function(){$(this).css({cursor:"pointer"}).off("click").on("click",function(){users.showLoginForm(window.location)}).find(".mlC").text(" join list:")});return true}$(".mlCom").each(function(){var n=parseInt($(this).attr("data-mlid"));var t=parseInt($(this).attr("data-uid"));var e=$(this).attr("data-name");if(typeof n!=="undefined"&&n!==null&&typeof t!=="undefined"&&t!==null&&typeof e!=="undefined"&&e!==null){if(userLogged!==false){if(parseInt(FJUserId)===t&&typeof owned!=="undefined"&&typeof owned[n]!=="undefined"&&owned[n]!==null){$(this).find(".mlC").off("click").on("click",function(){mentionLists.triggerPopup(this,1,FJUserId,n)}).text("Trigger List").css({cursor:"pointer"});var i=owned[n].join_count==1?"sub":"subs";$(this).find(".mlN").text(" "+e+" ("+owned[n].join_count+" "+i+")").parent().find(".mlN2").eq(0).html("Mention Clicks: <span>"+owned[n].total_clicks+"</span>").parent().find(".mlN2").eq(1).html("Msgs Sent: <span>"+owned[n].total_sent+"</span>")}else{window.mlIdArray=[];mlIdArray.push(n);if(typeof joinedLists==="undefined"||joinedLists.indexOf(mlIdArray[0])==-1){$(this).find(".mlC").css({cursor:"pointer"}).off("click").on("click",function(){mentionLists.joinList(FJUserId,n)}).text(" join list:")}else{$(this).find(".mlC").css({cursor:"pointer"}).off("click").on("click",function(){mentionLists.leaveList(FJUserId,n)}).text(" leave list")}}}}})}};
var onlineCheck={init:function(){this.lastChecked=true,this.ajaxUrl=null,this.lastCheck=Math.floor(Date.now()/1e3)},check:function(){if(userLogged){clearInterval(window.chatTimeout);window.chatTimeout=setTimeout(function(){if(typeof fjChat!=="undefined"&&fjChat.isConnect()){fjChat.disconnect();console.log("idle 2- chat disconnected")}},18e5);if(typeof fjChat!=="undefined"&&!fjChat.isConnect()){global_chat_connect()}if(!this.lastChecked)this.init();var e=Math.floor(Date.now()/1e3);if(e-this.lastCheck>10){this.fire();this.lastCheck=Math.floor(Date.now()/1e3)}}},fire:function(){$.ajax({type:"post",dataType:"json",url:"/userbar/updateOnline"})}};var mouseX,mouseY,onlineCheckCount=0;$(document).on("mousemove",function(e){mouseX=e.pageX;mouseY=e.pageY;if(!isMobile){onlineCheckCount++;if(onlineCheckCount>100){onlineCheck.check();onlineCheckCount=0}}});if(!isMobile){$(document).on("click",function(e){onlineCheck.check()})}if(isMobile){$(document).on("tapone taptwo swipemove swipemove",function(){onlineCheck.check()})}
function createChannel(){if(userLogged){chs.channelPop(1,10,"create")}else{return mustLogin(function(){chs.channelPop(1,10,"create")})}return false}
var pollz={winOpen:function(e){setTimeout(function(){var o=e.find(".mentionCSS5").length>0?".mentionCSS5":".mentionCSS7";e.css("opacity","1");e.draggable({handle:o,delay:100})},50)},vote:function(e){if($(e).closest(".pollBackground").find(".voteSelected").length<1)return false;var o=[];var l=1;$(e).closest(".pollBackground").find(".voteSelected").each(function(){o.push($(this).attr("data-poll-id"));l++});var t=$(e).closest(".pollBackground").attr("data-pollMain-id");$.ajax({url:"/pollz/pollzVote",type:"POST",dataType:"json",data:{voteArray:o,pollId:t,node_id:nze.node_id},success:function(o){if(o.successmessage){f.s(o.successmessage)}else{f.e(o.errormessage)}$(e).closest(".pollBackground").find(".pollQ").removeClass("voteSelected");pollz.getFreshResults(e)}})},new:function(e,o){obby={data:{user_id:e}};$.ajax({url:"/pollz/newPoll",type:"POST",dataType:"json",data:obby,success:function(l){if(l.errormessage){f.e(l.errormessage)}else mD=pollz.makeHtml(l,"Create");mD.find("#qSubmitButton").on("click",function(){pollz.submitNew(e,this,o)})}})},makeHtml:function(e,o){console.log(e);var l="pollz"+o;$("#"+l).remove();$("body").append('<div id="'+l+'" class="chanListPop pollzStyle">'+e.html+"</div>");var t=$("#"+l);pollz.winOpen(t);var n=$(window).scrollTop()+75;t.css({top:n+"px"});var a=t.css("background-color");var s=$(".chanListPop").length;if(s>1){t.css("background-color",cl.lum(a,(s+.4)*.2))}t.topz().on("mousedown",function(){$(this).topz()});setTimeout(function(){t.find("input").eq(0).focus()}.bind(t),200);return t},makeHtml2:function(e,o){var l="pollz"+o;$("#"+l).remove();$("body").append('<div id="'+l+'" class="chanListPop pollzStyle">'+e.html+"</div>");var t=$("#"+l);pollz.winOpen(t);var n=$(window).scrollTop()+75;t.css({top:n+"px"});var a=t.css("background-color");var s=$(".chanListPop").length;if(s>1){t.css("background-color",cl.lum(a,(s+.4)*.2))}t.on("mousedown",function(){$(this).topz()}).topz();return t},submitNew:function(e,o,l){var t=$(o).parent("#pollzCreate");var n={user_id:e,poll_name:t.find('input[name="name"]').val(),poll_title:t.find('input[name="title"]').val(),poll_color_1:t.find('input[name="textcolor"]').eq(0).val(),poll_color_2:t.find('input[name="textcolor"]').eq(1).val(),poll_color_3:t.find('input[name="textcolor"]').eq(2).val(),poll_color_4:t.find('input[name="textcolor"]').eq(3).val(),poll_color_5:t.find('input[name="textcolor"]').eq(5).val(),poll_color_6:t.find('input[name="textcolor"]').eq(6).val(),poll_color_7:t.find('input[name="textcolor"]').eq(4).val(),questions:{},poll_option_1:t.find('input[name="anonsCanVote"]').prop("checked")===true?0:1,poll_option_2:t.find('input[name="usersCanVote"]').prop("checked")===true?0:1,poll_option_3:t.find('input[name="oneAnswer"]').prop("checked")===true?0:1};var a=1;var s=false;t.find(".questionInput").each(function(){var e=$(this).val();if(typeof e==="undefined"||e==""){s="Question #"+a+" is empty! Remove it or fill it out."}n.questions["question_"+a]=e;a++});if(a<3){s="You need at least two questions!"}if(typeof n.poll_name==="undefined"||n.poll_name==""){s="Poll name is empty!"}if(typeof n.poll_title==="undefined"||n.poll_title==""){s="Poll title is empty!"}if(s){f.e(s);return false}var i={data:n};$.ajax({url:"/pollz/newPollSubmit",type:"POST",dataType:"json",data:i,success:function(o){if(o.errormessage){f.e(o.errormessage)}else if(o.successmessage){pollz.listPolls(e,l);t.remove();f.s(o.successmessage)}}})},listPolls:function(e,o){if(typeof o==="undefined"||!o)o=false;var l={data:{user_id:e,insertArea:o}};$.ajax({url:"/pollz/listPolls",type:"POST",data:l,dataType:"json",success:function(e){if(e.errormessage){f.e(e.errormessage)}else{mD=pollz.makeHtml(e,"List")}}})},getFreshResults:function(e){var o=parseInt($(e).closest(".pollBackground").attr("data-pollMain-id"));var l={pollId:o};$.ajax({url:"/pollz/getFreshPollResults",type:"POST",data:l,dataType:"json",success:function(o){var l=$(e).closest(".pollBackground");if(o.success){l.find(".voteNow,.pollR").remove();for(var t in o.polldata){if(o.polldata.hasOwnProperty(t)){var n=o.polldata[t];var a=100-parseInt(n.average_value)+"%";l.find('.pollQ[data-poll-id="'+n.id+'"]').find(".pollResult").remove();l.find('.pollQ[data-poll-id="'+n.id+'"]').off().css("margin","8px auto 0").append('<span class="pollResult"></span>').find(".pollResult").css("width",n.average_value).parent().after('<span class="resultInfo">'+"<strong>Anon:&nbsp;</strong>"+n.anon_votes_yes+"/"+n.total_anon_votes+"&nbsp;<strong>User: </strong>"+n.user_votes_yes+"/"+n.total_user_votes+"&nbsp;"+"<strong>Votes: </strong>"+n.total_yes+"/"+n.times_answered+" - <strong>"+n.average_value+"</strong></span>")}}}else{}}})},insert:function(e,o){if(o!="comment"){var l=$("#"+o);var t=l.val()!=""?l.val()+"\n":"";$("#"+o).val(t+"[poll "+e+"]");f.s('Poll "'+e+'" inserted into content textarea.')}else{var l=$("#commentReplyForm");var t=l.find("textarea").val()!=""?l.find("textarea").val()+"\n":"";l.find("textarea").val(t+"[poll "+e+"]");f.s('Poll "'+e+'" inserted into comment box.')}},deletePoll:function(e,o,l){var t={data:{user_id:e,pollId:o}};$.ajax({url:"/pollz/deletePoll",type:"POST",data:t,dataType:"json",success:function(e){if(e.errormessage){f.e(e.errormessage)}else{f.s(e.successmessage);$(l).closest(".mentionListitem").remove()}}})},commentPoll:function(e){var o={pollId:e};$.ajax({url:"/pollz/commentPoll",type:"POST",data:o,dataType:"json",success:function(e){if(e.html){mD=pollz.makeHtml(e,"Vote")}else{f.e("Poll not found. :( ")}}})}};
function changeYT(e){$.ajax({url:"/dj_controls/getQueue",type:"post",data:{contentId:contentId},dataType:"json",success:function(e){var t='<div style="margin-right:0;right:4px;top: 0px" class="bottomClose3" title="Click to close"></div><span class="mLTop"><span class="mentionCSS5">Change live youtube video</span></span>'+"<h2>Enter twitch or youtube URL:</h2>"+'<input type="text" style="width: 95%" maxlength="100" id="ytChangeVid">'+""+'<div style="text-align:center; margin: 15px 0 0 ;"><span id="submitYTLive" class="ytbutt">Play now</span>'+'<span id="addToQueue" class="ytbutt" style="background: #3a3a3a">Add to queue</span></div><div><h1>Current Queue:</h1></div><div style="text-align:left;">'+e.html+"</div>";pollz.makeHtml({html:t},"YTChange");$("#submitYTLive").on("click",checkYtChangeVideo);$("#addToQueue").on("click",checkYtChangeVideo.bind(this,true))},error:function(){}})}function delQ(e,t){$.ajax({url:"/dj_controls/removeVidFromQueue",type:"post",data:{qId:e,contentId:contentId},dataType:"json",success:function(e){if(e.success){f.s(e.message);$(t).parent().remove();var n=0;$(".qNum").each(function(){n++;$(this).text("#"+n)})}else{f.e(e.message)}},error:function(){}})}function checkYtChangeVideo(e){var t=$("#ytChangeVid").val();switch(t){case null:case false:case"":f.e("Enter a URL first!");return false;default:}if(e===true){var n={url:$("#ytChangeVid").val(),contentId:contentId,queue:true}}else{var n={url:$("#ytChangeVid").val(),contentId:contentId}}$("#submitYTLive").hide();f.e("Querying youtube and checking video for length and validity...");$.ajax({url:"/dj_controls/checkYTVideo",type:"post",data:n,dataType:"json",success:function(e){if(e.success){f.s(e.message);$("#pollzYTChange").remove()}else{f.s(e.message);$("#submitYTLive").show()}},error:function(){$("#submitYTLive").show()}})}function djElSetup(e,t){$("#djChoose").remove();$("#liveYT").append('<div id="djChoose" style="margin: 5px 0"><input type="text" id="dj'+e+'user" maxlength="100" class="txt" placeholder="username or profile URL" style="width: 250px"><span id="djCSubmit" class="contentControl">Submit</span><span class="contentControl" onclick="$(\'#djChoose\').remove()">Cancel</span></div>');$("#djChoose input").focus();$("#djCSubmit").on("click",djChange.bind(this,e,t))}function djChange(e,t){$("#djChoose").hide();$.ajax({url:"/dj_controls/djChange",type:"post",data:{type:e,username:$("#dj"+e+"user").val(),contentId:contentId},dataType:"json",success:function(t){if(t.success){f.s(t.message);$("#dj"+e).text("DJ #"+e+": "+t.djName);$("#djChoose").remove()}else{f.e(t.message);$("#djChoose").show()}},error:function(){$("#djChoose").show()}})}function makeLiveYT(e){if(!liveVideo)return false;var t="",n="",o;if(typeof e.start!=="undefined"&&parseInt(e.start)!==0){t="&start="+(parseInt(e.start)+2)}if(parseInt(e.start)===-1){var n=' <strong style="float:right; margin: 0 5px;">Live Stream</strong>'}if(e.type=="youtube"){o='<iframe src="https://www.youtube.com/embed/'+e.youtube+"?autoplay=1"+t+'" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>'}else if(e.type=="twitch"){o='<iframe src="https://player.twitch.tv/?channel='+e.youtube+'" frameborder="0" allowfullscreen="true" scrolling="no" height="100%" width="100%">'}if($("#pollzYTEmbed").length===0){var s='<div style="margin-right:0;right:4px;top: 0px" class="bottomClose3" title="Click to close"></div><span class="mLTop" style="padding: 12px 4px 0 4px;"><span class="mentionCSS5 ytTitle">'+e.title+"</span></span>"+'<div id="liveCont">'+o+"</div>"+'<div id="byV">Played by: <strong>'+e.username+"</strong>"+n+"</div>";pollz.makeHtml({html:s},"YTEmbed");if(!isMobile){var i="height: 350px;width: 400px"}else{var i="height: 250px;width: 300px"}$("#pollzYTEmbed").attr("style",i+";z-index: 100;padding: 2px 2px;overflow:hidden;position: fixed; left: inherit !important; top: 41px;right: 10px !important").resizable({start:function(e,t){$("#liveCont").hide()},stop:function(e,t){$("#liveCont").show()}}).bind("destroyed",function(){setTimeout(function(){if(liveVideo){f.s('You have only closed this video. To prevent more live videos from playing, toggle the "LIVE VIDEO" button at top.')}},2e3)})}else{$("#liveCont").html(o);$(".ytTitle").text(e.title);$("#byV").html("Played by: <strong>"+e.username+"</strong>")}$("#currPlaying").parent().show().end().find("a").attr("href","https://youtu.be/"+e.youtube).text(e.title)}function liveVideoCheck(){$.ajax({url:"/dj_controls/checkYT",type:"post",data:{contentId:contentId},dataType:"json",success:function(e){if(typeof e.youtube!=="undefined"){yt={youtube:e.youtube,title:e.title,start:e.start,username:e.username,type:e.type};makeLiveYT(yt)}},error:function(){}})}function getVideoHistory(){$.ajax({url:"/dj_controls/getVideoHistory",type:"post",data:{contentId:contentId},dataType:"json",success:function(e){pollz.makeHtml2({html:e.html},"YTEmbed")},error:function(){}})}


$(document).ready(function(){listsInit.clInitLists();listsInit.mlInitLists()});window.disableShortcuts=false;onFJPageLoaded(function(){setTimeout(function(){comments.resized()},1e3);content.canRunAds();var e=function(e){return!(e.target.type=="textarea"||e.target.type=="text"||e.target.type=="password"||e.target.type=="embed"||e.target.type=="number"||e.target.type=="tel"||e.target.type=="application/x-shockwave-flash"||e.target.type=="email")};document.locationAlreadyChanged=false;var i=false;if(typeof isItemsBoard!="undefined"){$(document).on("mouseenter",".uName",function(e){if($(e.target).attr("data-user-id")){hoveredUsername=$(e.target).attr("data-username");i=$(e.target).attr("data-user-id")}});$(document).on("mouseleave",".uName",function(e){i=false})}$(document).keyup(function(t){window.midTimer=setTimeout(function(){document.ctrlDown=false;document.middleClick=false},200);if(typeof isItemsBoard!=="undefined"&&userLogged&&!window.disableShortcuts){if(t.which==84&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&e(t)&&i){items.tradeItems(i,hoveredUsername)}if(t.which==87&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&e(t)){items.combineItems()}if(t.which==81&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#frmPickUp").length){$("#frmPickUp").submit()}if((t.which==49||t.which==97)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&typeof isItemsBoard!="undefined"&&$("#activeItemsList ul li img:eq(0)").length&&e(t)){$("#activeItemsList ul li img:eq(0)").trigger("click")}if((t.which==50||t.which==98)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#activeItemsList ul li img:eq(1)").length&&e(t)){$("#activeItemsList ul li img:eq(1)").trigger("click")}if((t.which==51||t.which==99)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#activeItemsList ul li img:eq(2)").length&&e(t)){$("#activeItemsList ul li img:eq(2)").trigger("click")}if((t.which==52||t.which==100)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#activeItemsList ul li img:eq(3)").length&&e(t)){$("#activeItemsList ul li img:eq(3)").trigger("click")}if((t.which==53||t.which==101)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#activeItemsList ul li img:eq(4)").length&&e(t)){$("#activeItemsList ul li img:eq(4)").trigger("click")}if((t.which==54||t.which==102)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#activeItemsList ul li img:eq(5)").length&&e(t)){$("#activeItemsList ul li img:eq(5)").trigger("click")}if((t.which==55||t.which==103)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#activeItemsList ul li img:eq(6)").length&&e(t)){$("#activeItemsList ul li img:eq(6)").trigger("click")}if((t.which==56||t.which==104)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#activeItemsList ul li img:eq(7)").length&&e(t)){$("#activeItemsList ul li img:eq(7)").trigger("click")}if((t.which==57||t.which==105)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#activeItemsList ul li img:eq(8)").length&&e(t)){$("#activeItemsList ul li img:eq(8)").trigger("click")}if((t.which==48||t.which==96)&&!$(".ui-dialog").is(":visible")&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&$("#activeItemsList ul li img:eq(9)").length&&e(t)){$("#activeItemsList ul li img:eq(9)").trigger("click")}}if(document.disableArrows){document.disableArrows=false;return false}if((t.which==39||t.which==37)&&!window.disableShortcuts&&e(t)&&!document.locationAlreadyChanged){t.preventDefault();t.stopPropagation();if(t.which==37){if($("#cPrev_floating").length>0){$("#cPrev_floating")[0].click()}}else{if($("#cNext_floating").length>0){$("#cNext_floating")[0].click()}}document.locationAlreadyChanged=true;setTimeout("document.locationAlreadyChanged = false;",5e3)}});$(document).mousedown(function(e){if(e.which==2){clearTimeout(window.midTimer);document.middleClick=true}});$(document).mouseup(function(e){if(!document.ctrlDown){setTimeout(function(){document.middleClick=false},200)}});$(document).keydown(function(i){document.middleClick=false;if(i.which==17){clearTimeout(window.midTimer);document.middleClick=true;document.ctrlDown=true}if(e(i)&&!window.disableShortcuts){if(i.which==38&&(i.ctrlKey||i.shiftKey)&&$("#mediaContainer").length>0){$(".tUpBig").first().click();i.preventDefault()}else if(i.which==40&&(i.ctrlKey||i.shiftKey)&&$("#mediaContainer").length>0){$(".tDnBig").first().click();i.preventDefault()}else if(i.which==39&&$("#mediaContainer").length>0){if(i.shiftKey){$(".tUpBig,.tUpBig_i").first().find("i,b").filter(":visible").click();document.disableArrows=true;i.preventDefault()}else if(i.ctrlKey){$(".tDnBig,.tDnBig_i").first().find("i,b").filter(":visible").click();document.disableArrows=true;i.preventDefault()}}else if(i.which==82&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)&&$("#refreshCom").length){comments.loadPage(comments.currentPage,true);i.preventDefault()}else if(i.which==87&&$("#mediaContainer").length>0&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)&&typeof isItemsBoard==="undefined"){var t=$(window).scrollTop();var l=$(window).height()*.06;$(window).scrollTop(t-l);i.preventDefault()}else if(i.which==65&&$("#mediaContainer").length>0&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)){if($("#cPrev_floating").length>0){$("#cPrev_floating")[0].click();i.preventDefault()}}else if(i.which==83&&$("#mediaContainer").length>0&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)){var t=$(window).scrollTop();var l=$(window).height()*.06;$(window).scrollTop(t+l);i.preventDefault()}else if(i.which==68&&$("#mediaContainer").length>0&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)){if($("#cNext_floating").length>0){$("#cNext_floating")[0].click();i.preventDefault()}}else if(i.which==81&&FJUserName&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)){alerts.show();i.preventDefault()}else if(i.which==69&&FJUserName&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)){pmTab();i.preventDefault()}else if(i.which==49&&$("#mediaContainer").length>0&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)&&typeof isItemsBoard==="undefined"){$(".tDnBig,.tDnBig_i").first().find("i,b").filter(":visible").click();document.disableArrows=true;i.preventDefault()}else if(i.which==50&&$("#mediaContainer").length>0&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)&&typeof isItemsBoard==="undefined"){$(".tUpBig,.tUpBig_i").first().find("i,b").filter(":visible").click();document.disableArrows=true;i.preventDefault()}else if(i.which==67&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)){if($(".addCommentLink").length){comments.addComment();i.preventDefault()}else if(typeof isReplyPage!=="undefined"&&isReplyPage===1){f.e("Add comment doesn't work on reply pages. Use the reply link instead.");return false}}else if((i.which==73||i.which==107||i.which==187||i.which==61||i.which==192)&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)&&$("#itemAction").length&&loggedIn()){if(typeof isItemsBoard!="undefined"&&userLogged)items.getActiveItems(true);i.preventDefault()}}})});mFB={filterByEl:null,timedResize2:null,fWidth:null,colCheck:function(){var e=$(".cImg");var i=$("#contentRight");var t="minimized smallSB largeSB";var l=$("div.main");var a=$("html");if(l.length){var s=l.offset().left;if(s<50&&!a.hasClass("minimized")){e.attr("class","minimized cImg");a.removeClass(t).addClass("minimized");window.leftBar="minimized"}if(s>50&&s<300&&!a.hasClass("smallSB")){e.attr("class","smallSB cImg");a.removeClass(t).addClass("smallSB");window.leftBar="smallSB"}if(s>300&&!a.hasClass("largeSB")){e.attr("class","largeSB cImg");a.removeClass(t).addClass("largeSB");window.leftBar="largeSB"}}},listenerStart:function(){$(window).on("resize",function(e){clearTimeout(window.colCheckTimeout);window.colCheckTimeout=setTimeout(function(){mFB.colCheck();if(typeof alerts!=="undefined"&&alerts.isOpened){$("#alertContainer").css("left",$("#alertLi").offset().left-235)}},100)})}};mFB.listenerStart();mFB.colCheck();
onFJPageLoaded(initFJ);function initFJ(){if(/Android/.test(navigator.appVersion)){window.addEventListener("resize",function(){if(document.activeElement.tagName=="INPUT"||document.activeElement.tagName=="TEXTAREA"){document.activeElement.scrollIntoView()}})}window.stopConnecting=false;if(loggedIn()){try{if(typeof fjChat=="undefined"){fjChat=new Chat}window.chatStarted=false;global_chat_connect()}catch(e){}}$(window).focus(function(){stopConnecting=false;try{if(typeof fjChat!=="undefined"&&!fjChat.isConnect()){global_chat_connect()}}catch(e){}if(AutoCheckerID!==false){clearInterval(AutoCheckerID);console.log("autochecker now 5 sec");AutoCheckerID=setInterval(function(){autoChecker()},5e3)}}).blur(function(){clearInterval(window.chatTimeout);window.chatTimeout=setTimeout(function(){try{if(typeof fjChat!=="undefined"&&fjChat.isConnect()){fjChat.disconnect();window.chatStarted=false;console.log("idle - chat disconnected")}}catch(e){}},36e5);stopConnecting=true;if(AutoCheckerID!==false){clearInterval(AutoCheckerID);console.log("autochecker now 60 sec");AutoCheckerID=setInterval(function(){autoChecker()},6e4)}});synchronizeSession();if(typeof initialUserData!="undefined"){processUserDataJSON(initialUserData,null)}if(IS_FLAG_MODERATOR||IS_ADMIN){$.cachedScript(CACHED_MEDIA_URL+"site/js/admintools13.js").done(function(){console.log("admintools13.js loaded!");$("#catControls").find(".ctButton4").on("click",admintools.catBlock)})}if(IS_ADMIN){$.cachedScript(CACHED_MEDIA_URL+"site/js/admin2.js").done(function(){console.log("admin.js loaded!")})}setInterval(function(){if(FJUserName===null){if(FJUserName!==$.cookie("userName")&&$.cookie("userName")!==null){location.reload()}}},2e3);$("#tapContent").on("click",safeSpace);sBar.init();paginationArrowsPositions();content_initVideos();hoverMyButtons();hoverPlayVideos();commYoutube();page_initLazyImages();vExpand.videoExpand();comments.loadSettings();comments_initCdnSwitch();comments_initLazyImages();comments.initImagesOnMouseHover();comments.initSpoiler($("#ajax_comm"));addToggleRepliesKeyCode();makeDelayedImagesWork();comments_initReply();comments.initMultiReplies();$(document).on("click",".cF1",function(){var e=$(this).attr("class"),t=e.substr(4,e.length);window.open("https://en.wikipedia.org/wiki/ISO_3166-2:"+t.toUpperCase())});$("#newThreads, #newReplies").on("click",function(){$(window).scrollTop($("#ajax_comm").offset().top-110)});classComExpCommentsPlusThingy();refreshCollapsibleComments($("#ajax_comm"));$("body").on("click",".commentsCounter",function(){$(this).prev().trigger("click")});refreshCollapsibleUserLatestComments();$(".cImg .cdn_switchable_img").mousedown(inner_cdn_switch_img);$(".cImg .cdn_switchable_video").mousedown(inner_cdn_switch_video);$("a[rel^='lightbox']").lightBox();if($("#refreshItemsLink").length>0&&!realtimeItems){window.refreshItemsEnabled=true}else{window.refreshItemsEnabled=false}if(gParem("extLogin")==1){document.body.scrollTop=document.documentElement.scrollTop=0;setTimeout(function(){users.showLoginForm()},1200)}else if(gParem("extAlertShow")==1){document.body.scrollTop=document.documentElement.scrollTop=0;setTimeout(function(){alerts.show()},1e3)}if(typeof downloadPostScripts!=="undefined")downloadPostScripts()}function safeSpace(){$.ajax({url:"/contentblocking/menu",type:"POST",data:{maturePage:typeof maturePage!=="undefined"?maturePage:null},dataType:"html",success:function(e){pollz.makeHtml({html:e},"Safespace");blockHandlers()}})}function blockHandlers(){$("#categoryBlocks").find(".ctButton4").on("click",function(){var e=$(this).attr("data-id");f.s(e);catBlock(this,"category")});$("#skinlevelBlocks").find(".ctButton4").on("click",function(){var e=$(this).attr("data-id");f.s(e);catBlock(this,"skin")})}
